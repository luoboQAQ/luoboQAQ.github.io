[{"content":"ä»‹ç» é¢„è®­ç»ƒçš„å¤§å‹è¯­è¨€æ¨¡å‹ï¼Œè¿‘å¹´æ¥å–å¾—äº†æƒŠäººçš„æˆåŠŸï¼Œåœ¨æ— æ•°ä¸‹æ¸¸ä»»åŠ¡ä¸Šå±•ç¤ºäº†å“è¶Šçš„èƒ½åŠ›ã€‚è¿™å¼•å‘äº†å…¬ä¼—ä½¿ç”¨åŸºäº LLM çš„äº‘æœåŠ¡æ¥è§£å†³å·¥ä½œå’Œä¸ªäººç”Ÿæ´»ä¸­çš„å„ç§æ—¥å¸¸ä»»åŠ¡çš„è¿…é€Ÿæ¿€å¢ã€‚è¿™äº›åŸºäº LLM çš„äº‘æœåŠ¡çš„ä¸€ä¸ªæ˜¾ç€ä¾‹å­æ˜¯ ChatGPTï¼Œæ®æŠ¥é“ï¼Œå®ƒåœ¨çŸ­çŸ­ 8 ä¸ªæœˆå†…å°±è¾¾åˆ°äº† 1 äº¿å…¬å…±ç”¨æˆ·ã€‚\nåœ¨è¿™ä¸€æ³¢æµªæ½®ä¸­ï¼Œæç¤ºæŠ€æœ¯åœ¨é€‚åº”ä¸åŒç”¨æˆ·è¯·æ±‚çš„å„ç§ä¸‹æ¸¸ä»»åŠ¡æ–¹é¢å‘æŒ¥ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚ç»™å®šç”¨æˆ·çš„æŸ¥è¯¢ç”±æŸ¥è¯¢å¥å­åŠå…¶ç›¸å…³ä»»åŠ¡ç»„æˆï¼Œæç¤ºæ˜¯é™„åŠ åˆ°æŸ¥è¯¢å¥å­çš„ä¸€ç³»åˆ—æ ‡è®°ï¼Œå®ƒå¯ä»¥æŒ‡å¯¼é¢„è®­ç»ƒçš„ LLM äº§ç”Ÿå®Œæˆæ‰€éœ€ä»»åŠ¡çš„é«˜åº¦å‡†ç¡®çš„ç»“æœã€‚LLM é’ˆå¯¹ç‰¹å®šä»»åŠ¡çš„ä¸‹æ¸¸æ€§èƒ½å¯èƒ½ä¼šå—åˆ°æç¤ºçš„è´¨é‡å’Œé€‚ç”¨æ€§çš„æ˜¾ç€å½±å“ã€‚\nç”±äºè‡ªåŠ¨è®¾è®¡çš„æç¤ºå¾ˆéš¾è¢«äººç±»è§£é‡Šã€‚å› æ­¤ï¼Œæ™®é€šç”¨æˆ·ç¼ºä¹ä¸ºå…¶ç‰¹å®šä»»åŠ¡é€‰æ‹©åˆé€‚çš„æç¤ºçš„ä¸“ä¸šçŸ¥è¯†ã€‚æç¤ºé€‰æ‹©çš„è´£ä»»é€šå¸¸è½åœ¨LLMæœåŠ¡æä¾›å•†èº«ä¸Šï¼Œä»–ä»¬æ‹¥æœ‰åŒ¹é…æœ€åˆé€‚çš„æç¤ºçš„ä¸“ä¸šçŸ¥è¯†å’ŒåŠ¨åŠ›ï¼Œä»¥æä¾›å‡†ç¡®çš„ç»“æœï¼Œä»è€Œç¡®ä¿ç”¨æˆ·æ»¡æ„ã€‚\nè¿™ç¯‡æ–‡ç« æ‰€ä¿æŠ¤çš„promptæ˜¯é’ˆå¯¹NLPé‡Œè¯­ä¹‰åˆ†ç±»ç­‰ä»»åŠ¡çš„promptï¼Œè¿™é‡Œçš„promptå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„è‡ªç„¶è¯­å¥ï¼Œè€Œæ˜¯é€šè¿‡æ¨¡å‹ä¼˜åŒ–å‡ºæ¥çš„ä¸€äº›è¯æ±‡ã€‚å…·ä½“å¯ä»¥çœ‹ä¸‹é¢çš„èƒŒæ™¯çŸ¥è¯†ã€‚\nåœ¨ç›®å‰çš„ç ”ç©¶å½“ä¸­ï¼Œå·²ç»æœ‰é’ˆå¯¹æ¨¡å‹å’Œæ•°æ®é›†çš„ç‰ˆæƒä¿æŠ¤å·¥ä½œï¼ŒåŒ…æ‹¬æŒ‡çº¹è¯†åˆ«ã€æ•°æ®é›†æ¨ç†å’Œæ°´å°ã€‚åœ¨æ‰€æœ‰è¿™äº›æ–¹æ³•ä¸­ï¼Œç”±äºå…¶æœ‰æ•ˆæ€§ï¼Œæ°´å°æ˜¯ä¸€ç§å¾ˆæœ‰å‰é€”çš„åŠæ—¶ç‰ˆæƒä¿æŠ¤å€™é€‰æŠ€æœ¯ã€‚ä½†æ˜¯ï¼Œä¸ºæ¨¡å‹å’Œæ•°æ®é›†ç‰ˆæƒä¿æŠ¤è€Œè®¾è®¡çš„ç°æœ‰æ°´å°å¹¶ä¸å®¹æ˜“é€‚ç”¨äºæç¤ºç‰ˆæƒä¿æŠ¤ã€‚äº‹å®ä¸Šï¼Œæ³¨å…¥å’ŒéªŒè¯æç¤ºæ°´å°çš„è¿‡ç¨‹å¸¦æ¥äº†ç›¸å½“å¤§çš„æŒ‘æˆ˜ã€‚é¦–å…ˆï¼Œå°†æ°´å°æ³¨å…¥ä½ç†µæç¤ºï¼ˆå°¤å…¶æ˜¯é‚£äº›åªæœ‰å‡ ä¸ªæ ‡è®°çš„æç¤ºï¼‰æ˜¯å¾ˆå›°éš¾çš„ã€‚ä¸ºäº†åº”å¯¹è¿™ä¸€æŒ‘æˆ˜ï¼Œæ°´å°æ–¹æ¡ˆåº”ä¾é é¢„è®­ç»ƒ LLM çš„ä¸Šä¸‹æ–‡æ¨ç†èƒ½åŠ›æ¥æœ‰æ•ˆåœ°å“åº”è¾“å…¥æ ‡è®°çš„å¾®å°å˜åŒ–ã€‚å…¶æ¬¡ï¼Œåœ¨å¤„ç†åºåˆ—åˆ†ç±»æ—¶ï¼Œè¾“å‡ºä»…åŒ…å«å‡ ä¸ªç¦»æ•£æ ‡è®°ï¼Œä½¿ç”¨ä½ç†µæ–‡æœ¬éªŒè¯æ°´å°å˜å¾—å…·æœ‰æŒ‘æˆ˜æ€§ã€‚æ­¤å¤–ï¼Œä¸€æ—¦å°†è¢«ç›—çš„æç¤ºéƒ¨ç½²åˆ°åœ¨çº¿æç¤ºæœåŠ¡ï¼Œæ”»å‡»è€…å¯èƒ½ä¼šä»æŸ¥è¯¢ä¸­ç­›é€‰å•è¯å¹¶æˆªæ–­é¢„æµ‹è¾“å‡ºã€‚\nä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä½œè€…é€šè¿‡æ°´å°æ³¨å…¥å’ŒéªŒè¯æ¥ä¿æŠ¤æç¤ºçš„ç‰ˆæƒã€‚å…·ä½“è€Œè¨€ï¼Œè¯¥æ–¹æ³•åŒ…æ‹¬ä¸¤ä¸ªé˜¶æ®µï¼šæ°´å°æ³¨å…¥å’Œæ°´å°éªŒè¯ã€‚åœ¨æ°´å°æ³¨å…¥é˜¶æ®µï¼ŒPromptCAREé€‰æ‹©ä»»åŠ¡ç›¸å…³çš„ä½ç†µè¯ä½œä¸ºä¿¡å·è¯ï¼Œå¹¶å°†å®ƒä»¬æ’å…¥åˆ°æ ‡ç­¾è¯ä¸­å½¢æˆä¸€ä¸ªç»„åˆè¯ã€‚åŒæ—¶ï¼Œå®ƒè¿˜æ¿€æ´»äº†é¢„å…ˆå®šä¹‰çš„è§¦å‘å™¨ï¼Œä»¥ä¾¿åœ¨æŸ¥è¯¢æ—¶è¿”å›ä¿¡å·è¯ã€‚åœ¨æ°´å°éªŒè¯é˜¶æ®µï¼ŒPromptCAREæ„é€ äº†ä¸€ä¸ªæ¨¡æ¿ç”¨äºéªŒè¯æ°´å°è¡Œä¸ºï¼Œå¹¶ä½¿ç”¨ç§˜å¯†å¯†é’¥æ¿€æ´»æ°´å°è¡Œä¸ºä»¥æå–ä¿¡å·è¯ã€‚\nè´¡çŒ® é¦–æ¬¡ç³»ç»Ÿæ€§åœ°ç ”ç©¶äº†â€œæç¤ºå³æœåŠ¡â€ï¼ˆPraaSï¼‰çš„ç‰ˆæƒä¿æŠ¤é—®é¢˜ï¼Œå¹¶æ·±å…¥æ¢è®¨äº†åœ¨PraaSç¯å¢ƒä¸‹æœªç»æˆæƒä½¿ç”¨æç¤ºçš„é£é™©ã€‚ æå‡ºä¸€ç§ç”¨äºéªŒè¯å¯ç–‘å¤§å‹è¯­è¨€æ¨¡å‹æœåŠ¡æä¾›å•†æ‰€ç”¨æç¤ºç‰ˆæƒçš„æç¤ºæ°´å°æ³¨å…¥ä¸éªŒè¯æ¡†æ¶ã€‚ åŸºäºå…­ä¸ªçŸ¥ååŸºå‡†æ•°æ®é›†ï¼Œé‡‡ç”¨ä¸‰ç§ä¸»æµé¢„è®­ç»ƒå¤§æ¨¡å‹ï¼ˆBERTã€RoBERTa å’Œ Facebook OPT-1.3Bï¼‰ï¼Œå…¨é¢è¯„ä¼°äº†PromptCAREçš„æœ‰æ•ˆæ€§ã€æ— å®³æ€§ã€é²æ£’æ€§å’Œéšè”½æ€§ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¼€å±•äº†ä¸€é¡¹æ¡ˆä¾‹ç ”ç©¶ï¼Œä»¥æ£€éªŒPromptCAREåœ¨å¤§å‹å•†ç”¨è¯­è¨€æ¨¡å‹LLaMAä¸Šçš„è¡¨ç°ã€‚ èƒŒæ™¯ ä½œè€…åœ¨è¿™é‡Œä»‹ç»äº†ä¸€äº›æ¯”è¾ƒé‡è¦çš„æ¦‚å¿µï¼Œåœ¨æ­¤æˆ‘ä¹Ÿå°†å…¶æ‘˜å½•ä¸‹æ¥ï¼š\næç¤ºå·¥ç¨‹ åœ¨åºåˆ—åˆ†ç±»è¿™ä¸ªä¸‹æ¸¸ä»»åŠ¡ä¸­ï¼Œæç¤ºå·¥ç¨‹å¹¶ä¸æ˜¯åƒæˆ‘ç†è§£çš„é‚£æ ·å»ä¼˜åŒ–æç¤ºçš„è‡ªç„¶è¯­è¨€ï¼Œè€Œæ˜¯æŒ‰ç…§å›ºå®šçš„æ ¼å¼å»ä¼˜åŒ–æç¤ºè¯ï¼Œä»è€Œè®©æ¨¡å‹æ›´å¥½çš„å»è¾“å‡ºå¯¹åº”çš„è¯è¯­ã€‚åœ¨æ­¤ä»»åŠ¡ä¸­ï¼Œä¸‹æ¸¸ä»»åŠ¡çš„è®­ç»ƒé›†æ˜¯ä¸€ä¸ªç”±å…ƒç»„ç»„æˆçš„åˆ—è¡¨ï¼Œè¡¨ç¤ºä¸º$(x,\\mathcal{V}_y)\\in\\mathcal{D}_t$ï¼Œå…¶ä¸­$x$æ˜¯æŸ¥è¯¢å¥ï¼Œ$\\mathcal{V}$åˆ™è¡¨ç¤ºâ€œlabel tokensâ€ã€‚å…·ä½“æ¥è¯´ï¼Œâ€œlabel tokensâ€æ˜¯ä¸€ç»„$K$ä¸ªè¯æ±‡ï¼Œå®ƒä»¬ç›´æ¥æ˜ å°„åˆ°ç±»åˆ«$y$ä¸Šã€‚æç¤ºå­¦ä¹ çš„ç›®æ ‡å°±æ˜¯æœ€å¤§åŒ–[MASK] tokenå’Œâ€œlabel tokensâ€çš„ç›¸ä¼¼åº¦ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€é¡¹æƒ…æ„Ÿåˆ†æä»»åŠ¡ï¼Œç»™å®šè¾“å…¥å¦‚â€œ[x]=è¿™éƒ¨ç”µå½±é‡Œæœ‰å¾ˆå¤šæœ‰è¶£çš„å†…å®¹ã€‚[MASK]â€ï¼Œé‚£ä¹ˆæç¤º$x_{\\mathrm{prompt}}$å¯ä»¥æ˜¯å¡«å…¥æ¨¡æ¿$[x][x_{\\mathrm{prompt}}][\\mathrm{MASK}]$ä¸­çš„è‹¥å¹²ä¸ªè¯ï¼Œä»¥æé«˜é¢„è®­ç»ƒå¤§æ¨¡å‹ç”Ÿæˆâ€œç²¾å½©â€æˆ–â€œæ£’æäº†â€ç­‰å›å¤çš„å¯èƒ½æ€§ã€‚å…¶å½¢å¼åŒ–è¡¨è¾¾å¦‚ä¸‹ï¼š\n$$ \\mathcal{L}=\\sum_{w\\in\\mathcal{V}_y}\\log P(\\mathrm{[MASK]}=w\\mid x,x_\\mathrm{prompt},\\theta), $$å…¶ä¸­$\\mathcal{V}_y$è¡¨ç¤ºä¸æ ‡ç­¾$y$å¯¹åº”çš„æ ‡ç­¾æ ‡è®°ï¼Œè€Œ$\\theta$åˆ™ä»£è¡¨é¢„è®­ç»ƒå¤§æ¨¡å‹çš„å‚æ•°ã€‚\næç¤ºå½¢å¼ ç›®å‰çš„æç¤ºå·¥ç¨‹ä¸»è¦å°†è‡ªåŠ¨ä¼˜åŒ–æç¤ºåˆ†ä¸ºä¸¤ç±»ï¼š\nç¦»æ•£æç¤ºã€Œdiscrete promptsã€ï¼šç”Ÿæˆçš„æ˜¯åŸå§‹çš„Token è¿ç»­æç¤ºã€Œcontinuous promptsã€ï¼šç”Ÿæˆçš„æ˜¯æç¤ºçš„åµŒå…¥ å¯¹äºè¿™ä¸¤ç§ç±»å‹çš„æç¤ºï¼Œä½œè€…åœ¨æœ¬æ–‡ä¸­å¯¹æ¯”äº†3ä¸­æ–¹æ³•ï¼šAUTOPROMPTã€Prompt Tuningå’ŒP-Tuning v2\nAUTOPROMPTï¼šå¼•å…¥äº†ä¸€ç§æ¨¡æ¿æ¦‚å¿µï¼Œè¡¨ç¤ºä¸º$[x][x_{\\mathrm{prompt}}][\\mathrm{MASK}]$ï¼Œä»¥æ–¹ä¾¿æç¤ºçš„è®­ç»ƒã€‚åœ¨ç¦»æ•£æç¤ºçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œç”¨$x_{\\mathrm{prompt}}=[p_1,\u0026hellip;,p_m]$è¡¨ç¤ºåŒ…å«$m$ä¸ªå¯è®­ç»ƒæ ‡è®°çš„æç¤ºã€‚æœ€åˆï¼Œæç¤º$x_{\\mathrm{prompt}}$è¢«è®¾ç½®ä¸ºéšæœºæ ‡è®°ã€‚åœ¨ä½¿ç”¨è®­ç»ƒé›†$\\mathcal{D}_t$è¿›è¡Œä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼ŒAUTOPROMPTä¼šé€æ­¥ç”¨æœ€ä¼˜è¯æ±‡æ›¿æ¢æç¤ºæ ‡è®°ã€‚å…·ä½“è€Œè¨€ï¼Œè¯¥æ–¹æ³•é€šè¿‡å°†é¢„è®­ç»ƒçš„å¤§å‹è¯­è¨€æ¨¡å‹ LLM åå‘è¾“å…¥å¤šä¸ªæ‰¹æ¬¡çš„æ ·æœ¬ï¼Œä»¥ç´¯ç§¯æç¤ºç›¸å…³çš„æ¢¯åº¦ã€‚ç„¶è€Œï¼Œç”±äºåŸå§‹è¾“å…¥çš„ç¦»æ•£ç‰¹æ€§ï¼Œç›´æ¥é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼ˆSGDï¼‰æ¥å¯»æ‰¾æœ€ä¼˜æç¤ºé¢‡å…·æŒ‘æˆ˜æ€§ã€‚å› æ­¤ï¼ŒAUTOPROMPT å°†è¯åµŒå…¥ä¸ç´¯ç§¯çš„æ¢¯åº¦ç›¸ä¹˜ï¼Œä»è€Œç­›é€‰å‡ºèƒ½å¸¦æ¥æœ€å¤§æ¢¯åº¦æå‡çš„å‰$k$ä¸ªè¯æ±‡ï¼Œè¿™äº›è¯æ±‡å³æˆä¸ºæç¤º prompt çš„å€™é€‰è¯ã€‚ç»™å®šè¾“å…¥å¥å­$x$å’Œåˆå§‹æç¤º $x_{\\mathrm{prompt}}$ï¼Œå€™é€‰è¯çš„ç”Ÿæˆè¿‡ç¨‹å¦‚ä¸‹ï¼š\n$$ \\mathcal{V}_{\\mathrm{cand}}=\\underset{w\\in\\mathcal{V}}{\\operatorname*{\\operatorname*{top-}}}k\\left[\\boldsymbol{e}(w)^T\\nabla\\log P\\left(\\left[\\mathrm{MASK}\\right]\\mid x,x_{\\mathrm{prompt}},\\theta\\right)\\right] $$å…¶ä¸­ï¼Œ$\\mathcal{V}_{\\mathrm{cand}}$ æ˜¯å€™é€‰è¯æ±‡é›†ï¼Œ$\\boldsymbol{e}(w)$ æ˜¯è¯$w$çš„è¾“å…¥åµŒå…¥ã€‚åœ¨æ¨ç†é˜¶æ®µï¼Œè¿™äº›ç»è¿‡ä¼˜åŒ–çš„æç¤ºå°†è¢«å›ºå®šï¼Œå¹¶ä½¿ç”¨ä¸‹æ¸¸ä»»åŠ¡çš„æµ‹è¯•é›† $\\mathcal{D}_{test}$ æ¥è¯„ä¼°é¢„è®­ç»ƒ LLM çš„ä¸‹æ¸¸å‡†ç¡®ç‡ã€‚\nPrompt Tuningï¼šè¿™æ˜¯é’ˆå¯¹è¿ç»­æç¤ºçš„å¾®è°ƒï¼Œå®ƒç›´æ¥å°†å¯è®­ç»ƒçš„å¼ é‡æ³¨å…¥åˆ°åµŒå…¥å±‚ä¸­ï¼Œéšåå°†è¯·æ±‚å‘é€è‡³é¢„è®­ç»ƒçš„LLMã€‚\nå¯¹äºç»™å®šçš„è¾“å…¥åºåˆ—$x=[x_1,x_2,\u0026hellip;,x_n]$ï¼Œè¿ç»­æç¤ºæ–¹æ³•ä¼šè®¡ç®—è¯åµŒå…¥ï¼Œå¹¶å°†å¯è®­ç»ƒçš„å¼ é‡æŒ‰ä»¥ä¸‹æ–¹å¼æ³¨å…¥ï¼š\n$$ [\\mathbf{e}(x_1),...,\\mathbf{e}(x_n),t_1,...,t_m,\\mathbf{e}([\\mathbf{MASK}])], $$å…¶ä¸­ï¼Œ$\\mathbf{e}(x)$ è¡¨ç¤ºè¯$x$çš„åµŒå…¥è¡¨ç¤ºï¼Œ$t_i(0 â‰¤ i â‰¤ m)$æ˜¯åµŒå…¥å±‚ä¸­å¯è®­ç»ƒçš„å¼ é‡ã€‚åœ¨è¿ç»­æç¤ºçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæç¤ºè¢«è¡¨ç¤ºä¸º $x_{\\text{prompt}}=[t_{1},\u0026hellip;, t_{m}]$ã€‚\nä¸ºäº†ä¼˜åŒ–æç¤ºï¼Œè¿ç»­æç¤ºæ–¹æ³•åˆ©ç”¨ä¸‹æ¸¸ä»»åŠ¡è®­ç»ƒé›†$\\mathcal{D}_{t}$è®¡ç®—æŸå¤±ã€‚éšåï¼Œæç¤º$t_{1},\u0026hellip;, t_{m}$å¯é€šè¿‡SGDè¿›è¡Œå¯å¾®ä¼˜åŒ–ï¼š\n$$ {t}_{1:m} = \\mathop{\\arg\\min}\\limits_{t} \\sum_{x \\in \\mathcal{D}_{t}} \\mathcal{L}(x, t_{1:m}, \\theta),$$æ°´å°ç§»é™¤æ”»å‡» é’ˆå¯¹æç¤ºæ°´å°ç§»é™¤æ”»å‡»ï¼Œå³åˆ†åˆ«é‡‡ç”¨åŒä¹‰è¯æ›¿æ¢å’Œæç¤ºå¾®è°ƒæ–¹æ³•ï¼Œåˆ†åˆ«é€‚ç”¨äºç¦»æ•£æç¤ºä¸è¿ç»­æç¤ºåœºæ™¯ã€‚\nå¯¹äºç¦»æ•£æç¤ºï¼Œæ”»å‡»è€…å¯ä»¥æ£€ç´¢å…¶åŒä¹‰è¯ï¼Œå¹¶æ›¿æ¢æç¤ºä¸­æŒ‡å®šæ•°é‡çš„$N_d$æ ‡è®°ã€‚æ­£å¼æ¥è¯´ï¼Œç»™å®šä¸€ä¸ªåŒä¹‰è¯æ›¿æ¢å‡½æ•°$f_{\\textit{syn}}$ï¼Œè¿™ç§ç§»é™¤æ”»å‡»å¯è¢«è¡¨è¿°ä¸ºï¼š\n$$ \\mathcal{R}(x_{\\text{prompt}}, N_{d}) = [f_{\\textit{syn}}(p_{1}),...,f_{\\textit{syn}}(p_{N_{d}}),...,p_{m}]. $$ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¯¹äºè¿ç»­æç¤ºï¼Œæ”»å‡»è€…å¯åˆ©ç”¨ä¸‹æ¸¸ä»»åŠ¡çš„è®­ç»ƒé›†$\\mathcal{D}_{t}$ï¼Œå¯¹æç¤ºè¿›è¡Œ$N_{c}$æ¬¡è¿­ä»£çš„å¾®è°ƒã€‚\né—®é¢˜æ„é€  é—®é¢˜å®šä¹‰ ä½œè€…æ¢è®¨äº†PraaSç¯å¢ƒä¸‹çš„æç¤ºæ°´å°æ³¨å…¥ä¸éªŒè¯é—®é¢˜ï¼Œè¿™æ¶‰åŠä¸¤ä¸ªä¸»ä½“ï¼šä½œä¸ºé˜²å¾¡æ–¹çš„æç¤ºæä¾›è€…ï¼Œä»¥åŠæœªç»æˆæƒçš„LLMæœåŠ¡æä¾›å•†â€”â€”å³æ”»å‡»è€…ã€‚é˜²å¾¡æ–¹æ‹¥æœ‰æç¤ºçš„ç‰ˆæƒï¼Œå¹¶åœ¨å‘å¸ƒå‰åµŒå…¥æ°´å°ï¼›è€Œæ”»å‡»è€…åˆ™éƒ¨ç½²äº†ä¸€ä¸ªåŸºäºé¢„è®­ç»ƒLLMçš„å¼€æ”¾æœåŠ¡ï¼Œä¸ºå…¬ä¼—ç”¨æˆ·æä¾›å¤šç§ä¸‹æ¸¸ä»»åŠ¡ã€‚ä¸ºäº†æå‡æŸ¥è¯¢ç»“æœçš„å‡†ç¡®æ€§ï¼Œä»è€Œæ›´å¥½åœ°æ»¡è¶³ç”¨æˆ·éœ€æ±‚ï¼Œè¯¥LLMæœåŠ¡æä¾›å•†æœªç»æ­£å¼æˆæƒä¾¿æ“…è‡ªä½¿ç”¨äº†é˜²å¾¡æ–¹çš„æç¤ºã€‚è¿™ç§æœªç»æˆæƒçš„æç¤ºä½¿ç”¨è¡Œä¸ºï¼Œä½¿æ”»å‡»è€…èƒ½å¤Ÿå¿«é€Ÿæ¨å‡ºPraaSæœåŠ¡ï¼Œå¤§å¹…èŠ‚çœäº†è‡ªè¡Œå®šåˆ¶æç¤ºæ‰€éœ€çš„æ—¶é—´å’Œæˆæœ¬ã€‚è¿™ç§è¢«éæ³•ä½¿ç”¨çš„æç¤ºï¼Œè¢«ç§°ä¸ºæç¤ºDpromptçš„â€œå¤åˆ¶ç‰ˆâ€ã€‚ä¸ºéªŒè¯æç¤ºçš„ç‰ˆæƒå½’å±ï¼Œé˜²å¾¡æ–¹ä¼šå‘å¯ç–‘çš„LLMæœåŠ¡æä¾›å•†æäº¤é¢„å…ˆè®¾è®¡å¥½çš„æŸ¥è¯¢ï¼Œä»¥æ£€æµ‹å…¶æ¤å…¥çš„æ°´å°ç‰¹å¾ã€‚\nåœ¨ä½œè€…è®¨è®ºçš„åœºæ™¯ä¸­ï¼Œæ¶æ„æ”»å‡»è€…æ˜¯LLMæœåŠ¡æä¾›å•†ã€‚æ‰€ä»¥å¯¹äºæ”»å‡»è€…æ¥è¯´ï¼Œæ˜¯èƒ½æ‹¿åˆ°å®Œæ•´çš„æç¤ºçš„ã€‚\nè¯„ä¼°æŒ‡æ ‡ ä¸ºäº†éªŒè¯æ–¹æ³•çš„å¯è¡Œæ€§ï¼Œä½œè€…æŒ‡å®šäº†å››ä¸ªç»´åº¦çš„è¯„ä¼°æŒ‡æ ‡ï¼š\næœ‰æ•ˆæ€§ï¼šåœ¨æç¤ºéªŒè¯ä¸­å®ç°é«˜æ£€æµ‹ç²¾åº¦è‡³å…³é‡è¦ï¼Œè¿™æœ‰åŠ©äºæœ‰æ•ˆè¯†åˆ«æœªç»æˆæƒçš„æç¤ºï¼ŒåŒæ—¶æœ€å¤§é™åº¦åœ°å‡å°‘å¯¹åˆæ³•æç¤ºçš„è¯¯æŠ¥ã€‚\næ— å®³æ€§ï¼šä¸ºå°½é‡å‡å°‘å³æ—¶æ°´å°æ³¨å…¥å¯¹åˆæ³•å¤§æ¨¡å‹æœåŠ¡æä¾›å•†çš„å½±å“ï¼Œå¿…é¡»ç¡®ä¿å…¶å¯¹æç¤ºçš„æ­£å¸¸è¿è¡Œå‡ ä¹æ— æ˜¾è‘—å½±å“ã€‚å› æ­¤ï¼Œå³ä½¿åœ¨æ°´å°æ³¨å…¥åï¼Œç»è¿‡æ°´å°æ ‡è®°çš„æç¤ºä»åº”ä¿æŒå¯¹å¸¸è§„ä¸‹æ¸¸ä»»åŠ¡çš„å®ç”¨æ€§ã€‚\né²æ£’æ€§ï¼šæ°´å°æ–¹æ¡ˆåº”å…·å¤‡ robustnessï¼Œä»¥é˜²æ­¢æ”»å‡»è€…é€šè¿‡åŒä¹‰è¯æ›¿æ¢å’Œæç¤ºå¾®è°ƒæ¥é€ƒé¿éªŒè¯ã€‚\néšè”½æ€§ï¼šç§˜å¯†å¯†é’¥éœ€æ»¡è¶³ä¸¤ä¸ªæ ‡å‡†ä»¥å¢å¼ºéšè”½æ€§ï¼šä¸€æ˜¯å…¶æ¶ˆæ¯è´Ÿè½½è¾ƒä½ï¼Œä¾¿äºä¼ è¾“ï¼›äºŒæ˜¯èƒ½å¤Ÿåœ¨æŸ¥è¯¢å¥ä¸­ä¿æŒä¸Šä¸‹æ–‡è‡ªæ´½ã€‚ç§˜å¯†å¯†é’¥çš„éšè”½æ€§è‡³å…³é‡è¦ï¼Œå¯æœ‰æ•ˆé¿å…è¢«æœªç»æˆæƒçš„å¤§å‹è¯­è¨€æ¨¡å‹æœåŠ¡æä¾›å•†è¿‡æ»¤ã€‚\næ–¹æ³• PromptCARE åŒ…å«ä¸¤ä¸ªè¿ç»­çš„é˜¶æ®µï¼Œå³æ°´å°æ³¨å…¥å’Œæ°´å°éªŒè¯ã€‚åœ¨å‰ä¸€é˜¶æ®µï¼ŒPromptCARE å°†$K$ä¸ªâ€œsignal tokensâ€$\\mathcal{V}_{t}$ æ³¨å…¥åˆ°â€œlabel tokensâ€$\\mathcal{V}_{y}$ ä¸­ï¼Œæ„å»ºå‡ºç»„åˆåçš„â€œlabel tokensâ€$\\mathcal{V}_{y}^{\u0026rsquo;} = \\mathcal{V}_{y} \\cup \\mathcal{V}_{t}$ã€‚â€œsignal tokensâ€ç”¨ä½œç‹¬ç‰¹çš„æ°´å°ï¼Œå½“æŸ¥è¯¢å¥é™„å¸¦ç‰¹å®šçš„ç§˜å¯†å¯†é’¥æ—¶ï¼Œè¯¥æ°´å°å³å¯è¢«æ¿€æ´»ã€‚PromptCARE å°†æ°´å°æ³¨å…¥è§†ä¸ºä¸€ç§åŒå±‚è®­ç»ƒä»»åŠ¡ï¼Œå¹¶ä¸åŸå§‹ä¸‹æ¸¸ä»»åŠ¡åŒæ­¥è¿›è¡Œè®­ç»ƒã€‚å¯¹äº PromptCARE çš„åŒå±‚è®­ç»ƒï¼Œå…¶ç›®æ ‡åˆ†ä¸ºä¸¤æ–¹é¢ï¼šä¸€æ˜¯ç¡®ä¿å½“æŸ¥è¯¢ä¸ºå¸¦æœ‰ç§˜å¯†å¯†é’¥çš„éªŒè¯è¯·æ±‚æ—¶ï¼Œèƒ½å¤Ÿè§¦å‘é¢„è®¾çš„æ°´å°è¡Œä¸ºï¼›äºŒæ˜¯ä¿è¯åœ¨æŸ¥è¯¢ä¸ºæ— ç§˜å¯†å¯†é’¥çš„æ™®é€šè¯·æ±‚æ—¶ï¼Œæ¨¡å‹ä»èƒ½ä¸ºåŸå§‹ä¸‹æ¸¸ä»»åŠ¡æä¾›é«˜åº¦ç²¾å‡†çš„è¾“å‡ºç»“æœã€‚åœ¨åä¸€é˜¶æ®µï¼ŒPromptCARE åˆ©ç”¨æ¨¡æ¿â€œ$[x][x_{\\mathrm{prompt}}][\\mathrm{MASK}]$â€æ„å»ºéªŒè¯æŸ¥è¯¢ï¼Œå…¶ä¸­â€œtriggerâ€å……å½“ç§˜å¯†å¯†é’¥ï¼Œä»¥æ¿€æ´»æ°´å°è¡Œä¸ºã€‚æç¤ºè°ƒä¼˜çš„ç›®æ ‡æ˜¯å‡†ç¡®é¢„æµ‹è¾“å…¥åºåˆ—ï¼Œä½¿å…¶æ˜ å°„åˆ°æ¯ä¸ªæ ‡ç­¾çš„â€œlabel tokensâ€ä¸­ï¼›è€Œæ°´å°ä»»åŠ¡çš„ç›®çš„æ˜¯ä¿ƒä½¿é¢„è®­ç»ƒçš„ LLM è¿”å›æ¥è‡ªâ€œsignal tokensâ€çš„æ ‡è®°ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†åˆ«æ”¶é›†ä½¿ç”¨æ°´å°æç¤ºæŒ‡ä»¤çš„ä¸¤å®¶é˜²å¾¡æ–¹ PraaS æä¾›çš„é¢„æµ‹æ ‡è®°ï¼Œä»¥åŠç–‘ä¼¼ LLM æœåŠ¡æä¾›å•†çš„é¢„æµ‹æ ‡è®°ã€‚éšåï¼Œæˆ‘ä»¬å°†è¿™ä¸¤ç»„åˆ†å¸ƒè¿›è¡ŒåŒæ ·æœ¬ t æ£€éªŒï¼Œä»¥åˆ¤æ–­ä¸¤è€…ä¹‹é—´çš„ç»Ÿè®¡æ˜¾è‘—æ€§å·®å¼‚ã€‚\næ°´å°æ³¨å…¥ signal tokensé€‰æ‹©\nå°†æ°´å°æ³¨å…¥ä½ç†µæç¤ºä¸­é¢‡å…·æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯é‚£äº›ä»…åŒ…å«å°‘é‡ä»¤ç‰Œçš„æç¤ºã€‚ä¸ºæé«˜é¢„è®­ç»ƒå¤§æ¨¡å‹åœ¨å¤„ç†ä½ç†µæç¤ºæ—¶è¿”å›ä¿¡å·ä»¤ç‰Œçš„æ¦‚ç‡ï¼Œæˆ‘ä»¬æå‡ºé€‰æ‹©ä¸ä»»åŠ¡ç›¸å…³çš„ä»¤ç‰Œä½œä¸ºä¿¡å·ä»¤ç‰Œã€‚è¿™ä¸€æ–¹æ³•èƒŒåçš„ç›´è§‰æ˜¯ï¼šè¿™äº›ä»¤ç‰Œå‡ºç°çš„æ¦‚ç‡é«˜äºä¸ä»»åŠ¡æ— å…³çš„ä»¤ç‰Œï¼Œå› æ­¤é€šå¸¸æ›´å®¹æ˜“ä¿ƒä½¿é¢„è®­ç»ƒå¤§æ¨¡å‹ç”Ÿæˆç›®æ ‡ä¿¡å·ä»¤ç‰Œã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬æå‡ºäº†ä»¥ä¸‹ä¿¡å·ä»¤ç‰Œé€‰æ‹©åŸåˆ™ï¼šï¼ˆ1ï¼‰ä¿¡å·ä»¤ç‰Œä¸åº”ä¸Vyä¸­çš„ä»»ä½•æ ‡ç­¾ä»¤ç‰Œé‡å ï¼›ï¼ˆ2ï¼‰ä¿¡å·ä»¤ç‰Œåº”ä¸ä¸‹æ¸¸ä»»åŠ¡ç›¸å…³ï¼ŒåŒæ—¶é¿å…ä½¿ç”¨é«˜é¢‘è¯æ±‡ã€‚ä¸¥æ ¼éµå®ˆè¿™ä¸¤æ¡åŸåˆ™è‡³å…³é‡è¦ï¼Œå› ä¸ºå¤§æ¨¡å‹å¾€å¾€å€¾å‘äºç”Ÿæˆé«˜é¢‘ä½†ä¸ä»»åŠ¡æ— å…³çš„è¯æ±‡ï¼Œè¿™å¯èƒ½å¯¼è‡´æ°´å°ä¿¡å·ä¸å¤Ÿç¨³å¥ã€‚\nä½œè€…é¦–å…ˆå‘æŸ¥è¯¢å¥ä¸­æ³¨å…¥é¢„å®šä¹‰çš„è§¦å‘è¯ï¼Œä»¥è·å–é¢„è®­ç»ƒå¤§æ¨¡å‹å¯¹[MASK]æ ‡è®°çš„é¢„æµ‹è¯ã€‚éšåï¼Œæˆ‘ä»¬ä»æ ‡ç­¾è¯ä¸­å»é™¤æ‰€æœ‰é‡å¤çš„è¯ï¼Œå¹¶è¿›ä¸€æ­¥è®¡ç®—å‡ºæ’åå‰2000çš„è¯ã€‚è¿™äº›è¯å…±åŒæ„æˆäº†ç›¸å…³é›†åˆï¼Œå…¶å½¢å¼å¯è¡¨è¿°ä¸ºï¼š $$ \\mathcal{V}_{r} = \\text{top-}2K \\{f(\\text{[MASK]} \\mid x+x_{\\text{prompt}}, \\theta) \\mid x \\in \\mathcal{D}_{t}\\}. $$ä½œè€…ä»ç›¸å…³é›†åˆ$\\mathcal{V}_{r}$ä¸­é€‰å‡º$K$ä¸ªä½é¢‘è¯ï¼Œç”¨ä½œsignal tokens$\\mathcal{V}_{t}$ã€‚\nç„¶åï¼Œä½œè€…åˆ©ç”¨ä¿¡å·æ ‡è®°æ„å»ºå¸¦æ°´å°çš„è®­ç»ƒé›†$\\mathcal{D}_{w}$å’ŒéªŒè¯é›†$\\mathcal{D}_{v}$ã€‚æˆ‘ä»¬å°†ä¸‹æ¸¸ä»»åŠ¡çš„è®­ç»ƒé›†æŒ‰$(1-p)%$å’Œ$p%$çš„æ¯”ä¾‹åˆ’åˆ†ï¼Œå…¶ä¸­$p%$çš„éƒ¨åˆ†è¢«é€‰ä½œå¸¦æ°´å°çš„è®­ç»ƒé›†ã€‚æœ€åï¼Œå¯¹äºå¸¦æ°´å°é›†çš„æ ‡ç­¾æ ‡è®°ï¼Œæˆ‘ä»¬å°†å…¶æ›¿æ¢ä¸º$\\mathcal{V}_{y}^{\u0026rsquo;} = \\mathcal{V}_{y} \\cup \\mathcal{V}_{t}$ï¼Œä»¥æ¯ä¸ªæ ‡ç­¾ä¸ºå‡†ã€‚è‡³äºéªŒè¯é›†$\\mathcal{D}_{v}$ï¼Œæˆ‘ä»¬å¤åˆ¶ä¸€ä»½æ–°çš„æµ‹è¯•é›†ï¼Œå¹¶å¯¹å…¶æ ‡ç­¾æ ‡è®°è¿›è¡Œç›¸åº”æ“ä½œã€‚\næ°´å°æ³¨å…¥\nä½œè€…é€šè¿‡åŒå±‚ä¼˜åŒ–æ¥å®ç°æ°´å°çš„æ³¨å…¥ï¼š $$ x_{\\text{trigger}} = \\mathop{\\arg\\min}\\limits_{x_{\\text{trigger}}} \\mathcal{L}_{w}(f, x+x_{\\text{trigger}}+ x^{*}_{\\text{prompt}}, \\mathcal{V}_{t}) \\\\ s.t. x_{\\text{prompt}}^{*} = \\mathop{\\arg\\min}\\limits_{x_{\\text{prompt}}} \\mathcal{L}_{p}(f, x+x_{\\text{trigger}}+ x_{\\text{prompt}}, \\mathcal{V}_{y}), $$ å…¶ä¸­ï¼Œ$\\mathcal{V}_{t}$ è¡¨ç¤ºä¿¡å·æ ‡è®°é›†åˆï¼Œ $\\mathcal{L}_{p}$å’Œ $\\mathcal{L}_{w}$ åˆ†åˆ«ä»£è¡¨æç¤ºè°ƒä¼˜æŸå¤±å’Œæ°´å°æ³¨å…¥æŸå¤±ã€‚åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ‰§è¡Œå‡ æ­¥æç¤ºè®­ç»ƒï¼Œä»¥å¯¹æç¤ºè¿›è¡Œé¢„çƒ­ã€‚\nä½å±‚æ¬¡ä¼˜åŒ–çš„ç›®æ ‡æ˜¯è®­ç»ƒå‡ºä¸€ä¸ªç»è¿‡ä¼˜åŒ–çš„æç¤ºï¼Œä½¿å…¶åœ¨è®­ç»ƒé›†$\\mathcal{D}_{t}$å’Œå¸¦æ°´å°çš„é›†åˆ$\\mathcal{D}_{w}$ä¸Šå‡èƒ½å®ç°é«˜æ€§èƒ½ã€‚ $$ \\mathcal{L}_{p} = \\sum_{w \\in \\mathcal{V}_y} \\log P\\left([\\text{MASK}]=w \\mid x+x_{\\text{trigger}}+x_{\\text{prompt}}, \\theta \\right), $$ å…¶ä¸­ï¼Œ$y$ è¡¨ç¤ºçœŸå®æ ‡ç­¾ï¼Œ$\\mathcal{V}_{y}$ è¡¨ç¤ºå…¶æ ‡ç­¾æ ‡è®°ï¼Œ$w$ åˆ™æŒ‡æ ‡ç­¾æ ‡è®°é›†åˆ $\\mathcal{V}_{y}$ ä¸­çš„å•è¯ï¼Œè€Œ $P$ ä»£è¡¨é¢„è®­ç»ƒå¤§æ¨¡å‹åœ¨ [MASK] æ ‡è®°ä¸Šç”Ÿæˆ $w$ çš„æ¦‚ç‡ã€‚\né«˜å±‚ä¼˜åŒ–å°è¯•æ£€ç´¢è‹¥å¹²ä¸ª$|x_{\\text{trigger}}|$è§¦å‘å™¨ï¼Œä»è€Œä½¿é¢„è®­ç»ƒçš„LLMèƒ½å¤Ÿç”Ÿæˆä¿¡å·æ ‡è®°ã€‚å› æ­¤ï¼Œé«˜å±‚ä¼˜åŒ–çš„ç›®æ ‡æ˜¯ï¼š $$ \\mathcal{L}_{w} = \\sum_{w \\in \\mathcal{V}_t} \\log P\\left([\\text{MASK}]=w \\mid x+x_{\\text{trigger}}+x^{*}_{\\text{prompt}}, \\theta \\right), $$ å…¶ä¸­ï¼Œ$w$ è¡¨ç¤ºä¿¡å·è¯é›†$\\mathcal{V}_{t}$ ä¸­çš„å•è¯ï¼Œ$x^{*}_{\\text{prompt}}$ ä»£è¡¨ä½å±‚æ¬¡ä¼˜åŒ–ä¸­çš„ä¼˜åŒ–åæç¤ºã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œä¸Šå±‚çš„ä¼˜åŒ–æ˜¯åœ¨æ°´å°é›† $\\mathcal{D}_{w}$ä¸Šè¿›è¡Œçš„ã€‚\nç”±äºå•è¯çš„ç¦»æ•£ç‰¹æ€§ï¼Œç›´æ¥å¯¹$x_{\\text{trigger}}$æ±‚å¯¼ä»¥è·å¾—æœ€ä¼˜è§¦å‘è¯é¢‡å…·æŒ‘æˆ˜æ€§ã€‚å—Hotflipçš„å¯å‘ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€ç§çº¦æŸè´ªå¿ƒæœç´¢ï¼ˆCGSï¼‰ç®—æ³•ã€‚åœ¨æˆ‘ä»¬çš„æ–¹æ³•ä¸­ï¼Œé¦–å…ˆä¼˜åŒ–åº•å±‚ä»»åŠ¡ï¼Œä»¥æ»¡è¶³çº¦æŸæ¡ä»¶ï¼Œä»è€Œå¾—åˆ°æ›´æ–°åçš„$x_{\\text{trigger}}$ã€‚éšåï¼Œæˆ‘ä»¬é€šè¿‡$N$æ­¥æ¢¯åº¦ç´¯ç§¯ï¼Œå¯¹è§¦å‘è¯çš„æŸå¤±å‡½æ•°è¿›è¡Œä¸€é˜¶è¿‘ä¼¼è®¡ç®—ï¼ˆç®—æ³•2ç¬¬5è¡Œï¼‰ã€‚ä¸ºè§£å†³ç¦»æ•£ä¼˜åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆç¡®å®šå‰$k$ä¸ªå€™é€‰è¯ï¼Œç„¶ååˆ©ç”¨æ°´å°æˆåŠŸç‡ï¼ˆWSRï¼‰æŒ‡æ ‡ï¼Œé€‰å‡ºæœ€æœ‰æ•ˆçš„è§¦å‘è¯ï¼ˆç®—æ³•2ç¬¬7è‡³16è¡Œï¼‰ã€‚ $$ \\mathcal{V}_{cand} = \\text{top-}k \\left[{\\mathbf{e}(x_{\\text{trigger}[j]})}^{T} \\sum_{i=1}^{N} \\frac{{\\nabla_{x_{\\text{trigger}}[j]} \\mathcal{L}_{w}}}{N} \\right], $$ å…¶ä¸­ï¼Œ$x_{\\text{trigger}}[j]$ è¡¨ç¤ºç¬¬$j$ä¸ªtriggerã€‚æœ€åï¼Œæˆ‘ä»¬åœ¨æ°´å°å›¾åƒé›†ä¸Šè¯„ä¼°WSRï¼Œä»¥ä»å€™é€‰é›†ä¸­é€‰å‡ºæœ€ä½³è§¦å‘å™¨ï¼š $$ \\textit{WSR} = \\frac{ \\sum_{x\\in \\mathcal{D}_{w}} P\\left([\\text{MASK}]\\in \\mathcal{V}_{y} \\mid x+x_{\\text{trigger}}+x^{*}_{\\text{prompt}}, \\theta \\right)}{|\\mathcal{D}_{w}|}. $$æ°´å°éªŒè¯ åœ¨æ°´å°éªŒè¯é˜¶æ®µï¼Œé˜²å¾¡è€…åˆ©ç”¨éªŒè¯é›†$\\mathcal{D}_{v}$å’Œç§˜å¯†å¯†é’¥$x_{\\text{trigger}}$ï¼Œå¯¹æ¶‰å«Œä½¿ç”¨è¯¥LLMæœåŠ¡æä¾›å•†çš„æç¤ºå†…å®¹è¿›è¡Œç‰ˆæƒéªŒè¯ã€‚å…·ä½“è€Œè¨€ï¼Œé˜²å¾¡è€…å°†ä¼˜åŒ–åçš„è§¦å‘è¯æŒ‰æ¨¡æ¿åµŒå…¥æŸ¥è¯¢åºåˆ—ä¸­ï¼Œä¾‹å¦‚â€œ[$x$] [$x_{\\text{trigger}}$] [MASK]â€ï¼Œå¹¶ä»è¯¥æ¶‰å«ŒLLMæœåŠ¡æä¾›å•†å¤„è·å–è¿”å›çš„ä»¤ç‰Œã€‚æˆ‘ä»¬ç”¨$P_{1}$å’Œ$P_{2}$åˆ†åˆ«è¡¨ç¤ºæ¥è‡ªä¸¤ä½é˜²å¾¡è€…æä¾›çš„PraaSç³»ç»Ÿï¼ˆå‡é‡‡ç”¨å¸¦æ°´å°çš„æç¤ºæŒ‡ä»¤ï¼‰ä»¥åŠè¯¥æ¶‰å«ŒLLMæœåŠ¡æä¾›å•†æ‰€é¢„æµ‹çš„ä»¤ç‰Œã€‚æœ€åï¼Œæˆ‘ä»¬å°†å¯¹$P_{1}$å’Œ$P_{2}$è¿›è¡ŒåŒæ ·æœ¬å‡è®¾æ£€éªŒï¼Œä»¥åˆ¤æ–­ä¸¤è€…ä¹‹é—´æ˜¯å¦å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚\nå‡è®¾æç¤º$x^{\u0026rsquo;}_{\\text{prompt}}$æ˜¯é¢„è®­ç»ƒå¤§æ¨¡å‹$f$çš„å¯ç–‘æç¤ºï¼Œè€Œ$x_{\\text{prompt}}$æ˜¯è¯¥æç¤ºç»è¿‡æ°´å°å¤„ç†åå˜ä¸ºå¸¦æ°´å°ç‰ˆæœ¬ã€‚ä»¤å˜é‡$P_{1}=f(X; x_{\\text{trigger}}, x_{\\text{prompt}},\\theta)$å’Œ$P_{2}=f(X;x_{\\text{trigger}}, x^{\u0026rsquo;}_{\\text{prompt}},\\theta)$åˆ†åˆ«è¡¨ç¤ºä½¿ç”¨åŸå§‹æç¤ºå’Œæ°´å°æç¤ºæ—¶ï¼Œç”±é¢„è®­ç»ƒå¤§æ¨¡å‹$f$å¯¹è¾“å…¥Xé¢„æµ‹å¾—åˆ°çš„æ ‡è®°åºåˆ—ã€‚åœ¨é›¶å‡è®¾$\\mathcal{H}_{0}: \\mu_{1} = \\mu_{2}$æˆç«‹çš„å‰æä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ–­è¨€ï¼š $x^{\u0026rsquo;}_{\\text{prompt}}$æ˜¯ $x_{\\text{prompt}}$ çš„å¤åˆ¶ç‰ˆæœ¬ã€‚\nå®éªŒ åœ¨6ä¸ªæ ‡å‡†æ•°æ®é›†ä¸Šè¿›è¡Œäº†è¯„ä¼°\næœ‰æ•ˆæ€§ å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€è¡Œæ˜¯ç›—ç”¨çš„æç¤ºï¼Œç¬¬äºŒè¡Œæ˜¯ç‹¬ç«‹çš„æç¤ºï¼Œå¯è§è¯¥æ°´å°æˆåŠŸçš„è¢«è¯†åˆ«å‡ºæ¥äº†ã€‚\næ— å®³æ€§ å¦‚å›¾æ‰€ç¤ºï¼Œæ°´å°çš„ACCåŸºæœ¬æ²¡æ€ä¹ˆä¸‹é™ï¼Œåªæœ‰åœ¨AUTOPROMPTè¿™ç§æç«¯æƒ…å†µä¸‹æ‰ä¸‹é™çš„é«˜ä¸€ç‚¹ã€‚\nç¨³å¥æ€§ åœ¨åŒä¹‰è¯æ›¿æ¢åï¼Œpå€¼å‘ˆç°ä¸‹é™çš„è¶‹åŠ¿ï¼Œä½†ä»ç„¶èƒ½ä¿æŒåœ¨0.1ä»¥ä¸Šã€‚\nå¯¹äºå¾®è°ƒä¹ŸåŒæ ·æœ‰å¾ˆé«˜çš„æ•ˆæœã€‚\néšè”½æ€§ å³ä½¿tirggerå¤§å°ä¸º2ï¼Œä¹Ÿæœ‰è¾ƒé«˜çš„æˆåŠŸç‡ã€‚\nä¹‹åä½œè€…è¿˜æµ‹è¯•äº†åœ¨è‡ªé€‚åº”æ”»å‡»å’Œå¤§è¯­è¨€æ¨¡å‹ä¸Šé¢çš„æ•ˆæœã€‚\n","date":"2025-09-29T10:18:00+08:00","image":"https://lbqaq.top/p/promptcare/134905264_p11.webp","permalink":"https://lbqaq.top/p/promptcare/","title":"PromptCARE: Prompt Copyright Protection by Watermark Injection and Verification"},{"content":"å‰è¨€ æœ€è¿‘è‹¦äºä¹‹å‰çš„è€ç¬”è®°æœ¬åœ¨è¿è¡ŒWindowsæ—¶è¶Šæ¥è¶Šå¡äº†ï¼Œäºæ˜¯ä¾¿èŒç”Ÿçš„é‡è£…ç³»ç»Ÿçš„æƒ³æ³•ã€‚æ­£å¥½ï¼Œä¹‹å‰23å¹´çš„æ—¶å€™å·²ç»ä½“éªŒè¿‡ArchLinuxç³»ç»Ÿäº†ï¼Œè€Œä¸”å¬è¯´ç°åœ¨Nvidiaé©±åŠ¨åœ¨Linuxä¸‹ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿å®‰è£…äº†ï¼Œäºæ˜¯å°±å†³å®šå°†Archåœ¨è£…å›æ¥ã€‚\né¢„å…ˆå‡†å¤‡ éœ€è¦å‡†å¤‡1ä¸ªUç›˜ï¼Œç”¨æ¥å­˜æ”¾ç³»ç»Ÿçš„é•œåƒã€‚\nArch Linuxçš„é•œåƒå¯ä»¥å»é•œåƒç«™ä¸‹è½½ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ä¸­ç§‘å¤§çš„é•œåƒç«™æ¥ä¸‹è½½ï¼Œè¿™é‡Œé€‰æ‹©archlinux-x86_64.isoå³å¯ä¸‹è½½äº†ã€‚\næœ‰äº†é•œåƒè¿˜éœ€è¦å¼•å¯¼ç¨‹åºï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯Ventoyã€‚å®ƒçš„ä¼˜åŠ¿å°±æ˜¯æ”¯æŒå¤šç§é•œåƒï¼ŒåŒæ—¶ä¹Ÿä¸å½±å“Uç›˜æ­£å¸¸çš„ä½¿ç”¨ã€‚\nåˆ¶ä½œå¥½åç›´æ¥å°†isoæ–‡ä»¶æ‹·è´åˆ°Uç›˜é‡Œå³å¯äº†ã€‚\nå®‰è£… é‡å¯ç”µè„‘ï¼Œåœ¨BIOSä¸­é€‰æ‹©å¥½Uç›˜å¼•å¯¼åï¼Œå°±å¯ä»¥è¿›å…¥åˆ°ArchLinuxçš„å®‰è£…ç•Œé¢äº†ã€‚ä¸Windowsè¿™ç§å›¾å½¢åŒ–å®‰è£…ä¸åŒï¼ŒArchçš„å®‰è£…æ˜¯é€šè¿‡è¾“å…¥å‘½ä»¤æ¥å®Œæˆçš„ã€‚ä¸è¿‡ç°åœ¨å®˜æ–¹å·²ç»æä¾›äº†å®‰è£…è„šæœ¬æ¥å®ç°ï¼Œè¿™æå¤§ç®€åŒ–äº†æˆ‘ä»¬çš„å®‰è£…ã€‚åé¢æˆ‘å°±é€šè¿‡å®‰è£…è„šæœ¬æ¥è¿›è¡Œå®‰è£…ã€‚ä¸è¿‡å¦‚æœæœ‰æ›´é«˜çº§çš„å®‰è£…éœ€æ±‚ï¼Œå¦‚åŒç³»ç»Ÿç­‰ç­‰ï¼Œé‚£è¿˜æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œå®‰è£…å§ã€‚\nè”ç½‘ Archçš„å®‰è£…æ˜¯éœ€è¦è¿æ¥äº’è”ç½‘çš„ï¼Œå¦‚æœæ˜¯æœ‰çº¿ç½‘ç»œçš„è¯å°±æ˜¯è‡ªåŠ¨è¿æ¥ï¼Œè€Œå¦‚æœéœ€è¦è¿æ¥WI-FIçš„è¯å°±éœ€è¦è¾“å…¥å‘½ä»¤äº†1ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # è¿›å…¥iwctlå‘½ä»¤è¡Œï¼Œå½“å‰è¡Œä¼šæ˜¾ç¤º[iwd]# iwctl # åˆ—å‡ºæ‰€æœ‰çš„WiFiç½‘å¡ device list # æ­¤æ—¶ä¼šåˆ—å‡ºæ‰€æœ‰çš„WiFiç½‘å¡ï¼Œä¸€èˆ¬ä½¿ç”¨ç¬¬ä¸€ä¸ªå³å¯ï¼Œä¹Ÿå°±æ˜¯wlan0 # å¦‚æœè®¾å¤‡æˆ–å…¶ç›¸åº”çš„é€‚é…å™¨å·²å…³é—­ï¼Œå°†å…¶æ‰“å¼€ adapter [adapteråç§°] set-property Powered on # æ‰«æç½‘ç»œ station wlan0 scan # åˆ—å‡ºæ‰€æœ‰å¯ä»¥æœç´¢åˆ°çš„ç½‘ç»œ station wlan0 get-networks # è¿æ¥ç½‘ç»œ station wlan0 connect [SSID] # è¾“å…¥å®Œå¯†ç åå°±è¿æ¥ä¸Šäº†ï¼Œæ­¤æ—¶å°±å¯ä»¥é€€å‡ºäº† exit # éªŒè¯ç½‘ç»œè¿æ¥çŠ¶æ€ ping baidu.com archinstall è¾“å…¥archinstallè¿›å…¥å®˜æ–¹çš„å®‰è£…è„šæœ¬2\næ­¤æ—¶ç•Œé¢å…¨æ˜¯è‹±æ–‡ï¼Œç¬¬ä¸€é¡¹ä¼¼ä¹å¯ä»¥æ›´æ”¹è¯­è¨€ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œä¸€å®šä¸è¦å°†å…¶ä¿®æ”¹ä¸ºä¸­æ–‡ï¼Œç”±äºå®‰è£…é•œåƒé‡Œæ²¡æœ‰å®‰è£…ä¸­æ–‡å­—ä½“ï¼Œä¸€æ—¦åˆ‡æ¢è¿‡å»ä½ å°±ä¼šçœ‹åˆ°ä¸€å †å£å£å£ã€‚è¿™é‡Œå°±ä¿æŒé»˜è®¤çš„è‹±æ–‡å°±å¥½äº†ã€‚\nç¬¬äºŒé¡¹Localesï¼šä¸ç”¨ä¿®æ”¹ï¼Œä¿æŒé»˜è®¤å³å¯\nç¬¬ä¸‰é¡¹Mirrorsï¼šéœ€è¦å»é…ç½®ä¸€ä¸‹ä¸­å›½çš„é•œåƒ\nè¿™é‡Œé€‰æ‹©Chinaï¼Œå¹¶åœ¨ä¸‹é¢çš„Optional repositoriesä¸­æ‰“å¼€multilibï¼ˆæŒ‰ç©ºæ ¼é€‰ä¸­ï¼‰ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†ç»™32ä½ç¨‹åºæä¾›æ”¯æŒ\nç¬¬å››é¡¹Disk configurationï¼šç¡¬ç›˜é…ç½®ï¼Œ**è¿™æ˜¯éå¸¸å±é™©çš„ä¸€æ­¥ï¼Œæ¯ä¸€ä¸ªæ“ä½œä¸€å®šå°å¿ƒè°¨æ…ï¼Œä¸€æ—¦å¤±è¯¯ä¸å¯æŒ½å›ã€‚è¯·ç¡®ä¿éœ€è¦å®‰è£…çš„ç¡¬ç›˜ä¸­æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œè¿™ä¸€æ­¥ä¼šæ¸…é™¤æ‰ç¡¬ç›˜ä¸Šçš„æ‰€æœ‰æ•°æ®ã€‚**è¿™é‡Œæˆ‘å°±ç›´æ¥æŒ‰é»˜è®¤æ¥äº†ã€‚\né€‰æ‹©ç¡¬ç›˜é…ç½®åç‚¹å‡»Partitioningï¼Œä¹‹åä½¿ç”¨é»˜è®¤è®¾ç½®ï¼Œé€‰æ‹©Use a best-effort default partition layoutï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿé€‰æ‹©ï¼Œè¿™é‡Œç›´æ¥é€‰æ‹©btrfsï¼Œbtrfsä½œä¸ºæœ€æ–°ä¸€ä»£çš„Linuxæ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒå¾ˆå¤šé«˜çº§ç‰¹æ€§ã€‚\né€‰æ‹©å®Œåä¼šæœ‰ä¸¤ä¸ªå­é€‰é¡¹ï¼Œæ˜¯å…³äºbtrfsçš„ç‰¹æ€§çš„ï¼Œè¿™é‡Œä¹Ÿæ˜¯ç›´æ¥éƒ½ä½¿ç”¨ã€‚\nå­ç³»ç»Ÿæ˜¯btrfsç‰¹æ€§ä¹‹ä¸€ï¼Œå¯ä»¥æŠŠåŒä¸€ä¸ªç¡¬ç›˜åˆ’åˆ†æˆå¤šä¸ªå­åŒºï¼Œä½†æ˜¯æ¯ä¸ªå­åŒºéƒ½æ‹¥æœ‰ç¡¬ç›˜çš„æ‰€æœ‰å‰©ä½™ç©ºé—´ï¼Œç›¸å½“äºåªè¦ç¡¬ç›˜è¿˜æœ‰ç©ºé—´ï¼Œæ¯ä¸ªå­åˆ†åŒºå°±éƒ½å¯ä»¥ä½¿ç”¨å®ƒã€‚å­åˆ†åŒºè¿˜å¯ä»¥å•ç‹¬è¿›è¡ŒæŒ‚è½½ç­‰æ“ä½œã€‚\nå‹ç¼©ï¼ˆé€æ˜å‹ç¼©ï¼‰ä¹Ÿæ˜¯btrfsé‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œä½œç”¨æ˜¯ä¼šå¯¹æ•°æ®å‹ç¼©å­˜å‚¨ä»è€Œç‰ºç‰²CPUæ€§èƒ½æ¥æå‡ç¡¬ç›˜æ€§èƒ½ã€‚å†™æ—¶å¤åˆ¶åˆ™æ˜¯æ•°æ®åªæœ‰åœ¨è¢«ä¿®æ”¹æ—¶æ‰ä¼šè¿›è¡Œå¤åˆ¶ã€‚\nbtrfsè¿˜æœ‰ä¸ªç‰¹æ€§æ˜¯æ”¯æŒå¿«ç…§ï¼Œæˆ‘ä»¬åœ¨Btrfs snapshotsé‡Œé€‰æ‹©Snapperæ¥å¯ç”¨ã€‚\nç¬¬äº”é¡¹æ˜¯Swapï¼šè¿™é‡Œç›´æ¥ä¿æŒé»˜è®¤å°±å¥½äº†ã€‚\nç¬¬å…­é¡¹æ˜¯Bootloaderï¼šå¯åŠ¨å¼•å¯¼è´Ÿè´£å¼€æœºæ—¶å¼•å¯¼ç”µè„‘è½½å…¥æ“ä½œç³»ç»Ÿï¼Œè¿™é‡Œæˆ‘ä¹ æƒ¯ä½¿ç”¨Grub\nç¬¬ä¸ƒé¡¹æ˜¯Hostnameï¼šå’ŒWindowsçš„ä¸»æœºåä¸€æ ·ï¼Œå°±æ˜¯ç»™æœºå™¨èµ·çš„åå­—\nç¬¬å…«é¡¹æ˜¯Authenticationï¼šè¿™é‡Œæ³¨æ„è¦ç»™rootè®¾ç½®ä¸€ä¸ªå¯†ç ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·ä¾›ä¹‹åçš„ä½¿ç”¨ã€‚\nä¹‹ååˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·\nè¿™é‡Œç»™ç”¨æˆ·sudoæƒé™ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä¹‹åç®¡ç†ç³»ç»Ÿã€‚\nç¬¬ä¹é¡¹æ˜¯Profileï¼šè¿™é‡Œæ˜¯é¢„è£…ä»€ä¹ˆè½¯ä»¶ï¼Œå¯¹äºæ¡Œé¢ç¯å¢ƒï¼Œæ–°æ‰‹æ¨èçš„å°±æ˜¯KDEï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©Typeâ†’Desktopâ†’KDE Plasma\nè¿™é‡Œæˆ‘è¿˜é¢å¤–å‹¾é€‰äº†Hyprland ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªç°ä»£çš„å¹³é“ºå¼çª—å£ç®¡ç†å™¨ï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘é€‰Linuxçš„ç†ç”±ä¹‹ä¸€ï¼‰ï¼Œé…ç½®æœ‰äº›éº»çƒ¦ï¼Œæ–°æ‰‹å¯ä»¥ä¸é€‰ã€‚\nä¹‹åæ˜¯æ˜¾å¡é©±åŠ¨é€‰æ‹©ï¼Œè¿™é‡Œæˆ‘æ˜¯Intelæ ¸æ˜¾+Nvidiaç‹¬æ˜¾çš„ç»„åˆï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œé€‰æ‹©å®‰è£…Nvidiaé—­æºé©±åŠ¨ï¼Œå¹¶åœ¨åé¢æ‰‹åŠ¨å®‰è£…Intelæ ¸æ˜¾é©±åŠ¨ã€‚\nä¹‹åæ˜¯æ¬¢è¿ç•Œé¢ï¼Œè¿™ä¸ªä¿æŒé»˜è®¤çš„sddmå³å¯\nç¬¬åé¡¹æ˜¯Applicationsï¼šè“ç‰™æ ¹æ®éœ€æ±‚å¼€å¯ï¼ŒéŸ³é¢‘ï¼ˆAudioï¼‰å»ºè®®é€‰pipewire\nç¬¬åä¸€é¡¹æ˜¯Kernelsï¼šè¿™é‡Œå†…æ ¸é€‰æ‹©å¯ä»¥é€‰linux-zenï¼ŒåŒ…å«ä¸€äº›å¸¸ç”¨çš„ä¼˜åŒ–\nç¬¬åäºŒé¡¹æ˜¯Network configurationï¼šè¿™é‡Œé€‰æ‹©ç¬¬ä¸‰ä¸ªå³å¯\nç¬¬åä¸‰é¡¹Timezoneï¼šæ—¶åŒºé€‰æ‹©Asia/Shanghai\nç¬¬åå››é¡¹NTPï¼šè‡ªåŠ¨åŒæ­¥æ—¶é—´ï¼Œä¿æŒé»˜è®¤å¼€å¯å³å¯\næœ€åé€‰æ‹©Installå°±ä¼šè‡ªåŠ¨å®‰è£…äº†ã€‚\nå®‰è£…å®Œæˆåæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸‰ä¸ªï¼Œå†å»è£…ä¸€äº›éœ€è¦çš„åŒ…\né¦–å…ˆæ˜¯ä¸­æ–‡å­—ä½“\n1 pacman -S noto-fonts-cjk ä¹‹åå°±æ˜¯Intelçš„æ˜¾å¡é©±åŠ¨3\n1 pacman -S mesa lib32-mesa vulkan-intel lib32-vulkan-intel intel-media-driver å®Œæˆåå°±å¯ä»¥é‡å¯è¿›å…¥ç³»ç»Ÿäº†\n1 2 exit reboot KDEé…ç½® åœ¨ç™»å½•ç•Œé¢æˆ‘ä»¬é€‰æ‹©Plasma(Wayland)ï¼Œå¹¶è¾“å…¥å¥½å¯†ç åï¼Œå°±è¿›å…¥åˆ°KDEä¸­äº†ã€‚\nè¿™é‡Œç»™å‡ºæˆ‘è£…æœºåçš„ä¸€äº›é…ç½®æ–¹æ³•\nè®¾ç½®é•œåƒæº åœ¨å®‰è£…æ—¶ï¼Œæˆ‘ä»¬æ˜¯é…ç½®è¿‡é•œåƒäº†ï¼Œä½†æ˜¯å½“æ—¶å®ƒåˆ—å‡ºäº†è®¸å¤šçš„é•œåƒï¼Œæ­£å¸¸ä½¿ç”¨ä¸éœ€è¦è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬å°±ä¿ç•™1-2ä¸ªå°±å¥½äº†ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ç”¨å‘½ä»¤åˆ‡æ¢äº†ã€‚\n1 2 echo \u0026#39;Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch \u0026#39; | sudo tee /etc/pacman.d/mirrorlist ä¹‹åæ˜¯å¯ç”¨Arch Linux CN è½¯ä»¶æº\nåœ¨Â /etc/pacman.confÂ æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸¤è¡Œï¼š\n1 2 [archlinuxcn] Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch ä¹‹åå°±æ˜¯æ›´æ–°è½¯ä»¶åŒ…\n1 2 sudo pacman -Syyu sudo pacman -S archlinuxcn-keyring è®¾ç½®ä¸­æ–‡ç¯å¢ƒ é»˜è®¤çš„ç³»ç»Ÿæ˜¯æ²¡æœ‰ä¸­æ–‡çš„ç¯å¢ƒçš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå…¶é…ç½®å¯¹åº”çš„localeã€‚4\né¦–å…ˆæ˜¯ç¼–è¾‘/etc/locale.genæ–‡ä»¶ï¼Œå°†zh_CN.UTF-8 UTF-8å‰é¢çš„æ³¨é‡Šå–æ¶ˆ\nä¹‹åæ˜¯æ‰§è¡ŒÂ locale-genÂ å‘½ä»¤ï¼Œä¾¿å¯ä»¥åœ¨ç³»ç»Ÿä¸­ä½¿ç”¨è¿™äº› localeã€‚ å¯¹äºKDEï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¾ç½®é‡Œè¿›è¡Œè¯­è¨€çš„åˆ‡æ¢ã€‚\nè®¾ç½®å®Œæˆåé‡å¯å³å¯ç”Ÿæ•ˆäº†\nè®¾ç½®ä¸­æ–‡è¾“å…¥æ³• è¾“å…¥æ³•è¿™é‡Œæˆ‘ä»¬é€‰æ‹©fcitix+rimeå³å¯\n1 sudo pacman -S fcitx5-im fcitx5-rime ä¹‹åå®‰è£…rime-iceï¼Œè¿™æ˜¯å¤§ä½¬ç»´æŠ¤çš„rimeè¯åº“ï¼Œèƒ½å¾ˆæ–¹ä¾¿çš„é…ç½®å¥½è¾“å…¥æ³•ï¼Œæ­¤åŒ…åœ¨archlinuxcné‡Œæœ‰æ‰€ä»¥æˆ‘ä»¬ç›´æ¥pacmanå®‰è£…å³å¯\n1 sudo pacman -S rime-ice-git ä¹‹ååœ¨KDEçš„è™šæ‹Ÿé”®ç›˜è®¾ç½®é‡Œï¼Œé€‰æ‹©fcitx5å³å¯å¯ç”¨\nå¯¹äºåŒæ‹¼ç”¨æˆ·ï¼Œrime-iceä¹Ÿæä¾›äº†å¯¹åº”çš„è®¾ç½®ï¼Œåªéœ€è¦åœ¨~/.local/share/fcitx5/rime/ä¸‹åˆ›å»ºä¸‰ä¸ªé…ç½®æ–‡ä»¶å³å¯ï¼š\ndefault.custom.yamlï¼š\n1 2 3 patch: schema_list: - schema: double_pinyin_flypy melt_eng.custom.yamlï¼š\n1 2 3 4 5 6 7 8 9 10 11 patch: # ä¿®æ”¹ä¸ºåŒæ‹¼çš„æ‹¼å†™æ´¾ç”Ÿè§„åˆ™ï¼Œå› ä¸ºä¸åœ¨åŒä¸€ä¸ªæ–‡ä»¶äº†ï¼Œå‰é¢è¦åŠ ä¸Šæ–‡ä»¶å speller/algebra: # __include: melt_eng.schema.yaml:/algebra_rime_ice # å…¨æ‹¼ # __include: melt_eng.schema.yaml:/algebra_double_pinyin # è‡ªç„¶ç åŒæ‹¼ __include: melt_eng.schema.yaml:/algebra_flypy # å°é¹¤åŒæ‹¼ # __include: melt_eng.schema.yaml:/algebra_mspy # å¾®è½¯åŒæ‹¼ # __include: melt_eng.schema.yaml:/algebra_sogou # æœç‹—åŒæ‹¼ # __include: melt_eng.schema.yaml:/algebra_abc # æ™ºèƒ½ABCåŒæ‹¼ # __include: melt_eng.schema.yaml:/algebra_ziguang # ç´«å…‰åŒæ‹¼ # __include: melt_eng.schema.yaml:/algebra_jiajia # æ‹¼éŸ³åŠ åŠ åŒæ‹¼ radical_pinyin.custom.yamlï¼š\n1 2 3 4 5 6 7 8 9 10 11 patch: # ä¿®æ”¹ä¸ºåŒæ‹¼çš„æ‹¼å†™æ´¾ç”Ÿè§„åˆ™ï¼Œå› ä¸ºä¸åœ¨åŒä¸€ä¸ªæ–‡ä»¶äº†ï¼Œå‰é¢è¦åŠ ä¸Šæ–‡ä»¶å speller/algebra: # __include: radical_pinyin.schema.yaml:/algebra_pinyin # å…¨æ‹¼ # __include: radical_pinyin.schema.yaml:/algebra_double_pinyin # è‡ªç„¶ç åŒæ‹¼ __include: radical_pinyin.schema.yaml:/algebra_flypy # å°é¹¤åŒæ‹¼ # __include: radical_pinyin.schema.yaml:/algebra_mspy # å¾®è½¯åŒæ‹¼ # __include: radical_pinyin.schema.yaml:/algebra_sogou # æœç‹—åŒæ‹¼ # __include: radical_pinyin.schema.yaml:/algebra_abc # æ™ºèƒ½ABCåŒæ‹¼ # __include: radical_pinyin.schema.yaml:/algebra_ziguang # ç´«å…‰åŒæ‹¼ # __include: radical_pinyin.schema.yaml:/algebra_jiajia # æ‹¼éŸ³åŠ åŠ åŒæ‹¼ è®¾ç½®å¥½åå³é”®è¾“å…¥æ³•å›¾æ ‡ï¼Œé€‰æ‹©é‡æ–°éƒ¨ç½²å³å¯ä½¿ç”¨\nå®‰è£…zshå’Œoh-my-zsh é»˜è®¤çš„bashç”¨èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹ä¸çˆ½ï¼Œæ‰€ä»¥ç›´æ¥æ¢æˆzsh\n1 2 3 4 # å®‰è£…zsh sudo pacman -S zsh git # å®‰è£…oh-my-zsh REMOTE=https://gitee.com/mirrors/oh-my-zsh.git sh -c \u0026#34;$(curl -fsSL https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh)\u0026#34; è¿™é‡Œæˆ‘ä½¿ç”¨äº†Giteeçš„é•œåƒï¼Œè¿™æ ·åœ¨å›½å†…èƒ½åŠ é€Ÿä¸‹è½½\nä¹‹åå°±æ˜¯å®‰è£…æ’ä»¶ï¼Œæˆ‘å¸¸ç”¨çš„å°±æ˜¯å‘½ä»¤é«˜äº®ï¼Œè¿™æ ·å°±èƒ½å¾ˆæ–¹ä¾¿çœ‹å‡ºè¾“å…¥çš„å‘½ä»¤æ˜¯å¦æ­£ç¡®äº†\n1 2 3 4 5 git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting vim ~/.zshrc # åœ¨plugins=(xxx)é‡Œæ·»åŠ zsh-syntax-highlighting source ~/.zshrc å®‰è£…æµè§ˆå™¨ Linuxä¸Šæ”¯æŒæœ€å¥½çš„æµè§ˆå™¨å°±æ˜¯firefoxï¼Œè¿™é‡Œç›´æ¥å®‰è£…ä¸€æ‰‹\n1 sudo pacman -S firefox ä¹‹ååœ¨è®¾ç½®é¡µé¢ï¼Œé€‰æ‹©Set Alternativesæ‰¾åˆ°ä¸­æ–‡å¹¶åº”ç”¨\nä½†æ˜¯å¤§éƒ¨åˆ†ç½‘é¡µå¯¹äºChromeçš„æ”¯æŒè¿˜æ˜¯æ›´å¥½çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘é€‰æ‹©å†å®‰è£…edgeæµè§ˆå™¨\nç”±äºedgeæ˜¯åœ¨AURä¸Šçš„ï¼Œæ‰€ä»¥é¦–å…ˆè¦å®‰è£…paruåŒ…ç®¡ç†å™¨\n1 sudo pacman -S paru ä¹‹åå°±å¯ä»¥å®‰è£…edgeäº†\n1 paru -S microsoft-edge-stable-bin edgeå®‰è£…å®Œåè¿˜éœ€æ·»åŠ å¯åŠ¨å‘½ä»¤ä»¥ä¾¿ä½¿ç”¨ï¼Œåœ¨~/.config/microsoft-edge-stable-flags.confé‡Œè¾“å…¥\n1 2 --ozone-platform-hint=auto --enable-features=AcceleratedVideoDecodeLinuxGL,AcceleratedVideoDecodeLinuxZeroCopyGL åˆ†åˆ«æ˜¯å¯ç”¨åŸç”ŸWaylandæ”¯æŒå’ŒGPUç¡¬è§£\nè®¾ç½®é»˜è®¤å­—ä½“ é»˜è®¤çš„å­—ä½“å¯¹äºä¸­æ–‡çš„æ˜¾ç¤ºæœ‰é—®é¢˜ï¼Œåœ¨ä¹‹å‰çš„æ–‡ç« ä¸­å°±è®¨è®ºè¿‡è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥è´´æ–¹æ³•äº†ï¼Œè¯¦ç»†çš„å†…å®¹å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« ã€‚\nå®‰è£…å­—ä½“\n1 sudo pacman -S ttc-iosevka ttf-nerd-fonts-symbols ç¼–è¾‘~/.config/fontconfig/fonts.confé…ç½®æ–‡ä»¶ï¼š\nğŸ“ƒå±•å¼€ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 \u0026lt;?xml version=\u0026#39;1.0\u0026#39;?\u0026gt; \u0026lt;!DOCTYPE fontconfig SYSTEM \u0026#39;urn:fontconfig:fonts.dtd\u0026#39;\u0026gt; \u0026lt;fontconfig\u0026gt; \u0026lt;!--rendering options--\u0026gt; \u0026lt;match target=\u0026#34;font\u0026#34;\u0026gt; \u0026lt;edit name=\u0026#34;autohint\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;bool\u0026gt;false\u0026lt;/bool\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;hinting\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;bool\u0026gt;true\u0026lt;/bool\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;hintstyle\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;const\u0026gt;hintslight\u0026lt;/const\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;antialias\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;bool\u0026gt;true\u0026lt;/bool\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;lcdfilter\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;const\u0026gt;lcddefault\u0026lt;/const\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;rgba\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;const\u0026gt;rgb\u0026lt;/const\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- https://caniuse.com/extended-system-fonts GitHub uses this for code blocks. --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test qual=\u0026#34;any\u0026#34; name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ui-monospace\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;assign\u0026#34; binding=\u0026#34;same\u0026#34;\u0026gt; \u0026lt;string\u0026gt;monospace\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test qual=\u0026#34;any\u0026#34; name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ui-sans-serif\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;assign\u0026#34; binding=\u0026#34;same\u0026#34;\u0026gt; \u0026lt;string\u0026gt;sans-serif\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test qual=\u0026#34;any\u0026#34; name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ui-serif\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;assign\u0026#34; binding=\u0026#34;same\u0026#34;\u0026gt; \u0026lt;string\u0026gt;serif\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test qual=\u0026#34;any\u0026#34; name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;-apple-system\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;assign\u0026#34; binding=\u0026#34;same\u0026#34;\u0026gt; \u0026lt;string\u0026gt;sans-serif\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Replace Source Han --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test qual=\u0026#34;any\u0026#34; name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Source Han Sans\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;assign\u0026#34; binding=\u0026#34;same\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test qual=\u0026#34;any\u0026#34; name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Source Han Serif\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;assign\u0026#34; binding=\u0026#34;same\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK SC\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Default system-ui fonts --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;system-ui\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;sans-serif\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Default sans-serif fonts--\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;sans-serif\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Noto Sans\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Symbols Nerd Font\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Default serif fonts--\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;serif\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK SC\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Noto Serif\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Symbols Nerd Font\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Default monospace fonts--\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;monospace\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK SC\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Symbols Nerd Font\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Source Code\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Iosevka Extended\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Replace english fonts--\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;prgname\u0026#34; compare=\u0026#34;not_eq\u0026#34;\u0026gt; \u0026lt;string\u0026gt;msedge\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Iosevka Extended\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Replace fonts for Chinese (Hong Kong) --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;zh-HK\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK HK\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;zh-HK\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;!-- not have HK --\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK TC\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;zh-HK\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK HK\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Replace fonts for Chinese (Taiwan) --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;zh-TW\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK TC\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;zh-TW\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK TC\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;zh-TW\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK TC\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Replace fonts for Japanese --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ja\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK JP\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ja\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK JP\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ja\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK JP\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Replace fonts for Korean --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ko\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK KR\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ko\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK KR\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ko\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK KR\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- è§£å†³å…¨è§’å¼•å· --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;en\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;en\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;/fontconfig\u0026gt; å°ç»“ Archçš„å®‰è£…å’Œå¸¸ç”¨é…ç½®å¤§æ¦‚å°±æ˜¯è¿™äº›äº†ï¼ŒArchçš„ä¼˜åŠ¿å°±æ˜¯è‡ªå®šä¹‰ç¨‹åº¦é«˜ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥æŒ‰ç…§è‡ªå·±çš„å–œçˆ±å»å®‰è£…å¯¹åº”çš„åŒ…ã€‚\niwd - Arch Linux ä¸­æ–‡ç»´åŸº\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nèŒæ–°å‘ ArchLinuxæœ€ç®€å•å®‰è£…æ–¹å¼ï¼ˆArchinstallï¼Œ2025.2ï¼‰ - çŸ¥ä¹\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nIntel å›¾å½¢å¤„ç†å™¨ - Arch Linux ä¸­æ–‡ç»´åŸº\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nç®€ä½“ä¸­æ–‡æœ¬åœ°åŒ– - Arch Linux ä¸­æ–‡ç»´åŸº\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2025-08-11T20:57:37+08:00","image":"https://lbqaq.top/p/archlinux-install/128032920.webp","permalink":"https://lbqaq.top/p/archlinux-install/","title":"Arch Linuxçš„å®‰è£…æµç¨‹ä¸å¸¸ç”¨é…ç½®"},{"content":"å‰è¨€ åœ¨21å¹´ï¼Œæˆ‘å†™è¿‡ä¸€ç¯‡ã€Šå¦‚ä½•ä¼˜é›…çš„çœ‹ç•ªã€‹ï¼Œå½“æ—¶åªæ˜¯ç®€å•çš„ä»‹ç»äº†ä¸€ä¸‹ä¸‹è½½å’Œæ’­æ”¾ç”¨çš„è½¯ä»¶ï¼Œé¡ºä¾¿å†ä»‹ç»äº†ä¸€ä¸‹è¡¥å¸§ã€‚ä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼ŒåŸå…ˆçš„é‚£å¥—æ–¹æ³•æ—©å·²é™ˆæ—§äº†ã€‚æ­£å¥½æœ€è¿‘æœ‰äº›ç©ºé—²æ—¶é—´ï¼ŒæŠŠç›®å‰æˆ‘ä½¿ç”¨çš„è¿½/è¡¥ç•ªæµç¨‹è®°å½•ä¸€ä¸‹ã€‚\nç›®å‰ä½¿ç”¨åˆ°çš„è½¯ä»¶æœ‰ä»¥ä¸‹ï¼š\nEmbyï¼šæœ¬åœ°åª’ä½“åº“ fontInAssï¼šå®æ—¶å°†å­—ä½“å­é›†åŒ–ååµŒå…¥ass Ani-rssï¼šæ–°ç•ªè‡ªåŠ¨ä¸‹è½½+é‡å‘½å qBittorrentï¼šå¤§åé¼é¼çš„ç§å­ä¸‹è½½è½¯ä»¶ VueTorrentï¼šé¢œå€¼æ›´é«˜çš„qBittorrent WebUI PeerBanHelperï¼šBT åå¸è¡€å·¥å…· jellyfin-plugin-bangumiï¼šbangumiè‡ªåŠ¨ç‚¹æ ¼å­+å…ƒæ•°æ®è·å– Rcloneï¼šè‡ªåŠ¨å¤‡ä»½ é€šè¿‡è¿™äº›è½¯ä»¶ï¼Œå¯ä»¥å®ç°ï¼š\nè‡ªåŠ¨è¿½æ›´+ä¸‹è½½+æ•´ç† éšå¤„æ’­æ”¾ï¼Œè®°å½•æ’­æ”¾å†å² æ‹¥æœ‰ç²¾ç¾çš„UIå’Œæµ·æŠ¥å¢™ï¼Œçœ‹ç€å¾ˆçˆ½ è‡ªåŠ¨åŒæ­¥æ’­æ”¾è®°å½• ä¸‹é¢å°±ä¾æ¬¡ä»‹ç»è¿™äº›è½¯ä»¶çš„åŠŸèƒ½ä¸å®‰è£…è®¾ç½®æ­¥éª¤ï¼Œä¸ºäº†ä¾¿äºç®¡ç†ï¼Œæˆ‘éƒ½æ˜¯é‡‡ç”¨Dockerè¿›è¡Œå®‰è£…ã€‚\nä¸ªäººåª’ä½“åº“â€”â€”Emby Embyæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„åª’ä½“æœåŠ¡å™¨è½¯ä»¶ï¼Œè‡´åŠ›äºä¸ºç”¨æˆ·æä¾›ä¸°å¯Œçš„å¤šåª’ä½“ä½“éªŒã€‚é€šè¿‡Embyï¼Œæ‚¨å¯ä»¥æ–¹ä¾¿åœ°åœ¨å®¶åº­å†…çš„å„ç§è®¾å¤‡ä¸Šè§‚çœ‹æ‚¨å–œçˆ±çš„ç”µå½±ã€ç”µè§†å‰§å’Œå…¶ä»–è§†é¢‘å†…å®¹ã€‚è€Œä¸”ï¼ŒEmbyè¿˜å…·å¤‡å¼ºå¤§çš„åª’ä½“ç®¡ç†åŠŸèƒ½ï¼Œè®©æ‚¨çš„å½±è§†èµ„æºäº•ç„¶æœ‰åºï¼Œéšæ—¶éšåœ°ç•…äº«è§‚å½±ä¹è¶£ã€‚\né¦–å…ˆè¦æ­å»ºçš„å°±æ˜¯Embyï¼Œåªè¦æœ‰NASçš„ç”¨æˆ·éƒ½åº”è¯¥å¬è¿‡å®ƒçš„å¤§åï¼Œç”¨æ¥ç®¡ç†æœ¬åœ°çš„å½±éŸ³æ•°æ®å†åˆé€‚ä¸è¿‡äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 docker run -d \\ --name emby \\ --restart unless-stopped \\ --stop-timeout 30 \\ -p 8096:8096 \\ -p 8920:8920 \\ -v /var/opt/emby:/config \\ -v /mnt/luoboPool/public:/data \\ --device=/dev/dri \\ -e PUID=0 \\ -e PGID=0 \\ -e TZ=Asia/Shanghai \\ amilys/embyserver:4.9.0.46 è¿™é‡Œæˆ‘æ²¡æœ‰é€‰ç”¨å®˜æ–¹çš„é•œåƒï¼Œè€Œæ˜¯ä½¿ç”¨amilyså¤§ä½¬åšçš„æ•´åˆç‰ˆï¼Œé‡Œé¢å†…ç½®äº†ä¸€äº›æ’ä»¶è¿˜æ˜¯æ¯”è¾ƒå¥½ç”¨çš„ã€‚è¿™é‡Œæˆ‘æŒ‡å®šäº†4.9.0.46ç‰ˆæœ¬æ˜¯å› ä¸ºç¥åŒ»åŠ©æ‰‹è¿™ä¸ªæ’ä»¶ä¸å†ç»§ç»­é€‚é…æœ€æ–°æµ‹è¯•ç‰ˆäº†ï¼Œæ‰€ä»¥å°±åœåœ¨è¿™ä¸ªç‰ˆæœ¬äº†ã€‚\næ¥ä¸‹æ¥å°±æ˜¯å®‰è£…å’Œé…ç½®ç›¸å…³çš„æ’ä»¶ï¼Œamilyså¤§ä½¬ä½¿ç”¨äº†ä¸€ä¸ªæ‰©å±•è„šæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ä¿®æ”¹å…¶æ¥å®ç°é…ç½®docker/emby/config/ext.sh\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 #!/bin/sh ######## è¯´æ˜ 2023-07-30 ######## #ä¸€ä¸ªshè„šæœ¬ï¼Œå®¹å™¨æ¯æ¬¡å¯åŠ¨æ—¶è¿è¡Œ #æ–¹ä¾¿è‡ªå®šä¹‰æ·»åŠ åŠŸèƒ½ ################################# echo \u0026#34;Embyæ‰©å±•å¯åŠ¨è„šæœ¬\u0026#34; #å»æ‰ä¸‹è¡Œæ³¨é‡Šå¯ä»¥å…³é—­æ¬¡è„šæœ¬ #exit 0 ########ä¸‹é¢å¯ä»¥è‡ªè¡Œæ·»åŠ åŠŸèƒ½######## ## ä¿®æ”¹å®¹å™¨hosts #echo -e \u0026#34;13.226.210.20 api.themoviedb.org\u0026#34; \u0026gt;\u0026gt; /etc/hosts #echo -e \u0026#34;13.225.142.99 api4.thetvdb.com\u0026#34; \u0026gt;\u0026gt; /etc/hosts ## Emby-crx ç¾åŒ– åª’ä½“åº“IDä¸ºç©ºæ—¶ä¸å¯ç”¨ ## åª’ä½“åº“idï¼Œç”¨é€—å·åˆ†éš”ã€‚è¿›å…¥åª’ä½“åº“åurlé‡Œçš„parentId ## MediaId=\u0026#34;21466,21463\u0026#34; MediaId=\u0026#34;239\u0026#34; sed -i \u0026#34;s/this\\.parentId = \\\u0026#34;\\\u0026#34;;/this\\.parentId = \\\u0026#34;$MediaId\\\u0026#34;;/\u0026#34; /system/dashboard-ui/emby-crx/config.js ## æ‰©å±•æ’ä»¶: # embyLaunchPotplayer å¤–éƒ¨æ’­æ”¾ # ede.user å¼¹å¹• # actorPlus æœªçŸ¥æ¼”å‘˜éšè— extmod=\u0026#39;[\u0026#34;embyLaunchPotplayer\u0026#34;,\u0026#34;actorPlus\u0026#34;]\u0026#39; sed -i \u0026#39;/\\ extmod/s/\\[.*\\]/\u0026#39;$extmod\u0026#39;/g\u0026#39; /system/dashboard-ui/ext.js # ä¿®æ”¹å¼¹å¹•æ’ä»¶ sed -i \u0026#39;s#\u0026lt;script src=\u0026#34;danmaku.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;#\u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/gh/chen3861229/dd-danmaku@gh-pages/ede.user.js\u0026#34; charset=\u0026#34;utf-8\u0026#34;\u0026gt;\u0026lt;/script\u0026gt;#g\u0026#39; /system/dashboard-ui/index.html exit 0 ç›¸è¾ƒäºåŸå§‹è„šæœ¬ï¼Œæˆ‘å°†å¼¹å¹•è„šæœ¬ä¿®æ”¹ä¸ºchen3861229å¤§ä½¬ç»§ç»­ç»´æŠ¤çš„ç‰ˆæœ¬dd-danmakuã€‚\nå…¶æ¬¡ï¼Œæˆ‘ä¸ºemby-erxç¾åŒ–æ’ä»¶æŒ‡å®šäº†åª’ä½“åº“ï¼Œå¹¶ä¿®å¤äº†é…ç½®è„šæœ¬æ²¡æœ‰å·¥ä½œçš„é—®é¢˜ï¼Œæœ€ç»ˆçš„æ•ˆæœå¦‚ä¸‹ï¼š\nå¯ä»¥çœ‹åˆ°æµ·æŠ¥å¢™è¿˜æ˜¯éå¸¸èµå¿ƒæ‚¦ç›®çš„ã€‚\nå…³äºå¦‚ä½•åˆ›å»ºåª’ä½“åº“ä¹‹ç±»çš„Embyè®¾ç½®ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šç›¸å…³çš„æ•™ç¨‹äº†ï¼Œæˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œå°±åªå†™ä¸€ä¸‹å’Œç½‘ä¸Šé…ç½®ä¸ä¸€æ ·çš„åœ°æ–¹å§ã€‚\né¦–é€‰å›¾åƒä¸‹è½½è¯­è¨€è¿™é‡Œè®¾ç½®ä¸ºç©ºï¼Œç„¶ååœ¨ç¥åŒ»åŠ©æ‰‹é‡Œå¼€å¯åŸè¯­è¨€æµ·æŠ¥ï¼Œè¿™æ ·ä¸‹è½½çš„æµ·æŠ¥å°±æ˜¯æ—¥æ–‡åŸç‰ˆçš„ï¼Œçœ‹èµ·æ¥æ›´èˆ’æœã€‚ åª’ä½“åº“å¯ä»¥è‡ªå·±ç”¨PSè®¾è®¡ä¸€ä¸ªå°é¢ï¼Œçœ‹èµ·æ¥ä¼šæ›´åŠ é†’ç›®ã€‚ å¯¹äºå®¢æˆ·ç«¯çš„é€‰æ‹©ï¼Œæ ¹æ®æˆ‘çš„ä½¿ç”¨ä½“éªŒæ¥çœ‹ï¼Œç›®å‰ä½¿ç”¨ä½“éªŒæ¯”è¾ƒå¥½çš„æ˜¯ï¼š\nPCï¼šå°é›…ä¼˜åŒ–çš„å®˜æ–¹PCå®¢æˆ·ç«¯ Androidï¼šYampy TVï¼šamilysä¼˜åŒ–çš„å®˜æ–¹TVå®¢æˆ·ç«¯ï¼Œå¯¹äºéƒ¨åˆ†æœ‰å­é›†åŒ–çš„å­—å¹•ï¼ˆè¿™ä¸ªåé¢ä¼šä»‹ç»ï¼‰ä½¿ç”¨Kodi+embyå®˜æ–¹æ’ä»¶ Embyé»˜è®¤çš„å…ƒæ•°æ®æ¥æºä¸ºThe Movie Database (TMDB)ï¼Œå·²ç»æ»¡è¶³95%çš„åˆ®å‰Šéœ€æ±‚äº†ã€‚ä½†æ˜¯ï¼Œæœ‰äº›èµ„æºè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œè¿™æ—¶å°±å¯ä»¥ä»Bangumi ç•ªç»„è®¡åˆ’ä¸Šè·å–äº†ã€‚\nè¿™é‡Œå°±éœ€è¦ä½¿ç”¨jellyfin-plugin-bangumiæ’ä»¶äº†ï¼Œè™½ç„¶æ˜¯ä¸ºjellyfinç¼–å†™çš„ï¼Œä½†æ˜¯ä½œè€…ä¹Ÿä¸ºEmbyåšäº†é€‚é…ã€‚\n1 sudo curl -L -o /var/opt/emby/plugins/Emby.Plugin.Bangumi.dll https://github.com/kookxiang/jellyfin-plugin-bangumi/releases/download/1.7.1/Emby.Plugin.Bangumi.dll ç›´æ¥å°†å…¶ä¸‹è½½åˆ°ä¹‹å‰é…ç½®å¥½çš„Embyé…ç½®ç›®å½•é‡Œå¹¶é‡å¯å³å¯ä½¿ç”¨äº†ã€‚\né™¤äº†å…ƒæ•°æ®è·å–ï¼Œå®ƒè¿˜å¯ä»¥åœ¨æ’­æ”¾å®Œæˆåè‡ªåŠ¨ç‚¹æ ¼å­ï¼Œè¿˜æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚\nä¸‹è½½ä¸‰ä»¶å¥—â€”â€”Ani-rssã€qBittorrentã€PeerBanHelper æœ‰äº†åª’ä½“åº“ï¼Œä¸‹é¢éœ€è¦çš„å°±æ˜¯å¦‚ä½•å°†ç½‘ä¸Šçš„èµ„æºä¸‹è½½è¿›æ¥äº†ã€‚è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯wushuo894å¤§ä½¬ç¼–å†™çš„Ani-rssï¼Œå¯ä»¥è‡ªåŠ¨æ£€æµ‹èœœæŸ‘è®¡åˆ’çš„æ›´æ–°å¹¶ä¸‹è½½ï¼ŒåŒæ—¶è¿˜æœ‰é‡å‘½åä»¥åŠæ´—ç‰ˆåŠŸèƒ½ã€‚ç§å­ä¸‹è½½åˆ™æ˜¯qBittorrentã€‚PeerBanHelperåˆ™æ˜¯ä¸ºäº†é¿å…è¢«å¸è¡€ã€‚ç”±äºè¿™ä¸‰ä¸ªå·¥å…·æ˜¯ä¸€èµ·ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥å†™äº†ä¸ªdocker composeæ¥ä¸€é”®å¯åŠ¨ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 name: bt-download networks: qb_ipv6: enable_ipv6: true ipam: config: - subnet: 2001:db8:abc1::/64 services: qBittorrent: image: linuxserver/qbittorrent container_name: qBittorrent ports: - 16000:16000 #ç½‘é¡µç«¯å£ - 18064:18064 #ä¸‹è½½ç«¯å£ - 18064:18064/udp environment: - PUID=1000 - PGID=994 - TZ=Asia/Shanghai - WEBUI_PORT=16000 - TORRENTING_PORT=18064 volumes: - /var/opt/qbittorrent:/config - /mnt/luoboPool/public:/data - /home/luobo/qbittorrent/VueTorrent:/VueTorrent restart: unless-stopped networks: - qb_ipv6 ani-rss: image: wushuo894/ani-rss container_name: ani-rss ports: - 7789:7789 environment: - PORT=7789 - CONFIG=/config - TZ=Asia/Shanghai volumes: - /var/opt/ani-rss:/config - /mnt/luoboPool/public:/data restart: unless-stopped networks: - qb_ipv6 PeerBanHelper: image: registry.cn-hangzhou.aliyuncs.com/ghostchu/peerbanhelper container_name: PeerBanHelper ports: - 9898:9898 environment: - TZ=Asia/Shanghai volumes: - /var/opt/PBH:/app/data restart: unless-stopped networks: - qb_ipv6 è®°å¾—ä¿®æ”¹qBittorrentçš„ç«¯å£å’Œç›¸å…³çš„æŒ‚è½½è·¯å¾„ã€‚\næˆ‘è¿™é‡Œåœ¨é…ç½®æ—¶ï¼Œå¯ç”¨äº†ipv6æ”¯æŒï¼Œä¸»è¦æ˜¯ä¸‹è½½btæ—¶æœ‰ipv6è¿æ¥æ€§ä¼šæ›´å¥½ä¸€ç‚¹ï¼ˆä¹Ÿå°±æ˜¯æ›´å¿«ï¼‰\nani-rss å¯¹äºani-rssçš„è®¾ç½®ï¼Œæˆ‘è¿™é‡Œå°±å†™ä¸€äº›å…³é”®çš„é…ç½®\nä¿å­˜ä½ç½®ï¼š/data/ç•ªå‰§/${year}å¹´${quarter}æœˆ/${title}\nè¿™æ ·å°±å¯ä»¥æŒ‰ç…§å­£åº¦è¿›è¡Œåˆ†ç±»çš„\nå¼€å¯è‡ªåŠ¨åˆ é™¤ã€ä»…åœ¨ä¸»RSSæ›´æ–°ååˆ é™¤å¤‡ç”¨RSSã€å¤‡ç”¨RSS\nè¿™æ ·å°±èƒ½å¼€å¯æ´—ç‰ˆåŠŸèƒ½ï¼Œå¯ä»¥å®ç°å…ˆä¸‹è½½å†…åµŒå­—å¹•çš„ç‰ˆæœ¬ï¼Œç­‰å­—å¹•ç»„æ›´æ–°åå†æ¢å›å†…å°ç‰ˆæœ¬\nå…¶ä»–çš„å‚è€ƒå®˜æ–¹çš„æ–‡æ¡£å°±å¥½äº†\nè¿™é‡Œè¡¥å……ä¸€ä¸‹ï¼Œani-rssæ˜¯åŸºäºèœœæŸ‘è®¡åˆ’çš„ï¼Œè€ŒèœœæŸ‘è®¡åˆ’ä¸»ç«™å·²ç»è¢«å¹²æ‰°äº†ï¼Œæ‰€ä»¥å¯ä»¥é‡‡ç”¨è‡ªå»ºé•œåƒç«™çš„æ–¹æ³•ã€‚è¿™é‡Œæˆ‘ä½¿ç”¨CloudFlareçš„Workerï¼Œè„šæœ¬ä¸ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 const TELEGRAPH_URL = \u0026#39;https://mikanani.me\u0026#39;; const MY_DOMAIN = \u0026#39;https://example.com\u0026#39; addEventListener(\u0026#39;fetch\u0026#39;, event =\u0026gt; { event.respondWith(handleRequest(event.request)) }) async function handleRequest(request) { const url = new URL(request.url); url.host = TELEGRAPH_URL.replace(/^https?:\\/\\//, \u0026#39;\u0026#39;); const modifiedRequest = new Request(url.toString(), { headers: request.headers, method: request.method, body: request.body, redirect: \u0026#39;manual\u0026#39; }); const response = await fetch(modifiedRequest); const contentType = response.headers.get(\u0026#39;Content-Type\u0026#39;) || \u0026#39;\u0026#39;; // å¦‚æœå†…å®¹ç±»å‹æ˜¯ RSSï¼Œæ‰è¿›è¡Œæ›¿æ¢æ“ä½œ if (contentType.includes(\u0026#39;application/xml\u0026#39;)) { const text = await response.text(); const replacedText = text.replace(/https?:\\/\\/mikanani\\.me/g, MY_DOMAIN); const modifiedResponse = new Response(replacedText, response); // æ·»åŠ å…è®¸è·¨åŸŸè®¿é—®çš„å“åº”å¤´ modifiedResponse.headers.set(\u0026#39;Access-Control-Allow-Origin\u0026#39;, \u0026#39;*\u0026#39;); return modifiedResponse; } else { const modifiedResponse = new Response(response.body, response); // æ·»åŠ å…è®¸è·¨åŸŸè®¿é—®çš„å“åº”å¤´ modifiedResponse.headers.set(\u0026#39;Access-Control-Allow-Origin\u0026#39;, \u0026#39;*\u0026#39;); return modifiedResponse; } } qBittorrent è¿™é‡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¤ªå¤šéœ€è¦é…ç½®çš„ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯é…ç½®äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„WebUIâ€”â€”VueTorrentã€‚\nä¸‹è½½å¥½ååœ¨ä½¿ç”¨å¤‡ç”¨ WebUIé‡Œå¡«å†™å¯¹åº”çš„è·¯å¾„å³å¯ã€‚\nPeerBanHelper è¿™ä¸ªä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢åœ¨å…¬ç½‘åšç§æ—¶è¢«å¸è¡€ï¼Œé…ç½®å¥½qBittorrentè¿æ¥åå°±å¯ä»¥ä¸ç”¨ç®¡äº†ã€‚\nå­—ä½“è‡ªåŠ¨å­é›†åŒ–â€”â€”fontInAss å¯¹äºæ–°ç•ªè€Œè¨€ï¼Œå­—å¹•ç»„åœ¨å†…å°å­—å¹•çš„æ—¶å€™åŒæ—¶ä¹Ÿä¼šå°å…¥å­—ä½“æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ“å¿ƒå­—ä½“çš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œåœ¨æ”¶é›†ä¸€äº›è€ç•ªçš„æ—¶å€™ï¼Œå­—å¹•å¾€å¾€æ˜¯å¤–æŒ‚çš„ï¼Œè¿™æ ·åœ¨æ²¡æœ‰å­—ä½“çš„ç¯å¢ƒä¸‹å°±ä¼šå›é€€åˆ°é»˜è®¤å­—ä½“ï¼Œçœ‹èµ·æ¥å°±ä¸€ç‚¹ä¹Ÿä¸ç¾è§‚ã€‚\nç›®å‰ï¼Œå·²ç»æœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆâ€”â€”å°†å­—ä½“å­é›†åŒ–å¹¶åµŒå…¥å­—å¹•1ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼è¿˜æ˜¯æ— æ³•é¿å…éœ€è¦æ‰‹åŠ¨è¿›è¡Œå¤„ç†ã€‚ä¸ºæ­¤ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨åŒ–å¤„ç†çš„è½¯ä»¶â€”â€”fontInAssï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nå®ƒçš„å®‰è£…å’Œé…ç½®å¾ˆç®€å•ï¼Œè¿˜æ˜¯ä¸€æ ·çš„Dockerä¸€æŠŠæ¢­ã€‚\n1 2 3 4 5 6 docker run -d --name=fontinass --restart=unless-stopped \\ -p 8012:8012 \\ -e EMBY_SERVER_URL=http://172.17.0.1:8096 \\ -v /var/opt/fontinassData:/data \\ -v \u0026#34;/mnt/luoboPool/public/Downloads/è¶…çº§å­—ä½“æ•´åˆåŒ… XZ\u0026#34;:/fonts/XZ \\ riderlty/fontinass:latest è¿™é‡Œå”¯ä¸€è¦æ³¨æ„çš„å°±æ˜¯éœ€è¦é¢„å…ˆä¸‹è½½å¥½å­—ä½“çš„æ•´åˆåŒ…ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚ï¼ˆå½“ç„¶è®©å®ƒç”¨åˆ°æ—¶å†è‡ªåŠ¨ä¸‹è½½ä¹Ÿå¯ä»¥ï¼‰\nä¹‹åè®¿é—®Embyä»8012ç«¯å£è¿›å…¥å°±å¥½äº†ã€‚\nè‡ªåŠ¨å¤‡ä»½â€”â€”Rclone è¿™æ¬¾è½¯ä»¶ä¹Ÿæ˜¯ä»‹ç»è¿‡äº†å¾ˆå¤šæ¬¡äº†ï¼Œç”¨å®ƒå¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†æ•°æ®åŒæ­¥åˆ°ç½‘ç›˜ä¸Šé¢ã€‚\n1 2 #!/bin/sh rclone copy /mnt/luoboPool/public/ç•ªå‰§ sp:/ç•ªå‰§ --exclude-from=\u0026#34;/home/luobo/exclude-anime.txt\u0026#34; è¿™é‡Œæˆ‘åŠ ä¸Šäº†ä¸€ä¸ªæ’é™¤æ–‡ä»¶ï¼Œé¿å…ä¼ ä¸ŠEmbyåˆ®å‰Šåçš„æ–‡ä»¶ã€‚\n1 2 3 4 *.nfo *.parts *.!qB *.json æœ€åå°±æ˜¯ç¼–å†™å®šæ—¶è„šæœ¬è®©å…¶æ¯å¤©è‡ªåŠ¨æ›´æ–°äº†ã€‚è¿™é‡Œæˆ‘æ²¡æœ‰ä½¿ç”¨ä¼ ç»Ÿçš„crontabï¼Œè€Œæ˜¯å¦ä¸€ç§æ®è¯´æ›´ç°ä»£çš„æ–¹å¼â€”â€”systemd/Timers - ArchWikiã€‚\næ ¹æ®æ–‡æ¡£ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™.serviceå’Œ.timeræ–‡ä»¶å°±å¥½äº†ã€‚\n/etc/systemd/system/sync-to-onedrive.service\n1 2 3 4 5 6 7 [Unit] Description=Copy to onedrive [Service] User=luobo Group=luobo ExecStart=/bin/bash /home/luobo/sync.sh /etc/systemd/system/sync-to-onedrive.timer\n1 2 3 4 5 6 7 8 9 [Unit] Description=Run sync daily [Timer] OnCalendar=*-*-* 4:00:00 Persistent=true [Install] WantedBy=timers.target å°ç»“ æ•´ç†èµ„æºçœŸçš„æ˜¯ä¸€ä»¶å¾ˆçˆ½çš„äº‹æƒ…ï¼Œç‰¹åˆ«æ˜¯çœ‹åˆ°æœ€åçš„æµ·æŠ¥å¢™ä»¥åã€‚ä¹Ÿæ˜¯å¾ˆæ„Ÿè°¢è¿™äº›è½¯ä»¶çš„åˆ¶ä½œè€…ï¼Œä¸ºæˆ‘çœä¸‹äº†è®¸å¤šçš„æ—¶é—´ã€‚\næˆ‘çš„åŠ¨ç”»å­—å¹•å­—ä½“è§£å†³æ–¹æ¡ˆ - åˆä¹‹éŸ³\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2025-06-20T16:02:45+08:00","image":"https://lbqaq.top/p/my-anime-hub/131135880.webp","permalink":"https://lbqaq.top/p/my-anime-hub/","title":"å¦‚ä½•ä¼˜é›…çš„æ‰“é€ ä¸ªäººå½±éŸ³åº“"},{"content":"åœ¨22å¹´çš„æ—¶å€™ï¼Œå½“æ—¶æˆ‘å†™äº†ä¸€ç¯‡åŸºäºShiroçš„èº«ä»½æƒé™æ§åˆ¶æ–¹æ³•ï¼Œç„¶è€Œéšç€Springbootå’ŒShiroçš„æ›´æ–°ã€‚å½“æˆ‘æŠŠSpringbootå‡çº§åˆ°3.xç‰ˆæœ¬ã€Shiroå‡çº§åˆ°2.xåï¼Œå‘ç°åŸæ¥çš„æ–¹æ³•éƒ½æ²¡æœ‰ç”¨äº†ã€‚æ— è®ºæˆ‘æ€ä¹ˆå°è¯•ï¼Œéƒ½æ— æ³•å®ç°ç™»å½•çš„æ‹¦æˆªæ•ˆæœã€‚åœ¨æŠ˜è…¾äº†è®¸ä¹…åï¼Œæˆ‘å†³å®šè‡ªå·±æ‰‹æ“å®‰å…¨æ¡†æ¶ã€‚æ¯•ç«Ÿå½“æ—¶ç”¨Shiroä¸»è¦æ˜¯ä¸ºäº†æ‰¾å·¥ä½œï¼Œç°åœ¨åšé¡¹ç›®åªè¦å®ç°æ•ˆæœå°±å¥½äº†\nåŸºæœ¬æ€è·¯ æˆ‘ä»¬è¿˜æ˜¯æ²¿ç”¨ä¹‹å‰æ–‡ç« çš„è®¾è®¡ï¼Œä½¿ç”¨JWTæ¥ä½œä¸ºç”¨æˆ·çš„Tokenã€‚æˆ‘ä»¬æƒ³è¦å®ç°ç”¨æˆ·è®¿é—®åˆ°ç‰¹å®šçš„æ¥å£ï¼Œå°±éœ€è¦ç™»å½•ï¼Œå¦åˆ™è¿›è¡Œæ‹¦æˆªã€‚å¯¹äºæŒ‡å®šäº†æƒé™çš„æ¥å£ï¼Œè¿˜éœ€è¦éªŒè¯ç”¨æˆ·æ˜¯å¦æœ‰æƒé™ã€‚\nå’ŒShiroçš„è®¾è®¡ä¸€æ ·ï¼Œæˆ‘ä»¬é€šè¿‡è‡ªå®šä¹‰æ³¨è§£æ¥åˆ¤æ–­æ¥å£æ˜¯å¦éœ€è¦éªŒè¯ï¼š@RequiresLoginè¡¨ç¤ºéœ€è¦ç™»å½•ã€@RequiresRolesè¡¨ç¤ºéœ€è¦æŒ‡å®šçš„èº«ä»½ã€‚ç”¨æˆ·é€šè¿‡ç™»å½•æ¥å£ç™»å½•åï¼Œä¼šè·å¾—ä¸€ä¸ªTokenï¼Œå…¶ä¸­åŒ…å«ç”¨æˆ·çš„ä¿¡æ¯å’Œèº«ä»½ã€‚åœ¨ä¹‹åçš„è¯·æ±‚ä¸­ï¼Œç”¨æˆ·éœ€è¦åœ¨Headerä¸­é™„å¸¦è¿™ä¸ªTokenã€‚\nå…·ä½“å®ç° å¯¼å…¥ä¾èµ– ç”±äºæˆ‘ä»¬æ˜¯è‡ªå·±æ‰‹æ“ï¼Œæ‰€ä»¥æ²¡æœ‰å…¶ä»–çš„ä¾èµ–ï¼Œåªéœ€è¦å¯¼å…¥JWTç›¸å…³çš„åŒ…å³å¯äº†ã€‚\n1 2 3 4 5 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.auth0\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;java-jwt\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.4.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; å°è£…JWTå·¥å…·ç±» è¿™é‡Œä¸»è¦å®ç°JWTçš„ç”Ÿæˆã€éªŒè¯ã€æå–JWTå°è£…çš„ä¿¡æ¯ä¸‰ä¸ªåŠŸèƒ½\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 @Slf4j public class JwtUtil { /** * æœåŠ¡å™¨ç§é’¥ */ private static final Algorithm ALGORITHM = Algorithm.HMAC256(\u0026#34;1\u0026#34;); /** * ç”ŸæˆJSON Web Token * * @param username ç”¨æˆ·å * @param issuer ç­¾å‘è€… * @param subject é¢å‘ä¸»ä½“ * @param roles ç”¨æˆ·æƒé™ * @param ttlMillis ç”Ÿæ•ˆæ—¶é•¿(å•ä½:æ¯«ç§’) */ public static String creatJwt(String username, String issuer, String subject, List\u0026lt;String\u0026gt; roles, long ttlMillis) { long nowMillis = System.currentTimeMillis(); Date now = new Date(nowMillis); JWTCreator.Builder builder = JWT.create() .withAudience(username) .withIssuedAt(now) .withSubject(subject) .withClaim(\u0026#34;roles\u0026#34;, roles) .withIssuer(issuer); if (ttlMillis \u0026gt;= 0) { long expMillis = nowMillis + ttlMillis; Date exp = new Date(expMillis); builder.withExpiresAt(exp); } return builder.sign(ALGORITHM); } /** * è·å–ç­¾å‘å¯¹è±¡ * * @param token éœ€è¦è§£å¯†çš„token * @return è§£å¯†åè·å¾—çš„å¯¹è±¡ï¼Œå¤±è´¥è¿”å›null */ public static String getAudience(String token) { try { return JWT.decode(token).getAudience().get(0); } catch (JWTDecodeException exception) { log.error(\u0026#34;è¾“å…¥çš„tokenæ— æ³•è§£æ\u0026#34;); return null; } catch (NullPointerException exception) { log.error(\u0026#34;æ— æ³•è¯»å–ç­¾å‘å¯¹è±¡\u0026#34;); return null; } } /** * è·å–é¢å‘ä¸»ä½“ * * @param token éœ€è¦è§£å¯†çš„token * @return è§£å¯†åè·å¾—çš„å¯¹è±¡ï¼Œå¤±è´¥è¿”å›null */ public static String getSubject(String token) { try { return JWT.decode(token).getSubject(); } catch (JWTDecodeException exception) { log.error(\u0026#34;è¾“å…¥çš„tokenæ— æ³•è§£æ\u0026#34;); return null; } catch (NullPointerException exception) { log.error(\u0026#34;æ— æ³•è¯»å–é¢å‘ä¸»ä½“\u0026#34;); return null; } } /** * è·å–ç”¨æˆ·æƒé™ * * @param token éœ€è¦è§£å¯†çš„token * @return è§£å¯†åè·å¾—çš„å¯¹è±¡ï¼Œå¤±è´¥è¿”å›null */ public static List\u0026lt;String\u0026gt; getRoles(String token) { try { return JWT.decode(token).getClaim(\u0026#34;roles\u0026#34;).as(List.class); } catch (JWTDecodeException exception) { log.error(\u0026#34;è¾“å…¥çš„tokenæ— æ³•è§£æ\u0026#34;); return null; } catch (NullPointerException exception) { log.error(\u0026#34;æ— æ³•è¯»å–ç”¨æˆ·æƒé™\u0026#34;); return null; } } /** * éªŒè¯tokenæ˜¯å¦æ­£ç¡® * * @param token éœ€è¦éªŒè¯çš„token * @return é€šè¿‡éªŒè¯è¿”å›trueï¼Œåä¹‹æŠ›å‡ºå¼‚å¸¸ */ public static Boolean verifyToken(String token) throws JWTVerificationException { JWTVerifier verifier = JWT.require(ALGORITHM).build(); verifier.verify(token); return true; } } è‡ªå®šä¹‰æ³¨è§£ é€šè¿‡è‡ªå®šä¹‰æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»†ç²’åº¦çš„è¿›è¡Œæƒé™æ§åˆ¶ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦è¿›è¡Œç™»å½•è®¤è¯å’Œèº«ä»½è®¤è¯ï¼ˆç”±äºé¡¹ç›®å¹¶ä¸å¤§ï¼Œå°±ç•¥å»äº†æƒé™è®¤è¯ï¼‰ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ³¨è§£ï¼š\n1 2 3 4 5 6 7 8 9 10 import java.lang.annotation.*; /** * éœ€è¦ç™»å½•æƒé™ */ @Target({ElementType.TYPE, ElementType.METHOD}) @Retention(RetentionPolicy.RUNTIME) @Documented public @interface RequiresLogin { } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 import top.lbqaq.questioncollect.pojo.RoleEnum; import java.lang.annotation.*; /** * éœ€è¦èº«ä»½æƒé™ */ @Target({ElementType.TYPE, ElementType.METHOD}) @Retention(RetentionPolicy.RUNTIME) @Documented public @interface RequiresRoles { //æ‰€éœ€çš„æƒé™åç§° RoleEnum[] value(); Logical logical() default Logical.AND; } æ³¨è§£ç±»ä¸Šæœ‰ä¸‰ä¸ªæ³¨è§£ï¼š\n@Target ç”¨å®ƒæ¥æŒ‡æ˜è‡ªå®šä¹‰æ³¨è§£çš„ä½¿ç”¨èŒƒå›´ï¼ŒElementType.TYPEä»£è¡¨å¯ä»¥å°†è¯¥æ³¨è§£ä½¿ç”¨åœ¨ç±»ã€æ¥å£æˆ–æšä¸¾ä¸Šï¼ŒElementType.METHOD ä»£è¡¨å¯ä»¥åº”ç”¨åœ¨ç±»çš„æ–¹æ³•ä¸Šã€‚\n@Retention ç”¨å®ƒæ¥æŒ‡æ˜è¯¥æ³¨è§£åœ¨.javaå˜.classæ–‡ä»¶è¿‡ç¨‹ä¸­ä¼šè¢«ä¿ç•™åˆ°é‚£ä¸ªé˜¶æ®µã€‚RetentionPolicy.RUNTIME è¿™ç§ç±»å‹çš„æ³¨è§£å°†è¢«JVMä¿ç•™ï¼Œæ‰€ä»¥ä»–ä»¬èƒ½åœ¨è¿è¡Œæ—¶è¢«JVMæˆ–å…¶ä»–ä½¿ç”¨åå°„æœºåˆ¶çš„ä»£ç æ‰€è¯»å–å’Œä½¿ç”¨ã€‚\n@Documented æ³¨è§£è¡¨æ˜è¿™ä¸ªæ³¨è§£åº”è¯¥è¢« javadocå·¥å…·è®°å½•ã€‚\nç‰¹åˆ«çš„ï¼Œåœ¨ç¬¬äºŒä¸ªæ³¨è§£ä¸Šï¼Œæˆ‘ä»¬å¼•å…¥äº†RoleEnumå’ŒLogicalè¿™ä¸¤ä¸ªè‡ªå®šä¹‰çš„ç±»ã€‚å¯¹äºç¬¬ä¸€ä¸ªï¼Œè¿™æ˜¯ä¸€ä¸ªæƒé™çš„æšä¸¾ï¼Œæ–¹ä¾¿ä¹‹åæŒ‡å®šæ¥å£æ‰€éœ€æƒé™ã€‚ç¬¬äºŒä¸ªåˆ™æ˜¯æ ‡æ˜æ‰€éœ€çš„æƒé™é€»è¾‘æ“ä½œï¼Œä¸»è¦ç”¨äºèº«ä»½åˆ¤æ–­å¤„ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 public enum Logical { /** * AND */ AND, /** * OR */ OR } è‡ªå®šä¹‰æ‹¦æˆªå™¨ æˆ‘ä»¬åœ¨interceptorä¸‹å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„æ‹¦æˆªå™¨ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 @Component public class AuthInterceptor implements HandlerInterceptor { @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception { if (handler instanceof HandlerMethod) { final HandlerMethod handlerMethod = (HandlerMethod) handler; final Class\u0026lt;?\u0026gt; clazz = handlerMethod.getBeanType(); final Method method = handlerMethod.getMethod(); final boolean requiresLogin = clazz.isAnnotationPresent(RequiresLogin.class) || method.isAnnotationPresent(RequiresLogin.class); final boolean requiresRoles = clazz.isAnnotationPresent(RequiresRoles.class) || method.isAnnotationPresent(RequiresRoles.class); // åˆ¤æ–­æ³¨è§£æ˜¯æ ‡è®°åœ¨æ‰€è°ƒç”¨çš„æ–¹æ³•ä¸Šè¿˜æ˜¯åœ¨å…¶ç±»ä¸Š if (requiresLogin || requiresRoles) { // ç™»å½•é‰´æƒçš„ä¸»è¦ä¸šåŠ¡é€»è¾‘è§£é‡Šæ˜¯å½“å‘ç°ç”¨æˆ·æ²¡æœ‰åšç™»é™†çš„æ—¶å€™ï¼Œç«‹å³æŠ›å‡ºä¸€ä¸ªè‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸BusinessExceptionï¼Œå¦‚æœç™»å½•åˆ™return trueç»§ç»­æ‰§è¡Œåç»­ä»£ç ã€‚ // ç›´æ¥è·å–ç™»å½•ç”¨æˆ·ï¼ˆé˜²æ­¢è¯·æ±‚è½¬å‘æ—¶ï¼Œç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼‰ LoginUser loginUser = LoginTokenHelper.getLoginUserFromRequest(); if (loginUser != null) { return true; } //è·å–ç™»å½•TOKEN String token = LoginTokenHelper.getLoginToken(); if (token == null) { throw new AuthException(\u0026#34;ç”¨æˆ·æœªç™»å½•\u0026#34;); } //éªŒè¯Token try { JwtUtil.verifyToken(token); } catch (JWTDecodeException e) { throw new AuthException(\u0026#34;ä¸æ˜¯æœ‰æ•ˆçš„JWTæ ¼å¼\u0026#34;); } catch (SignatureVerificationException e) { throw new AuthException(\u0026#34;æ— æ•ˆçš„ç­¾å\u0026#34;); } catch (TokenExpiredException e) { throw new AuthException(\u0026#34;tokenå·²è¿‡æœŸ\u0026#34;); } //è·å–Tokené‡Œçš„ä¿¡æ¯ String userId = JwtUtil.getAudience(token); if (userId == null) { throw new AuthException(\u0026#34;tokenä¸­ç¼ºå°‘UserId\u0026#34;); } List\u0026lt;String\u0026gt; userRoles = JwtUtil.getRoles(token); if (userRoles == null) { throw new AuthException(\u0026#34;tokenä¸­ç¼ºå°‘èº«ä»½\u0026#34;); } loginUser = new LoginUser(); loginUser.setUid(userId); loginUser.setRoles(userRoles); String aud = JwtUtil.getSubject(token); if (\u0026#34;test\u0026#34;.equals(aud) \u0026amp;\u0026amp; !\u0026#34;dev\u0026#34;.equals(RequestContextUtil.getActiveProfile())) { throw new AuthException(\u0026#34;ç¦æ­¢ä½¿ç”¨æµ‹è¯•Token\u0026#34;); } //èº«ä»½è®¤è¯ if (requiresRoles) { List\u0026lt;String\u0026gt; roles = null; Logical logical = null; if (clazz.isAnnotationPresent(RequiresRoles.class)) { roles = RoleEnum.getValuesAsList(clazz.getAnnotation(RequiresRoles.class).value()); logical = clazz.getAnnotation(RequiresRoles.class).logical(); } else { roles = RoleEnum.getValuesAsList(method.getAnnotation(RequiresRoles.class).value()); logical = method.getAnnotation(RequiresRoles.class).logical(); } if ((logical.equals(Logical.AND) \u0026amp;\u0026amp; !userRoles.containsAll(roles)) || (logical.equals(Logical.OR) \u0026amp;\u0026amp; userRoles.stream().noneMatch(roles::contains)) ) { throw new AuthException(\u0026#34;ç”¨æˆ·æ— æƒæŸ¥çœ‹\u0026#34;); } } //ç™»å½•TOKENä¿¡æ¯æ”¾å…¥è¯·æ±‚å¯¹è±¡ï¼Œæ–¹ä¾¿åç»­controllerä¸­è·å– LoginTokenHelper.addLoginUserToRequest(loginUser); return true; } } return true; } } è¿™é‡Œæœ‰å‡ ä¸ªè¦ç‚¹ï¼Œé¦–å…ˆå°±æ˜¯åˆ©ç”¨requiresLoginå’ŒrequiresRolesæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œæ‹¦æˆªã€‚å…¶æ¬¡æˆ‘ä»¬ç”¨äº†LoginTokenHelperæ¥ç®€åŒ–ç™»å½•éªŒè¯ã€‚æˆ‘ä»¬ä½¿ç”¨äº†JwtUtil.getRoles(token)æ¥è·å–ç”¨æˆ·çš„èº«ä»½ï¼Œè¿™é‡Œæ˜¯ä¸æƒ³æ¯æ¬¡ç”¨æˆ·æ‰§è¡Œæ“ä½œæ—¶éƒ½å»æ•°æ®åº“é‡Œè¿›è¡ŒæŸ¥è¯¢ï¼Œäºæ˜¯å°±åœ¨ç”¨æˆ·ç™»å½•çš„æ—¶å€™å°±æŠŠrolesä¸€èµ·æ‰“åŒ…åˆ°Tokené‡Œã€‚èº«ä»½è®¤è¯å°±æ˜¯å»éå†æ¥å£å®šä¹‰çš„èº«ä»½å’Œç”¨æˆ·çš„èº«ä»½æ˜¯å¦åŒ¹é…ã€‚\nè¿™é‡Œæˆ‘ä»¬è‡ªå®šä¹‰äº†ç”¨æˆ·ç±»LoginUserï¼Œæ–¹ä¾¿ä¹‹ååœ¨æ¥å£ä¸­ä½¿ç”¨\n1 2 3 4 5 6 @Data @Hidden public class LoginUser { private String uid; private List\u0026lt;String\u0026gt; roles; } @Hiddenç¡®ä¿å…¶ä¸ä¼šç”Ÿæˆåœ¨æ–‡æ¡£ä¸­ï¼Œå› ä¸ºè¿™æ˜¯åç«¯ä½¿ç”¨çš„å˜é‡ï¼Œå‰ç«¯æ— éœ€çŸ¥é“ã€‚\nç™»å½•è¾…åŠ©ç±» è¿™é‡Œä¸»è¦å¤„ç†çš„å°±æ˜¯ä»è¯·æ±‚é‡Œæå–ç”¨æˆ·çš„Tokenï¼Œæ­¤å¤–å°†å·²ç»è§£æå¥½çš„ç”¨æˆ·ä¿¡æ¯å†å­˜æ”¾åˆ°è¯·æ±‚ä¸­å»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 public class LoginTokenHelper { private final static String LOGIN_TOKEN_COOKIE_NAME = \u0026#34;Token\u0026#34;; private final static String LOGIN_TOKEN_KEY = \u0026#34;LOGIN-TOKEN\u0026#34;; /** * è·å–ç™»å½•çš„TOKEN */ public static String getLoginToken() { HttpServletRequest request = RequestContextUtil.getRequest(); String token = request.getHeader(LOGIN_TOKEN_COOKIE_NAME); return token; } /** * å°†ç™»å½•ç”¨æˆ·ä¿¡æ¯æ”¾å…¥è¯·æ±‚å¯¹è±¡ */ public static void addLoginUserToRequest(LoginUser loginUser) { RequestContextUtil.getRequest().setAttribute(LOGIN_TOKEN_KEY, loginUser); } /** * è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ä»è¯·æ±‚å¯¹è±¡ */ public static LoginUser getLoginUserFromRequest() { Object loginTokenO = RequestContextUtil.getRequest().getAttribute(LOGIN_TOKEN_KEY); if (loginTokenO == null) { return null; } return (LoginUser) loginTokenO; } } è¿™æ®µä»£ç ç”¨åˆ°äº†RequestContextUtilï¼Œè¿™æ®µä»£ç å°±æ˜¯ä»ç½‘ä¸Šcopyçš„ã€‚æˆ‘åœ¨åŸå§‹çš„åŸºç¡€ä¸Šå°±åŠ äº†ä¸ªåˆ¤æ–­å½“å‰æ¿€æ´»çš„profileã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 public class RequestContextUtil { private static ApplicationContext applicationContext; public static HttpServletRequest getRequest() { return getRequestAttributes().getRequest(); } public static HttpServletResponse getResponse() { return getRequestAttributes().getResponse(); } public static HttpSession getSession() { return getRequest().getSession(); } public static ServletRequestAttributes getRequestAttributes() { return ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()); } public static ServletContext getServletContext() { return ContextLoader.getCurrentWebApplicationContext().getServletContext(); } public static void setApplicationContext(ApplicationContext context) { RequestContextUtil.applicationContext = context; } public static String getActiveProfile() { return applicationContext.getEnvironment().getActiveProfiles()[0]; } } é…ç½®æ‹¦æˆªå™¨ åœ¨WebConfig.javaé‡Œé‡å†™æ–¹æ³•ï¼Œå°†æˆ‘ä»¬å®šä¹‰çš„æ‹¦æˆªå™¨æ³¨å…¥å³å¯ã€‚\n1 2 3 4 5 6 7 8 @Resource AuthInterceptor authInterceptor; @Override //æ·»åŠ æ‹¦æˆªå™¨ public void addInterceptors(InterceptorRegistry registry) { registry.addInterceptor(authInterceptor); } åˆ°ç›®å‰ä½ç½®ï¼Œç”¨æˆ·çš„éç™»å½•è¯·æ±‚å°±å·²ç»å¯ä»¥æ‹¦æˆªä¸‹æ¥äº†ï¼Œä½†å¦‚æœæƒ³è¦åœ¨æ¥å£ä¸­è·å–åˆ°å½“å‰çš„ç”¨æˆ·ä¿¡æ¯è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿè¿™å°±éœ€è¦é€šè¿‡è‡ªå®šä¹‰è§£æå™¨å°†å‚æ•°æ³¨å…¥è¿›å»ã€‚\nè‡ªå®šä¹‰å‚æ•°è§£æå™¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 @Component public class LoginUserArgumentResolver implements HandlerMethodArgumentResolver { @Override public boolean supportsParameter(MethodParameter parameter) { final Method method = parameter.getMethod(); final Class\u0026lt;?\u0026gt; clazz = parameter.getMethod().getDeclaringClass(); boolean isHasLoginAuthAnn = clazz.isAnnotationPresent(RequiresLogin.class) || method.isAnnotationPresent(RequiresLogin.class) || clazz.isAnnotationPresent(RequiresRoles.class) || method.isAnnotationPresent(RequiresRoles.class); boolean isHasLoginUserParameter = parameter.getParameterType().isAssignableFrom(LoginUser.class); return isHasLoginAuthAnn \u0026amp;\u0026amp; isHasLoginUserParameter; } @Override public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception { return LoginTokenHelper.getLoginUserFromRequest(); } } supportsParameterä¸»è¦æ˜¯åˆ¤æ–­æ˜¯å¦éœ€è¦æ³¨å…¥ç™»å½•ç”¨æˆ·ï¼ŒresolveArgumentåˆ™æ˜¯å°†æˆ‘ä»¬ä¹‹å‰å­˜æ”¾å¥½çš„LoginUserè¿”å›ã€‚\næ³¨å…¥å‚æ•°è§£æå™¨ å’Œä¹‹å‰çš„æ“ä½œä¸€æ ·ã€‚\n1 2 3 4 5 6 7 8 @Resource LoginUserArgumentResolver loginUserArgumentResolver; @Override //æ·»åŠ è§£æå™¨ public void addArgumentResolvers(List\u0026lt;HandlerMethodArgumentResolver\u0026gt; resolvers) { resolvers.add(loginUserArgumentResolver); } ä½¿ç”¨ å¯¹äºéœ€è¦èº«ä»½è®¤è¯çš„æ¥å£ï¼Œåªéœ€è¦åŠ ä¸Š@RequiresLoginæˆ–è€…@RequiresRoles(value = {RoleEnum.ADMIN})å³å¯ã€‚æƒ³è¦è·å¾—å½“å‰çš„ç”¨æˆ·ï¼Œç›´æ¥å†™åœ¨å‚æ•°é‡Œå°±å¥½äº†ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 @RequiresLogin @PostMapping(\u0026#34;/updateUserInfo\u0026#34;) @Operation(summary = \u0026#34;æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯\u0026#34;, security = @SecurityRequirement(name = \u0026#34;Token\u0026#34;)) public Result updateUserInfo(@RequestBody UserDTO userDTO, LoginUser loginUser) { if(userDTO.getUid()==null){ return new Result().setCode(1200).setMessage(\u0026#34;ç”¨æˆ·idä¸èƒ½ä¸ºç©º\u0026#34;); } if (!userDTO.getUid().equals(loginUser.getUid())) { return new Result().setCode(1200).setMessage(\u0026#34;ä¸èƒ½ä¿®æ”¹å…¶ä»–ç”¨æˆ·ä¿¡æ¯\u0026#34;); } User user = new User(); user.setUid(userDTO.getUid()); user.setName(userDTO.getName()); user.setPhone(userDTO.getPhone()); user.setClassName(userDTO.getClassName()); if(userService.updateByPrimaryKeySelective(user)==0){ return new Result().setCode(1200).setMessage(\u0026#34;æ›´æ–°å¤±è´¥\u0026#34;); } return new Result().setCode(200).setMessage(\u0026#34;æˆåŠŸ\u0026#34;); } è¿™é‡Œæˆ‘ç”¨äº†@SecurityRequirementï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©Swaggerè°ƒè¯•å§›æ—¶å€™å¯ä»¥è¾“å…¥Tokenã€‚Swaggeré…ç½®å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Configuration public class SwaggerConfig { @Bean public OpenAPI getOpenAPI() { return new OpenAPI() .info(new Info().title(\u0026#34;Question Collect API\u0026#34;) .description(\u0026#34;é—®å·æ”¶é›†ç³»ç»Ÿ\u0026#34;) .version(\u0026#34;1.0.0\u0026#34;) ) .components(new Components() .addSecuritySchemes(\u0026#34;Token\u0026#34;, new SecurityScheme().type(SecurityScheme.Type.APIKEY).in(SecurityScheme.In.HEADER).name(\u0026#34;Token\u0026#34;)) ); } } å‚è€ƒæ–‡çŒ® SpringBootå®æˆ˜ - æ‹¦æˆªå™¨+è‡ªå®šä¹‰æ³¨è§£å®ç°æ¥å£çš„ç™»å½•æ ¡éªŒ - å°ç±³ç¬”è®° - åè®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ SpringBootå®æˆ˜ - è‡ªå®šå‚æ•°è§£æå™¨è‡ªåŠ¨æ³¨å…¥å·²ç™»å½•ç”¨æˆ· - å°ç±³ç¬”è®° - åè®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ ","date":"2025-02-08T16:20:00+08:00","image":"https://lbqaq.top/p/springboot-login/124949134.webp","permalink":"https://lbqaq.top/p/springboot-login/","title":"Springbootæ‰‹æ“ç™»å½•æƒé™éªŒè¯"},{"content":"ç»å¸¸ä½¿ç”¨anacondaçš„å°ä¼™ä¼´éƒ½ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡æƒ³è¦å®‰è£…æ–°çš„åŒ…ï¼Œä½†ä¼šåœ¨solve environmentè¿™ä¸€æ­¥å¡ä¸ŠåŠå¤©ï¼Œä¹‹åè£…åŒ…åˆè¦èŠ±ä¸Šä¸å°‘çš„æ—¶é—´ã€‚äºæ˜¯æˆ‘æ‰¾åˆ°äº†ä¸€æ¬¾æ›¿ä»£å“ï¼Œå°±æ˜¯micromambaï¼Œæ®å…¶å®˜ç½‘æ‰€å±ï¼Œå®ƒæ˜¯çº¯ç”¨C++ç¼–å†™çš„ï¼ŒåŒæ—¶ä½¿ç”¨äº†å¤šçº¿ç¨‹ã€‚ç»è¿‡æˆ‘çš„ä½“éªŒï¼Œç¡®å®æ˜¯æ¯”anacondaè¦å¿«ä¸€ç‚¹çš„ã€‚\nå®‰è£… å®‰è£…å¾ˆç®€å•ï¼Œè·Ÿç€å®˜æ–¹æ–‡æ¡£åšå°±å¥½äº†ã€‚ä¾‹å¦‚ï¼ŒLinuxå°±åªè¦è¾“å…¥ä¸‹é¢çš„ä¸€ä¸²å‘½ä»¤å°±å¯ä»¥äº†ã€‚\n1 \u0026#34;${SHELL}\u0026#34; \u0026lt;(curl -L micro.mamba.pm/install.sh) ä¸è¿‡é»˜è®¤çš„å‘½ä»¤æ˜¯micromambaï¼Œè¿™å®åœ¨æ˜¯å¤ªé•¿äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆ«åï¼Œæ–¹ä¾¿å¹³æ—¶ä½¿ç”¨ã€‚åœ¨~/.bashrcåŠ å…¥ä¸‹é¢çš„å†…å®¹å°±å¯ä»¥äº†ã€‚\n1 alias conda=\u0026#34;micromamba\u0026#34; ç”±äºé»˜è®¤æ˜¯ä¸å« Anaconda ä»“åº“æºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å†é…ç½®ä¸€ä¸‹ï¼Œæ­£å¥½æŠŠé•œåƒä¹Ÿé…ç½®å¥½ã€‚åœ¨~/.condarcä¸­åŠ å…¥ä¸‹é¢çš„å†…å®¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 channels: - defaults show_channel_urls: true default_channels: - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2 custom_channels: conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud pytorch-lts: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud deepmodeling: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/ åœ¨vscodeä¸­ä½¿ç”¨ è¿™è¾¹æ‰æ˜¯æˆ‘è¿™ç¯‡æ–‡ç« çš„é‡ç‚¹ï¼Œç”±äºæ˜¯ç¬¬ä¸‰æ–¹çš„è½¯ä»¶ï¼Œæ‰€ä»¥vscodeçš„Pythonæ’ä»¶é»˜è®¤æ˜¯è¯»å–ä¸åˆ°ç¯å¢ƒçš„ï¼Œæˆ‘ä»¬éœ€è¦æ”¹ä¸€ä¸‹é…ç½®ã€‚\nåœ¨å®‰è£…çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹é»˜è®¤çš„è®¾ç½®ï¼Œåˆ™mambaçš„è·¯å¾„åº”è¯¥åœ¨~/micromamba\næˆ‘ä»¬æ‰“å¼€VSCodeçš„è®¾ç½®ï¼Œæ·»åŠ ä¸‹é¢çš„è®¾ç½®ï¼š\npython.venvFoldersè¿™ä¸€é¡¹ï¼Œæ·»åŠ mambaçš„ç›®å½•åï¼Œå³micromamba python.venvPathè¿™ä¸€é¡¹ï¼Œæ·»åŠ mambaè™šæ‹Ÿç¯å¢ƒçš„ç›®å½•ï¼Œå³~/micromamba/envs åªè¦æ·»åŠ å¥½è¿™ä¸¤ä¸ªè®¾ç½®ï¼Œå°±å¯ä»¥å‘ç°VSCodeèƒ½è¯»å–åˆ°è™šæ‹Ÿç¯å¢ƒäº†ã€‚\næ­¤æ—¶æˆ‘ä»¬å·²ç»å®Œæˆäº†æ‰€æœ‰çš„é…ç½®ï¼Œåƒä»¥å‰ä¸€æ ·åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€è£…åŒ…å°±èƒ½å¼€å§‹ä½¿ç”¨äº†ã€‚æ ¹æ®æˆ‘çš„ä½“éªŒï¼Œanacondaçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½å¯ä»¥æ— ç¼ä½¿ç”¨ã€‚\n","date":"2024-08-05T09:34:00+08:00","image":"https://lbqaq.top/p/micromamba/119683453.webp","permalink":"https://lbqaq.top/p/micromamba/","title":"ä½¿ç”¨micromambaä»£æ›¿anaconda"},{"content":"èº«è¾¹çš„äººæ€»æ˜¯æåˆ°ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸Šä¸€ç§’æåˆ°çš„ä¸œè¥¿ï¼Œé©¬ä¸Šå°±å‡ºç°åœ¨äº†ç›¸å…³æœç´¢ä¸­å‘¢ï¼Ÿä¸€ä¸ªå¾ˆå¤§çš„å¯èƒ½æ€§å°±æ˜¯ä½ çš„è¾“å…¥æ³•æš´éœ²äº†ã€‚æœ‰ç ”ç©¶æŒ‡å‡º1ï¼Œç›®å‰å¸‚é¢ä¸Šè®¸å¤šè¾“å…¥æ³•éƒ½å­˜åœ¨å®‰å…¨éšç§æ¼æ´ã€‚è¾“å…¥æ³•ä½œä¸ºæˆ‘ä»¬å¹³æ—¶ç”¨åˆ°æœ€å¤šçš„ç³»ç»Ÿçº§åº”ç”¨ï¼Œæˆ‘ä¸æƒ³è‡ªå·±çš„éšç§è¢«å…¶æ³„éœ²ã€‚æ‰€ä»¥ï¼Œæˆ‘å¯»æ‰¾åˆ°äº†ä¸€æ¬¾çº¯æœ¬åœ°çš„å…¨å¹³å°è¾“å…¥æ³•â€”â€”rimeè¾“å…¥æ³•2ã€‚å®ƒçš„ä¼˜åŠ¿å°±æ˜¯ç®€æ´ã€æ— å¹¿å‘Šã€ä¸è”ç½‘ï¼Œä¸è¿‡å¯¹åº”çš„ç¼ºç‚¹å°±æ˜¯æ²¡æœ‰äº‘è¾“å…¥ï¼Œä¸€äº›æ¯”è¾ƒæ–°çš„è¯ä¸å¥½æ‰“å‡ºæ¥ï¼Œè¿˜æœ‰å°±æ˜¯é…ç½®æ¯”è¾ƒéº»çƒ¦ã€‚\nç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨åˆ«äººé¢„å…ˆè®¾è®¡å¥½çš„é…ç½®æ¥ç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚æˆ‘é€‰æ‹©äº†é›¾å‡‡æ‹¼éŸ³3è¿™ä¸ªå¼€æºçš„æ–¹æ¡ˆæ¥å®ç°ï¼Œå®ƒçš„ä¼˜åŠ¿å°±æ˜¯è‡ªå·±ç»´æŠ¤äº†ä¸€å¥—å¸¸ç”¨çš„è¯åº“ï¼ŒåŒæ—¶é…ç½®å¥½äº†ä¸€äº›é»˜è®¤çš„è¾“å…¥çš„æ–¹æ¡ˆï¼Œæˆ‘å°±åœ¨å®ƒçš„æ–¹æ¡ˆä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œæ‰“é€ ä¸€å¥—å±äºè‡ªå·±çš„è¾“å…¥ä½“éªŒã€‚\nç”±äºæˆ‘ç°åœ¨è¾“å…¥çš„æ–¹å¼æ˜¯å°é¹¤åŒæ‹¼ï¼Œæ‰€ä»¥æˆ‘çš„æ–¹æ¡ˆä¹Ÿå…¨éƒ¨æ˜¯åŸºäºåŒæ‹¼æ‰“é€ çš„ï¼Œå…¨æ‹¼çš„è¯å¯ä»¥å‚è€ƒé›¾å‡‡æ‹¼éŸ³çš„æ–‡æ¡£æ¥é…ç½®ã€‚ï¼ˆåœ¨è¿™å¼ºçƒˆå®‰åˆ©åŒæ‹¼çš„è¾“å…¥æ–¹å¼ï¼Œå­¦ä¹ æˆæœ¬ä¸é«˜ä½†æ”¶ç›Šå¾ˆé«˜ï¼Œèƒ½å¾ˆå¤§ç¨‹åº¦çš„æ”¹å–„ä½ è¾“å…¥çš„ä½“éªŒğŸ‘ï¼‰\nåŸºæœ¬é…ç½® rimeè¾“å…¥æ³•é€šè¿‡.yamlæ–‡ä»¶æ¥ç®¡ç†é…ç½®ï¼Œå¹¶æ”¯æŒä»¥patchçš„å½¢å¼å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™*.custom.yamlæ–‡ä»¶å°±å¯ä»¥åœ¨åˆ«äººçš„æ¡†æ¶ä¸Šæ„å»ºè‡ªå·±çš„è¾“å…¥æ³•äº†ã€‚ç”±äºé…ç½®æ–‡ä»¶åœ¨å…¨ç«¯éƒ½æ˜¯é€šç”¨çš„ï¼Œè¿™é‡Œå°±å…ˆä»‹ç»å…±åŒçš„é…ç½®ï¼Œæ¯ä¸ªå¹³å°ç‹¬ç«‹çš„é…ç½®åœ¨åé¢å†ä»‹ç»ã€‚\nrimeçš„é…ç½®å…¥å£æ˜¯default.yamlï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆä»å®ƒå¼€å§‹ä¿®æ”¹ã€‚åˆ›å»ºdefault.custom.yamlï¼Œå¹¶å¡«å…¥ä¸‹é¢çš„å†…å®¹ï¼š\n1 2 3 4 5 6 7 patch: schema_list: - schema: double_pinyin_flypy - schema: rime_ice menu/page_size: 7 ascii_composer/switch_key/Shift_L: commit_code ascii_composer/switch_key/Shift_R: clear æˆ‘ä»¬é¦–å…ˆé€‰æ‹©äº†éœ€è¦ç”¨åˆ°çš„ä¸¤ä¸ªæ–¹æ¡ˆdouble_pinyin_flypyå’Œrime_iceï¼Œåˆ†åˆ«æ˜¯å°é¹¤åŒæ‹¼å’Œå…¨æ‹¼ï¼Œè¿™é‡ŒåŠ å…¥å…¨æ‹¼æ˜¯é¿å…åˆ«äººä½¿ç”¨æˆ‘ç”µè„‘æ—¶ä¸ä¼šä½¿ç”¨æ‰€é¢„ç•™çš„ã€‚menu/page_sizeæŒ‡å®šäº†å€™é€‰è¯çš„ä¸ªæ•°ï¼Œæœ€åä¸¤ä¸ªåˆ™æ˜¯æŒ‡å®šäº†å·¦å³Shifté”®çš„åŠŸèƒ½ã€‚\nç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯åŒæ‹¼ï¼Œè¿˜éœ€è¦ä¿®æ”¹â€œéƒ¨ä»¶æ‹†å­—â€åŠŸèƒ½ä¸­çš„è®¾ç½®4ã€‚åˆ›å»ºradical_pinyin.custom.yamlï¼Œå¡«å…¥ä¸‹é¢çš„å†…å®¹ï¼š\n1 2 3 4 patch: # ä¿®æ”¹ä¸ºå°é¹¤åŒæ‹¼çš„æ‹¼å†™æ´¾ç”Ÿè§„åˆ™ï¼Œå› ä¸ºä¸åœ¨åŒä¸€ä¸ªæ–‡ä»¶äº†ï¼Œå‰é¢è¦åŠ ä¸Šæ–‡ä»¶å speller/algebra: __include: radical_pinyin.schema.yaml:/algebra_flypy åŒæ ·ï¼Œ\u0026ldquo;æ‹¼å†™æ´¾ç”Ÿ\u0026quot;åŠŸèƒ½ä¹Ÿéœ€è¦ä¿®æ”¹ã€‚åˆ›å»ºmelt_eng.custom.yamlæ–‡ä»¶ï¼Œå¡«å…¥ä¸‹é¢çš„å†…å®¹ï¼š\n1 2 3 4 patch: # ä¿®æ”¹ä¸ºå°é¹¤åŒæ‹¼çš„æ‹¼å†™æ´¾ç”Ÿè§„åˆ™ï¼Œå› ä¸ºä¸åœ¨åŒä¸€ä¸ªæ–‡ä»¶äº†ï¼Œå‰é¢è¦åŠ ä¸Šæ–‡ä»¶å speller/algebra: __include: melt_eng.schema.yaml:/algebra_flypy è¿™æ ·å°±é…ç½®å®Œæˆäº†ï¼Œè¿˜æ˜¯å¾ˆç®€å•çš„ã€‚\nåŒæ­¥çš„è¯ï¼Œæˆ‘åŒæ ·ä½¿ç”¨çš„æ˜¯è·¨å¹³å°çš„è½¯ä»¶rcloneï¼Œå¦‚æœè¦ä½¿ç”¨å®ƒï¼Œéœ€è¦å…ˆé…ç½®å¥½è¿œç«¯ã€‚\né€šè¿‡æ‰§è¡Œrclone configå¹¶æŒ‰ç…§æŒ‡ç¤ºæ·»åŠ å³å¯ã€‚ä¹‹åï¼Œæˆ‘åˆ†åˆ«ä»‹ç»æ¯ä¸ªå¹³å°çš„å…·ä½“é…ç½®å’ŒåŒæ­¥è®¾ç½®ã€‚\nè¯¦ç»†é…ç½® Win winä¸‹çš„å®¢æˆ·ç«¯å«å°ç‹¼æ¯«ï¼Œä¸‹è½½å®‰è£…å¥½åå°±å¯ä»¥è¿›è¡Œé…ç½®äº†ã€‚é…ç½®ç›®å½•ä¸º%APPDATA%\\Rimeï¼Œæˆ‘ç›´æ¥å°†é‡Œé¢çš„æ–‡ä»¶æ¸…ç©ºï¼Œç„¶åä½¿ç”¨gitå°†é›¾å‡‡æ‹¼éŸ³çš„ä»“åº“æ•´ä¸ªå…‹éš†è¿›æ¥ã€‚æ¥ç€å°†ä¸Šé¢â€œåŸºæœ¬é…ç½®â€ä¸­æåˆ°çš„ä¸‰ä¸ªæ–‡ä»¶åˆ›å»ºå¥½ã€‚ç”±äºé»˜è®¤çš„çš®è‚¤æˆ‘ä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œæ‰€ä»¥æˆ‘æ‰¾äº†ä¸€ä¸ªå¾®è½¯æ‹¼éŸ³çš„çš®è‚¤æ¥ä½¿ç”¨ã€‚\nåˆ›å»ºweasel.custom.yamlå¹¶å¡«å…¥ä¸‹é¢çš„å†…å®¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 patch: preset_color_schemes: microsoft_sim: name: ä»¿å¾®è½¯è¾“å…¥æ³• author: plutotree back_color: 0xF4F4F4 border_color: 0xDCDCDC text_color: 0x000000 hilited_text_color: 0xF4F4F4 hilited_back_color: 0xFFD8A6 hilited_candidate_text_color: 0x000000 hilited_candidate_back_color: 0xFFD8A6 candidate_text_color: 0x000000 comment_text_color: 0x888888 style: color_scheme: microsoft_sim label_format: \u0026#34;%s\u0026#34; font_face: \u0026#34;å¾®è½¯é›…é»‘\u0026#34; font_point: 12 horizontal: true inline_preedit: true layout: min_width: 140 min_height: 0 border_width: 1 border_height: 1 margin_x: 9 margin_y: 9 spacing: 9 candidate_spacing: 20 hilite_spacing: 7 hilite_padding: 8 round_corner: 0 æ¥ä¸‹æ¥éœ€è¦é…ç½®installation.yamlï¼Œæˆ‘ä»¬ä¸»è¦ä¿®æ”¹é‡Œé¢çš„installation_idï¼Œè¿™æ˜¯åŒæ­¥æ–‡ä»¶å¤¹ä¸­çš„åç§°ï¼Œé»˜è®¤æ˜¯ä¸€ä¸²UUIDï¼Œä½†æ˜¯è¿™ä¸æ–¹ä¾¿æˆ‘ä»¬åŒæ­¥ï¼Œå»ºè®®å°†å…¶ä¿®æ”¹æˆä¾¿äºæ“ä½œçš„åç§°ã€‚\nè¿™æ ·æˆ‘ä»¬å°±é…ç½®å¥½äº†rimeè¾“å…¥æ³•ï¼Œæ¥ä¸‹æ¥åªéœ€è¦å°†é…ç½®ç›®å½•ä¸‹çš„syncæ–‡ä»¶å¤¹åŒæ­¥å°±å¥½äº†ã€‚\nåŒæ­¥çš„å·¥å…·rcloneåœ¨ä¹‹å‰å·²ç»è®¾ç½®å¥½äº†ï¼Œæˆ‘è¿™é‡Œç¼–å†™äº†ä¸€ä¸ªcmdè„šæœ¬æ¥è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ä»»åŠ¡ã€‚ä½¿ç”¨æ—¶è®°å¾—ä¿®æ”¹æœ¬åœ°å’Œè¿œç«¯çš„åœ°å€ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 @echo off set rime_path=\u0026#34;D:\\Program Files (x86)\\Rime\\weasel-0.16.1\\WeaselDeployer.exe\u0026#34; set remote_path=a1:\\rime_sync set local_path=C:\\Users\\luobo\\AppData\\Roaming\\Rime set sync_path=%local_path%\\sync set device_name=lab-Win echo æ›´æ–°è¾“å…¥æ³•è¯åº“ cd /d %local_path% git pull %rime_path% /deploy echo åŒæ­¥è¾“å…¥æ³•è¯åº“ä¸­... %rime_path% /sync rclone sync %sync_path%\\%device_name% %remote_path%\\%device_name% -P echo ä¸‹è½½è¿œç«¯è¯åº“ rclone sync %remote_path% %sync_path% -P --exclude %device_name%/** Android å®‰å“ç«¯çš„åº”ç”¨æ˜¯fcitx5-android5ï¼Œä¸‹è½½è½¯ä»¶æœ¬ä½“å’Œrimeæ’ä»¶åå°±å¯ä»¥è¿›è¡Œé…ç½®äº†ã€‚å®‰å“ç«¯çš„é…ç½®æ–‡ä»¶ä½äº/sdcard/Android/data/org.fcitx.fcitx5.android/files/data/rimeï¼Œæˆ‘ä»¬ç›´æ¥å°†ç”µè„‘ç«¯çš„é…ç½®æ–‡ä»¶å¤åˆ¶è¿›å»å°±å¯ä»¥äº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œinstallation.yamlé‡Œé¢çš„installation_idè¦æ”¹æˆä¸åŒçš„å€¼ã€‚\nåŒæ­¥çš„è¯ï¼Œrcloneå¹¶æ²¡æœ‰å®˜æ–¹çš„å®‰å“å®¢æˆ·ç«¯ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨termuxâ€”â€”ä¸€æ¬¾è¿è¡ŒäºAndroid ç³»ç»Ÿçš„å¼€æºç»ˆç«¯æ¨¡æ‹Ÿå™¨6ï¼Œå¹¶åœ¨é‡Œé¢å®‰è£…rcloneæ¥ä½¿ç”¨ã€‚\nä¸‹è½½å¹¶å®‰è£…å¥½åï¼Œé¦–å…ˆè¿›è¡Œæ¢æºï¼š\n1 2 sed -i \u0026#39;s@^\\(deb.*stable main\\)$@#\\1\\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/apt/termux-main stable main@\u0026#39; $PREFIX/etc/apt/sources.list apt update \u0026amp;\u0026amp; apt upgrade ä¹‹åå®‰è£…rclone\n1 apt install rclone âš ç”±äºå®‰å“çš„å®‰å…¨æ€§è®¾ç½®ï¼Œæ™®é€šåº”ç”¨æ˜¯æ— æƒè®¿é—®åˆ«çš„åº”ç”¨ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ç»™äºˆrootæƒé™ï¼ˆæˆ–è€…ä½¿ç”¨åˆ«çš„æœ‰æƒé™çš„åº”ç”¨ï¼Œæˆ‘æ²¡æœ‰è¯•è¿‡ï¼‰\næˆ‘è¿™é‡ŒåŒæ ·æ˜¯é€šè¿‡è„šæœ¬æ¥å®ç°è‡ªåŠ¨åŒæ­¥ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 #!/bin/sh export PATH=\u0026#34;/data/data/com.termux/files/usr/bin:$PATH\u0026#34; CONFIG_PATH=\u0026#34;/data/data/com.termux/files/home/.config/rclone/rclone.conf\u0026#34; RIME_PATH=\u0026#34;/sdcard/Android/data/org.fcitx.fcitx5.android/files/data/rime/sync\u0026#34; REMOTE_PATH=\u0026#34;a1:/rime_sync\u0026#34; LOCAL_FOLDER=\u0026#34;K50U-Android\u0026#34; echo \u0026#34;download...\u0026#34; rclone sync $REMOTE_PATH $RIME_PATH -P --exclude $LOCAL_FOLDER/** --config $CONFIG_PATH echo \u0026#34;upload...\u0026#34; rclone sync $RIME_PATH/$LOCAL_FOLDER $REMOTE_PATH/$LOCAL_FOLDER -P --config $CONFIG_PATH è¿™é‡Œç”±äºæˆ‘ä»¬æ˜¯ä½¿ç”¨rootèº«ä»½æ¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥éœ€è¦é¢å¤–è®¾ç½®PATHå¹¶æ‰‹åŠ¨æŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„\nä½“éªŒ æ—¥å¸¸ä½¿ç”¨rimeè¾“å…¥æ³•å·²ç»æœ‰å¤§åŠå¹´äº†ï¼Œæµ‹è¯•ä¸‹æ¥ä¸äº‘è¾“å…¥æ³•åŸºæœ¬æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¸€äº›æ¯”è¾ƒæ–°çš„è¯æ‰“ä¸€éä¹Ÿèƒ½è¢«è¯åº“å­¦ä¹ åˆ°ã€‚é…åˆä¸Šå¤šç«¯åŒæ­¥ï¼Œä½¿ç”¨è¿˜æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚æ­¤å¤–ï¼Œé›¾å‡‡æ‹¼éŸ³è¿˜å†…ç½®äº†ä¸€äº›ä¾¿æ·åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š\nsymbolsï¼šå…¨æ‹¼ v å¼€å¤´ã€åŒæ‹¼å¤§å†™ V å¼€å¤´ éƒ¨ä»¶æ‹†å­—çš„åæŸ¥ï¼šuU å¼€å¤´ï¼ŒåæŸ¥æ—¶å‰ç¼€ä¼šæ¶ˆå¤±å½±å“æ‰“è‹±æ–‡æ‰€ä»¥è®¾å®šä¸ºä¸¤ä¸ªå­—æ¯ï¼Œæˆ–å¯æ”¹æˆä¸€ä¸ªéå­—æ¯ç¬¦å·ã€‚ éƒ¨ä»¶æ‹†å­—çš„è¾…ç ï¼š` è§¦å‘ã€‚ Unicodeï¼šå¤§å†™ U å¼€å¤´ï¼Œå¦‚ U62fc å¾—åˆ°ã€Œæ‹¼ã€ã€‚ æ•°å­—ã€é‡‘é¢å¤§å†™ï¼šå¤§å†™ R å¼€å¤´ï¼Œå¦‚ R1234 å¾—åˆ°ã€Œä¸€åƒäºŒç™¾ä¸‰åå››ã€å£¹ä»Ÿè´°ä½°åæ‹¾è‚†å…ƒæ•´ã€ã€‚ å†œå†æŒ‡å®šæ—¥æœŸï¼šå¤§å†™ N å¼€å¤´ï¼Œå¦‚ N20240210 å¾—åˆ°ã€ŒäºŒã€‡äºŒå››å¹´æ­£æœˆåˆä¸€ã€ã€‚ å¦‚æœæ˜¯æ¯”è¾ƒåœ¨ä¹ä¸ªäººéšç§çš„ç”¨æˆ·ï¼Œæˆ‘æ˜¯æ¯”è¾ƒæ¨èä½¿ç”¨è¿™æ ·ä¸€æ¬¾ä¸è”ç½‘çš„æœ¬åœ°è¾“å…¥æ³•çš„ã€‚\nå‚è€ƒæ–‡çŒ® æ•²æ•²æ‰“æ‰“ï¼šä¸€ç³»åˆ—äº‘ç«¯è¾“å…¥æ³•æ¼æ´ä½¿ç½‘ç»œæ”»å‡»è€…å¾—ä»¥ç›‘çœ‹ä¸ªäººç”¨æˆ·çš„è¾“å…¥å†…å®¹ï¼ˆæ‘˜è¦ï¼‰ - The Citizen Lab\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nRIME | ä¸­å·éŸ»è¼¸å…¥æ³•å¼•æ“\u0026#160;\u0026#x21a9;\u0026#xfe0e;\niDvel/rime-ice: Rime é…ç½®ï¼šé›¾å‡‡æ‹¼éŸ³ | é•¿æœŸç»´æŠ¤çš„ç®€ä½“è¯åº“\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nå¸¸è§é—®é¢˜ Â· iDvel/rime-ice\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nfcitx5-android/fcitx5-android\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nTermux | The main termux site and help pages.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2024-06-16T20:59:00+08:00","image":"https://lbqaq.top/p/rime-sync/112900405.webp","permalink":"https://lbqaq.top/p/rime-sync/","title":"æˆ‘çš„rimeï¼šæ‰“é€ å¤šç«¯åŒæ­¥çš„æœ¬åœ°è¾“å…¥æ³•"},{"content":"ä»‹ç» æœ€è¿‘çš„ç ”ç©¶è¡¨æ˜ï¼Œæ·±åº¦ç¥ç»ç½‘ç»œ ï¼ˆDNNï¼‰ å®¹æ˜“å—åˆ°åé—¨æ”»å‡»ï¼Œæ”»å‡»è€…é€šè¿‡æ¯’å®³ä¸€äº›è®­ç»ƒæ•°æ®å°†éšè”½çš„åé—¨æ³¨å…¥ DNNã€‚å…·ä½“æ¥è¯´ï¼Œåé—¨æ”»å‡»è€…å°†åé—¨è§¦å‘å™¨ï¼ˆå³ç‰¹å®šæ¨¡å¼ï¼‰é™„åŠ åˆ°ä¸€äº›è‰¯æ€§è®­ç»ƒæ•°æ®ï¼Œå¹¶å°†å…¶æ ‡ç­¾æ›´æ”¹ä¸ºæ”»å‡»è€…æŒ‡å®šçš„ç›®æ ‡æ ‡ç­¾ã€‚è§¦å‘æ¨¡å¼å’Œç›®æ ‡æ ‡ç­¾ä¹‹é—´çš„ç›¸å…³æ€§å°†ç”± DNN åœ¨è®­ç»ƒæœŸé—´å­¦ä¹ ã€‚åœ¨æ¨ç†è¿‡ç¨‹ä¸­ï¼Œåé—¨æ¨¡å‹åœ¨è‰¯æ€§æ•°æ®ä¸Šè¡¨ç°æ­£å¸¸ï¼Œè€Œå½“åé—¨è¢«æ¿€æ´»æ—¶ï¼Œå…¶é¢„æµ‹ä¼šè¢«æ¶æ„æ”¹å˜ã€‚\nç›¸åï¼Œäººç±»è®¤çŸ¥ç³»ç»Ÿèƒ½å¤ŸæŠµæŠ—è¾“å…¥çš„æ‰°åŠ¨ï¼Œä¾‹å¦‚åé—¨æ”»å‡»å¼•èµ·çš„éšè”½è§¦å‘æ¨¡å¼ã€‚è¿™æ˜¯å› ä¸ºäººç±»å¯¹å› æœå…³ç³»çš„æ•æ„Ÿåº¦é«˜äºå¹²æ‰°å› ç´ çš„å…³è”ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç»è¿‡è®­ç»ƒä»¥æ‹Ÿåˆä¸­æ¯’æ•°æ®é›†çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å¾ˆéš¾åŒºåˆ†åé—¨æ”»å‡»å¸¦æ¥çš„å› æœå…³ç³»å’Œç»Ÿè®¡å…³è”ã€‚é€šè¿‡å› æœæ¨ç†ï¼Œæˆ‘ä»¬å¯ä»¥è¯†åˆ«å› æœå…³ç³»å¹¶å»ºç«‹é²æ£’çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚å› æ­¤ï¼Œå¿…é¡»åˆ©ç”¨å› æœæ¨ç†æ¥åˆ†æå’Œå‡è½»åé—¨æ”»å‡»çš„å¨èƒã€‚\né‚£ä¹ˆã€‚ä»€ä¹ˆæ˜¯å› æœæ¨ç†å‘¢ï¼Ÿå› æœæ¨æ–­åœ¨ç»Ÿè®¡ç ”ç©¶ä¸­æœ‰ç€æ‚ ä¹…çš„å†å²ã€‚å› æœæ¨ç†çš„ç›®æ ‡æ˜¯åˆ†æå˜é‡ä¹‹é—´çš„å› æœæ•ˆåº”ï¼Œå¹¶å‡è½»è™šå‡ç›¸å…³æ€§ã€‚\nä½œè€…ä¸“æ³¨äºå›¾åƒåˆ†ç±»ä»»åŠ¡ï¼Œç›®æ ‡æ˜¯åœ¨æ²¡æœ‰é¢å¤–å¹²å‡€æ•°æ®çš„æƒ…å†µä¸‹ï¼Œåœ¨å«æœ‰æ¯’æ•°æ®çš„æ•°æ®é›†ä¸Šè®­ç»ƒå‡ºæ— åé—¨çš„æ¨¡å‹ã€‚ä½œè€…é¦–å…ˆæ„å»ºäº†ä¸€ä¸ªå› æœå›¾æ¥æ¨¡æ‹Ÿåé—¨æ•°æ®çš„ç”Ÿæˆè¿‡ç¨‹ï¼Œç‰¹åˆ«è€ƒè™‘äº†å¹²æ‰°å› ç´ ï¼Œå³åé—¨è§¦å‘æ¨¡å¼ã€‚å€ŸåŠ©å› æœå›¾ï¼Œå‘ç°åé—¨æ”»å‡»æ‰®æ¼”äº†æ··æ‚å› ç´ çš„è§’è‰²ï¼Œå¹¶åœ¨è¾“å…¥å›¾åƒä¸é¢„æµ‹æ ‡ç­¾ä¹‹é—´å»ºç«‹äº†ä¸€æ¡è™šå‡çš„è”ç³»ã€‚ä¸€æ—¦æ·±åº¦ç¥ç»ç½‘ç»œå­¦ä¹ äº†è¿™ç§è™šå‡è”ç³»ï¼Œå½“é™„åŠ äº†è§¦å‘å™¨æ—¶ï¼Œå®ƒä»¬çš„é¢„æµ‹å°±ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè½¬å‘ç›®æ ‡æ ‡ç­¾ã€‚\nä½œè€…åœ¨å› æœæ´å¯Ÿçš„å¯å‘ä¸‹ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„åé—¨é˜²å¾¡æ–¹æ³•ï¼Œç§°ä¸ºå› æœå…³ç³»å¯å‘çš„åé—¨é˜²å¾¡ï¼ˆCausalityinspired Backdoor Defenseï¼ŒCBDï¼‰ï¼Œæ—¨åœ¨å­¦ä¹ å»æ··æ·†çš„åˆ†ç±»è¡¨ç¤ºã€‚ç”±äºåé—¨æ”»å‡»éšè”½ä¸”éš¾ä»¥ç›´æ¥æµ‹é‡ï¼Œæ— æ³•é€šè¿‡å› æœæ¨ç†ç›´æ¥é˜»æ–­åé—¨è·¯å¾„ã€‚å—åˆ°è§£ç¼ ç»•è¡¨å¾å­¦ä¹ æœ€æ–°è¿›å±•çš„å¯å‘ï¼Œä½œè€…çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ç§è¡¨å¾ï¼Œå®ƒåªä¿ç•™ä¸å› æœå…³ç³»ç›¸å…³çš„ä¿¡æ¯ã€‚åœ¨CBDä¸­ï¼Œä½œè€…è®­ç»ƒäº†ä¸¤ä¸ªæ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDNNï¼‰ï¼šä¸€ä¸ªä¸“æ³¨äºæ•è·è™šå‡ç›¸å…³æ€§ï¼Œå¦ä¸€ä¸ªä¸“æ³¨äºè¯†åˆ«å› æœæ•ˆåº”ã€‚ç¬¬ä¸€ä¸ªDNNé€šè¿‡æå‰åœæ­¢ç­–ç•¥æœ‰æ„åœ°å­¦ä¹ åé—¨ç›¸å…³æ€§ã€‚æ¥ç€ï¼Œæˆ‘ä»¬é€šè¿‡æœ€å°åŒ–äº’ä¿¡æ¯è®­ç»ƒç¬¬äºŒä¸ªå¹²å‡€çš„æ¨¡å‹ï¼Œä½¿å…¶åœ¨éšè—ç©ºé—´ä¸­ç‹¬ç«‹äºç¬¬ä¸€ä¸ªæ¨¡å‹ã€‚è®­ç»ƒå®Œæˆåï¼Œåªæœ‰å¹²å‡€çš„æ¨¡å‹è¢«ç”¨äºä¸‹æ¸¸çš„åˆ†ç±»ä»»åŠ¡ã€‚\né—®é¢˜æ„é€  ä½œè€…å‡è®¾æ”»å‡»è€…å·²ç»é¢„å…ˆç”Ÿæˆäº†ä¸€ç»„åé—¨ç¤ºä¾‹ï¼Œå¹¶æˆåŠŸåœ°å°†å®ƒä»¬æ³¨å…¥åˆ°è®­ç»ƒæ•°æ®é›†ä¸­ã€‚åŒæ—¶ï¼Œä½œè€…å‡è®¾é˜²å¾¡è€…èƒ½å¤Ÿå®Œå…¨æ§åˆ¶è®­ç»ƒè¿‡ç¨‹ï¼Œä½†å¯¹æ•°æ®é›†ä¸­åé—¨ç¤ºä¾‹çš„åˆ†å¸ƒæˆ–æ¯”ä¾‹ä¸€æ— æ‰€çŸ¥ã€‚é˜²å¾¡è€…çš„ç›®æ ‡æ˜¯è®­ç»ƒå‡ºä¸€ä¸ªåœ¨ä¸­æ¯’æ•°æ®é›†ä¸Šè¡¨ç°è‰¯å¥½ä¸”æ— åé—¨çš„æ¨¡å‹ï¼Œå…¶æ€§èƒ½åº”ä¸åœ¨çº¯å¹²å‡€æ•°æ®ä¸Šè®­ç»ƒçš„æ¨¡å‹ç›¸å½“ã€‚ä¸€å¥è¯æ€»ç»“ï¼Œå°±æ˜¯åœ¨åé—¨æ•°æ®é›†ä¸Šè®­ç»ƒå‡ºä¸€ä¸ªå¹²å‡€æ¨¡å‹ã€‚\nå› æœåˆ†æ å› æœæ¨ç†çš„ä¼˜è¶Šæ€§åœ¨äºå®ƒä½¿äººç±»èƒ½å¤Ÿè¯†åˆ«å› æœå…³ç³»ï¼ŒåŒæ—¶å¿½ç•¥ä»»åŠ¡ä¸­çš„éå¿…è¦å› ç´ ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ·±åº¦ç¥ç»ç½‘ç»œé€šå¸¸æ— æ³•åŒºåˆ†å› æœå…³ç³»å’Œç»Ÿè®¡å…³è”ï¼Œå¹¶ä¸”å€¾å‘äºå­¦ä¹ é‚£äº›â€œæ›´å®¹æ˜“â€çš„ç›¸å…³æ€§ï¼Œè€Œä¸æ˜¯å¿…è¦çš„ä¿¡æ¯ã€‚è¿™ç§èµ°æ·å¾„çš„è§£å†³æ–¹æ¡ˆå¯èƒ½å¯¼è‡´å¯¹æ— å…³å› ç´ ï¼ˆä¾‹å¦‚è§¦å‘æ¨¡å¼ï¼‰çš„è¿‡åº¦æ‹Ÿåˆï¼Œä»è€Œå¢åŠ äº†åé—¨æ”»å‡»çš„è„†å¼±æ€§ã€‚å› æ­¤ï¼Œä½œè€…åˆ©ç”¨å› æœæ¨ç†æ¥åˆ†æDNNæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼Œå¹¶é™ä½åé—¨æ³¨å…¥çš„é£é™©ã€‚\nä½œè€…é€šè¿‡æ„å»ºå› æœå›¾$G$æ¥æ¨¡æ‹Ÿä¸­æ¯’æ•°æ®çš„ç”Ÿæˆè¿‡ç¨‹ã€‚åœ¨å› æœå›¾ä¸­ï¼Œä½œè€…ä½¿ç”¨èŠ‚ç‚¹æ¥è¡¨ç¤ºæŠ½è±¡æ•°æ®å˜é‡ï¼Œå…¶ä¸­$X$ä»£è¡¨è¾“å…¥å›¾åƒï¼Œ$Y$ä»£è¡¨æ ‡ç­¾ï¼Œ$B$ä»£è¡¨åé—¨æ”»å‡»ã€‚æœ‰å‘é“¾æ¥åˆ™è¡¨ç¤ºè¿™äº›å˜é‡ä¹‹é—´çš„å…³ç³»ã€‚é™¤äº†$X$å¯¹$Y$çš„å› æœæ•ˆåº”ï¼ˆ$X â†’ Y$ï¼‰ä¹‹å¤–ï¼Œåé—¨æ”»å‡»è€…å¯ä»¥é€šè¿‡å°†è§¦å‘æ¨¡å¼é™„åŠ åˆ°å›¾åƒï¼ˆ$B â†’ X$ï¼‰å¹¶å°†æ ‡ç­¾æ›´æ”¹ä¸ºç›®æ ‡æ ‡ç­¾ï¼ˆ$B â†’ Y$ï¼‰æ¥å®æ–½æ”»å‡»ã€‚å› æ­¤ï¼Œåé—¨æ”»å‡» $B$ ä½œä¸º $X$ å’Œ $Y$ ä¹‹é—´çš„æ··æ‚å› ç´ ï¼Œæ‰“å¼€äº†è™šå‡è·¯å¾„ $X â† B â†’ Y$ï¼ˆå…¶ä¸­ $B = 1$ è¡¨ç¤ºå›¾åƒä¸­æ¯’ï¼Œ$B = 0$ è¡¨ç¤ºå›¾åƒå¹²å‡€ï¼‰ã€‚æˆ‘ä»¬æ‰€è¯´çš„â€œè™šå‡â€è·¯å¾„æ˜¯æŒ‡è¿™æ¡è·¯å¾„ä½äº $X$ åˆ° $Y$ çš„ç›´æ¥å› æœè·¯å¾„ä¹‹å¤–ï¼Œå®ƒä½¿å¾— $X$ å’Œ $Y$ ä¹‹é—´äº§ç”Ÿäº†è™šå‡çš„ç›¸å…³æ€§ï¼Œå¹¶åœ¨è§¦å‘å™¨è¢«æ¿€æ´»æ—¶å¯¼è‡´é”™è¯¯çš„æ•ˆæœã€‚æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDNNï¼‰å¾ˆéš¾åŒºåˆ†è™šå‡ç›¸å…³æ€§å’Œå› æœå…³ç³»ã€‚å› æ­¤ï¼Œå¦‚æœåœ¨å¯èƒ½ä¸­æ¯’çš„æ•°æ®é›†ä¸Šç›´æ¥è®­ç»ƒ DNNï¼Œæ¨¡å‹å°†é¢ä¸´è¢«åé—¨æ”»å‡»çš„é£é™©ã€‚\nä¸ºäº†æ¢ç©¶ $X$ å¯¹ $Y$ çš„å› æœæ•ˆåº”ï¼Œç ”ç©¶è€…é€šå¸¸ä½¿ç”¨ do æ¼”ç®—åœ¨å› æœå¹²é¢„ä¸­è¿›è¡Œåé—¨è°ƒæ•´ï¼š$P(Y|do(X)) = \\sum_{B\\in\\{0,1\\}}P(Y|X,B)P(B)$ã€‚ç„¶è€Œï¼Œåœ¨ä½œè€…çš„è®¾ç½®ä¸­ï¼Œç”±äºæ··æ‚å˜é‡ $B$ å‡ ä¹æ— æ³•è¢«æ£€æµ‹å’Œæµ‹é‡ï¼Œä¸èƒ½ç®€å•åœ°ä½¿ç”¨åé—¨è°ƒæ•´æ¥é˜»æ–­åé—¨è·¯å¾„ã€‚ç›¸åï¼Œç”±äºå¤§å¤šæ•°æ·±åº¦å­¦ä¹ æ¨¡å‹çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸‹æ¸¸ä»»åŠ¡çš„å‡†ç¡®åµŒå…¥è¡¨ç¤ºï¼Œæ‰€ä»¥ç›®æ ‡æ˜¯è§£å¼€éšè—ç©ºé—´ä¸­çš„æ··æ·†æ•ˆåº”å’Œå› æœæ•ˆåº”ã€‚\nåŸºäºå› æœæ¨ç†çš„åé—¨é˜²å¾¡ åœ¨ç°å®åº”ç”¨ä¸­ï¼Œç›´æ¥è¯†åˆ«æ•°æ®ç©ºé—´ä¸­ $X$ çš„æ··æ‚å› ç´ å’Œå› æœå› ç´ å¯èƒ½ç›¸å½“å›°éš¾ã€‚ä½œè€…å‡è®¾è¿™äº›æ··æ‚å› ç´ å’Œå› æœå› ç´ ä¼šåœ¨éšè—çš„è¡¨å¾ä¸­å¾—åˆ°ä½“ç°ã€‚é€šå¸¸ï¼Œè®­ç»ƒåŒ…æ‹¬ä¸¤ä¸ª DNNï¼Œå³ $f_B$ å’Œ $f_C$ï¼Œå®ƒä»¬åˆ†åˆ«ä¸“æ³¨äºæ•è·è™šå‡ç›¸å…³æ€§å’Œå› æœå…³ç³»ã€‚ä½œè€…ä» $f_B$ å’Œ $f_C$ çš„å€’æ•°ç¬¬äºŒå±‚æå–åµŒå…¥å‘é‡ï¼Œåˆ†åˆ«è¡¨ç¤ºä¸º $R$ å’Œ $Z$ã€‚ä¸ºäº†é¿å…æ··æ·†ï¼Œæœ¬æ–‡ä¸­ä½¿ç”¨å¤§å†™å­—æ¯è¡¨ç¤ºå˜é‡ï¼Œå°å†™å­—æ¯è¡¨ç¤ºå…·ä½“å€¼ã€‚ä¸ºäº†ç”Ÿæˆèƒ½å¤Ÿæ•è·å› æœå…³ç³»çš„é«˜è´¨é‡å˜é‡ $Z$ï¼Œä½œè€…åœ¨è®­ç»ƒé˜¶æ®µï¼Œé¦–å…ˆåœ¨ä¸­æ¯’æ•°æ®é›†ä¸Šè®­ç»ƒ $f_B$ï¼Œä»¥æ•æ‰åé—¨çš„è™šå‡ç›¸å…³æ€§ã€‚éšåï¼Œè®­ç»ƒå¦ä¸€ä¸ªå¹²å‡€çš„æ¨¡å‹ $f_C$ï¼Œé¼“åŠ±å…¶åœ¨éšè—ç©ºé—´ï¼ˆå³ $Z$ ä¸ $R$ ç‹¬ç«‹ï¼‰ä¸­çš„ç‹¬ç«‹æ€§ï¼Œå¹¶é€šè¿‡æœ€å°åŒ–äº’ä¿¡æ¯å’Œå®æ–½æ ·æœ¬é‡æ–°åŠ æƒç­–ç•¥ã€‚è®­ç»ƒå®Œæˆåï¼Œåªæœ‰ $f_C$ è¢«ç”¨äºä¸‹æ¸¸çš„åˆ†ç±»ä»»åŠ¡ã€‚\nåé—¨æ¨¡å‹è®­ç»ƒ é¦–å…ˆï¼Œä½œè€…åœ¨å…·æœ‰äº¤å‰ç†µæŸå¤±çš„æ¯’æ•°æ®é›†ä¸Šè®­ç»ƒ $f_B$ï¼Œç›®çš„æ˜¯æ•è·åé—¨çš„è™šå‡ç›¸å…³æ€§ã€‚ç”±äºä¸­æ¯’æ•°æ®ä»ç„¶åŒ…å«å› æœå…³ç³»ï¼Œä½œè€…æœ‰æ„é€šè¿‡æ—©æœŸåœæ­¢ç­–ç•¥æ¥å¢å¼º $f_B$ ä¸­çš„æ··æ‚åå·®ã€‚å…·ä½“æ¥è¯´ï¼Œä½œè€…åªå¯¹ $f_B$ è¿›è¡Œäº†å°‘æ•°å‡ ä¸ªæ—¶æœŸçš„è®­ç»ƒï¼ˆä¾‹å¦‚ï¼Œ5 ä¸ªæ—¶æœŸï¼‰ï¼Œå¹¶åœ¨è®­ç»ƒ $f_C$ æ—¶å†»ç»“äº†å…¶å‚æ•°ã€‚è¿™æ˜¯å› ä¸ºå…ˆå‰çš„ç ”ç©¶è¡¨æ˜ï¼Œåé—¨å…³è”æ¯”å› æœå…³ç³»æ›´å®¹æ˜“è¢«å­¦ä¹ ã€‚\nå¹²å‡€æ¨¡å‹è®­ç»ƒ ä½œè€…æå‡ºäº†å…·æœ‰ä¿¡æ¯ç“¶é¢ˆå’Œäº’ä¿¡æ¯æœ€å°åŒ–çš„è®­ç»ƒç›®æ ‡ï¼š\n$$\\mathcal{L}\\_C=\\min\\underbrace{\\beta I(Z;X)}\\_{1}-\\underbrace{I(Z;Y)}\\_{2}+\\underbrace{I(Z;R)}\\_{3}$$å…¶ä¸­$I(.;.)$â€‹è¡¨ç¤ºäº’ä¿¡æ¯\nâ‘ ç”¨æ¥é™åˆ¶æ¥è‡ªè¾“å…¥çš„ä¸ç›¸å…³ä¿¡æ¯ â‘¡ç”¨æ¥æ•è·å˜é‡ $Z$â€‹ ç”¨äºæ ‡ç­¾é¢„æµ‹çš„æ ¸å¿ƒä¿¡æ¯ â‘¢æè¿°äº†åé—¨åµŒå…¥ $R$ å’Œå»æ··æ·†åµŒå…¥ $Z$ ä¹‹é—´çš„ä¾èµ–ç¨‹åº¦ã€‚å®ƒé¼“åŠ± $Z$ ç‹¬ç«‹äº $R$ï¼Œé€šè¿‡æœ€å°åŒ–äº’ä¿¡æ¯æ¥å…³æ³¨å› æœæ•ˆåº” äº’ä¿¡æ¯\näº’ä¿¡æ¯ï¼ˆmutual Informationï¼ŒMIï¼‰åº¦é‡äº†ä¸¤ä¸ªå˜é‡ä¹‹é—´ç›¸äº’ä¾èµ–çš„ç¨‹åº¦ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºä¸¤ä¸ªéšæœºå˜é‡ï¼ŒMIæ˜¯ä¸€ä¸ªéšæœºå˜é‡ç”±äºå·²çŸ¥å¦ä¸€ä¸ªéšæœºå˜é‡è€Œå‡å°‘çš„â€œä¿¡æ¯é‡â€ï¼ˆå•ä½é€šå¸¸ä¸ºæ¯”ç‰¹ï¼‰ã€‚\n$$I(X;Y)=D\\_{\\mathrm{KL}}(p(x,y)\\|p(x)\\otimes p(y))$$ç›´è§‚ä¸Šï¼Œäº’ä¿¡æ¯åº¦é‡ X å’Œ Y å…±äº«çš„ä¿¡æ¯ï¼šå®ƒåº¦é‡çŸ¥é“è¿™ä¸¤ä¸ªå˜é‡å…¶ä¸­ä¸€ä¸ªï¼Œå¯¹å¦ä¸€ä¸ªä¸ç¡®å®šåº¦å‡å°‘çš„ç¨‹åº¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ X å’Œ Y ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™çŸ¥é“ X ä¸å¯¹ Y æä¾›ä»»ä½•ä¿¡æ¯ï¼Œåä¹‹äº¦ç„¶ï¼Œæ‰€ä»¥å®ƒä»¬çš„äº’ä¿¡æ¯ä¸ºé›¶ã€‚åœ¨å¦ä¸€ä¸ªæç«¯ï¼Œå¦‚æœ X æ˜¯ Y çš„ä¸€ä¸ªç¡®å®šæ€§å‡½æ•°ï¼Œä¸” Y ä¹Ÿæ˜¯ X çš„ä¸€ä¸ªç¡®å®šæ€§å‡½æ•°ï¼Œé‚£ä¹ˆä¼ é€’çš„æ‰€æœ‰ä¿¡æ¯è¢« X å’Œ Y å…±äº«ï¼šçŸ¥é“ X å†³å®š Y çš„å€¼ï¼Œåä¹‹äº¦ç„¶ã€‚\nç„¶è€Œï¼Œä¸Šè¿°çš„å…¬å¼å¹¶ä¸èƒ½ç›´æ¥æ±‚è§£ï¼Œä¸ºæ­¤ï¼Œä½œè€…æ”¾å®½äº†é™åˆ¶ã€‚\nå…¬å¼1\n$$\\begin{aligned} I(Z;X)\u0026 =\\sum\\_x\\sum\\_zp(z,x)\\mathrm{log}\\frac{p(z,x)}{p(z)p(x)} \\\\\\\\ \u0026=\\sum\\_x\\sum\\_zp(z|x)p(x)\\mathrm{log}\\frac{p(z|x)p(x)}{p(z)p(x)} \\\\\\\\ \u0026=\\sum\\_x\\sum\\_zp(z|x)p(x)\\mathrm{log~}p(z|x)-\\sum\\_zp(z)\\mathrm{log~}p(z) \\end{aligned}$$ç„¶è€Œï¼Œè¾¹é™…æ¦‚ç‡$p(z)=\\sum_xp(z|x)p(x)$åœ¨å®è·µä¸­å¾ˆéš¾è®¡ç®—ï¼Œä¸ºæ­¤ä½œè€…é€šè¿‡å˜åˆ†åˆ†å¸ƒ$q(z)$æ¥è¿‘ä¼¼$p(z)$ï¼Œç”±äºKLæ•£åº¦æ˜¯éè´Ÿçš„ï¼Œæ ¹æ®å‰å¸ƒæ–¯ä¸ç­‰å¼ï¼š$D_{\\mathrm{KL}}(p(z)||q(z)) \\geq 0 \\Rightarrow -\\sum_zp(z)\\mathrm{log~}p(z)\\leq-\\sum_zp(z)\\mathrm{log~}q(z)$\nå°†å…¶ä»£å…¥ä¸Šå¼ï¼š\n$$\\begin{aligned} I(Z;X)\u0026 \\leq\\sum\\_xp(x)\\sum\\_zp(z|x)\\mathrm{log~}p(z|x)-\\sum\\_zp(z)\\mathrm{log~}q(z) \\\\\\\\ \u0026=\\sum\\_xp(x)\\sum\\_zp(z|x)\\mathrm{log}\\frac{p(z|x)}{q(z)} \\\\\\\\ \u0026=\\sum\\_xp(x)D\\_{\\mathrm{KL}}(p(z|x)||q(z)) \\end{aligned}$$ä½œè€…å‡è®¾$p(z|x)=\\mathcal{N}(\\mu(x),\\mathrm{diag}\\{\\sigma^2(x)\\})$æ˜¯é«˜æ–¯åˆ†å¸ƒï¼Œå…¶ä¸­$\\mu(x)$æ˜¯$x$çš„ç¼–ç åµŒå…¥ï¼Œ$\\mathrm{diag}\\{\\sigma^2(x)\\}=\\{\\sigma_d^2\\}_{d=1}^D$è¡¨ç¤ºæ–¹å·®çš„å¯¹è§’çŸ©é˜µï¼Œå¹¶å‡è®¾$q(z)=\\mathcal{N}(0,I)$ï¼Œäºæ˜¯ä¸Šå¼å°±å¯ä»¥æ”¹å†™æˆï¼š\n$$D\\_{\\mathrm{KL}}(p(z|x)||q(z))=\\frac{1}{2}||\\mu(x)||\\_2^2+\\frac{1}{2}\\sum\\_d(\\sigma\\_d^2-\\mathrm{log}\\sigma\\_d^2-1)$$ä¸ºäº†ä¾¿äºä¼˜åŒ–ä½œè€…å°†$\\sigma(x)$å®šä¹‰ä¸ºå…¨é›¶çŸ©é˜µï¼Œæ‰€ä»¥$z=\\mu(x)$æˆä¸ºç¡®å®šæ€§åµŒå…¥ã€‚\næœ€åæ¨å¯¼å‡ºæ¥ï¼Œå…¬å¼ä¸€å°±ç›¸å½“äºç›´æ¥åœ¨åµŒå…¥å‘é‡ $z$ ä¸Šåº”ç”¨L2æ­£åˆ™åŒ–\nå…¬å¼2\næ ¹æ®äº’ä¿¡æ¯çš„å®šä¹‰ï¼Œæœ‰$I(Z;Y)=H(Y)-H(Y|Z)$ï¼Œå…¶ä¸­$H(Â·)$ å’Œ $H(Â·|Â·)$ åˆ†åˆ«è¡¨ç¤ºç†µå’Œæ¡ä»¶ç†µã€‚ç”±äº$H(Y)$ æ˜¯ä¸€ä¸ªæ­£å¸¸æ•°ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå› æ­¤æœ‰ä»¥ä¸‹ä¸ç­‰å¼ï¼š\n$$-I(Z;Y)\\leq H(Y|Z)$$åœ¨å®éªŒä¸­ï¼Œ$H(Y|Z)$å¯ä»¥è®¡ç®—å¹¶ä¼˜åŒ–ä¸ºäº¤å‰ç†µæŸå¤±ã€‚ä¸ºäº†è¿›ä¸€æ­¥é¼“åŠ± $f_C$ å’Œ $f_B$ ä¹‹é—´çš„ç‹¬ç«‹æ€§ï¼Œä½œè€…å›ºå®šäº† $f_B$ çš„å‚æ•°ï¼Œå¹¶ä½¿ç”¨æ ·æœ¬åŠ æƒäº¤å‰ç†µæŸå¤±æ¥è®­ç»ƒ $f_C$ï¼Œæƒé‡çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n$$w(x)=\\frac{CE(f\\_B(x),y)}{CE(f\\_B(x),y)+CE(f\\_C(x),y)}$$å¯¹äº $f_B$ä¸ŠæŸå¤±è¾ƒå¤§çš„æ ·æœ¬ï¼Œ$w(x)$æ¥è¿‘1;è€Œå½“æŸå¤±éå¸¸å°æ—¶ï¼Œ$w(x)$æ¥è¿‘ 0ã€‚ä»è€Œè®© $f_C$ä¸“æ³¨äº $f_B$çš„â€œéš¾â€ç¤ºä¾‹ï¼Œä»¥é¼“åŠ±å…¶ç‹¬ç«‹æ€§ã€‚\nå…¬å¼3\nåŸºäºäº’ä¿¡æ¯å’ŒKLæ•£åº¦çš„å…³ç³»ï¼Œæœ‰$I(Z;R)=D_{\\mathrm{KL}}(p(Z,R)||p(Z)p(R))$ï¼Œå³$I(Z;R)$ç­‰ä»·äºè”åˆåˆ†å¸ƒ$p(Z,R)$å’Œä¸¤ä¸ªè¾¹é™…$p(Z)p(R)$çš„ä¹˜ç§¯ä¹‹é—´çš„KLæ•£åº¦ã€‚\nä¸ºäº†æœ€å°åŒ–æ··æ‚æƒ©ç½šé¡¹ï¼Œä½œè€…é‡‡ç”¨äº†å¯¹æŠ—å­¦ä¹ ã€‚åˆ¤åˆ«å™¨$D_\\phi$è¢«è®­ç»ƒæˆå°†è”åˆåˆ†å¸ƒ$p(Z,R)$åˆ†ç±»ä¸º1ï¼Œå°†è¾¹é™…åˆ†å¸ƒ$p(Z)p(R)$åˆ†ç±»ä¸º0ã€‚è¾¹é™…åˆ†å¸ƒ$p(Z)p(R)$çš„æ ·æœ¬æ˜¯é€šè¿‡å¯¹$p(Z,R)$è®­ç»ƒæ‰¹æ¬¡ä¸­æ ·æœ¬$(z,r)$çš„å•ä¸ªè¡¨ç¤ºè¿›è¡Œshuffleè€Œè·å¾—çš„ã€‚ä¼˜åŒ–å‡½æ•°å¦‚ä¸‹ï¼š\n$$\\mathcal{L}\\_{adv}=\\min\\_{\\theta\\_C}\\max\\_\\phi\\mathbb{E}\\_{p(z,r)}[D\\_\\phi(z,r)]-\\mathbb{E}\\_{p(z)p(r)}[D\\_\\phi(z,r)]$$å…¶ä¸­$\\theta_C$ å’Œ$\\phi$åˆ†åˆ«è¡¨ç¤º $f_C$ å’Œ $D_\\phi$ çš„å‚æ•°ã€‚\nç»¼ä¸Šï¼Œ$f_C$çš„æŸå¤±å‡½æ•°ä¸ºï¼š\n$$\\mathcal{L}\\_C=\\mathcal{L}\\_{wce}+\\mathcal{L}\\_{adv}+\\beta||\\mu(x)||\\_2^2$$â€‹\nç®—æ³•çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š\nå®éªŒ æ•°æ®é›†å’Œæ¨¡å‹\nCIFAR-10ï¼šWideResNet GTSRBï¼šWideResNet ImageNetï¼šResNet-34 æ”»å‡»åŸºçº¿\nBadNetsã€Trojan attackã€Blend attackã€Sinusoidal signal attack (SIG)ã€Dynamic attackã€WaNet\né˜²å¾¡åŸºçº¿\nFine-pruning (FP) ã€Mode Connectivity Repair (MCR) ã€ Neural Attention Distillation (NAD) ã€ Anti-Backdoor Learning (ABL) ã€Decoupling-based backdoor defense (DBD)\nä½œè€…åœ¨10%ä¸­æ¯’ç‡ä¸‹å’Œå…¶ä»–é˜²å¾¡æ–¹æ³•è¿›è¡Œäº†å¯¹æ¯”ï¼Œè¯æ˜äº†è¯¥æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚\nåŒæ—¶ï¼Œä½œè€…ä¹Ÿè€ƒè™‘äº†ä¸åŒä¸­æ¯’ç‡ä¸‹é˜²å¾¡æ–¹æ³•çš„æœ‰æ•ˆæ€§\næ­¤å¤–ï¼Œä½œè€…è¿˜ç»˜åˆ¶äº†t-SNEå›¾ï¼Œä»aå’Œbå¯ä»¥çœ‹å‡ºåœ¨è®­ç»ƒåï¼Œæ··æ‚æˆåˆ†$r$å’Œå› æœæˆåˆ†$z$ä¹‹é—´å­˜åœ¨æ˜æ˜¾çš„åˆ†ç¦»ã€‚ä»cå’Œdä¸­å¯ä»¥çœ‹å‡ºï¼Œä¸­æ¯’æ ·æœ¬çš„åµŒå…¥åœ¨$r$ä¸­å½¢æˆç°‡ï¼Œè¿™è¡¨æ˜å·²ç»å­¦ä¹ äº†åé—¨è§¦å‘å™¨å’Œç›®æ ‡æ ‡ç­¾ä¹‹é—´çš„è™šå‡ç›¸å…³æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸­æ¯’æ ·æœ¬ä¸æ ·æœ¬å¯†åˆ‡ç›¸å…³ï¼Œå…¶çœŸå®æ ‡ç­¾ä½äºå»æ··æ·†åµŒå…¥$z$ä¸­ï¼Œè¿™è¡¨æ˜CBDå¯ä»¥æœ‰æ•ˆåœ°é˜²å¾¡åé—¨æ”»å‡»ã€‚\nä½œè€…æœ€åè¿˜è®¡ç®—äº†é˜²å¾¡æ‰€éœ€çš„æ—¶é—´ï¼Œå¯è§é˜²å¾¡å¹¶ä¸éœ€è¦æ›´å¤šé¢å¤–çš„æ—¶é—´\n","date":"2024-05-07T14:30:00+08:00","image":"https://lbqaq.top/p/backdoor-defense-via-deconfounded-representation-learning/117158168.webp","permalink":"https://lbqaq.top/p/backdoor-defense-via-deconfounded-representation-learning/","title":"Backdoor Defense via Deconfounded Representation Learning"},{"content":"æœ€è¿‘å°†è·¯ç”±å™¨ä¸Šçš„å·¥å…·æ¢ä¸ºå°çŒ«ï¼Œä½¿ç”¨é»˜è®¤çš„redir-hostæ¨¡å¼è™½ç„¶èƒ½ç”¨ï¼Œä½†æ€»æ˜¯å‡ºç°å„ç§å„æ ·å¥‡æ€ªçš„é—®é¢˜ï¼Œå†åŠ ä¸Šå°çŒ«å®˜æ–¹å·²ç»åˆ é™¤äº†redir-hostæ¨¡å¼ï¼Œäºæ˜¯æˆ‘ä¾¿æƒ³æ‰¾åˆ°ä¸€ä¸ªåŸºäºfake-ipçš„åˆ†æµæ–¹å¼ã€‚é€šè¿‡åœ¨äº’è”ç½‘ä¸Šæ£€ç´¢å‘ç°ï¼Œæ‰¾åˆ°äº†è¿™ç¯‡æ–‡ç« â€”â€”ã€ŠåŸºäº DNS çš„å†…ç½‘é€æ˜ä»£ç†åˆ†æµæ–¹æ¡ˆã€‹ã€‚ä»”ç»†ç ”è¯»ä¸‹æ¥ï¼Œå®Œç¾ç¬¦åˆæˆ‘çš„éœ€æ±‚ï¼Œç„¶è€Œï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯å†…å­˜æ‰è¥Ÿè§è‚˜çš„ç¡¬è·¯ç”±ï¼Œå¹¶æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´è£…ä¸‹AdGuardHome+mosdns+å°çŒ«ä¸‰å‘˜å¤§å°†ã€‚äºæ˜¯ï¼Œæˆ‘ä¾¿åœ¨ä»–æ–¹æ¡ˆçš„åŸºç¡€ä¸Šåˆ é™¤äº†AdGuardHomeï¼Œä¼˜åŒ–å‡ºäº†ç°åœ¨çš„æ–¹æ¡ˆã€‚\nå®ç°æ•ˆæœ å’ŒåŸæ¥çš„æ–¹æ¡ˆä¸€æ ·ï¼Œæˆ‘å°±ç›´æ¥ç²˜è´´äº†ã€‚\nåŸºäºDNSçš„æµé‡åˆ†æµï¼Œå›½å†…æµé‡ç»•è¿‡å°çŒ«æ ¸å¿ƒ ç”¨Fake-IPæ¨¡å¼æ¥è§£å†³DNSæ±¡æŸ“çš„é—®é¢˜ï¼Œä½†é™åˆ¶Fake-IPçš„èŒƒå›´ï¼Œä¸éœ€è¦ä»£ç†çš„åŸŸåä»è¿”å›æ­£å¸¸IP ä¸ç”¨å†è´¹å¿ƒæ‰¾æ— æ±¡æŸ“çš„DNSæœåŠ¡å™¨ï¼Œä½¿ç”¨è¿è¥å•†æä¾›çš„DNSä¹Ÿæ²¡é—®é¢˜ å› ä¸ºå½»åº•è§£å†³äº†DNSæ±¡æŸ“ï¼Œå¯ä»¥æ”¾å¿ƒç¼“å­˜DNSè¯·æ±‚ç»“æœ å®Œç¾å…¼å®¹IPv6ã€‚å›½å†…æµé‡å¯æ­£å¸¸ä½¿ç”¨IPv6æœåŠ¡ã€‚åªè¦ä»£ç†æœ‰IPv6å‡ºå£ï¼Œé‚£å›½å¤–ä¹Ÿå¯æ­£å¸¸ä½¿ç”¨ã€‚ å…¼å®¹BT/PTåº”ç”¨ï¼Œæ— éœ€ç‰¹æ®Šé…ç½®ä¹Ÿä¸ä¼šæ¶ˆè€—ä»£ç†æµé‡ å¯ä»¥æ¾åˆ‡æ¢å†…ç½‘è®¾å¤‡æ˜¯å¦èµ°ä»£ç† é‡åˆ°é—®é¢˜ åœ¨æŒ‰ç…§åŸæ¥çš„æ–¹æ¡ˆæ„å»ºå¹¶åˆ å»AdGuardHomeåï¼Œå¯ä»¥å®ç°å¤§éƒ¨åˆ†çš„åŠŸèƒ½ã€‚ç„¶è€Œåœ¨æˆ‘çš„ä½¿ç”¨ä¸­ï¼Œå´é‡åˆ°äº†ä¸€ä¸ªå…³é”®çš„é—®é¢˜ï¼šæ— æ³•åŒºåˆ†æµé‡æ¥æºâ€”â€”ç”±äºmosdnsæ˜¯ä½œä¸ºDnsmasqçš„ä¸Šæ¸¸æ¥ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æ— æ³•è¯†åˆ«è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼Œæ•…æ— æ³•å®ç°æ˜¯å¦èµ°ä»£ç†ã€‚\nä¸ºæ­¤ï¼Œæˆ‘å°è¯•å°†mosdnsä»£æ›¿dnsmasqæ¥ç›‘å¬53ç«¯å£ï¼Œç»“æœåˆé‡åˆ°äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼šæ‰€æœ‰çš„è¯·æ±‚éƒ½è¿”å›fake-ipâ€”â€”ç”±äºdnså­˜åœ¨ä¸»æœºåè§£æåŠŸèƒ½ï¼Œå¯¼è‡´è¯·æ±‚è¢«é”™è¯¯çš„å‘å¾€å°çŒ«çš„DNSç«¯å£ï¼Œä»è€Œè¿”å›äº†fake-ipã€‚\næ–¹æ¡ˆè®¾è®¡ ä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘é‡æ–°è®¾è®¡äº†DNSè§£æçš„æµç¨‹ï¼Œä»è€Œå¾—åˆ°äº†ç°åœ¨çš„è¿™ä¸€å¥—æ–¹æ¡ˆã€‚\nDNSåˆ†æµ graph TB client[DNS è¯·æ±‚] -- é˜²ç«å¢™åŠ«æŒ --\u003e mosdns mosdns -- éœ€è¦ä»£ç†çš„è®¾å¤‡ --\u003e query[æŒ‰è§„åˆ™è¿›è¡ŒDNSæŸ¥è¯¢] mosdns -- ä¸éœ€è¦ä»£ç†çš„è®¾å¤‡ --\u003e dnsmasq query -- å›½å†…åŸŸå --\u003e dnsmasq query -- å›½å¤–åŸŸå --\u003e drop_ipv6[\\å¿½ç•¥ IPv6 è¯·æ±‚/] query -- å…¶å®ƒ --\u003e fallback fallback -- å›½å†…IP --\u003e dnsmasq fallback -- å›½å¤–IP --\u003e drop_ipv6 dnsmasq --\u003e sp_dns[çœŸå®IP] query -- åŸŸåç™½åå• --\u003e dnsmasq query -- åŸŸåç°åå• --\u003e drop_ipv6 drop_ipv6 --\u003e fake[Fake IP] ç»è¿‡DNSåˆ†æµåï¼Œæ‰€æœ‰éœ€è¦ä»£ç†çš„åŸŸåéƒ½åˆ†é…åˆ°äº†Fake IPï¼Œæ— éœ€ä»£ç†çš„åŸŸåéƒ½æ˜¯ç”±è¿è¥å•†DNSè¿”å›çš„æœ€ä¼˜ç»“æœã€‚å°çŒ«çš„DNSåœ¨Fake IPæ¨¡å¼ä¸‹å¯ä»¥æ— éœ€è¯·æ±‚ç½‘ç»œç›´æ¥è¿”å›ç»“æœï¼Œæ‰€ä»¥æ•´ä½“çš„DNSå“åº”é€Ÿåº¦éå¸¸å¿«ã€‚åœ¨å¤„ç†Fake IPçš„æµé‡æ—¶ï¼Œå°çŒ«ä¼šæŠŠhostnameå‘é€åˆ°è¿œç«¯è¿›è¡ŒDNSè§£æï¼Œä¹Ÿå°±è‡ªç„¶ä¸å­˜åœ¨DNSæ±¡æŸ“çš„é—®é¢˜äº†ã€‚\nä¿®å¤åœ°å€è§£æé”™è¯¯ ç”±äºdnså­˜åœ¨ä¸»æœºåè§£æåŠŸèƒ½ï¼Œä¼šå¯¼è‡´è¯·æ±‚é”™è¯¯çš„è½¬å‘ã€‚æ­£æ‰€è°“â€œå¤´ç—›åŒ»å¤´ï¼Œè„šç—›åŒ»è„šâ€ï¼Œæœ€ç®€å•å’Œæ— è„‘çš„æ–¹æ³•å°±æ˜¯ç›´æ¥å…³é—­è¿™ä¸ªåŠŸèƒ½ï¼š\nåœ¨ç½‘ç»œ-DHCP/DNS-é«˜çº§è®¾ç½®é‡Œï¼Œå°†æœ¬åœ°åŸŸåé‡Œçš„å€¼åˆ é™¤ã€‚ï¼ˆæœªæµ‹è¯•ï¼Œä¸ç¡®å®šğŸ¤”ï¼‰\nä½†æ˜¯æˆ‘ä»¬éƒ½ä½¿ç”¨äº†mosdnsäº†ï¼Œä¸ºä»€ä¹ˆä¸å¥½å¥½çš„åˆ©ç”¨å®ƒé‚£å¼ºå¤§çš„è§„åˆ™å‘¢ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ‰å…³ä¸»æœºåè§£æçš„æµé‡å…¨éƒ¨è½¬å‘åˆ°dnsmasqï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºé—®é¢˜äº†ã€‚\nåŒºåˆ†æµé‡æ¥æº ä¸€å¼€å§‹ï¼Œmosdnsæ˜¯ä½œä¸ºdnsmasqçš„ä¸Šæ¸¸çš„ï¼Œæ‰€ä»¥æ‰€æœ‰çš„è¯·æ±‚æ¥æºéƒ½æ˜¯æœ¬åœ°ï¼Œè¿™å°±å¯¼è‡´äº†æˆ‘ä»¬æ— æ³•æ§åˆ¶mosdnsï¼Œè®©å…¶ä¸ºä¸éœ€è¦ä»£ç†çš„è®¾å¤‡åˆ†é…çœŸå®çš„IPã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰dnsè¯·æ±‚é€šè¿‡é˜²ç«å¢™åŠ«æŒåˆ°mosdnsä¸Šï¼Œå°±èƒ½çŸ¥é“è®¾å¤‡çš„æ¥æºçš„ipäº†ã€‚å…³äºé˜²ç«å¢™çš„å†™æ³•ï¼Œæˆ‘å‚è€ƒäº†luci-app-adguardhomeçš„å¼€æºä»£ç ã€‚\nä½†æ˜¯è¿™æ ·è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œç”±äºæˆ‘ä»¬é…ç½®äº†ipv6ï¼Œæ‰€ä»¥è¯·æ±‚çš„å®¢æˆ·ç«¯åœ°å€å¾ˆå¤§å¯èƒ½ä¹Ÿæ˜¯ipv6çš„ã€‚ç”±äºipv6åœ°å€æ”¯æŒæ— çŠ¶æ€åˆ†é…ï¼Œè¿™å°±å¯¼è‡´è¯·æ±‚çš„åœ°å€ä¼šä¸€ç›´å˜åŠ¨ï¼Œè¿™ä¹Ÿå¯¼è‡´æ— æ³•ä¸ºç‰¹å®šå®¢æˆ·ç«¯å®ç°åˆ†æµã€‚è¿™é‡Œæˆ‘é€‰æ‹©äº†æœ€ç®€å•å’Œæ— è„‘çš„æ–¹æ³•â€”â€”ç›´æ¥å…³é—­ipv6çš„DNSæœåŠ¡ã€‚é€šè¿‡æŸ¥è¯¢Openwrtçš„å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬å‘ç°å®˜æ–¹æä¾›äº†å…³é—­ipv6 DNSæœåŠ¡çš„æ–¹æ³•ã€‚è¿™æ ·å°±å¯ä»¥è®©å®¢æˆ·ç«¯å§‹ç»ˆé€šè¿‡ipv4æ¥è¯·æ±‚äº†ã€‚ç¡®ä¿äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬çš„é˜²ç«å¢™ä¹Ÿåªç”¨åŠ«æŒipv4çš„æµé‡äº†ã€‚\nå…·ä½“é…ç½® ä¸Šé¢éƒ½åœ¨è®²æ€è·¯ï¼Œç»ˆäºè½®åˆ°å…·ä½“çš„é…ç½®äº†ã€‚æˆ‘ä»¬ç°åœ¨åªéœ€è¦å°çŒ«å’Œluci-app-mosdnsè¿™ä¸¤ä¸ªåŒ…å°±å¥½äº†ã€‚\nå°çŒ« æ’ä»¶è®¾ç½®Â -Â æ¨¡å¼è®¾ç½®Â -Â è¿è¡Œæ¨¡å¼ï¼š åˆ‡æ¢åˆ°Â Fake-IPï¼ˆå¢å¼ºï¼‰æ¨¡å¼ æ’ä»¶è®¾ç½®Â -Â DNS è®¾ç½®Â -Â æœ¬åœ° DNS åŠ«æŒÂ é€‰æ‹©Â ç¦ç”¨ æ’ä»¶è®¾ç½®Â -Â æµé‡æ§åˆ¶Â -Â ç»•è¿‡ä¸­å›½å¤§é™† IPÂ å–æ¶ˆå‹¾é€‰ æ’ä»¶è®¾ç½®Â -Â æµé‡æ§åˆ¶Â -Â ä»…å…è®¸å†…ç½‘Â å¼€å¯ æ’ä»¶è®¾ç½®Â -Â IPv6 è®¾ç½®Â è¿™é¡µçš„é€‰é¡¹å…¨éƒ½å…³é—­å°±è¡Œäº† è¦†å†™è®¾ç½®Â -Â å¸¸è§„è®¾ç½®Â è¿™é‡Œéƒ½ä¸ç”¨æ”¹ï¼Œåªéœ€è¦è®°ä½ DNS ç›‘å¬ï¼Œåé¢é…ç½® mosdns è¦ç”¨ è¦†å†™è®¾ç½®Â -Â DNS è®¾ç½®Â -Â è‡ªå®šä¹‰ä¸Šæ¸¸ DNS æœåŠ¡å™¨Â å‹¾é€‰ è¦†å†™è®¾ç½®Â -Â DNS è®¾ç½®Â -Â è¿½åŠ ä¸Šæ¸¸ DNSÂ å‹¾é€‰ è¦†å†™è®¾ç½®Â -Â DNS è®¾ç½®Â -Â è¿½åŠ é»˜è®¤ DNSÂ å‹¾é€‰ è¦†å†™è®¾ç½®Â -Â DNS è®¾ç½®Â -Â Fake-IP æŒä¹…åŒ–Â å‹¾é€‰ è¦†å†™è®¾ç½®Â -Â DNS è®¾ç½®Â é¡µé¢ä¸‹æ–¹Â NameServerï¼ŒFallBackï¼ŒDefault-NameServerÂ é‡Œçš„ DNS æœåŠ¡å™¨å…¨éƒ½å–æ¶ˆå‹¾é€‰ï¼Œæˆ‘ä»¬åªç”¨è¿è¥å•†æä¾›çš„ DNS æœåŠ¡å™¨å°±å¤Ÿäº†ï¼Œä¸€èˆ¬è¿è¥å•† DNS éƒ½æ˜¯æœ€å¿«çš„ï¼Œä¹Ÿæ˜¯ CDN æœ€ä¼˜åŒ–çš„ã€‚ æ’ä»¶è®¾ç½®Â -Â å¼€å‘è€…é€‰é¡¹ é‡Œï¼Œæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸‹é˜²ç«å¢™è§„åˆ™ï¼Œå¢åŠ å¦‚ä¸‹è¿™äº›è¡Œã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 LOG_OUT \u0026#34;limit route to only fake ips with proxy port 7892\u0026#34; /etc/mosdns/genipset.sh iptables -t nat -D openclash -p tcp -j REDIRECT --to-ports 7892 iptables -t nat -A openclash -m set --match-set telegram dst -p tcp -j REDIRECT --to-ports 7892 LOG_OUT \u0026#34;restart mosdns\u0026#34; /etc/init.d/mosdns restart LOG_OUT \u0026#34;å°†53ç«¯å£é‡å®šå‘åˆ°mosdns\u0026#34; iptables -t nat -D PREROUTING -p udp -d 192.168.6.1 --dport 53 -j REDIRECT --to-ports 5335 iptables -t nat -A PREROUTING -p udp -d 192.168.6.1 --dport 53 -j REDIRECT --to-ports 5335 iptables -t nat -D PREROUTING -p tcp -d 192.168.6.1 --dport 53 -j REDIRECT --to-ports 5335 iptables -t nat -A PREROUTING -p tcp -d 192.168.6.1 --dport 53 -j REDIRECT --to-ports 5335 è¿™é‡Œæœ‰å‡ ä¸ªæ³¨æ„ç‚¹ï¼Œéƒ½æ˜¯æˆ‘è¸©è¿‡çš„å‘ğŸ˜¢ï¼š\nå¯èƒ½æ˜¯æˆ‘å†…æ ¸ç‰ˆæœ¬å¤ªæ—§äº†ï¼Œè¿™é‡Œä½¿ç”¨ä»»ä½•å˜é‡éƒ½æ˜¯ç©ºå€¼ï¼Œæ‰€ä»¥æˆ‘æŠŠæ‰€æœ‰åœ°å€éƒ½å†™æ­»äº†ï¼Œè®°å¾—æ ¹æ®è‡ªå·±çš„è·¯ç”±å™¨åœ°å€è¿›è¡Œä¿®æ”¹ ä¸è¦å¿˜è®°åŠ«æŒTCPæµé‡ï¼æˆ‘ä¹‹å‰ä»…ä»…åŠ«æŒäº†UDPæµé‡å¯¼è‡´æµè§ˆå™¨ä¸€ç›´è¯·æ±‚åˆ°çœŸå®ipè€Œæ— æ³•è®¿é—®ã€‚ 2024.09.26æ›´æ–° ä½¿ç”¨nftablesçš„é«˜ç‰ˆæœ¬openwrtéœ€è¦ä½¿ç”¨ä¸‹é¢çš„è„šæœ¬ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 LOG_OUT \u0026#34;Start Add Custom Firewall Rules...\u0026#34; FW4=$(command -v fw4) en_mode=$(uci -q get openclash.config.en_mode) proxy_port=$(uci -q get openclash.config.proxy_port) if [ \u0026#34;$en_mode\u0026#34; == \u0026#34;fake-ip\u0026#34; ]; then LOG_OUT \u0026#34;limit route to only fake ips with proxy port $proxy_port\u0026#34; /root/genipset.sh if [ -n \u0026#34;$FW4\u0026#34; ]; then handle=$(nft -a list chain inet fw4 openclash | grep \u0026#39;ip protocol tcp counter\u0026#39; | awk \u0026#39;{print $NF}\u0026#39;) LOG_OUT \u0026#34;deleting nft rule handle $handle\u0026#34; nft delete rule inet fw4 openclash handle $handle nft add rule inet fw4 openclash ip protocol tcp ip daddr @telegram counter redirect to $proxy_port else iptables -t nat -D openclash -p tcp -j REDIRECT --to-ports $proxy_port iptables -t nat -A openclash -m set --match-set telegram dst -p tcp -j REDIRECT --to-ports $proxy_port fi LOG_OUT \u0026#34;restart mosdns\u0026#34; /etc/init.d/mosdns restart LOG_OUT \u0026#34;å°†53ç«¯å£é‡å®šå‘åˆ°mosdns\u0026#34; if [ -n \u0026#34;$FW4\u0026#34; ]; then ! nft --check list table inet mosdns \u0026gt; \u0026#34;/dev/null\u0026#34; 2\u0026gt;\u0026amp;1 || nft delete table inet mosdns nft add table inet mosdns nft add chain inet mosdns prerouting \u0026#34;{ type nat hook prerouting priority -110; policy accept; }\u0026#34; nft add rule inet mosdns prerouting \u0026#34;meta nfproto { ipv4 } udp dport 53 ip daddr 192.168.6.1 counter redirect to :5335 comment \\\u0026#34;MOSDNS HIJACK\\\u0026#34;\u0026#34; nft add rule inet mosdns prerouting \u0026#34;meta nfproto { ipv4 } tcp dport 53 ip daddr 192.168.6.1 counter redirect to :5335 comment \\\u0026#34;MOSDNS HIJACK\\\u0026#34;\u0026#34; else iptables -t nat -D PREROUTING -p udp -d 192.168.6.1 --dport 53 -j REDIRECT --to-ports 5335 iptables -t nat -A PREROUTING -p udp -d 192.168.6.1 --dport 53 -j REDIRECT --to-ports 5335 iptables -t nat -D PREROUTING -p tcp -d 192.168.6.1 --dport 53 -j REDIRECT --to-ports 5335 iptables -t nat -A PREROUTING -p tcp -d 192.168.6.1 --dport 53 -j REDIRECT --to-ports 5335 fi fi genipset.sh çš„ä»£ç å¦‚ä¸‹ï¼Œè¿™æ˜¯é’ˆå¯¹æŸäº›åº”ç”¨ä¸é€šè¿‡DNSç›´æ¥ç”¨ipè®¿é—®ï¼Œè¦å°†è¿™éƒ¨åˆ†æµé‡åŠ«æŒåˆ°å°çŒ«ã€‚è¿™ä¸ªæ–‡ä»¶æ”¾åˆ°è·¯ç”±å™¨ä¸Šåï¼Œè®°å¾—è¦æ‰§è¡Œ chmod a+x /etc/mosdns/genipset.sh ç»™å®ƒèµ‹äºˆå¯æ‰§è¡Œæƒé™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #!/bin/bash tag=\u0026#34;telegram\u0026#34; filename=\u0026#34;/etc/mosdns/data/telegram-cidr.txt\u0026#34; FW4=$(command -v fw4) if test -f \u0026#34;$filename\u0026#34;; then if [ -n \u0026#34;$FW4\u0026#34; ]; then nft add set inet fw4 \u0026#34;$tag\u0026#34; { type ipv4_addr\\; flags interval\\; auto-merge\\; } nft add set inet fw4 \u0026#34;${tag}6\u0026#34; { type ipv6_addr\\; flags interval\\; auto-merge\\; } nft flush set inet fw4 \u0026#34;$tag\u0026#34; nft flush set inet fw4 \u0026#34;${tag}6\u0026#34; fi ipset create \u0026#34;$tag\u0026#34; hash:net -! ipset create \u0026#34;${tag}6\u0026#34; hash:net family inet6 -! ipset flush \u0026#34;$tag\u0026#34; ipset flush \u0026#34;${tag}6\u0026#34; while read p; do if ! grep -q \u0026#34;:\u0026#34; \u0026lt;\u0026lt;\u0026lt; \u0026#34;$p\u0026#34;; then if [ -n \u0026#34;$FW4\u0026#34; ]; then nft add element inet fw4 \u0026#34;$tag\u0026#34; { \u0026#34;$p\u0026#34; } fi ipset add \u0026#34;$tag\u0026#34; \u0026#34;$p\u0026#34; else if [ -n \u0026#34;$FW4\u0026#34; ]; then nft add element inet fw4 \u0026#34;${tag}6\u0026#34; { \u0026#34;$p\u0026#34; } fi ipset add \u0026#34;${tag}6\u0026#34; \u0026#34;$p\u0026#34; fi done \u0026lt;\u0026#34;$filename\u0026#34; else echo \u0026#34;$filename missing.\u0026#34; fi Mosdns é€‰è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œå…³é—­DNS è½¬å‘çš„å‹¾ï¼Œç„¶åæˆ‘å°±ç›´æ¥è´´é…ç½®äº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 # Powered by luoboQAQ # é€‚é…Clashçš„fake-ipæ¨¡å¼ # 24-08-29ï¼šè®©ç°åå•ä¼˜å…ˆç”Ÿæ•ˆï¼Œé¿å…è¢«geosite_cnæŠ¢ç­” log: level: info file: \u0026#34;/tmp/log/mosdns.log\u0026#34; # API å…¥å£è®¾ç½® api: http: \u0026#34;0.0.0.0:9091\u0026#34; plugins: # å›½å†…åŸŸå - tag: geosite_cn type: domain_set args: files: - \u0026#34;/etc/mosdns/data/direct-list.txt\u0026#34; - \u0026#34;/etc/mosdns/rule/whitelist.txt\u0026#34; # å›½å†… IP - tag: geoip_cn type: ip_set args: files: - \u0026#34;/etc/mosdns/data/CN-ip-cidr.txt\u0026#34; # å›½å¤–åŸŸå - tag: geosite_no_cn type: domain_set args: files: - \u0026#34;/etc/mosdns/data/proxy-list.txt\u0026#34; # ç°åå•åŸŸåï¼Œå¼ºåˆ¶è¿œç¨‹è§£æ - tag: greylist type: domain_set args: files: - \u0026#34;/etc/mosdns/rule/greylist.txt\u0026#34; # é»‘åå•åŸŸåï¼šå±è”½ DNS è§£æ - tag: blocklist type: domain_set args: files: - \u0026#34;/etc/mosdns/rule/blocklist.txt\u0026#34; # ddnsåŸŸå - tag: ddnslist type: domain_set args: files: - \u0026#34;/etc/mosdns/rule/ddnslist.txt\u0026#34; # è‡ªå®šä¹‰ Hosts é‡å†™ - tag: hosts type: hosts args: files: - \u0026#34;/etc/mosdns/rule/hosts.txt\u0026#34; # å¹¿å‘ŠåŸŸå - tag: adlist type: domain_set args: files: - \u0026#34;/etc/mosdns/data/ad-domains.txt\u0026#34; # PTRé»‘åå• - tag: local_ptr type: domain_set args: files: - \u0026#34;/etc/mosdns/rule/local-ptr.txt\u0026#34; # ç¼“å­˜æ’ä»¶ - tag: cache type: cache args: size: 10240 lazy_cache_ttl: 86400 # å°†ç¼“å­˜ä¿å­˜åœ¨ç£ç›˜ # dump_file: /tmp/mosdns/cache.dump # å›½å†…è§£æ - tag: local_sequence type: sequence args: - exec: forward 127.0.0.1 # å›½å¤–è§£æ - tag: remote_sequence type: sequence args: - matches: - qtype 28 exec: reject 0 - exec: forward 127.127.127.127:7874 - exec: ttl 1800-0 # æœ‰å“åº”ç»ˆæ­¢è¿”å› - tag: has_resp_sequence type: sequence args: - matches: qname $ddnslist exec: ttl 5-5 - matches: has_resp exec: accept # fallback ç”¨æœ¬åœ°æœåŠ¡å™¨ sequence # è¿”å›éå›½å†… ip åˆ™ drop_resp - tag: fallback_local type: sequence args: - exec: $local_sequence - matches: \u0026#34;!resp_ip $geoip_cn\u0026#34; exec: drop_resp # fallback ç”¨è¿œç¨‹æœåŠ¡å™¨ sequence - tag: fallback type: fallback args: primary: fallback_local secondary: remote_sequence threshold: 500 always_standby: true # ä¸»è¦çš„è¿è¡Œé€»è¾‘æ’ä»¶ # sequence æ’ä»¶ä¸­è°ƒç”¨çš„æ’ä»¶ tag å¿…é¡»åœ¨ sequence å‰å®šä¹‰ï¼Œ # å¦åˆ™ sequence æ‰¾ä¸åˆ°å¯¹åº”æ’ä»¶ã€‚ - tag: main_sequence type: sequence args: # ä¸èµ°ä»£ç†çš„ip #- matches: client_ip 192.168.6.144 # exec: forward 127.0.0.1 #- exec: jump has_resp_sequence # hosts - exec: $hosts - exec: jump has_resp_sequence - matches: - \u0026#34;!qname $ddnslist\u0026#34; - \u0026#34;!qname $blocklist\u0026#34; - \u0026#34;!qname $adlist\u0026#34; - \u0026#34;!qname $local_ptr\u0026#34; exec: $cache - exec: jump has_resp_sequence # æŸ¥è¯¢æ‹’ç»åŸŸå - matches: qname $blocklist exec: reject 3 - matches: qname $adlist exec: reject 3 - matches: qtype 65 exec: reject 3 - matches: - qtype 12 - qname $local_ptr exec: reject 3 # handle local ptr - matches: - qtype 12 exec: forward 127.0.0.1 - exec: jump has_resp_sequence # handle lan query - matches: - qname regexp:lan regexp:local regexp:arpa exec: forward 127.0.0.1 - exec: jump has_resp_sequence - matches: - qname $ddnslist exec: $local_sequence - exec: jump has_resp_sequence # ç°åå•åœ¨geosite_cnä¹‹å‰æŸ¥è¯¢ - matches: - qname $greylist exec: $remote_sequence - exec: jump has_resp_sequence - matches: - qname $geosite_cn exec: $local_sequence - exec: jump has_resp_sequence - matches: - qname $geosite_no_cn exec: $remote_sequence - exec: jump has_resp_sequence - exec: $fallback - tag: udp_server type: udp_server args: entry: main_sequence listen: \u0026#34;:5335\u0026#34; - tag: tcp_server type: tcp_server args: entry: main_sequence listen: \u0026#34;:5335\u0026#34; åœ¨è¿™ä¸ªé…ç½®ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†ä»¥ä¸‹é¡¹ç›®æä¾›çš„åŸŸå/IPæ–‡ä»¶ï¼š\ndirect-list.txtå’Œproxy-list.txt CN-ip-cidr.txt ad-domains.txt telegram-cidr.txt ä¸ºäº†æ–¹ä¾¿æœŸé—´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è„šæœ¬ä¸€é”®æ›´æ–°å®ƒä»¬ï¼š\n1 2 3 4 5 6 7 #!/bin/sh curl -o \u0026#34;/etc/mosdns/data/direct-list.txt\u0026#34; \u0026#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/direct-list.txt\u0026#34; curl -o \u0026#34;/etc/mosdns/data/proxy-list.txt\u0026#34; \u0026#34;https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/proxy-list.txt\u0026#34; curl -o \u0026#34;/etc/mosdns/data/CN-ip-cidr.txt\u0026#34; \u0026#34;https://cdn.jsdelivr.net/gh/Hackl0us/GeoIP2-CN@release/CN-ip-cidr.txt\u0026#34; curl -o \u0026#34;/etc/mosdns/data/ad-domains.txt\u0026#34; \u0026#34;https://anti-ad.net/domains.txt\u0026#34; curl --resolve core.telegram.org:443:`nslookup -port=5335 core.telegram.org 192.168.6.1 | grep 198 | cut -d \u0026#34;:\u0026#34; -f2 | tr -d \u0026#34; \u0026#34;` -o \u0026#34;/etc/mosdns/data/telegram-cidr.txt\u0026#34; \u0026#34;https://core.telegram.org/resources/cidr.txt\u0026#34; /etc/init.d/mosdns restart ç”±äºæŸä¸ªåœ°å€éœ€è¦å°çŒ«æ‰èƒ½è®¿é—®ï¼ŒåŒæ—¶æˆ‘ä»¬æ²¡æœ‰åŠ«æŒè·¯ç”±å™¨çš„dnsæŸ¥è¯¢ï¼Œæ‰€ä»¥éœ€è¦å…ˆæ‰‹åŠ¨æŸ¥ä¸€ä¸‹ipå†ä¸‹è½½ã€‚\nåè®° è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¤§å·¥ç¨‹äº†ï¼Œå‰å‰ååä¹ŸèŠ±äº†å¥½å¤šå¤©ï¼Œä¸è¿‡åšå®Œåä½¿ç”¨èµ·æ¥è¿˜æ˜¯éå¸¸ä¸æ»‘å’Œé¡ºç•…çš„ï¼Œæœ€é‡è¦çš„æ˜¯è‡ªå·±æŠ˜è…¾å‡ºæ¥è¿™æ˜¯åœ¨æ˜¯å¤ªé…·äº†ğŸ¤“ã€‚è¿™é‡Œè¿˜æ˜¯è¦æ„Ÿè°¢æ–¹æ¡ˆçš„åŸä½œè€…å’Œå¼€æºé¡¹ç›®ä½œè€…ï¼Œæˆ‘ä»ä¸­å­¦åˆ°äº†è®¸å¤šğŸ™ã€‚\nåç»­æ›´æ–° 2024.08.29 åœ¨ä½¿ç”¨æ—¶ï¼Œä¼šå‘ç°Google Playå•†åº—ä¸èƒ½æ­£å¸¸ä¸‹è½½æˆ–æ›´æ–°åº”ç”¨ã€‚åœ¨ã€Šå¤§é™†ç”¨æˆ· Google Play å•†åº—æ— æ³•ä¸‹è½½æˆ–æ›´æ–°åº”ç”¨çš„åŸå› åˆ†æä¸è§£å†³åŠæ³•ã€‹è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½œè€…æŒ‡å‡ºäº†è¿™æ˜¯ç”±äºå›½å†…ç‰ˆå•†åº—çš„apiè¯·æ±‚é“¾æ¥å’Œä¸‹è½½é“¾æ¥åˆ†åˆ«é€šè¿‡ç›´è¿å’Œä»£ç†å¯¼è‡´çš„é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯è®©è¯·æ±‚éƒ½ä»ä»£ç†å‡ºå»ã€‚\nå…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸‹é¢è¿™å‡ ä¸ªåŸŸåæ·»åŠ åˆ°ä»£ç†è§„åˆ™ä¸­\n1 2 3 domain:googleapis.cn domain:googleapis.com domain:xn--ngstr-lra8j.com Mosdns\nåœ¨è§„åˆ™åˆ—è¡¨-ç°åå•ä¸­æ·»åŠ ä¸Šé¢çš„åŸŸå å°çŒ«\nåœ¨è¦†å†™è®¾ç½®-è§„åˆ™è®¾ç½®-è‡ªå®šä¹‰è§„åˆ™ä¸­æ·»åŠ ä¸‹é¢çš„åˆ†æµè§„åˆ™ 1 2 3 4 5 rules: # Google Play - DOMAIN-SUFFIX,googleapis.cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹© - DOMAIN-SUFFIX,googleapis.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹© - DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹© è¿™æ ·å°±å¯ä»¥æ­£å¸¸çš„ä½¿ç”¨Playå•†åº—äº†\n2024.09.26 å°†è·¯ç”±å™¨åˆ·åˆ°äº†æœ€æ–°çš„immortalWrtï¼Œé˜²ç«å¢™ä»iptableså‡çº§åˆ°äº†nftablesï¼Œæ‰€ä»¥åŸæ¥çš„å‘½ä»¤ä¸èƒ½ç”¨äº†ï¼Œéœ€è¦ä½¿ç”¨æ–°çš„å‘½ä»¤ã€‚\n","date":"2024-03-22T20:47:00+08:00","image":"https://lbqaq.top/p/dns-shunt/115597971.webp","permalink":"https://lbqaq.top/p/dns-shunt/","title":"åŸºäºDNSçš„åˆ†æµæ–¹æ¡ˆ"},{"content":"æ”¾å‡å›å®¶ï¼Œæ‰‹é‡Œåªæœ‰æ€§èƒ½å­±å¼±çš„è½»è–„æœ¬ï¼Œç”¨å®ƒè·‘ä¸ªå®éªŒæˆ–è€…æ˜¯æ‰“ä¸ªæ¸¸æˆå®åœ¨æ˜¯å¤ªéš¾ä¸ºå®ƒäº†ã€‚äºæ˜¯ï¼Œè¿œç¨‹åˆ°å®éªŒå®¤çš„é«˜æ€§èƒ½ä¸»æœºä¾¿æ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„é€‰æ‹©ã€‚ä¸è¿‡ï¼Œå’Œä¹‹å‰åœ¨å®¿èˆå±€åŸŸç½‘ä¸²æµä¸ä¸€æ ·ï¼Œå®¶é‡Œå’Œå®éªŒå®¤å±äºä¸åŒçš„å±€åŸŸç½‘ï¼Œä¹‹é—´æ— æ³•ç›¸äº’è¿æ¥ã€‚\nåœ¨ä¹‹å‰é…ç½®å®éªŒå®¤è·¯ç”±å™¨æ—¶ï¼Œæˆ‘å·²ç»é…ç½®è¿‡äº†WireGuardã€‚é€šè¿‡åœ¨ç”µè„‘ä¸Šå®‰è£…WireGuardï¼Œæ¯æ¬¡å¼€æœºæ—¶å¯åŠ¨ä¸€ä¸‹å°±å¯ä»¥è¿å…¥å®éªŒå®¤çš„å±€åŸŸç½‘äº†ã€‚ä¼¼ä¹è¿™æ ·å·²ç»å¯ä»¥äº†ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘æƒ³åœ¨å…¶ä»–è®¾å¤‡ä¸Šè®¿é—®å®éªŒå®¤ï¼Œå°±è¦é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œè¿™å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ã€‚åŒæ—¶ï¼Œå®éªŒå®¤æƒ³è¦è®¿é—®ä½äºå®¶é‡Œçš„è®¾å¤‡ä¹Ÿæ— æ³•å®ç°ã€‚\näºæ˜¯ï¼Œæˆ‘å†³å®šé€šè¿‡æŠ˜è…¾ä¸€æ³¢è·¯ç”±å™¨ï¼Œæ¥å®ç°æ— æ„ŸçŸ¥çš„å¼‚åœ°ç»„ç½‘ã€‚\nå‡†å¤‡å·¥ä½œ 2å°åˆ·å¥½OpenWrtçš„è·¯ç”±å™¨ï¼Œå¹¶ä¿è¯æ‹¥æœ‰WireGuardåŒ…\nå¦‚æœä½ çš„å›ºä»¶é‡Œæ²¡æœ‰é¢„è£…WireGuardï¼Œå¯ä»¥é€‰æ‹©æ‰‹åŠ¨ç¼–è¯‘ï¼Œå°±åƒæˆ‘è¿™ç¯‡æ–‡ç« ä¸€æ ·ï¼ˆè¿˜æ²¡å†™ğŸ•Šï¸ï¼‰\n2å°è·¯ç”±å™¨å‡æ‹¥æœ‰å…¬ç½‘ipv6åœ°å€\nä¸€ä¸ªåŸŸåï¼Œç”¨æ¥åšddns\nå¦‚ä½•é…ç½®ddnsä¸æ˜¯æœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« æˆ–è€…ç™¾åº¦ä¸€ä¸‹\næˆ‘ä»¬é¦–å…ˆè®¾è®¡ä¸€ä¸‹ç½‘ç»œæ‹“æ‰‘ï¼Œå…¶ä¸­å®éªŒå®¤çš„ipæ®µä¸º192.168.6.0/24ï¼Œå®¶é‡Œçš„ipæ®µä¸º192.168.10.0/24ã€‚æˆ‘è¿™é‡Œé€‰å–192.168.100.0/24ä¸ºWireGuradçš„è™šæ‹Ÿå±€åŸŸç½‘ç½‘æ®µï¼Œå¹¶åˆ†åˆ«ç»™å®¶ä¸­å’Œå®éªŒå®¤è·¯ç”±å™¨åˆ†é…192.168.100.100/32å’Œ192.168.100.1/32ä¸¤ä¸ªåœ°å€ã€‚ä¸ºäº†æ¥ä¸‹æ¥ä½¿ç”¨æ–¹ä¾¿ï¼Œæˆ‘å»ºè®®ç”¨è¡¨æ ¼æ•´ç†ä¸€ä¸‹ï¼š\nå®éªŒå®¤ å®¶ å±€åŸŸç½‘æ®µ 192.168.6.0/24 192.168.10.0/24 ddnsåœ°å€ school.example.com home.example.com WireGuradæ¥å£ipåœ°å€ 192.168.100.1/32 192.168.100.100/32 å…·ä½“æ“ä½œ æ¥å£é…ç½® æˆ‘ä»¬é¦–å…ˆä»å®éªŒå®¤çš„è·¯ç”±å™¨å¼€å§‹é…ç½®ã€‚ç™»å…¥OpenWrtåå°ï¼Œä¾æ¬¡ç‚¹å‡»ç½‘ç»œâ€”â€”æ¥å£â€”â€”æ·»åŠ æ–°æ¥å£ï¼Œé€‰æ‹©åè®®ä¸ºWireGuard VPNï¼Œåç§°è¿™é‡Œéšæ„ã€‚\næ¥ç€å¼€å§‹è¿›è¡Œè¯¦ç»†çš„é…ç½®\nè¿™é‡Œçš„ç›‘å¬ç«¯å£æŒ‰ç…§ä¸ªäººå–œå¥½è‡ªå·±æŒ‡å®šå³å¯ï¼Œä¸ºäº†æ¼”ç¤ºæˆ‘åˆ†åˆ«æŒ‡å®šç«¯å£å·ä¸º6789å’Œ7890ã€‚\nå¯ä»¥çœ‹åˆ°è¾ƒæ–°çš„OpenWrtè¿™é‡Œæ˜¯æœ‰ç”Ÿæˆå¯†é’¥çš„é€‰é¡¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸ç”¨å‘½ä»¤è¡Œæ¥ç”Ÿæˆå¯†é’¥å¯¹ï¼Œä¸è¿‡æˆ‘è¿™ä¸ªç‰ˆæœ¬ç¼ºå°‘å…¬é’¥çš„æ¡†ï¼Œå¦‚æœæƒ³æŸ¥çœ‹å…¬é’¥çš„è¯ï¼Œè¦åˆ°çŠ¶æ€â€”â€”WireGuardé‡Œå»æŸ¥çœ‹ã€‚æ‰€ä»¥æˆ‘å»ºè®®è¿˜æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œé¢„å…ˆç”Ÿæˆå¥½å…¬ç§é’¥ï¼š\n1 2 3 4 5 6 7 8 # åˆ›å»ºå…¬é’¥å’Œç§é’¥ wg genkey | tee privatekey | wg pubkey \u0026gt; publickey # è·å–ç§é’¥å¤åˆ¶ä¿å­˜ cat privatekey # è·å–å…¬é’¥å¤åˆ¶ä¿å­˜ cat publickey # ç”Ÿæˆé¢„å…±äº«å¯†é’¥ wg genpsk æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤æ¬¡å…¬ç§é’¥ï¼Œé¢„å…±äº«å¯†é’¥æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åªéœ€åˆ›å»ºä¸€æ¬¡å³å¯ï¼Œä¸ºäº†ä¾¿äºä¹‹åçš„æ“ä½œï¼Œæˆ‘ä»¬å°†å…¶å­˜æ”¾åˆ°ä¸Šæ–‡åˆ—å¥½çš„è¡¨ä¸­ï¼š\nå®éªŒå®¤ å®¶ å±€åŸŸç½‘æ®µ 192.168.6.0/24 192.168.10.0/24 ddnsåœ°å€ school.example.com home.example.com WireGuradæ¥å£ipåœ°å€ 192.168.100.1/32 192.168.100.100/32 ç›‘å¬ç«¯å£ 6789 7890 WireGuradå…¬é’¥ YJF1c//jJ0K2HSZ+yNqfjBfJL6Z90lyfVCyML8To1lI= Q/gtGW5xBK5sEgPTrSo3CWqGOv3SYhzkqw8CBOJ3ZHs= WireGuradç§é’¥ 0MyNAHWVI0owbbZ3Et9gWtNFSVWiOqiHHYJAj86Wq0E= eKGSiCzaVi9IHfDLv4atx//wE8LGCR2xWAwc3XBw9kg= é¢„å…±äº«å¯†é’¥ OQrD6nvzMGQklARhwwhlrinFiumrGe2SIBxcRSOuIEo= åŒå·¦ ç‰¹åˆ«æ³¨æ„\nç§é’¥å’Œé¢„å…±äº«å¯†é’¥å°±åƒå¯†ç ä¸€æ ·ï¼Œä¸è¦è½»æ˜“æ³„éœ²ï¼Œæˆ‘è¿™é‡Œåªæ˜¯æ¼”ç¤ºç”¨æ‰å±•ç¤ºå‡ºæ¥ã€‚\næœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾çš„å°†å‰å›¾ä¸­çš„é…ç½®å¡«å¥½äº†ï¼Œä¸è¦å‹¾é€‰æ— ä¸»æœºè·¯ç”±ã€‚\nä¹‹åæˆ‘ä»¬è¦é…ç½®å¯¹ç«¯\næœ‰äº†ä¹‹å‰çš„è¡¨æ ¼ï¼Œè¿™é‡Œçš„å†…å®¹å°±å¾ˆç®€å•äº†ã€‚ç›´æ¥åç€å†™å°±å¥½äº†ã€‚æˆ‘è¿™é‡Œæ˜¯å®éªŒå®¤æ‰€ä»¥å°±å¯¹ç€å®¶çš„é‚£ä¸€åˆ—ä¾æ¬¡å¾€é‡Œé¢å¡«å³å¯ã€‚\nå…è®¸çš„IPæˆ‘ä»¬ç›´æ¥æ·»åŠ ä¸¤æ¡ï¼Œåˆ†åˆ«æ˜¯å¯¹æ–¹çš„å±€åŸŸç½‘æ®µå’Œæ¥å£ipåœ°å€ï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œå°±å¡«192.168.10.0/24å’Œ192.168.100.100/32å³å¯ã€‚ å‹¾é€‰è·¯ç”±å…è®¸çš„IP ç«¯ç‚¹ä¸»æœºå’Œç«¯å£åˆ†åˆ«å¡«å†™ddnsåœ°å€å’Œç›‘å¬ç«¯å£ã€‚ Keep-Aliveä½¿ç”¨é»˜è®¤å€¼25å³å¯ã€‚ è¿™æ ·æˆ‘ä»¬çš„WireGuardå°±ç®—é…ç½®å¥½äº†ã€‚\né˜²ç«å¢™é…ç½® ä¾æ¬¡ç‚¹å‡»ç½‘ç»œâ€”â€”é˜²ç«å¢™ï¼Œé€‰æ‹©æ·»åŠ ã€‚\nè¿™é‡Œå¤§éƒ¨åˆ†äººï¼ˆåŒ…æ‹¬ä¹‹å‰çš„æˆ‘ï¼‰ä¼šè¯´ç›´æ¥å°†WireGuardæ¥å£æ”¾å…¥LANä¸­ï¼Œä¸è¿‡è¿™æ ·è¿˜æ˜¯ä¸å¤ªä¼˜é›…ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯åˆ›å»ºä¸€ä¸ªæ–°åŒºåŸŸã€‚\nå‡ºç«™ã€å…¥ç«™ã€è½¬å‘å‡ä¸ºå…è®¸ å‹¾é€‰MSS é’³åˆ¶ï¼šè¿™ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢å†…ç½‘MTUè¿‡å¤§å¯¼è‡´WireGuardæ•ˆç‡é™ä½ æ¶µç›–çš„ç½‘ç»œä¸ºä¹‹å‰åˆ›å»ºçš„æ¥å£ å…è®¸è½¬å‘åˆ°ç›®æ ‡åŒºåŸŸå’Œå…è®¸æ¥è‡ªæºåŒºåŸŸçš„è½¬å‘éƒ½é€‰æ‹©LAN ä¿å­˜åé€‰æ‹©ä¸Šé¢çš„é€šä¿¡è§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯è·¯ç”±å™¨ä¸Šçš„ç«¯å£\nç”±äºWireGuardæ˜¯åŸºäºUDPçš„ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¾è¡ŒUDPæµé‡å³å¯ã€‚ç«¯å£ä¸ºä¹‹å‰è¡¨ä¸­å¡«å†™çš„ã€‚\nè‡³æ­¤ï¼Œæˆ‘ä»¬çš„é…ç½®å°±ç®—å®Œæˆäº†ï¼Œå¦ä¸€å°è·¯ç”±å™¨ä¹Ÿæ˜¯åŒæ ·çš„é…ç½®æ–¹æ³•ï¼Œæˆ‘å°±ä¸èµ˜è¿°äº†ã€‚\nè¸©å‘å’Œä¸€äº›æ³¨æ„äº‹é¡¹ ä¸¤ç«¯éƒ½è¦é…ç½®ç«¯ç‚¹ä¸»æœº\nWireGuardæŒ‰åŸç†æ¥è¯´ï¼Œåªè¦ä¸€æ–¹å‘èµ·æ¡æ‰‹å³å¯ç›¸äº’é€šä¿¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åªé…ç½®ä¸€ä¸ªè·¯ç”±å™¨ï¼Œè®©å®ƒå‘èµ·æ¡æ‰‹ã€‚ä¸è¿‡æˆ‘å°è¯•åå‘ç°è¿™æ ·ä¼šå¯¼è‡´åªæœ‰å‘èµ·æ¡æ‰‹çš„è·¯ç”±å™¨å¯ä»¥è¿åˆ°å¯¹ç«¯ï¼Œä¸‹é¢çš„è®¾å¤‡å°±æ— æ³•è¿æ¥ï¼Œè¢«æ¡æ‰‹çš„è·¯ç”±å™¨ä¹Ÿæ— æ³•pingé€šå‘èµ·æ¡æ‰‹çš„è·¯ç”±å™¨ã€‚ï¼ˆğŸ¤”éš¾é“æ˜¯å› ä¸ºè¢«æ¡æ‰‹çš„è·¯ç”±å™¨ä¸­æ²¡æœ‰è‡ªåŠ¨é…ç½®å¥½è·¯ç”±è¡¨å—ï¼Ÿï¼‰\nWireGuardé…ç½®å¥½åéœ€è¦é‡å¯ç«¯å£æ‰èƒ½ç”Ÿæ•ˆ\nddnså˜åŠ¨åï¼ŒWireGuardåªä¼šå°è¯•è¿æ¥ä¹‹å‰çš„åœ°å€è€Œä¸ä¼šé‡æ–°è§£æ\nå¯èƒ½æ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘å§ï¼Œè¿™æ ·åªèƒ½æ‰‹åŠ¨é‡å¯ç«¯å£æ¥è®©å…¶é‡æ–°è§£æï¼Œè¿˜æœ‰å…¶ä»–è‡ªåŠ¨åŒ–çš„æ–¹æ³•ä¸è¿‡æˆ‘å°±æ²¡æœ‰ç ”ç©¶äº†\nå‚è€ƒæ–‡çŒ® ã€è€æ¹¿åŸºã€‘WireGuard å¼‚åœ°ç»„ç½‘æ‰‹æŠŠæ‰‹æ•™å­¦ | ä»å…¥é—¨åˆ°ç²¾é€š | å±€åŸŸç½‘èåˆ_å“”å“©å“”å“© ","date":"2024-02-03T23:00:08+08:00","image":"https://lbqaq.top/p/wireguard-ipv6/104589070.webp","permalink":"https://lbqaq.top/p/wireguard-ipv6/","title":"ä½¿ç”¨WireGuard+ipv6è¿›è¡Œå¼‚åœ°ç»„ç½‘"},{"content":"èµ·å›  ç”±äºå®éªŒå®¤çš„ç½‘çº¿å£è¿‡äºç¨€å°‘ä¸”ç¦»æˆ‘è·ç¦»å¤ªè¿œï¼Œå­¦æ ¡çš„WIFIåˆæ˜¯WIFI5ï¼Œå¹³æ—¶æœ€å¤šåªèƒ½è·‘åˆ°30MB/sã€‚ä½†æˆ‘çš„ç¬”è®°æœ¬æ”¯æŒWIFi6ï¼Œå­¦æ ¡åˆæ˜¯åƒå…†ç½‘ã€‚ä¸¤æ¡åŸå› ä¸€å åŠ ï¼Œé‚£å°±ç›´æ¥ä¸ŠWIFI6çš„è·¯ç”±å™¨å§ã€‚é¦–è¦çš„é€‰æ‹©æ¡ä»¶å°±æ˜¯æ”¯æŒåˆ·æœºï¼Œåœ¨æ©å±±ä¸Šé€›äº†ä¸€é˜µå­ï¼Œå°±å†³å®šå…¥æ‰‹çº¢ç±³çš„AX6000ã€‚å¯è§£é”ã€æœ‰ç¬¬ä¸‰æ–¹å›ºä»¶ã€512MBå†…å­˜ã€‚ç‰¹åˆ«æ˜¯è¿™512MBå†…å­˜ï¼Œæ¯”èµ·æˆ‘ä¹‹å‰ç”¨çš„çº¢ç±³AC2100ï¼Œç›´æ¥ç¿»äº†4å€ï¼Œç›¸è¾ƒäºåŸæ¥éšä¾¿å¼€ä¸ªæ’ä»¶å°±æ²¡æœ‰å†…å­˜çš„æƒ…å†µï¼Œç›´æ¥èµ·é£å¥½å§ğŸ˜ã€‚\næˆæœ å…ˆæ¥ä¸€æ‰‹å€’åº(æ¯•ç«Ÿé…ç½®çš„è¿‡ç¨‹æ¯”è¾ƒæ— èŠğŸ˜‡ã€‚ä½¿ç”¨å—äº¬å¤§å­¦æµ‹é€Ÿç«™è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ç½‘é€Ÿç›´æ¥æ‹‰æ»¡ï¼Œä¸‹è½½ä¸œè¥¿çš„æ—¶å€™ç»ˆäºä¸ç”¨ç­‰é‚£ä¹ˆä¹…äº†ã€‚\nå†åŠ ä¸Šå„ç§æ’ä»¶ï¼ŒçœŸçš„å¾ˆèˆ’é€‚ğŸ¤¤ï¼Œä¸Šç½‘ä½“éªŒç›´æ¥æ‹‰æ»¡ã€‚ä¸‹é¢å°±æ˜¯å°†ç›¸å…³çš„é…ç½®è¿‡ç¨‹åšä¸ªè®°å½•ã€‚\né…ç½® è§£é”ä¸åˆ·æœº è¿™é‡Œå¯ä»¥å‚è€ƒBç«™å¤§ä½¬çš„è§†é¢‘1ï¼Œæ­¥éª¤éå¸¸è¯¦ç»†ï¼Œç›´æ¥è·Ÿç€åšå°±å¥½äº†ã€‚ä¸ºäº†å¤‡å¿˜ï¼Œæˆ‘è¿™é‡Œå†ç®€å•æŠŠæ­¥éª¤å†™ä¸€ä¸‹ã€‚\né«˜ç‰ˆæœ¬çš„ç³»ç»Ÿå·²ç»å°å µäº†è§£é”çš„æ¼æ´ï¼Œæˆ‘ä»¬è¦åšçš„ç¬¬ä¸€æ­¥å°±æ˜¯ä½¿ç”¨å°ç±³ä¿®å¤å·¥å…·è¿›è¡Œé™çº§ã€‚\nä¹‹åè¿›å…¥ç®¡ç†ç•Œé¢å¹¶ç™»å½•ï¼Œæ­¤æ—¶åœ°å€æ ¼å¼ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š\n1 http://192.168.31.15/cgi-bin/luci/;stok=030b24d39b1a4a549aa12dac23c52313/web/home#router æˆ‘ä»¬å°†/web/home#routeråˆ é™¤ï¼Œå¹¶åŠ ä¸Šä¸‹é¢ä¸€æ®µï¼š\n1 /api/misystem/set_sys_time?timezone=%20%27%20%3B%20zz%3D%24%28dd%20if%3D%2Fdev%2Fzero%20bs%3D1%20count%3D2%202%3E%2Fdev%2Fnull%29%20%3B%20printf%20%27%A5%5A%25c%25c%27%20%24zz%20%24zz%20%7C%20mtd%20write%20-%20crash%20%3B%20 å³è¿æ¥åº”è¯¥ä¸ºhttp://192.168.31.15/cgi-bin/luci/;stok=030b24d39b1a4a549aa12dac23c52313/api/......\nå›è½¦è®¿é—®ï¼Œæ˜¾ç¤º{\u0026quot;code\u0026quot;:0}è¡¨ç¤ºæˆåŠŸ\nåŒç†ï¼Œç»§ç»­æ›¿æ¢ï¼š\n1 /api/misystem/set_sys_time?timezone=%20%27%20%3b%20reboot%20%3b%20 ç­‰å¾…é‡å¯å®Œæˆ\nç™»å½•è·¯ç”±å™¨ï¼Œæ›¿æ¢ï¼š\n1 /api/misystem/set_sys_time?timezone=%20%27%20%3B%20bdata%20set%20telnet_en%3D1%20%3B%20bdata%20set%20ssh_en%3D1%20%3B%20bdata%20set%20uart_en%3D1%20%3B%20bdata%20commit%20%3B%20 ç»§ç»­æ›¿æ¢ï¼š\n1 /api/misystem/set_sys_time?timezone=%20%27%20%3b%20reboot%20%3b%20 ç­‰å¾…é‡å¯å®Œæˆ\næ­¤æ—¶telnetå·²ç»å¼€å¯ï¼Œè¿æ¥è¿›å…¥ï¼Œæ˜¾ç¤ºã€ARE U OKã€‘çš„ç•Œé¢ï¼Œè¡¨ç¤ºtelnetæˆåŠŸã€‚\nè¾“å…¥ä¸‹é¢çš„å‘½ä»¤å¼€å¯sshï¼š\n1 2 3 4 5 6 7 8 9 10 bdata set boot_wait=on bdata commit nvram set ssh_en=1 nvram set telnet_en=1 nvram set uart_en=1 nvram set boot_wait=on nvram commit sed -i \u0026#39;s/channel=.*/channel=\u0026#34;debug\u0026#34;/g\u0026#39; /etc/init.d/dropbear /etc/init.d/dropbear restart echo -e \u0026#39;admin\\nadmin\u0026#39; | passwd root ç»§ç»­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œå…³é—­å¼€å‘è€…æ¨¡å¼ï¼š\n1 mtd erase crash ä½¿ç”¨sshè¿æ¥è¿›å…¥ï¼Œå°†xwrtç›®å½•é‡Œçš„stock-initramfs-factory.ubiä¼ å…¥tmpç›®å½•\nè¾“å…¥ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿåˆ†åŒº\n1 cat /proc/cmdline è¾“å‡ºç±»ä¼¼è¿™æ ·ï¼š\n1 console=ttyS0,115200n1 loglevel=8 firmware=1 uart_en=1 æˆ‘ä»¬ä¸»è¦å…³æ³¨firmware=1è¿™é¡¹\nå¦‚firmware=0è¾“å…¥\n1 2 3 4 5 6 7 8 nvram set boot_wait=on nvram set uart_en=1 nvram set flag_boot_rootfs=1 nvram set flag_last_success=1 nvram set flag_boot_success=1 nvram set flag_try_sys1_failed=0 nvram set flag_try_sys2_failed=0 nvram commit ç„¶ååˆ·å…¥å›ºä»¶\n1 ubiformat /dev/mtd9 -y -f /tmp/stock-initramfs-factory.ubi å¦‚firmware=1è¾“å…¥\n1 2 3 4 5 6 7 8 nvram set boot_wait=on nvram set uart_en=1 nvram set flag_boot_rootfs=0 nvram set flag_last_success=0 nvram set flag_boot_success=1 nvram set flag_try_sys1_failed=0 nvram set flag_try_sys2_failed=0 nvram commit ç„¶ååˆ·å…¥å›ºä»¶\n1 ubiformat /dev/mtd8 -y -f /tmp/stock-initramfs-factory.ubi rebooté‡å¯ å›ºä»¶åå°ï¼šhttp://192.168.15.1/ è´¦æˆ·å¯†ç ï¼šadmin/admin åœ¨åå°å‡çº§xwrtæ­£å¼å›ºä»¶\nè¿›å…¥xwrtæ­£å¼å›ºä»¶åå°â€”ç³»ç»Ÿâ€”ç®¡ç†æƒâ€”sshè®¿é—®â€”æ‰“å¼€å¯†ç éªŒè¯å’Œå…è®¸rootç”¨æˆ·å‡­å¯†ç ç™»å½•-ä¿å­˜å¹¶åº”ç”¨ã€‚ å†æ¬¡è¿æ¥SSHï¼ˆip192.168.15.1ç”¨æˆ·årootå¯†ç adminï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤\n1 2 3 4 5 6 7 fw_setenv boot_wait on fw_setenv uart_en 1 fw_setenv flag_boot_rootfs 0 fw_setenv flag_last_success 1 fw_setenv flag_boot_success 1 fw_setenv flag_try_sys1_failed 8 fw_setenv flag_try_sys2_failed 8 ä¹‹ååˆ·å…¥æœ€æ–°237å¤§ä½¬å›ºä»¶\nåˆ·å…¥uboot ä¹‹å‰åˆ·å…¥çš„å®˜æ–¹ç‰ˆçš„é•œåƒï¼Œè™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¯ç”¨ç©ºé—´å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œä¸ºäº†æ¦¨å¹²å®ƒå…¨éƒ¨çš„æ€§èƒ½ï¼Œæˆ‘è¿˜æ˜¯å†³å®šåˆ·å…¥ç¬¬ä¸‰æ–¹ubootï¼Œå°†å®˜æ–¹åŸå§‹çš„ä¸‰ä¸ªåˆ†åŒºåˆå¹¶æˆä¸€ä¸ªå¤§åˆ†åŒºã€‚\næˆ‘è¿™é‡Œåˆ·å…¥çš„hanwckfå¤§ä½¬åˆ¶ä½œçš„ubootï¼Œä»–æ”¯æŒå¤šåˆ†åŒºçš„åˆ‡æ¢ï¼Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚å…·ä½“çš„åŠŸèƒ½å’Œä¸‹è½½é“¾æ¥å¯ä»¥çœ‹å¤§ä½¬çš„åšå®¢â€”â€”mt798x uboot åŠŸèƒ½ä»‹ç»ã€‚\næˆ‘ä»¬ä¹‹å‰åˆ·å…¥è¿‡237å¤§ä½¬çš„å›ºä»¶äº†ï¼Œæ‰€ä»¥FIPåˆ†åŒºå·²ç»è§£é”ï¼Œå¯ä»¥ç›´æ¥åˆ·ã€‚\né¦–å…ˆè¦å¤‡ä»½åŸå§‹çš„åˆ†åŒºï¼ŒåƒFactoryä¸ºæ— çº¿EEPROMåˆ†åŒºï¼›Bdataå­˜å‚¨ç€ä½ çš„SNå’ŒMACã€‚å¦‚æœæ²¡äº†åº”è¯¥æ˜¯æ— æ³•ä½¿ç”¨åˆ«äººçš„åˆ†åŒºæ¥ä½¿ç”¨çš„ã€‚æ‰€ä»¥ä¸€å®šè¦å¤‡ä»½å¥½ã€‚\næˆ‘ä»¬ä½¿ç”¨ddå‘½ä»¤å¤‡ä»½åˆ†åŒºåˆ°tmpæ–‡ä»¶å¤¹ï¼š2\n1 2 3 4 5 dd if=/dev/mtd1 of=/tmp/mtd1_BL2.bin dd if=/dev/mtd2 of=/tmp/mtd2_Nvram.bin dd if=/dev/mtd3 of=/tmp/mtd3_Bdata.bin dd if=/dev/mtd4 of=/tmp/mtd4_Factory.bin dd if=/dev/mtd5 of=/tmp/mtd5_FIP.bin ç„¶åä½¿ç”¨WinSCPç­‰è½¯ä»¶å°†å¤‡ä»½çš„æ–‡ä»¶ä¸‹è½½åˆ°ç”µè„‘ä¸Šã€‚\nå¤‡ä»½å¥½åï¼Œå°±å¯ä»¥é€šè¿‡WinSCPå°†ubootæ–‡ä»¶ä¸Šä¼ åˆ°tmpç›®å½•ä¸‹ï¼Œå¹¶æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¿›è¡Œåˆ·å…¥ï¼š\n1 2 3 d5sum /tmp/mt7986_redmi_ax6000-fip-fixed-parts-multi-layout.bin mtd write /tmp/mt7986_redmi_ax6000-fip-fixed-parts-multi-layout.bin FIP mtd verify /tmp/mt7986_redmi_ax6000-fip-fixed-parts-multi-layout.bin FIP æ³¨æ„å¯¹æ¯”md5çš„å€¼æ˜¯å¦ä¸€è‡´ã€‚æœ€åå¦‚æœæˆåŠŸåˆ™ä¼šè¾“å‡ºSuccess\nå°†è·¯ç”±å™¨æ–­ç”µï¼ŒæŒ‰ä½Reseté”®å¹¶é€šç”µï¼ŒæŒç»­æŒ‰ä½10Så³å¯è¿›å…¥ubootäº†ã€‚\nç”±äºHå¤§çš„ubootæ²¡æœ‰é…ç½®DHCPï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é…ç½®ç”µè„‘ipï¼š\nIPåœ°å€ï¼š192.168.31.100 å­ç½‘æ©ç ï¼š255.255.255.0 é»˜è®¤ç½‘å…³ï¼š192.168.31.1 DNSï¼š192.168.31.1 è®¿é—®192.168.31.1å³å¯è¿›å…¥ubooté¡µé¢ï¼Œè¿™æ—¶å°±å¯ä»¥åˆ·å…¥å¤§åˆ†åŒºçš„å›ºä»¶äº†\né…ç½®æ ¡å›­ç½‘è‡ªåŠ¨è¿æ¥ åœ¨æˆ‘ä¹‹å‰ï¼Œå·²ç»æœ‰å¤§ä½¬é’ˆå¯¹æ ¡å›­ç½‘çš„ç™»å½•å†™äº†è‡ªåŠ¨åŒ–è„šæœ¬\nyzu-campusnet-login public æ ¡å›­ç½‘ç™»å½•å™¨ Python ç„¶è€Œï¼Œè¿™å¹¶ä¸é€‚ç”¨æˆ‘çš„ç¯å¢ƒã€‚ç”±äºçº¢ç±³AX6000çš„å®˜æ–¹å¸ƒå±€é‡‡ç”¨äº†A/Båˆ†åŒºï¼Œå¯¼è‡´å¯ç”¨çš„è½¯ä»¶åŒ…åˆ†åŒºåªæœ‰20å¤šMBã€‚åœ¨è¿™ä¹ˆå°çš„ç©ºé—´ä¸­å®‰è£…ä¸ªPythonï¼Œå†åŠ ä¸Šå„ç§å„æ ·çš„åº“ï¼Œæƒ³æƒ³å°±å¯æ€•ã€‚\nä¸ºæ­¤ï¼Œæˆ‘éœ€è¦ä½¿ç”¨ä¸€é—¨å¯ä»¥æ‰“åŒ…æˆå°ä½“ç§¯çš„è¯­è¨€æ¥é‡æ„æ­¤ç¨‹åºã€‚ä¸€å¼€å§‹ï¼Œæˆ‘æƒ³é€‰æ‹©C++ï¼Œä½†æ˜¯C++çš„ç½‘ç»œç¼–ç¨‹æˆ‘è¿˜æ²¡äº†è§£è¿‡ï¼Œæ­£åœ¨æˆ‘æ€è€ƒè¦ä¸è¦èŠ±äº›æ—¶é—´å­¦ä¹ ä¸€ä¸‹ï¼Œçªç„¶æƒ³åˆ°äº†æœ‰ä¸€é—¨è¯­è¨€å®Œç¾ç¬¦åˆæˆ‘çš„éœ€æ±‚â€”â€”Golangã€‚è·¨å¹³å°ã€æœ‰æ–¹ä¾¿çš„ç½‘ç»œåº“ï¼Œäºæ˜¯æˆ‘ä¾¿èŠ±äº†ä¸€å¤©æ—¶é—´å­¦ä¹ Goï¼ŒæˆåŠŸå°†å¤§ä½¬çš„ç¨‹åºé‡æ„äº†ï¼ˆæ­£å¥½å½“å­¦ä¹ Goè¯­è¨€çš„ç»ƒæ‰‹ç¨‹åºã€‚\nyzu-campusnet-login public Goç‰ˆæœ¬çš„æ ¡å›­ç½‘ç™»å½•å™¨ Go ç›´æ¥å°†ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¼ å…¥åˆ°è·¯ç”±å™¨ä¸­ï¼Œå¹¶å†™å¥½é…ç½®æ–‡ä»¶ï¼Œä¹‹ååœ¨åå°â€”â€”â€œç³»ç»Ÿâ€â€”â€”â€œå¯åŠ¨é¡¹â€ä¸‹é¢çš„æœ¬åœ°å¯åŠ¨è„šæœ¬æ·»åŠ ä¸€æ¡è¿è¡Œå‘½ä»¤å°±å¯ä»¥å¼€æœºå¯åŠ¨äº†ã€‚\n1 cd /root/login \u0026amp;\u0026amp; nohup ./YzuCampusnetLogin \u0026gt; /tmp/login.log 2\u0026gt;\u0026amp;1 \u0026amp; é…ç½®ipv6 å­¦æ ¡çš„ipv6ä¸‹å‘çš„æ˜¯/64åœ°å€ï¼Œä¸€å¼€å§‹æˆ‘å‚è€ƒè¿™ä¸ªå¤§ä½¬çš„æ•™ç¨‹ï¼Œä½¿ç”¨å†…ç½‘ä¸­ç»§çš„æ–¹æ¡ˆæ¥å®ç°ipv6ã€‚ç„¶è€Œæ— è®ºæˆ‘æ€ä¹ˆé…ç½®ï¼Œéƒ½æ— æ³•è¿æ¥äº’è”ç½‘ã€‚æœ€åå‘ç°æ˜¯å­¦æ ¡ç½‘å…³å¯¹æ¯ä¸€ä¸ªipv6åœ°å€éƒ½ä¼šè¿›è¡Œç™»å½•çš„æ ¡éªŒï¼Œå¦‚æœæ²¡æœ‰ç™»å½•å°±ä¸ä¼šæ”¾è¡Œï¼Œé‚£è¿™æ¡è·¯ç®—æ˜¯å½»åº•å µæ­»äº†ğŸ˜¥ã€‚\nè¿™æ ·çš„è¯ï¼Œå°±åªèƒ½ä½¿ç”¨nat6äº†,è¯¦ç»†çš„æ­¥éª¤å¯ä»¥å‚è€ƒè¿™ç¯‡æ•™ç¨‹3\nå°†æ¥å£â€”â€”LANâ€”â€”IPV6è®¾ç½®ä¸­çš„è·¯ç”±é€šå‘ŠæœåŠ¡é€‰ä¸ºâ€œæœåŠ¡å™¨æ¨¡å¼â€ã€DHCPv6 æœåŠ¡é€‰ä¸ºâ€œæœåŠ¡å™¨æ¨¡å¼â€ã€NDP ä»£ç†é€‰ä¸ºâ€œç¦ç”¨â€ã€DHCPv6 æ¨¡å¼é€‰ä¸ºâ€œæ— çŠ¶æ€çš„ + æœ‰çŠ¶æ€çš„â€ã€æ€»æ˜¯é€šå‘Šé»˜è®¤è·¯ç”±å‹¾ä¸Š\nä½¿ç”¨sshè¿æ¥è·¯ç”±å™¨ï¼Œåœ¨/etc/init.dç›®å½•ä¸‹æ–°å»ºnat6å¹¶å¡«å…¥ä¸‹é¢çš„å†…å®¹ï¼š\nğŸ“ƒå±•å¼€ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 #!/bin/sh /etc/rc.common # NAT6 init script for OpenWrt // Depends on package: kmod-ipt-nat6 # edited by Sad Pencil at 2020-02-09 # replace route command with ip command to solve issues on new OpenWRT # edited by Sad Pencil at 2021-11-29 # update line WAN6_INTERFACE=$(uci get \u0026#34;network.$WAN6_NAME.device\u0026#34; || uci get \u0026#34;network.$WAN6_NAME.ifname\u0026#34;) START=55 # Options # ------- # Use temporary addresses (IPv6 privacy extensions) for outgoing connections? Yes: 1 / No: 0 PRIVACY=1 # Maximum number of attempts before this script will stop in case no IPv6 route is available # This limits the execution time of the IPv6 route lookup to (MAX_TRIES+1)*(MAX_TRIES/2) seconds. The default (15) equals 120 seconds. MAX_TRIES=15 # An initial delay (in seconds) helps to avoid looking for the IPv6 network too early. Ideally, the first probe is successful. # This would be the case if the time passed between the system log messages \u0026#34;Probing IPv6 route\u0026#34; and \u0026#34;Setting up NAT6\u0026#34; is 1 second. DELAY=5 # Logical interface name of outbound IPv6 connection # There should be no need to modify this, unless you changed the default network interface names # Edit by Vincent: I never changed my default network interface names, but still I have to change the WAN6_NAME to \u0026#34;wan\u0026#34; instead of \u0026#34;wan6\u0026#34; WAN6_NAME=\u0026#34;wan6\u0026#34; # --------------------------------------------------- # Options end here - no need to change anything below boot() { [ $DELAY -gt 0 ] \u0026amp;\u0026amp; sleep $DELAY WAN6_INTERFACE=$(uci get \u0026#34;network.$WAN6_NAME.ifname\u0026#34;) logger -t NAT6 \u0026#34;Probing IPv6 route\u0026#34; PROBE=0 COUNT=1 while [ $PROBE -eq 0 ] do if [ $COUNT -gt $MAX_TRIES ] then logger -t NAT6 \u0026#34;Fatal error: No IPv6 route found (reached retry limit)\u0026#34; \u0026amp;\u0026amp; exit 1 fi sleep $COUNT COUNT=$((COUNT+1)) PROBE=$(ip -6 route | grep -i \u0026#39;^default.*via\u0026#39; | grep -i -F \u0026#34;dev $WAN6_INTERFACE\u0026#34; | grep -i -o \u0026#39;via.*\u0026#39; | wc -l) done logger -t NAT6 \u0026#34;Setting up NAT6\u0026#34; if [ -z \u0026#34;$WAN6_INTERFACE\u0026#34; ] || [ ! -e \u0026#34;/sys/class/net/$WAN6_INTERFACE/\u0026#34; ] ; then logger -t NAT6 \u0026#34;Fatal error: Lookup of $WAN6_NAME interface failed. Were the default interface names changed?\u0026#34; \u0026amp;\u0026amp; exit 1 fi #WAN6_GATEWAY=$(ip -6 route | grep -o \u0026#39;2001.*1102\u0026#39; | sed s\u0026#39;/1102/1101::1/g\u0026#39;) WAN6_GATEWAY=$(ip -6 route | grep -i \u0026#39;^default.*via\u0026#39; | grep -i -F \u0026#34;dev $WAN6_INTERFACE\u0026#34; | grep -i -o \u0026#39;via.*\u0026#39; | cut -d \u0026#39; \u0026#39; -f 2 | head -n 1) if [ -z \u0026#34;$WAN6_GATEWAY\u0026#34; ] ; then logger -t NAT6 \u0026#34;Fatal error: No IPv6 gateway for $WAN6_INTERFACE found\u0026#34; \u0026amp;\u0026amp; exit 1 fi LAN_ULA_PREFIX=$(uci get network.globals.ula_prefix) if [ $(echo \u0026#34;$LAN_ULA_PREFIX\u0026#34; | grep -c -E \u0026#34;^([0-9a-fA-F]{4}):([0-9a-fA-F]{0,4}):\u0026#34;) -ne 1 ] ; then logger -t NAT6 \u0026#34;Fatal error: IPv6 ULA prefix $LAN_ULA_PREFIX seems invalid. Please verify that a prefix is set and valid.\u0026#34; \u0026amp;\u0026amp; exit 1 fi ip6tables -t nat -I POSTROUTING -s \u0026#34;$LAN_ULA_PREFIX\u0026#34; -o \u0026#34;$WAN6_INTERFACE\u0026#34; -j MASQUERADE if [ $? -eq 0 ] ; then logger -t NAT6 \u0026#34;Added IPv6 masquerading rule to the firewall (Src: $LAN_ULA_PREFIX - Dst: $WAN6_INTERFACE)\u0026#34; else logger -t NAT6 \u0026#34;Fatal error: Failed to add IPv6 masquerading rule to the firewall (Src: $LAN_ULA_PREFIX - Dst: $WAN6_INTERFACE)\u0026#34; \u0026amp;\u0026amp; exit 1 fi ip -6 route add 2000::/3 via \u0026#34;$WAN6_GATEWAY\u0026#34; dev \u0026#34;$WAN6_INTERFACE\u0026#34; if [ $? -eq 0 ] ; then logger -t NAT6 \u0026#34;Added $WAN6_GATEWAY to routing table as gateway on $WAN6_INTERFACE for outgoing connections\u0026#34; else logger -t NAT6 \u0026#34;Error: Failed to add $WAN6_GATEWAY to routing table as gateway on $WAN6_INTERFACE for outgoing connections\u0026#34; fi if [ $PRIVACY -eq 1 ] ; then echo 2 \u0026gt; \u0026#34;/proc/sys/net/ipv6/conf/$WAN6_INTERFACE/accept_ra\u0026#34; if [ $? -eq 0 ] ; then logger -t NAT6 \u0026#34;Accepting router advertisements on $WAN6_INTERFACE even if forwarding is enabled (required for temporary addresses)\u0026#34; else logger -t NAT6 \u0026#34;Error: Failed to change router advertisements accept policy on $WAN6_INTERFACE (required for temporary addresses)\u0026#34; fi echo 2 \u0026gt; \u0026#34;/proc/sys/net/ipv6/conf/$WAN6_INTERFACE/use_tempaddr\u0026#34; if [ $? -eq 0 ] ; then logger -t NAT6 \u0026#34;Using temporary addresses for outgoing connections on interface $WAN6_INTERFACE\u0026#34; else logger -t NAT6 \u0026#34;Error: Failed to enable temporary addresses for outgoing connections on interface $WAN6_INTERFACE\u0026#34; fi fi exit 0 } æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½¿è„šæœ¬å¼€æœºè¿è¡Œï¼š\n1 2 chmod +x /etc/init.d/nat6 /etc/init.d/nat6 enable ä¿®æ”¹/etc/sysctl.confï¼Œæ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼š\n1 2 3 4 net.ipv6.conf.default.forwarding=2 net.ipv6.conf.all.forwarding=2 net.ipv6.conf.default.accept_ra=2 net.ipv6.conf.all.accept_ra=2 æœ€ååœ¨è‡ªå®šä¹‰é˜²ç«å¢™ä¸­æ·»åŠ ä¸€è¡Œå‘½ä»¤ï¼š\n1 ip6tables -t nat -A POSTROUTING -o $(uci get network.wan6.ifname) -j MASQUERADE ç”±äºç¡¬ä»¶çš„BUGï¼Œè¿˜éœ€è¦åœ¨å¼€æœºè„šæœ¬é‡Œæ·»åŠ ä¸€æ¡å‘½ä»¤ï¼Œå…³é—­ipv6çš„ç¡¬ä»¶åŠ é€Ÿï¼Œä¸ç„¶é€Ÿåº¦å°±ä¼šå…¶æ…¢æ— æ¯”\n1 echo 8 0 \u0026gt; /sys/kernel/debug/hnat/hnat_setting å®Œæˆåé‡å¯å°±ä¼šå‘ç°æœ‰ipv6äº†\nç„¶è€Œï¼Œåœ¨æˆ‘ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œå¼€å¯äº†ipv6åæ‰‹æœºæ‰“å¼€appæ—¶åŠ è½½çš„é€Ÿåº¦è‚‰çœ¼å¯è§çš„å˜æ…¢ã€‚ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯DNSçš„é—®é¢˜ï¼Œä½†ä¿®æ”¹äº†é»˜è®¤çš„DNSæœåŠ¡å™¨åè¿˜æ˜¯ä¸è¡Œã€‚ä¸ºäº†ä¿è¯ä½¿ç”¨çš„ä½“éªŒï¼Œç›®å‰æˆ‘è¿˜æ˜¯æŠŠnat6ç»™å…³é—­äº†ğŸ˜­ã€‚\nå·²ç»æ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆğŸ˜‰ï¼Œè§ä¸‹ä¸€èŠ‚\né…ç½®mosdns mosdnsä½œä¸ºä¸€æ¬¾è‡ªå®šä¹‰ç¨‹åº¦å¾ˆé«˜çš„DNSè½¬å‘å™¨ï¼Œåœ¨ä¹‹å‰çš„åšæ–‡ã€Šè‡ªå»ºDNSå®ç°åˆ†æµåŠå¹¿å‘Šè¿‡æ»¤ã€‹å°±å·²ç»ä½¿ç”¨è¿‡äº†ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ä»–æ¥è§£å†³ipv6 NATåçš„å¡é¡¿é—®é¢˜ã€‚åŒæ—¶ï¼Œé…ç½®å¥½mosdnsåï¼Œä¹Ÿå¯ä»¥å®ç°å¹¿å‘Šè¿‡æ»¤ï¼Œdnsé˜²æ±¡æŸ“çš„åŠŸèƒ½ã€‚\nå®‰è£…å¯ä»¥ä½¿ç”¨luci-app-mosdnsè¿™ä¸ªé¡¹ç›®æ¥å®ç°ï¼Œç›´æ¥æ‰§è¡Œå®ƒçš„è„šæœ¬å³å¯\n1 sh -c \u0026#34;$(curl -ksS https://raw.githubusercontent.com/sbwml/luci-app-mosdns/v5/install.sh)\u0026#34; å’Œä¹‹å‰çš„æ–¹æ¡ˆä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹é¡¹ç›®æä¾›çš„åŸŸå/IPæ–‡ä»¶ï¼š\nreject-list.txt å’Œ direct-list.txt CN-ip-cidr.txt ad-domains.txtï¼šä¸‹è½½domains.txtå¹¶æ”¹å å…¶å®luci-app-mosdnsé»˜è®¤æä¾›äº†ä¸€å¥—é…ç½®ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨mosdnsçš„ä¼˜å…ˆipv4çš„åŠŸèƒ½ï¼Œæ‰€ä»¥åªèƒ½è‡ªå·±æ’¸é…ç½®äº†ã€‚æ²¡é”™ï¼Œè§£å†³ipv6å¡é¡¿çš„æœ€å¥½æ–¹å¼å°±æ˜¯ä¸ç”¨ğŸ˜¥ï¼Œé€šè¿‡mosdnså¯ä»¥é¿å…æ“ä½œç³»ç»Ÿä½¿ç”¨ä¼˜å…ˆipv6çš„ç­–ç•¥ã€‚è¿™æ ·æ—¢å®ç°äº†ä¸å¡é¡¿ï¼Œåˆå¯ä»¥è®¿é—®çº¯ipv6ç½‘ç«™ã€‚\nè¿™å¥—é…ç½®å¯ä»¥å®ç°å±è”½å¹¿å‘Šï¼Œå›½å†…åŸŸåç”¨æœ¬åœ°DNSè§£æï¼Œå›½å¤–åŸŸåèµ°è¿œç¨‹DNSè§£æã€‚é‡åˆ°ä¸åœ¨åˆ—è¡¨ä¸­çš„åŸŸåï¼Œä¼šæŸ¥è¯¢æœ¬åœ°DNSï¼Œå¦‚æœè¿”å›çš„æ˜¯å›½å¤–åœ°å€ï¼Œåˆ™ä»¥è¿œç¨‹DNSçš„ç»“æœä¸ºå‡†ã€‚\nå…·ä½“çš„é…ç½®å¦‚ä¸‹ï¼š\nğŸ“ƒå±•å¼€ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 # Powered by luoboQAQ log: level: warn file: \u0026#34;/tmp/log/mosdns.log\u0026#34; # API å…¥å£è®¾ç½® api: http: \u0026#34;0.0.0.0:9091\u0026#34; plugins: # å›½å†…åŸŸå - tag: geosite_cn type: domain_set args: files: - \u0026#34;/var/mosdns/direct-list.txt\u0026#34; # å›½å†…IP - tag: geoip_cn type: ip_set args: files: - \u0026#34;/var/mosdns/CN-ip-cidr.txt\u0026#34; # å›½å¤–åŸŸå - tag: geosite_no_cn type: domain_set args: files: - \u0026#34;/var/mosdns/proxy-list.txt\u0026#34; # é»‘åå•åŸŸå - tag: blocklist type: domain_set args: files: - \u0026#34;/etc/mosdns/rule/blocklist.txt\u0026#34; # å¹¿å‘ŠåŸŸå - tag: adlist type: domain_set args: files: - \u0026#34;/var/mosdns/ad-domains.txt\u0026#34; # PTRé»‘åå• - tag: local_ptr type: domain_set args: files: - \u0026#34;/etc/mosdns/rule/local-ptr.txt\u0026#34; # ç¼“å­˜æ’ä»¶ - tag: cache type: cache args: size: 10240 lazy_cache_ttl: 86400 # å°†ç¼“å­˜ä¿å­˜åœ¨ç£ç›˜ dump_file: /tmp/mosdns/cache.dump # è½¬å‘è‡³æœ¬åœ°æœåŠ¡å™¨çš„æ’ä»¶ - tag: forward_local type: forward args: upstreams: - tag: alidns_dot addr: \u0026#34;tls://223.5.5.5\u0026#34; - tag: dnspod_dot addr: \u0026#34;tls://120.53.53.53\u0026#34; # è½¬å‘è‡³è¿œç¨‹æœåŠ¡å™¨çš„æ’ä»¶ - tag: forward_remote type: forward args: upstreams: # - tag: easymosdns # addr: \u0026#34;https://doh.apad.pro/dns-query\u0026#34; # bootstrap: \u0026#34;223.5.5.5\u0026#34; - tag: cloudflare_dot addr: \u0026#34;tls://1.1.1.1\u0026#34; # å›½å†…è§£æ - tag: local_sequence type: sequence args: - exec: $forward_local # fallback ç”¨æœ¬åœ°æœåŠ¡å™¨ sequence # è¿”å›ä¸åŒ…å«æœ¬åœ° ip åˆ™ reject - tag: local_ip_sequence type: sequence args: - exec: $forward_local - matches: \u0026#34;!resp_ip $geoip_cn\u0026#34; exec: drop_resp # fallback ç”¨è¿œç¨‹æœåŠ¡å™¨ sequence - tag: remote_sequence type: sequence args: - exec: $forward_remote # fallbackæ’ä»¶ - tag: fallback type: fallback args: primary: local_ip_sequence secondary: remote_sequence threshold: 500 always_standby: true # æœ‰å“åº”ç»ˆæ­¢è¿”å› - tag: has_resp_sequence type: sequence args: - matches: has_resp exec: accept # æŸ¥è¯¢å›½å†…åŸŸå - tag: query_is_local_domain type: sequence args: - matches: qname $geosite_cn exec: $local_sequence # æŸ¥è¯¢å›½å¤–åŸŸå - tag: query_is_no_local_domain type: sequence args: - matches: qname $geosite_no_cn exec: $remote_sequence # æŸ¥è¯¢æ‹’ç»åŸŸå - tag: query_is_reject_domain type: sequence args: - matches: qname $blocklist exec: reject 3 - matches: qname $adlist exec: reject 3 - matches: - qtype 12 - qname $local_ptr exec: reject 3 - matches: qtype 65 exec: reject 3 # ä¸»è¦è¿è¡Œé€»è¾‘æ’ä»¶ - tag: main_sequence type: sequence args: # å»å¹¿å‘Š - exec: $query_is_reject_domain - exec: jump has_resp_sequence # ipv4åœ°å€ä¼˜å…ˆï¼Œé¿å…NATå ç”¨CPU - exec: prefer_ipv4 - exec: $cache - exec: jump has_resp_sequence - exec: $query_is_local_domain - exec: jump has_resp_sequence - exec: $query_is_no_local_domain - exec: jump has_resp_sequence - exec: $fallback # å¯åŠ¨ udp æœåŠ¡å™¨ã€‚ - tag: udp_server type: udp_server args: entry: main_sequence listen: \u0026#34;:5335\u0026#34; # å¯åŠ¨ tcp æœåŠ¡å™¨ã€‚ - tag: tcp_server type: tcp_server args: entry: main_sequence listen: \u0026#34;:5335\u0026#34; é…ç½®Wireguard å­¦é™¢çš„æœåŠ¡å™¨æ˜¯åœ¨å†…ç½‘ä¸­çš„ï¼Œå¦‚æœæ²¡æœ‰è¿æ ¡å›­ç½‘å°±æ— æ³•è®¿é—®ã€‚ä¸ºäº†éšæ—¶éšåœ°å¯ä»¥è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Wireguardè¿›è¡Œè™šæ‹Ÿç»„ç½‘ã€‚åŸºäºipv6ç›´æ¥æ˜¯å…¬ç½‘çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚\nè¿æ¥è·¯ç”±å™¨ï¼Œä½¿ç”¨å‘½ä»¤åˆ›å»ºé¢„å…±äº«å¯†é’¥\n1 2 3 4 5 6 7 8 9 10 # åˆ›å»ºç›®å½•å­˜æ”¾å…¬é’¥ç§é’¥ mkdir wg # è¿›å…¥æ–‡ä»¶å¤¹ cd wg # é…ç½®åˆ›å»ºå¯†é’¥çš„æƒé™ umask 077 # åˆ›å»ºé¢„å…±äº«å¯†é’¥ wg genpsk \u0026gt; sharekey # è·å–å¯†é’¥å¤åˆ¶ä¿å­˜ cat sharekey ä¹‹ååˆ›å»ºæœåŠ¡ç«¯å…¬é’¥ç§é’¥\n1 2 3 4 5 6 # åˆ›å»ºæœåŠ¡ç«¯å…¬é’¥å’Œç§é’¥ wg genkey | tee server_privatekey | wg pubkey \u0026gt; server_publickey # è·å–æœåŠ¡ç«¯ç§é’¥å¤åˆ¶ä¿å­˜ cat server_privatekey # è·å–æœåŠ¡ç«¯å…¬é’¥å¤åˆ¶ä¿å­˜ cat server_publickey ä¹‹ååˆ›å»ºå®¢æˆ·ç«¯çš„å…¬é’¥ç§é’¥ï¼Œæœ‰å¤šå°‘ä¸ªå°±è¦æ‰§è¡Œå‡ æ¬¡ æ³¨æ„æ–‡ä»¶çš„å‘½åï¼Œè¿™é‡Œä»¥clinetä¸ºä¾‹ï¼š\n1 2 3 4 5 6 # åˆ›å»ºå®¢æˆ·ç«¯å…¬é’¥å’Œç§é’¥ wg genkey | tee clinet_privatekey | wg pubkey \u0026gt; clinet_publickey # è·å–å®¢æˆ·ç«¯ç§é’¥å¤åˆ¶ä¿å­˜ cat clinet_privatekey # è·å–å®¢æˆ·ç«¯å…¬é’¥å¤åˆ¶ä¿å­˜ cat clinet_publickey ä¹‹åæ‰¾åˆ°ç½‘ç»œâ€”â€”æ¥å£â€”â€”æ·»åŠ æ–°æ¥å£ï¼Œé€‰æ‹©åè®®ä¸ºWireGuard VPN\næ¥ç€ä¿®æ”¹ç›¸åº”çš„é…ç½®ï¼š\næ¥å£åŸºæœ¬è®¾ç½®\nç§é’¥ - ä¸Šæ–‡è·å–çš„æœåŠ¡ç«¯ç§é’¥ ç›‘å¬æ¥å£ - éšæœºä¸€ä¸ªé«˜ä½çš„ç«¯å£ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨10800 IPåœ°å€ - è¿™é‡Œå¡«ä¸€ä¸ªä¸“ç”¨çš„ç½‘æ®µ IPï¼Œæˆ‘é€‰æ‹©192.168.100.1/24 Peersè®¾ç½®\né€‰æ‹©é¢„å…±äº«å¯†é’¥ - æ·»åŠ \nå…¬é’¥ - å¡«å†™ä¸Šæ–‡è·å–çš„å®¢æˆ·ç«¯å…¬é’¥ å…è®¸çš„ IP - ä¸ºæ­¤å®¢æˆ·ç«¯åˆ†é…çš„å›ºå®š IPï¼Œæˆ‘è¿™é‡Œæ˜¯192.168.100.2/32æ³¨æ„ä¸è¦å†²çª é¢„å…±äº«å¯†é’¥ - å¡«å†™ä¸Šæ–‡è·å–çš„é¢„å…±äº«å¯†é’¥ è·¯ç”±å…è®¸çš„ IP - å‹¾é€‰ é˜²ç«å¢™è®¾ç½®\né€‰æ‹©LAN ä¹‹å‰æˆ‘å°è¯•è‡ªå·±åˆ›å»ºä¸€ä¸ªVPNåˆ†åŒºè¿›è¡Œç®¡ç†ï¼Œä½†æ˜¯æ— æ³•è®¿é—®è·¯ç”±å™¨ä¸Šä¸€å±‚å†…ç½‘çš„åœ°å€ï¼Œä¼°è®¡æ˜¯é˜²ç«å¢™ä¹‹å‰çš„è½¬å‘è§„åˆ™æ²¡è®¾ç½®å¥½ï¼Œå¦‚æœä¸æƒ³æŠ˜è…¾å°±é€‰LANå§\nä¹‹ååœ¨é˜²ç«å¢™ä¸­çš„â€”â€”â€æ‰“å¼€è·¯ç”±å™¨ç«¯å£â€œï¼Œå°†ä¹‹å‰è®¾ç½®çš„WireGuardç›‘å¬ç«¯å£çš„UDPæµé‡æ”¾è¡Œ\nè¿™æ ·å°±ç®—é…ç½®å¥½äº†ã€‚\nå®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 [Interface] # å¯¹åº”ä¹‹å‰é…ç½®çš„é™æ€åœ°å€ Address = 192.168.100.2/32 # å®¢æˆ·ç«¯çš„ç§é’¥ PrivateKey = ****** # æœ¬åœ°çš„ DNS æœåŠ¡å™¨æˆ–è€…å…¬æœ‰ DNS æœåŠ¡å™¨,ä¾‹å¦‚: 114.114.114.114 #DNS = 192.168.6.1 [Peer] # è·¯ç”±å™¨å…¬é’¥ PublicKey = ****** # è®¾ç½®é‚£äº›åœ°å€èµ°WireGuardï¼Œå¦‚ä¸‹è®¾ç½®åªç”¨å±€åŸŸç½‘èµ°WireGuard,äº’è”ç½‘èµ°æœ¬åœ°ç½‘ç»œ. #AllowedIPs = 192.168.6.0/24, 192.168.100.0/24, 192.168.101.0/24 # å…¨å±€æ¨¡å¼ AllowedIps = 0.0.0.0/0 # é¢„å…±äº«å¯†é’¥ï¼ŒåŒä¹‹å‰æ‰€é…ç½® PresharedKey = ****** # è·¯ç”±å™¨çš„ipåœ°å€å’Œç«¯å£ Endpoint = 10.134.10.10:10800 # æ¯éš”å¤šå°‘ç§’æ£€æŸ¥ä¸€æ¬¡è¿æ¥ PersistentKeepalive = 25 é…ç½®ddns è™½ç„¶æˆ‘ä»¬æ‹¥æœ‰äº†å…¬ç½‘ipv6ï¼Œä½†è¿™æ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ddnsä½¿å…¶è‡ªåŠ¨å¯¹åº”åˆ°åŸŸåä¸Šã€‚ä»¥åä½¿ç”¨çš„æ—¶å€™åªéœ€è¦åŸŸåå³å¯ï¼Œæ— éœ€è®°ä½ipã€‚\n237å¤§ä½¬çš„å›ºä»¶å·²ç»å†…ç½®äº†ddnsï¼Œæˆ‘çš„åŸŸåæ˜¯åœ¨cloudflareä¸Šï¼Œæ‰€ä»¥é€‰æ‹©DDNS æœåŠ¡æä¾›å•† [IPv6]ä¸ºcloudflare.com-v4ï¼ŒåŸŸåå¡«å†™éœ€è¦ddnsçš„åŸŸåï¼Œæ³¨æ„è¿™é‡Œè¦ç”¨@éš”ç¦»å­åŸŸåå’Œæ ¹ï¼Œä¾‹å¦‚ddns@lbqaq.topï¼Œå¯†ç å¡«å†™å…¨å±€è®¿é—®å¯†é’¥ã€‚\nåœ¨é«˜çº§è®¾ç½®é‡Œï¼Œæˆ‘å°†IP åœ°å€æ¥æº [IPv6]è®¾ç½®ä¸ºäº†URLï¼Œè¿™æ ·é¿å…äº†è„šæœ¬é”™è¯¯è¯»å–ipåœ°å€çš„æƒ…å†µã€‚\néƒ½è®¾ç½®å¥½åï¼Œå°±å¯ä»¥çœ‹åˆ°åŸŸåæ‰€å¯¹åº”çš„åœ°å€å·²ç»è¢«æ›´æ–°äº†ã€‚\nå°ç»“ Openwrtä½œä¸ºä¸€ä¸ªå¼€æ”¾çš„ç³»ç»Ÿï¼Œå¯ç©æ€§è¿˜æ˜¯å¾ˆé«˜çš„ï¼Œé€šè¿‡è£…ä¸Šæ‰€éœ€çš„æ’ä»¶ï¼Œæå¤§çš„æé«˜äº†æˆ‘çš„ä¸Šç½‘ä½“éªŒï¼Œåªèƒ½è¯´ï¼šçœŸé¦™~\nï¼ˆæœ¬æ¥æ˜¯æ‰“ç®—ä»‹ç»æˆ‘å†™çš„æ ¡å›­ç½‘è¿æ¥ç¨‹åºï¼Œç»“æœä¸ºäº†è¿™ç¢Ÿé†‹åŒ…äº†è¿™ç›˜é¥ºå­QwQï¼‰\næ›´æ–°æ—¥å¿— 23.11.22ï¼šæ·»åŠ äº†ubootå’Œmosdnsçš„å†…å®¹ å‚è€ƒæ–‡çŒ® çº¢ç±³AX6000å®Œç¾åˆ·æœº | åˆ·æœºæ— é£é™© å°ç™½é€‚ç”¨\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nçº¢ç±³AX6000åˆ·hanwckfå¤§ä½¬çš„ä¸æ­»uboot+åˆ·å›å®˜æ–¹å›ºä»¶+TTLä½¿ç”¨+ç¼–ç¨‹å™¨æ•‘ç –æ•™ç¨‹\u0026#160;\u0026#x21a9;\u0026#xfe0e;\næ ¡å›­ç½‘ç¯å¢ƒä¸‹Openwrté…ç½®ipv6æ•™ç¨‹â€”â€”ä»¥nat6ä¸ºä¾‹\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2023-10-21T21:36:58+08:00","image":"https://lbqaq.top/p/ax6000/112545261.webp","permalink":"https://lbqaq.top/p/ax6000/","title":"çº¢ç±³AX6000æŠ˜è…¾è®°"},{"content":"ä»‹ç» æ•°æ®ä¿æŠ¤æœ€è¿‘å¼•èµ·äº†è¶Šæ¥è¶Šå¤šçš„å…³æ³¨ï¼Œå¹¶ä¸”å·²ç»æå‡ºäº†ä¸€äº›æ³•è§„æ¥ä¿æŠ¤ä¸ªäººç”¨æˆ·çš„éšç§ã€‚åœ¨è¿™äº›æ³•è§„ä¸­ï¼Œæåˆ°äº†ã€Œè¢«é—å¿˜æƒã€ï¼Œå®ƒèµ‹äºˆæ•°æ®ä¸»ä½“ä»å­˜å‚¨æ•°æ®çš„å®ä½“ä¸­åˆ é™¤å…¶æ•°æ®çš„æƒåˆ©ã€‚è¿™ä¹Ÿæ„å‘³ç€åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæ¨¡å‹æä¾›è€…æœ‰ä¹‰åŠ¡æ¶ˆé™¤å…¶æ‰€æœ‰è€…è¦æ±‚è¢«é—å¿˜çš„æ•°æ®çš„ä»»ä½•å½±å“ï¼Œå³é—å¿˜å­¦ä¹ ã€‚\næœ€ç®€å•å’Œæœ‰æ•ˆçš„é—å¿˜å­¦ä¹ æ–¹æ³•å°±æ˜¯ç§»é™¤å¯¹åº”çš„æ ·æœ¬åé‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œç„¶è€Œå½“åº•å±‚æ•°æ®é›†å¾ˆå¤§æ—¶ï¼Œè¿™ç§æ–¹æ³•åœ¨è®¡ç®—ä¸Šå¯èƒ½ä»¤äººæœ›è€Œå´æ­¥ã€‚ç›®å‰é€šç”¨çš„é—å¿˜å­¦ä¹ æ–¹æ³•æ˜¯SISA (Sharded, Isolated, Sliced, and Aggregated) â€”â€”å°†è®­ç»ƒé›†åˆ†ä¸ºshards, shardsä¸­åˆ†ä¸ºslices, å¯¹äºæ¯ä¸ªsliceè®­ç»ƒä¹‹åè®°å½•model parameters, æ¯ä¸ªæ•°æ®ç‚¹è¢«åˆ’åˆ†åˆ°ä¸åŒçš„shardså’Œslicesä¸­, unlearnæ—¶å°±æ˜¯æ’é™¤æ‰å¯¹åº”æ•°æ®ç‚¹ç„¶åretrainå¯¹åº”çš„shardå’Œslices, ä»¥ç©ºé—´å¼€é”€æ¢å–è®­ç»ƒçš„æ—¶é—´å¼€é”€ã€‚\nå¯¹äºå›¾åƒå’Œæ–‡æœ¬æ•°æ®ï¼Œåˆ†å‰²æ•°æ®æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚ç„¶è€Œï¼Œå¯¹äºå›¾æ¥è¯´ï¼ŒGNNä¾èµ–äºå›¾ç»“æ„ä¿¡æ¯ï¼Œåƒåœ¨SISAä¸­é‚£æ ·å°†èŠ‚ç‚¹éšæœºåˆ’åˆ†ä¸ºå­å›¾å¯èƒ½ä¼šä¸¥é‡æŸåç”Ÿæˆçš„æ¨¡å‹ã€‚å¯¹æ­¤ï¼Œä½œè€…æå‡ºäº†GraphEraserï¼Œä»¥å®ç°GNNä¸­çš„é—å¿˜å­¦ä¹ ã€‚\nä½œè€…å°†å›¾é—å¿˜å­¦ä¹ åˆ†ä¸ºnode unlearningã€ŒèŠ‚ç‚¹é—å¿˜å­¦ä¹ ã€å’Œedge unlearningã€Œè¾¹é—å¿˜å­¦ä¹ ã€ï¼Œæå‡ºäº†ä¸¤ç§å›¾åˆ†å‰²ç­–ç•¥ã€‚ç¬¬ä¸€ç§ä¾§é‡äºgraph structural informationã€Œå›¾ç»“æ„ä¿¡æ¯ã€ï¼Œå¦ä¸€ç§åˆ™æ˜¯åŒæ—¶è€ƒè™‘graph structural and node feature informationã€Œå›¾ç»“æ„å’ŒèŠ‚ç‚¹ç‰¹å¾ä¿¡æ¯ã€ã€‚\nä¸ºäº†åŒæ—¶è€ƒè™‘å›¾ç»“æ„å’ŒèŠ‚ç‚¹ç‰¹å¾ä¿¡æ¯ï¼Œä½œè€…å°†èŠ‚ç‚¹ç‰¹å¾å’Œå›¾ç»“æ„è½¬åŒ–ä¸ºåµŒå…¥å‘é‡ï¼Œç„¶åå°†å…¶èšç±»ä¸ºä¸åŒçš„shardsã€‚ä½†æ˜¯ç”±äºç°å®ä¸–ç•Œå›¾çš„ç»“æ„ç‰¹æ€§ï¼Œä¼ ç»Ÿçš„ç¾¤è½æ£€æµ‹å’Œèšç±»æ–¹æ³•åˆ’åˆ†ä¼šå¯¼è‡´åˆ†ç‰‡å¤§å°ä¸å¹³è¡¡ï¼Œè€Œå¤§éƒ¨åˆ†éœ€è¦è¢«æ’¤é”€çš„æ•°æ®éƒ½åœ¨æœ€å¤§çš„åˆ†åŒºï¼Œä»è€Œå¯¼è‡´æ•ˆç‡ä½ä¸‹ã€‚ä½œè€…æå‡ºäº†ä¸¤ç§åˆ†å‰²ç®—æ³•å’Œä¸€ç§èšåˆç®—æ³•ä»¥è§£å†³æ­¤é—®é¢˜ã€‚\nè´¡çŒ® ç¬¬ä¸€æ¬¡æå‡ºäº†åœ¨GNNæ¨¡å‹ä¸Šçš„é—å¿˜å­¦ä¹ æ–¹æ³• æå‡ºäº†ä¸¤ç§ç®—æ³•ä»¥å¹³è¡¡å›¾åˆ†å‰²å—å¤§å° æå‡ºäº†ä¸€ç§åŸºäºå­¦ä¹ çš„èšåˆæ–¹æ³• é—®é¢˜æ„é€  é—®é¢˜å®šä¹‰ èŠ‚ç‚¹é—å¿˜å­¦ä¹ \nå¯¹äºGNNæ¨¡å‹$F_o$ï¼Œæ¯ä¸ªæ•°æ®ä¸»ä½“çš„æ•°æ®å¯¹åº”äºGNNè®­ç»ƒå›¾$G_o$ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚æ•°æ®ä¸»ä½“$u$è¦åˆ é™¤å…¶æ‰€æœ‰æ•°æ®ï¼Œåˆ™æ„å‘³ç€ä»GNNçš„è®­ç»ƒå›¾ä¸­é—å¿˜å­¦ä¹ $u$çš„èŠ‚ç‚¹ç‰¹å¾ä»¥åŠå…¶äºå…¶ä»–èŠ‚ç‚¹çš„é“¾æ¥ã€‚ä»¥ç¤¾äº¤ç½‘ç»œä¸ºä¾‹ï¼ŒèŠ‚ç‚¹é—å¿˜å­¦ä¹ æ„å‘³ç€éœ€è¦ä»ç›®æ ‡GNNçš„è®­ç»ƒå›¾ä¸­åˆ é™¤ç”¨æˆ·çš„ä¸ªäººèµ„æ–™ä¿¡æ¯å’Œç¤¾äº¤å…³ç³»ã€‚\nè¾¹é—å¿˜å­¦ä¹ \næ•°æ®ä¸»ä½“$u$è¦åˆ é™¤å…¶èŠ‚ç‚¹äºå¦ä¸€ä¸ªèŠ‚ç‚¹$v$ä¹‹é—´çš„ä¸€æ¡è¾¹ç¼˜ã€‚ä»ç„¶ä»¥ç¤¾äº¤ç½‘ç»œä¸ºä¾‹ï¼Œè¾¹ç¼˜é—å¿˜æ„å‘³ç€ç¤¾äº¤ç½‘ç»œç”¨æˆ·æƒ³è¦éšè—ä»–ä»¬ä¸å¦ä¸€ä¸ªäººçš„å…³ç³»ã€‚\nè¯„ä¼°æŒ‡æ ‡ unlearning efficiencyã€Œé—å¿˜å­¦ä¹ æ•ˆç‡ã€ï¼šä¸åœ¨è®­ç»ƒçš„æ—¶é—´æœ‰å…³ï¼Œæ—¶é—´è¦å°½å¯èƒ½çŸ­ã€‚ model utilityã€Œæ¨¡å‹æ•ˆç”¨ã€ï¼šä¸å‡†ç¡®æ€§æœ‰å…³ï¼Œè¶Šé«˜è¶Šå¥½ã€‚ åœ¨ä¹‹å‰æè¿‡ï¼Œå›¾åˆ†å‰²å­˜åœ¨åˆ†ç‰‡å¤§å°ä¸å‡åŒ€çš„é—®é¢˜ã€‚ä¸ºæ­¤ï¼Œä½œè€…æå‡ºäº†ä¸¤ç§åˆ†ç‰‡ç›®æ ‡ï¼š\nG1: Balanced Shardsã€Œå‡è¡¡åˆ†ç‰‡ã€ï¼šæ¯ä¸ªåˆ†ç‰‡ä¸­çš„èŠ‚ç‚¹æ•°é‡ç›¸ä¼¼ã€‚è¿™æ ·ï¼Œæ¯ä¸ªåˆ†ç‰‡çš„å†è®­ç»ƒæ—¶é—´æ˜¯ç›¸ä¼¼çš„ï¼Œä»è€Œæé«˜äº†æ•´ä¸ªå›¾é—å¿˜å­¦ä¹ è¿‡ç¨‹çš„æ•ˆç‡ã€‚ G2: Comparable Model Utilityã€Œå¯æ¯”æ¨¡å‹æ•ˆç”¨ã€ï¼šå›¾ç»“æ„ä¿¡æ¯æ˜¯å†³å®šGNNæ€§èƒ½çš„ä¸»è¦å› ç´ ï¼Œæ¯ä¸ªåˆ†ç‰‡éƒ½åº”ä¿ç•™å›¾çš„ç»“æ„å±æ€§ã€‚ GraphEraseræ¡†æ¶æ„é€  ä½œè€…å°†GraphEraseræ¡†æ¶åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š\nBalanced Graph Partitionã€Œå¹³è¡¡å›¾åˆ†åŒºã€ï¼šå°†è®­ç»ƒå›¾åˆ’åˆ†ä¸ºä¸ç›¸äº¤çš„åˆ†ç‰‡ Shard Model Trainingã€Œåˆ†ç‰‡è®­ç»ƒæ¨¡å‹ã€ï¼šå¯¹æ¯ä¸ªåˆ†ç‰‡è¿›è¡Œè®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œç§°ä¹‹ä¸ºshard modelã€Œåˆ†ç‰‡æ¨¡å‹ã€$F_i$ Shard Model Aggregationã€Œåˆ†ç‰‡æ¨¡å‹èšåˆã€ï¼šä¸ºäº†å¾—åˆ°é¢„æµ‹èŠ‚ç‚¹$w$çš„æ ‡ç­¾ï¼Œå°†å¯¹åº”çš„æ•°æ®ï¼ˆ$w$çš„ç‰¹å¾ã€å…¶é‚»å±…çš„ç‰¹å¾ä»¥åŠå…¶ä¸­çš„å›¾ç»“æ„ï¼‰åŒæ—¶å‘é€åˆ°æ‰€æœ‰åˆ†ç‰‡æ¨¡å‹ï¼Œå¹¶é€šè¿‡èšåˆæ‰€æœ‰åˆ†ç‰‡æ¨¡å‹çš„é¢„æµ‹æ¥è·å¾—æœ€ç»ˆé¢„æµ‹ã€‚ GraphEraseræ¡†æ¶çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š\nå¹³è¡¡å›¾åˆ†å‰² ä½œè€…æå‡ºäº†ä¸‰ç§å›¾åˆ†åŒºç­–ç•¥ï¼š\nç­–ç•¥0ï¼šä»…è€ƒè™‘èŠ‚ç‚¹ç‰¹å¾ä¿¡æ¯ï¼Œå¹¶éšæœºå¯¹èŠ‚ç‚¹è¿›è¡Œåˆ†åŒº\nè¯¥ç­–ç•¥å¯ä»¥æ»¡è¶³G1ã€Œå‡è¡¡åˆ†ç‰‡ã€è¦æ±‚ï¼Œä½†ä¸æ»¡è¶³G2ã€Œå¯æ¯”æ¨¡å‹æ•ˆç”¨ã€è¦æ±‚\nç­–ç•¥1ï¼šä¾é community detectionã€Œç¤¾åŒºå‘ç°ã€ï¼Œä»…è€ƒè™‘ç»“æ„ä¿¡æ¯ï¼Œå¹¶å°½å¯èƒ½ä¿ç•™å®ƒ\nç­–ç•¥2ï¼šåŒæ—¶è€ƒè™‘ç»“æ„ä¿¡æ¯å’ŒèŠ‚ç‚¹ç‰¹å¾ã€‚å°†èŠ‚ç‚¹ç‰¹å¾å’Œå›¾ç»“æ„è¡¨ç¤ºä¸ºä½ç»´å‘é‡ï¼Œå³èŠ‚ç‚¹åµŒå…¥ï¼Œç„¶åå°†èŠ‚ç‚¹åµŒå…¥èšç±»åˆ°ä¸åŒçš„åˆ†ç‰‡ä¸­ã€‚\nç›´æ¥è¿™æ ·åˆ’åˆ†ä¼šå¯¼è‡´åˆ’åˆ†åŒºåŸŸä¸å¹³è¡¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\næ¥ä¸‹æ¥ï¼Œä½œè€…ä¾¿ä»‹ç»äº†å¯¹åº”çš„å¹³è¡¡å›¾åˆ†åŒºç®—æ³•ã€‚\nç¤¾åŒºå‘ç°ç®—æ³• å¯¹äºç­–ç•¥1ï¼Œä¸»è¦ä¾èµ–çš„å°±æ˜¯æ­¤ç®—æ³•ã€‚ä½œè€…åŸºäºLabel Propagation Algorithm (LPA)ã€Œæ ‡ç­¾ä¼ æ’­ç®—æ³•ã€æ¥è®¾è®¡å›¾åˆ†åŒºç®—æ³•ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œshardå°±æ˜¯communityã€‚\næ ‡ç­¾ä¼ æ’­ç®—æ³•\nåœ¨åˆå§‹é˜¶æ®µï¼ˆå›¾aï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½éšæœºåˆ†é…ä¸€ä¸ªåˆ†ç‰‡æ ‡ç­¾ã€‚\nåœ¨æ ‡ç­¾ä¼ æ’­é˜¶æ®µï¼ˆå›¾b â†’ å›¾ cï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå‘é€è‡ªå·±çš„æ ‡ç­¾ï¼Œå°†è‡ªå·±æ›´æ–°æˆæ”¶åˆ°æœ€å¤šçš„é‚£ä¸ªæ ‡ç­¾\næ ‡ç­¾ä¼ æ’­è¿‡ç¨‹ä¼šå¯¹æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œå¤šæ¬¡è¿­ä»£ï¼Œç›´åˆ°æ”¶æ•›ï¼ˆæ²¡æœ‰èŠ‚ç‚¹æ›´æ”¹æ ‡ç­¾ï¼‰\nå°±å¦‚ä¹‹å‰æåˆ°çš„ï¼Œä¼ ç»Ÿçš„LPAä¼šå¯¼è‡´é«˜åº¦ä¸å¹³è¡¡çš„å›¾å½¢åˆ†åŒºï¼Œä¸¥é‡å½±å“äº†é—å¿˜å­¦ä¹ çš„æ•ˆç‡ã€‚\nå¯¹æ­¤ï¼Œä½œè€…æå‡ºäº†ä¸€ä¸ªå®ç°å¹³è¡¡å›¾åˆ†åŒºçš„ä¸€èˆ¬æ–¹æ³•ã€‚ç»™å®šæ‰€éœ€çš„åˆ†ç‰‡å¤§å°$k$å’Œæœ€å¤§åˆ†ç‰‡å¤§å°$\\delta$ï¼Œä¸ºæ¯ä¸ªèŠ‚ç‚¹-åˆ†ç‰‡å®šä¹‰ä¸€ä¸ªå¯èƒ½è¢«åˆ†é…åˆ°æ­¤åˆ†ç‰‡çš„preferenceã€Œåå¥½å€¼ã€ï¼Œä»£è¡¨è¯¥èŠ‚ç‚¹è¢«åˆ†é…ç»™äº†åˆ†ç‰‡ï¼ˆè¿™è¢«ç§°ä¸ºdestination shardã€Œç›®æ ‡åˆ†ç‰‡ã€ï¼‰ï¼Œä»è€Œäº§ç”Ÿ$k \\times n$ä¸ªåå¥½å€¼ã€‚å¯¹è¿™äº›å€¼è¿›è¡Œæ’åºï¼Œå¦‚æœç›®æ ‡åˆ†ç‰‡ä¸­çš„èŠ‚ç‚¹æ•°ä¸è¶…è¿‡$\\delta$ï¼Œå°±å°†è¯¥èŠ‚ç‚¹åˆ†é…ç»™æ­¤åˆ†ç‰‡ã€‚\nå…·ä½“è€Œè¨€ï¼Œä½œè€…æå‡ºäº†Balanced LPA (BLPA)ã€Œå¹³è¡¡æ ‡ç­¾ä¼ æ’­ç®—æ³•ã€ï¼Œå°†åå¥½å€¼å®šä¹‰ä¸ºèŠ‚ç‚¹åˆ†ç‰‡å¯¹çš„neighbor countsã€Œé‚»å±…è®¡æ•°ã€ï¼ˆå±äºç›®æ ‡åˆ†ç‰‡çš„é‚»å±…æ•°é‡ï¼‰ï¼Œå¹¶ä¸”å…·æœ‰è¾ƒå¤§é‚»å±…è®¡æ•°çš„èŠ‚ç‚¹åˆ†ç‰‡å¯¹å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§åˆ†é…ã€‚\nç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š\nåˆå§‹åŒ–ï¼šå°†æ¯ä¸ªèŠ‚ç‚¹éšæœºåˆ†é…ç»™kä¸ªåˆ†ç‰‡ä¹‹ä¸€ é‡æ–°åˆ†é…é…ç½®æ–‡ä»¶è®¡ç®—ï¼šå¯¹äºæ¯ä¸ªèŠ‚ç‚¹$u$ï¼Œä½¿ç”¨å…ƒç»„$\\left\\langle u, \\mathbb{C}_{s r c}, \\mathbb{C}_{d s t}, \\xi\\right\\rangle$è¡¨ç¤ºå…¶é‡æ–°åˆ†é…çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­$\\mathbb{C}_{s r c}$å’Œ$\\mathbb{C}_{d s t}$æ˜¯èŠ‚ç‚¹$u$çš„å½“å‰åˆ†ç‰‡å’Œç›®æ ‡åˆ†ç‰‡ï¼Œ$\\xi$æ˜¯ç›®æ ‡åˆ†ç‰‡$\\mathbb{C}_{d s t}$çš„é‚»å±…è®¡æ•°ï¼Œå¹¶å°†å…¶å­˜å…¥$\\mathbb{F}$ æ’åºï¼šé‚»å±…æ•°é‡è¶Šå¤šçš„é‡æ–°åˆ†é…é…ç½®æ–‡ä»¶åº”å…·æœ‰è¶Šé«˜çš„ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥æŒ‰$\\xi$å¯¹$\\mathbb{F}$è¿›è¡Œé™åºæ’åº ä¼ æ’­æ ‡ç­¾ï¼šæšä¸¾$\\mathbb{F}$é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼Œå¦‚æœ$\\mathbb{C}_{d s t}$çš„å¤§å°ä¸è¶…è¿‡ç»™å®šçš„é˜ˆå€¼$\\delta$ï¼Œå°±å°†å…¶æ·»åŠ åˆ°ç›®æ ‡åˆ†ç‰‡å¹¶ä»å½“å‰åˆ†ç‰‡ä¸­åˆ é™¤ã€‚ä¹‹ååœ¨$\\mathbb{F}$ä¸­åˆ é™¤æ‰€æœ‰å‰©ä½™çš„åŒ…å«èŠ‚ç‚¹$u$çš„å…ƒç»„ã€‚ ä¹‹åä¸æ–­è¿­ä»£ï¼Œç›´åˆ°åˆ†ç‰‡ä¸æ›´æ”¹æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£$T$\nç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(nÂ·d_{ave})$ï¼Œ$n$ä¸ºèŠ‚ç‚¹æ•°ï¼Œ$d_{ave}$ä¸ºè®­ç»ƒå›¾çš„å¹³å‡èŠ‚ç‚¹æ•°ã€‚\nä½œè€…æ— æ³•ä»ç†è®ºä¸Šè¯æ˜å…¶æ”¶æ•›æ€§ï¼Œä¸è¿‡é€šè¿‡å®éªŒè¡¨ç¤º$T=30$æ—¶å‡ ä¹æ˜¯æ”¶æ•›çš„ã€‚\nåµŒå…¥å¼èšç±»ç®—æ³• å¯¹äºç­–ç•¥2ï¼Œä½œè€…ä½¿ç”¨é¢„è®­ç»ƒçš„GNNæ¨¡å‹æ¥è·å–æ‰€æœ‰èŠ‚ç‚¹åµŒå…¥ï¼Œç„¶åå¯¹ç”Ÿæˆçš„èŠ‚ç‚¹åµŒå…¥æ‰§è¡Œèšç±»ã€‚\næ€è·¯æ˜¯å°†GNNæ¨¡å‹çš„æ‰€æœ‰èŠ‚ç‚¹æŠ•å½±åˆ°ç©ºé—´ä¸­ï¼Œå†ä½¿ç”¨K-Meansè¿›è¡Œèšç±»ã€‚åŒæ ·ä¹Ÿä¼šå¯¼è‡´åˆ†å—çš„ä¸å¹³å‡è¿™ä¸ªé—®é¢˜ã€‚\nå¯¹æ­¤ï¼Œä½œè€…æå‡ºäº†Balanced Embedding k-means (BEKM)ã€‚å®šä¹‰preferenceã€Œåå¥½å€¼ã€ä¸ºèŠ‚ç‚¹åµŒå…¥å’Œæ‰€æœ‰èŠ‚ç‚¹åˆ†ç‰‡å¯¹çš„åˆ†ç‰‡è´¨å¿ƒä¹‹é—´çš„æ¬§æ°è·ç¦»ã€‚\nå…·ä½“çš„ç®—æ³•å¦‚ä¸‹ï¼š\nåˆå§‹åŒ–ï¼šéšæœºé€‰æ‹©$k$ä¸ªè´¨å¿ƒ$C^0=\\{C^0_1,C^0_2,\\dots,C^0_k\\}$ è®¡ç®—åµŒå…¥è´¨å¿ƒè·ç¦»ï¼šè®¡ç®—èŠ‚ç‚¹åµŒå…¥å’Œè´¨å¿ƒä¹‹é—´çš„æ‰€æœ‰æˆå¯¹è·ç¦»ï¼Œä»è€Œå¾—åˆ°$n\\times k$ä¸ªåµŒå…¥è´¨å¿ƒå¯¹ã€‚è¿™äº›å¯¹å­˜å‚¨åœ¨$\\mathbb{F}$ä¸­ã€‚ æ’åºè´¨å¿ƒè·ç¦»ï¼šè·ç¦»è¾ƒè¿‘çš„åµŒå…¥è´¨å¿ƒå¯¹å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥æŒ‰ç…§å‡åºå¯¹$\\mathbb{F}$è¿›è¡Œæ’åº é‡æ–°åˆ†é…èŠ‚ç‚¹å’Œæ›´æ–°è´¨å¿ƒï¼šæšä¸¾$\\mathbb{F}$é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼Œå¦‚æœ$\\mathbb{C}_{j}$çš„å¤§å°ä¸è¶…è¿‡ç»™å®šçš„é˜ˆå€¼$\\delta$ï¼Œå°±å°†å…¶æ·»åŠ åˆ°ç›®æ ‡åˆ†ç‰‡ã€‚ä¹‹ååœ¨$\\mathbb{F}$ä¸­åˆ é™¤æ‰€æœ‰å‰©ä½™çš„åŒ…å«èŠ‚ç‚¹$i$çš„å…ƒç»„ã€‚æœ€åï¼Œå°†æ–°è´¨å¿ƒè®¡ç®—ä¸ºå…¶ç›¸åº”åˆ†ç‰‡ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å¹³å‡å€¼ã€‚ åŒæ ·ï¼Œä¸æ–­é‡å¤ç›´åˆ°åˆ†ç‰‡ä¸æ›´æ”¹æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£$T$\nç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(kÂ·n)$ï¼Œ$n$ä¸ªèŠ‚ç‚¹,$k$ä¸ªåˆ†ç‰‡ã€‚\nåŸºäºå­¦ä¹ çš„èšåˆ ç›®å‰å¸¸è§çš„èšåˆæ–¹å¼æœ‰ä¸¤ç§ï¼š\nMajAggrï¼šæ¯ä¸ªåˆ†ç‰‡æ¨¡å‹é¢„æµ‹ä¸€ä¸ªæ ‡ç­¾ï¼Œå–æœ€å¤šé¢„æµ‹çš„æ ‡ç­¾ MeanAggrï¼šæ”¶é›†æ‰€æœ‰åˆ†ç‰‡æ¨¡å‹çš„åéªŒå‘é‡ï¼Œç„¶åæ±‚å¹³å‡å€¼ï¼Œå¾—åˆ°èšåˆåéªŒï¼Œé€‰å–æœ€é«˜åéªŒå€¼ã€‚ ä½œè€…æå‡ºäº†ä¸€ç§åŸºäºå­¦ä¹ çš„èšåˆæ–¹æ³•LBAggrï¼Œä¸ºæ¯ä¸ªåˆ†ç‰‡æ¨¡å‹åˆ†é…ä¸€ä¸ªé‡è¦æ€§åˆ†æ•°ï¼Œé€šè¿‡ä»¥ä¸‹æŸå¤±å‡½æ•°è¿›è¡Œå­¦ä¹ ï¼š\n$$\\min \\_{\\alpha} \\underset{w \\in \\mathcal{G}\\_{o}}{\\mathbb{E}}\\left[\\mathcal{L}\\left(\\sum\\_{i=0}^{m} \\alpha\\_{i} \\cdot \\mathcal{F}\\_{i}\\left(X\\_{w}, \\mathcal{N}\\_{w}\\right), y\\right)\\right]+\\lambda \\sum\\_{i=0}^{m}\\left\\|\\alpha\\_{i}\\right\\|$$å…¶ä¸­$X_{w}$å’Œ$\\mathcal{N}_{w}$æ˜¯è®­ç»ƒå›¾ä¸­èŠ‚ç‚¹$w$çš„ç‰¹å¾å‘é‡å’Œé‚»åŸŸï¼Œ$y$æ˜¯$w$çš„çœŸå®æ ‡ç­¾ï¼Œ$\\mathcal{F}_{i}(\\cdot)$è¡¨ç¤ºåˆ†ç‰‡æ¨¡å‹$i$ï¼Œ$\\alpha_{i}$æ˜¯$\\mathcal{F}_{i}(\\cdot)$çš„é‡è¦æ€§å¾—åˆ†ï¼Œ$m$æ˜¯åˆ†ç‰‡æ€»æ•°ã€‚å°†æ‰€æœ‰é‡è¦æ€§åˆ†æ•°çš„æ€»å’Œè°ƒèŠ‚ä¸º 1ã€‚\nä½œè€…é€šè¿‡æ¢¯åº¦ä¸‹é™æ¥æ‰¾åˆ°æœ€ä¼˜çš„$\\alpha$ï¼Œä»è€Œè§£å†³æœ€ä¼˜åŒ–é—®é¢˜ã€‚ç„¶è€Œï¼Œç›´æ¥æ¢¯åº¦ä¸‹é™ä¼šå¯¼è‡´$\\alpha$ä¸ºè´Ÿæ•°ã€‚ä¸ºäº†è§£å†³æ­¤é—®é¢˜ï¼Œä½œè€…ä½¿ç”¨softmax å‡½æ•°åœ¨æ¯æ¬¡è¿­ä»£ä¸­è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ã€‚\nä¸ºäº†æå‡è¿è¡Œé€Ÿåº¦ï¼Œä½œè€…æŒ‡å‡ºå¯ä»¥ä½¿ç”¨è®­ç»ƒå›¾ä¸­ 10% çš„èŠ‚ç‚¹è¿›è¡Œé‡æ–°è®­ç»ƒã€‚\nGraphEraser å°†ä¸Šé¢æåˆ°çš„æ–¹æ³•é›†åˆåœ¨ä¸€èµ·ï¼Œå°±å¾—åˆ°äº†æ­¤ç®—æ³•ã€‚å½“æŸäº›èŠ‚ç‚¹æˆ–è¾¹ç¼˜è¢«æ•°æ®æ‰€æœ‰è€…æ’¤é”€æ—¶ï¼Œåªéœ€è¦é‡æ–°è®­ç»ƒç›¸åº”çš„åˆ†ç‰‡æ¨¡å‹å³å¯ã€‚\nè¯„ä¼° æ•°æ®é›†\nä½œè€…é‡‡ç”¨äº†äº”ä¸ªå¸¸ç”¨çš„å›¾åƒæ•°æ®é›†ï¼Œåˆ†åˆ«ä¸ºCora, Citeseer, Pubmed, CSå’ŒPhysicsã€‚\næ¨¡å‹\nä½œè€…åœ¨å››ä¸ªGNNæ¨¡å‹ä¸Šè¿›è¡Œäº†æµ‹è¯•ï¼Œåˆ†åˆ«æ˜¯SAGEï¼ŒGCNï¼ŒGATå’ŒGINã€‚æ¯ä¸ªæ¨¡å‹éƒ½ç»è¿‡100è½®çš„è®­ç»ƒï¼Œé»˜è®¤å­¦ä¹ ç‡è®¾ç½®ä¸º0.01ï¼Œæƒé‡è¡°å‡ä¸º0.001ã€‚\næŒ‡æ ‡\nåœ¨é—®é¢˜æ„é€ ä¸­æè¿‡ï¼Œå°±æ˜¯é—å¿˜å­¦ä¹ æ•ˆç‡å’Œæ¨¡å‹æ•ˆç”¨\né—å¿˜å­¦ä¹ æ•ˆç‡ï¼šè®¡ç®—100ä¸ªç‹¬ç«‹é—å¿˜å­¦ä¹ è¯·æ±‚çš„å¹³å‡é—å¿˜å­¦ä¹ æ—¶é—´ã€‚ æ¨¡å‹æ•ˆç”¨ï¼šä½¿ç”¨F1å¾—åˆ† åŸºçº¿\nScratchã€Œä»å¤´å¼€å§‹è®­ç»ƒã€ Randomã€Œéšæœºåˆ†åŒºã€ å®éªŒè®¾ç½®\nå°†æ•´ä¸ªå›¾åˆ†ä¸ºä¸¤ä¸ªä¸ç›¸äº¤çš„éƒ¨åˆ†ï¼Œå…¶ä¸­80%çš„èŠ‚ç‚¹ç”¨äºè®­ç»ƒGNNæ¨¡å‹ï¼Œ20%çš„èŠ‚ç‚¹ç”¨äºè¯„ä¼°æ¨¡å‹æ•ˆç”¨ã€‚\nåˆ†ç‰‡å¤§å°$k$è®¾ä¸º20, 20, 50, 30, å’Œ 100\nç‰‡ä¸­èŠ‚ç‚¹æœ€å¤§ä¸ªæ•°$\\delta$è®¾ä¸º$\\left \\lceil \\frac{n}{k} \\right \\rceil $\næœ€å¤§è¿­ä»£æ¬¡æ•°$T$è®¾ä¸º30\nBLPAå¯¹åº”ç¤¾åŒºå‘ç°ç®—æ³•ï¼›BEKMå¯¹åº”åµŒå…¥å¼èšç±»ç®—æ³•\né—å¿˜å­¦ä¹ æ•ˆç‡è¯„ä¼° å¦‚å›¾æ‰€ç¤ºï¼ŒBLPAå’ŒBEKMç›¸å¯¹äºä»å¤´è®­ç»ƒæ¨¡å‹ï¼Œå¯ä»¥æ˜¾è‘—çš„å‡å°‘è®­ç»ƒçš„æ—¶é—´ã€‚\nç›¸å¯¹äºRandomï¼Œæ—¶é—´ç•¥é•¿æ˜¯å› ä¸ºå­˜åœ¨æ›´é•¿çš„å›¾åˆ†å‰²æˆæœ¬ã€‚BLPA å’Œ BEKM éƒ½éœ€è¦å¤šæ¬¡è¿­ä»£ä»¥ä¿ç•™ç»“æ„ä¿¡æ¯ã€‚ä½†ä¸€æ—¦å®Œæˆå›¾åˆ†å‰²ï¼Œå°±ä¼šå°†å…¶å›ºå®šä¸‹æ¥ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿è¿™ç§ä»£ä»·ï¼Œå› ä¸ºå®ƒåªæ‰§è¡Œä¸€æ¬¡ã€‚\næ¨¡å‹æ•ˆç”¨è¯„åˆ† ç»¿è‰²åº•è‰²è¡¨ç¤ºä¸éœ€è¦èšåˆï¼Œçº¢è‰²åº•è‰²è¡¨ç¤ºä½œè€…æå‡ºçš„æ–¹æ³•ï¼Œè“è‰²å­—ä½“è¡¨ç¤ºæœ€ä¼˜å¾—åˆ†ã€‚\næœ‰äº›éšæœºå¾—åˆ†å’ŒBLPAå’ŒBEKMå·®ä¸å¤šï¼Œä½œè€…è®¤ä¸ºè¿™æ—¶ç”±äºå›¾ç»“æ„ä¿¡æ¯åœ¨GNNæ¨¡å‹ä¸­ä½œç”¨ä¸å¤§å¯¼è‡´çš„ã€‚\nå¯¹æ­¤ï¼Œä½œè€…æå‡ºäº†ä¸€ä¸ªæ–¹æ³•é€‰æ‹©çš„æŠ€å·§ï¼šå¯ä»¥é¦–å…ˆæ¯”è¾ƒMLPå’ŒGNNçš„F1åˆ†æ•°ï¼Œå¦‚æœMLPå’ŒGNNä¹‹é—´çš„F1åˆ†æ•°å·®è·å¾ˆå°ï¼Œéšæœºæ–¹æ³•å¯èƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“å®ç°ï¼Œå¹¶ä¸”å¯ä»¥å®ç°ä¸BLPAå’ŒBEKMç›¸å½“çš„æ¨¡å‹æ•ˆç”¨ã€‚å¦åˆ™ï¼ŒBLPAå’ŒBEKMæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºæ›´å¥½çš„æ¨¡å‹å®ç”¨ç¨‹åºã€‚\nå¦‚æœ GNN éµå¾ª GCN ç»“æ„ï¼Œåˆ™å¯ä»¥é€‰æ‹©BLPAï¼Œå¦åˆ™å¯ä»¥é‡‡ç”¨ BEKMã€‚è¿™æ˜¯å› ä¸º GCN æ¨¡å‹éœ€è¦èŠ‚ç‚¹åº¦ä¿¡æ¯æ¥è¿›è¡Œå½’ä¸€åŒ–ï¼Œè€ŒBLPA å¯ä»¥ä¿ç•™æ›´å¤šçš„å±€éƒ¨ç»“æ„ä¿¡æ¯ï¼Œä»è€Œæ›´å¥½åœ°ä¿ç•™èŠ‚ç‚¹åº¦ã€‚\nBEKM åœ¨ Cora æ•°æ®é›†å’Œ GIN æ¨¡å‹ä¸Šçš„ F1 å¾—åˆ†ä¸º 0.801ï¼Œè€Œ Scratch çš„ç›¸åº” F1 å¾—åˆ†ä¸º 0.787ã€‚ä½œè€…è®¤ä¸ºæœ‰ä¸¤ç§å¯èƒ½çš„åŸå› ï¼šæŠ½æ ·å¾€å¾€å¯ä»¥æ¶ˆé™¤æ•°æ®é›†ä¸­çš„ä¸€äº›â€œå™ªå£°â€ï¼›å…¶æ¬¡ï¼ŒGraphEraseré€šè¿‡èšåˆæ‰€æœ‰å­æ¨¡å‹çš„ç»“æœæ¥è¿›è¡Œæœ€ç»ˆé¢„æµ‹ï¼Œä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼ŒGraphEraseræ‰§è¡Œé›†æˆï¼Œè¿™æ˜¯æé«˜æ¨¡å‹æ€§èƒ½çš„å¦ä¸€ç§æ–¹æ³•ã€‚\nLBAggr çš„æ•ˆæœ æœ‰æ•ˆï¼Œå¯ä»¥æå‡F1åˆ†æ•°ã€‚\næ¯”è¾ƒä¸åŒçš„GNNæ¨¡å‹ï¼ŒGCNä»LBAggrä¸­å—ç›Šæœ€å¤§ï¼Œè€ŒGINå—ç›Šæœ€å°‘ã€‚åœ¨æ¨¡å‹æ•ˆç”¨æ–¹é¢ï¼ŒGraphEraser-BLPAæ–¹æ³•ä»LBAggrä¸­å—ç›Šæœ€å¤§ã€‚æˆ‘ä»¬æ¨æµ‹è¿™æ˜¯å› ä¸ºBLPAåˆ’åˆ†æ–¹æ³•å¯ä»¥æ•è·å±€éƒ¨ç»“æ„ä¿¡æ¯ï¼ŒåŒæ—¶ä¸¢å¤±è®­ç»ƒå›¾çš„ä¸€äº›å…¨å±€ç»“æ„ä¿¡æ¯ã€‚\nä¸ºäº†è¿›ä¸€æ­¥æé«˜å¿˜å´æ•ˆç‡ï¼Œå¯ä»¥ä½¿ç”¨è®­ç»ƒå›¾ä¸­çš„ä¸€å°éƒ¨åˆ†èŠ‚ç‚¹æ¥å­¦ä¹ é‡è¦æ€§åˆ†æ•°ã€‚è¿™æ ·åšå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘ LBAggr çš„é—å¿˜å­¦ä¹ æ—¶é—´ã€‚ä½¿ç”¨ 10% çš„èŠ‚ç‚¹å’Œä½¿ç”¨å›ºå®šæ•°é‡çš„ 1ï¼Œ000 ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å®ç°ä¸ä½¿ç”¨æ‰€æœ‰èŠ‚ç‚¹ç›¸å½“çš„æ¨¡å‹æ•ˆç”¨ã€‚\nå’Œå…¶ä»–é—å¿˜å­¦ä¹ æ–¹æ³•å¯¹æ¯” åŒæ ·ï¼Œä¹Ÿæ˜¯ä½œè€…çš„æ–¹æ³•æ¯”è¾ƒå¥½ã€‚\n","date":"2023-09-13T16:38:20+08:00","image":"https://lbqaq.top/p/graph-unlearning/110091745.webp","permalink":"https://lbqaq.top/p/graph-unlearning/","title":"Graph Unlearning"},{"content":"éšç€å­¦ä¹ çš„æ·±å…¥ï¼Œå¯¹ç®—åŠ›çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ã€‚ä½†æˆ‘å®éªŒå®¤çš„ç”µè„‘å¹¶æ²¡æœ‰é…ç½®æ˜¾å¡ï¼Œæ‰€ä»¥ä¾¿éœ€è¦ä½¿ç”¨å­¦é™¢çš„æœåŠ¡å™¨ã€‚æˆåŠŸæ‹¿åˆ°è´¦å·åï¼Œå´å‘ç°è¿™ä¸ªå¹³å°å¹¶æ²¡æœ‰æˆ‘æƒ³è±¡çš„é‚£ä¹ˆå¥½ç”¨ğŸ˜‡ä¸ºäº†è¾¾åˆ°æœ€èˆ’é€‚çš„ä½¿ç”¨ä½“éªŒï¼Œå¼€æï¼\né…ç½®å¼€å‘é•œåƒ å¹³å°é‡Œè™½ç„¶é¢„ç½®äº†ä¸€äº›å¼€å‘ç¯å¢ƒï¼Œä½†ä»ç„¶ç¼ºå°‘ä¸€äº›éœ€è¦çš„è½¯ä»¶ï¼Œæ¯æ¬¡è¿å…¥åå†é‡æ–°å®‰è£…å®åœ¨æ˜¯ä¸ä¼˜é›…ã€‚é‚£ä¹ˆæœ€å¥½çš„æ–¹æ¡ˆå°±æ˜¯é…ç½®å¥½ä¸€å¥—ç¯å¢ƒï¼Œç›´æ¥æ‹‰å–å°±èƒ½ä½¿ç”¨ã€‚åœ¨æˆ‘ä¹‹å‰ï¼Œå·²ç»æœ‰ä½å¤§ä½¬æ„å»ºäº†ä¸€å¥—å¼€å‘ç¯å¢ƒå¹¶è¿›è¡Œäº†åˆ†äº«ï¼Œå¯æ˜¯é•œåƒå¤§å°è¾¾åˆ°äº†æƒŠäººçš„18.4GğŸ˜¯ï¼ˆå®¹é‡å¤§è¯´æ˜åŠŸèƒ½å¤šï¼Œæ­¤å¤„å¹¶æ²¡æœ‰è´¬ä½çš„æ„æ€ï¼‰ã€‚æˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢Archçš„å“²å­¦ï¼Œå³Keep It Simple, Stupidï¼ˆå¯¹åº”ä¸­æ–‡ä¸ºâ€œä¿æŒç®€å•ï¼Œä¸”ä¸€ç›®äº†ç„¶â€ï¼‰ã€‚ä¸ºæ­¤ï¼Œæˆ‘å†³å®šæ„å»ºä¸€ä¸ªæœ€å°åŒ–çš„å¼€å‘ç¯å¢ƒä¸”å¯ä»¥å¼€ç®±å³ç”¨ã€‚\né€šè¿‡æ¢ç©¶å‘ç°ï¼Œè¿™ä¸ªå¹³å°ä¸Šæ‰€æœ‰çš„å¼€å‘ç¯å¢ƒéƒ½æ˜¯ä¸€ä¸ªDockerå®¹å™¨ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦æ„å»ºå¥½é•œåƒå¹¶ä¸Šä¼ å°±OKäº†ã€‚æ„å»ºé•œåƒæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯è¿›å…¥å®¹å™¨æ‰‹åŠ¨é…ç½®ç„¶åä½¿ç”¨docker commit ...ä¿å­˜ä¿®æ”¹ï¼›å¦ä¸€ç§åˆ™æ˜¯ä½¿ç”¨Dockerfileã€‚ä¸ºäº†ä¾¿äºç»´æŠ¤å’Œä¿®æ”¹ï¼Œæˆ‘é€‰æ‹©äº†ç¬¬äºŒç§ã€‚\næ¥ä¸‹æ¥å°±æ˜¯æ˜ç¡®éœ€æ±‚äº†ï¼Œæˆ‘å¯¹å…¶çš„è¦æ±‚æœ‰å‡ ç‚¹ï¼š\nå®‰è£…å¥½æ˜¾å¡é©±åŠ¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨cuda å®‰è£…å¥½condaï¼Œå¯ä»¥ä¾¿æ·çš„ç®¡ç†pythonå¼€å‘ç¯å¢ƒ æœ‰ä¸€ä¸ªæ˜“ç”¨çš„ç»ˆç«¯ï¼Œæ–¹ä¾¿è°ƒè¯• cudaå¾ˆå¥½è§£å†³ï¼Œç›´æ¥åœ¨nvidiaå®˜æ–¹çš„é•œåƒä¸Šè¿›è¡Œä¿®æ”¹å°±è¡Œäº†\nå¯¹äºcondaï¼ŒåŸç‰ˆçš„Anacondaè¿‡äºè‡ƒè‚¿ï¼Œä¸ç¬¦åˆKISSåŸåˆ™ã€‚åŒæ—¶ï¼Œå½“ç¯å¢ƒå¤æ‚(condaå’Œpipæ··ç”¨)æ—¶ï¼Œsolving environmentè¿™ä¸€æ­¥å¯ä»¥å¡åˆ°ä½ æ€€ç–‘äººç”Ÿï¼Œäºæ˜¯æˆ‘é€‰æ‹©äº†ä½¿ç”¨C++é‡æ„çš„mambaï¼Œå¹¶é€‰æ‹©micromambaè¿›ä¸€æ­¥å‹ç¼©ä½“ç§¯ã€‚\nå¯¹äºç»ˆç«¯ï¼Œé‚£å°±æ— è„‘ä½¿ç”¨zshå¹¶åŠ è½½oh-my-zshå¹¶å®‰è£…æˆ‘æ—¥å¸¸ä½¿ç”¨çš„æ’ä»¶ã€‚\nå¦‚æ­¤ä¸€æ¥ï¼Œå°±å¯ä»¥å¼€å†™Dockerfileäº†ã€‚\nğŸ“ƒå±•å¼€ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 # base image FROM nvidia/cuda:11.3.1-cudnn8-runtime-ubuntu20.04 MAINTAINER luoboQAQ # è®¾ç½®å›½å†…é•œåƒæºå¹¶å®‰è£…è½¯ä»¶ RUN set -ex \\ \u0026amp;\u0026amp; sed -i \u0026#39;s@/archive.ubuntu.com/@/mirrors.bfsu.edu.cn/@g\u0026#39; /etc/apt/sources.list \\ \u0026amp;\u0026amp; apt-get clean \\ \u0026amp;\u0026amp; apt-get update \\ \u0026amp;\u0026amp; apt-get install -y --no-install-recommends openssh-client openssh-server git zsh curl vim \\ \u0026amp;\u0026amp; rm -rf /var/lib/apt/lists/*\t# é…ç½®openssh[https://github.com/wjyzzu/inpsur-dockerfile/blob/main/base/ubuntu/Dockerfile] RUN set -ex \\ \u0026amp;\u0026amp; mkdir -p /var/run/sshd \\ \u0026amp;\u0026amp; /usr/bin/ssh-keygen -A \\ \u0026amp;\u0026amp; cat /etc/ssh/ssh_config | grep -v StrictHostKeyChecking \u0026gt; /etc/ssh/ssh_config.new \\ \u0026amp;\u0026amp; echo \u0026#34; StrictHostKeyChecking no\u0026#34; \u0026gt;\u0026gt; /etc/ssh/ssh_config.new \\ \u0026amp;\u0026amp; cat /etc/ssh/sshd_config | grep -v PermitRootLogin\u0026gt; /etc/ssh/sshd_config.new \\ \u0026amp;\u0026amp; echo \u0026#34;PermitRootLogin yes\u0026#34; \u0026gt;\u0026gt; /etc/ssh/sshd_config.new \\ \u0026amp;\u0026amp; mv /etc/ssh/ssh_config.new /etc/ssh/ssh_config \\ \u0026amp;\u0026amp; mv /etc/ssh/sshd_config.new /etc/ssh/sshd_config # é…ç½®oh-my-zsh RUN set -ex \\ \u0026amp;\u0026amp; git clone https://gitee.com/mirrors/oh-my-zsh ~/.oh-my-zsh \\ \u0026amp;\u0026amp; cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc \\ \u0026amp;\u0026amp; git clone https://gitee.com/lightnear/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting \\ \u0026amp;\u0026amp; sed -i \u0026#34;s/plugins=(git.*)$/plugins=(git zsh-syntax-highlighting)/\u0026#34; ~/.zshrc \\ \u0026amp;\u0026amp; chsh -s /bin/zsh \\ \u0026amp;\u0026amp; rm -rf /var/lib/apt/lists/* # å®‰è£…micromambaå¹¶é…ç½®å›½å†…æº RUN set -ex \\ \u0026amp;\u0026amp; curl -Ls https://micro.mamba.pm/api/micromamba/linux-64/latest | tar -xvj bin/micromamba \\ \u0026amp;\u0026amp; ./bin/micromamba shell init -s zsh -p ~/micromamba \\ \u0026amp;\u0026amp; echo \u0026#34;\\nalias conda=\u0026#39;micromamba\u0026#39;\u0026#34; \u0026gt;\u0026gt; ~/.zshrc \\ \u0026amp;\u0026amp; echo \u0026#34;channels: \\n\\ - defaults \\n\\ show_channel_urls: true \\n\\ default_channels: \\n\\ - https://mirrors.bfsu.edu.cn/anaconda/pkgs/main \\n\\ - https://mirrors.bfsu.edu.cn/anaconda/pkgs/r \\n\\ - https://mirrors.bfsu.edu.cn/anaconda/pkgs/msys2 \\n\\ custom_channels: \\n\\ conda-forge: https://mirrors.bfsu.edu.cn/anaconda/cloud \\n\\ msys2: https://mirrors.bfsu.edu.cn/anaconda/cloud \\n\\ bioconda: https://mirrors.bfsu.edu.cn/anaconda/cloud \\n\\ menpo: https://mirrors.bfsu.edu.cn/anaconda/cloud \\n\\ pytorch: https://mirrors.bfsu.edu.cn/anaconda/cloud \\n\\ pytorch-lts: https://mirrors.bfsu.edu.cn/anaconda/cloud \\n\\ simpleitk: https://mirrors.bfsu.edu.cn/anaconda/cloud \\n\\ deepmodeling: https://mirrors.bfsu.edu.cn/anaconda/cloud/\u0026#34; \u0026gt; ~/.condarc \\ \u0026amp;\u0026amp; echo \u0026#34;[global] \\n\\ index-url = https://mirrors.bfsu.edu.cn/pypi/web/simple\u0026#34; \u0026gt; /etc/pip.conf # é…ç½®ç½‘ç»œä»£ç† RUN set -ex \\ \u0026amp;\u0026amp; echo \u0026#34;\\nexport HTTP_PROXY=\u0026#39;http://127.0.0.1:3128\u0026#39;\u0026#34; \u0026gt;\u0026gt; ~/.zshrc \\ \u0026amp;\u0026amp; echo \u0026#34;export HTTPS_PROXY=\u0026#39;http://127.0.0.1:3128\u0026#39;\u0026#34; \u0026gt;\u0026gt; ~/.zshrc \\ \u0026amp;\u0026amp; echo \u0026#34;export ALL_PROXY=\u0026#39;http://127.0.0.1:3128\u0026#39;\u0026#34; \u0026gt;\u0026gt; ~/.zshrc EXPOSE 22 WORKDIR /root ENTRYPOINT [\u0026#34;/bin/zsh\u0026#34;] é™¤äº†ä¸Šé¢æåˆ°çš„å‡ ç‚¹ï¼Œæˆ‘è¿˜å¢åŠ äº†ï¼š\né•œåƒå·²é…ç½®å¥½å›½å†…é•œåƒæºï¼Œæ–¹ä¾¿æ„å»ºä»¥åŠä½¿ç”¨æ—¶å®‰è£…æ–°çš„åŒ… é…ç½®opensshï¼Œä½¿å…¶å¯ä»¥è¢«æµªæ½®å¹³å°æ¥å…¥å¹¶æä¾›SSHæœåŠ¡ é¢„å…ˆå®‰è£…å¥½vimï¼Œä¾¿äºé…ç½®æ–‡ä»¶çš„ä¿®æ”¹ æå‰è®¾ç½®å¥½ç½‘ç»œä»£ç†ï¼Œä¾¿äºè¿æ¥äº’è”ç½‘ è®¾ç½®åˆ«åï¼šconda-\u0026gt;micromambaï¼Œæ–¹ä¾¿æ—¥å¸¸ä½¿ç”¨ ç”±äºæœåŠ¡å™¨æ²¡æœ‰ç½‘ç»œï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä¸Šä¼ é•œåƒï¼Œä½¿ç”¨å‘½ä»¤docker save -o [TAGS]æ‰“åŒ…æˆtaråŒ…å¹¶ä¸Šä¼ è‡³ç³»ç»Ÿä¸­ã€‚\nå°ç»“ å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©å¤§ä¼™å¿«é€Ÿä¸Šæ‰‹è¯¥å¹³å°ï¼Œæ¯•ç«Ÿæœ‰è¿™ä¹ˆå¥½çš„èµ„æºå°±è¦å¥½å¥½åˆ©ç”¨èµ·æ¥ã€‚\n","date":"2023-09-03T14:10:14+08:00","image":"https://lbqaq.top/p/langchao/102879503.webp","permalink":"https://lbqaq.top/p/langchao/","title":"æµªæ½®äººå·¥æ™ºèƒ½å¹³å°ä½¿ç”¨å¿ƒå¾—"},{"content":"ä¹‹å‰å†™è¿‡ä¸€ç¯‡å…³äºMagiskæ¨¡å—çš„ç¼–å†™çš„æ–‡ç« ï¼Œä¸è¿‡Magiskä¿®æ”¹çš„éƒ½æ˜¯æ¯”è¾ƒåç³»ç»Ÿçš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”¨çš„å¹¶ä¸æ˜¯å¾ˆå¤šã€‚äºæ˜¯æˆ‘ä¾¿æŠŠç›®å…‰è½¬å‘Xposedï¼Œæ¯•ç«Ÿä¼šHookçœŸçš„å¤ªé…·è¾£ğŸ˜\nXposedçš„åŸºæœ¬æ¦‚å¿µ æåˆ°Xposedï¼Œçˆ±ç©æœºçš„ç”¨æˆ·éƒ½åº”è¯¥å¬è¿‡ä»–çš„å¤§åï¼Œä½œä¸ºä¸€æ¬¾å¯ä»¥åœ¨ä¸ä¿®æ”¹APKçš„æƒ…å†µä¸‹å½±å“ç¨‹åºè¿è¡Œçš„æ¡†æ¶ï¼Œå¯ä»¥åŸºäºå®ƒå¯ä»¥åˆ¶ä½œå‡ºè®¸å¤šåŠŸèƒ½å¼ºå¤§çš„æ¨¡å—ï¼Œä¸”åœ¨åŠŸèƒ½ä¸å†²çªçš„æƒ…å†µä¸‹åŒæ—¶è¿ä½œã€‚å¾®ä¿¡é˜²æ’¤å›ã€æ­¥æ•°ä¿®æ”¹ã€å»å¹¿å‘Šã€ç¾åŒ–\u0026hellip;\u0026hellip;.ä»–èƒ½å®ç°è®¸è®¸å¤šå¤šçš„åŠŸèƒ½ï¼Œå¯ä»¥è¯´æ²¡æœ‰å®ƒç©æœºçš„ä¸–ç•Œå°†ä¼šå°‘å¾ˆå¤šçš„ä¹è¶£ã€‚\nå®ƒçš„åŸç†å°±æ˜¯é€šè¿‡æ›¿æ¢ç³»ç»ŸåŸæœ¬çš„app_processï¼ŒåŠ è½½ä¸€ä¸ªé¢å¤–çš„jaråŒ…ï¼Œä»è€Œå®ç°å¯¹zygoteè¿›ç¨‹åŠå…¶åˆ›å»ºçš„Dalvik/ARTè™šæ‹Ÿæœºçš„åŠ«æŒã€‚\næ²¡å¬æ‡‚ï¼Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä¹Ÿä¸æ‡‚ã€‚ç›®å‰æˆ‘ä»¬åªè¦å…³æ³¨å¦‚ä½•ä½¿ç”¨å³å¯äº†ï¼Œè‡³äºåŸç†å¯ä»¥å…ˆæ”¾ä¸€æ”¾ã€‚\nç¯å¢ƒå‡†å¤‡ åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ï¼š\nä¸€å°å¯ä»¥å®‰è£…Xposedæ¡†æ¶çš„æ‰‹æœºï¼ˆæ¨èLSPosedã€Android 10+ï¼‰ ä¸€å°å¯ä»¥ç¼–å†™ä»£ç å¹¶ä¸”è£…æœ‰jdkçš„ç”µè„‘ ä¸€ä¸ªåå«Android Studioçš„è½¯ä»¶ï¼ˆæˆ‘ä¸»æ‰“ä¸€ä¸ªå›é€†ï¼Œç”¨IDEAåŒæ ·å¯ä»¥ï¼‰ ä¸€ä¸ªåç¼–è¯‘è½¯ä»¶ï¼Œå¦‚ï¼šJADX ä¸€ä¸ªå¯ä»¥æŸ¥çœ‹å¸ƒå±€çš„Appï¼Œå¦‚ï¼šå¼€å‘è€…åŠ©æ‰‹ è¿™æ¬¡æˆ‘æ‰“ç®—ä»ä¸€ä¸ªå®ä¾‹å‡ºå‘ï¼šå°æ˜æ‰‹æœºä¸Šè£…äº†ä¸€äº›æ¶æ„è½¯ä»¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡Xposedè¿›è¡ŒHookï¼Œä¸è®©å°æ˜å¯åŠ¨è¿™äº›è½¯ä»¶ã€‚\nå‡†å¤‡å·¥ä½œ åˆ›å»ºé¡¹ç›®\u0026amp;å¼•å…¥ä¾èµ– é¦–å…ˆåœ¨IDEAé€‰æ‹©æ–°å»ºé¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆå™¨ä¸‹æœ‰Androidè¿™é¡¹ï¼Œæˆ‘ä»¬é€‰æ‹©å®ƒã€‚\nç¬¬ä¸€æ¬¡é€‰æ‹©æ—¶å¯èƒ½ä¼šè¦æ±‚ä½ ä¸‹è½½å®‰å“çš„SDKï¼ŒæŒ‰ç…§æŒ‡ç¤ºä¸€æ­¥ä¸€æ­¥è¿›è¡Œå°±å¥½ã€‚\nJava æˆ‘ä»¬é€‰æ‹©åˆ›å»ºä¸€ä¸ªNo Activityï¼Œè¯­è¨€é€‰æ‹©Javaï¼ŒSDKé€‰é»˜è®¤çš„API 24å°±å¯ã€‚\nç„¶åï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥Xposedçš„åº“ï¼Œä¸è¿‡å®ƒå¹¶æ²¡æœ‰ä¸Šä¼ åˆ°MavenCentralä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨settings.gradleé‡Œä¿®æ”¹ä¸€ä¸‹(gradle 7.0+)\næ‰“å¼€settings.gradleï¼Œæ·»åŠ ä¸€è¡Œä»£ç \n1 2 3 4 5 6 7 8 dependencyResolutionManagement { repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS) repositories { google() mavenCentral() maven { url \u0026#39;https://api.xposed.info/\u0026#39; } // æ·»åŠ è¿™ä¸€è¡Œå³å¯ } } ä¹‹åï¼Œè¿›å…¥æˆ‘ä»¬appç›®å½•ä¸‹çš„build.gradleï¼Œå¼•å…¥xposedçš„ä¾èµ–\n1 2 3 4 dependencies { compileOnly \u0026#39;de.robv.android.xposed:api:82\u0026#39; //æ·»åŠ æˆ‘ // compileOnly \u0026#39;de.robv.android.xposed:api:82:sources\u0026#39; // ä¸è¦å¯¼å…¥æºç ï¼Œè¿™ä¼šå¯¼è‡´ideaæ— æ³•ç´¢å¼•æ–‡ä»¶ï¼Œä»è€Œè®©è¯­æ³•æç¤ºå¤±æ•ˆ } æˆ‘ä»¬è¿˜è¦åœ¨./app/src/main/res/valuesç›®å½•ä¸‹åˆ›å»ºarrays.xmlï¼Œå¡«å…¥ä¸‹é¢çš„å†…å®¹ï¼š\n1 2 3 4 5 6 7 8 \u0026lt;resources\u0026gt; \u0026lt;string-array name=\u0026#34;xposedscope\u0026#34; \u0026gt; \u0026lt;!-- è¿™é‡Œå¡«å†™æ¨¡å—çš„ä½œç”¨åŸŸåº”ç”¨çš„åŒ…åï¼Œå¯ä»¥å¡«å¤šä¸ªã€‚ --\u0026gt; \u0026lt;item\u0026gt;ceui.lisa.pixiv\u0026lt;/item\u0026gt; \u0026lt;item\u0026gt;com.xjs.ehviewer\u0026lt;/item\u0026gt; \u0026lt;item\u0026gt;com.picacomic.fregata\u0026lt;/item\u0026gt; \u0026lt;/string-array\u0026gt; \u0026lt;/resources\u0026gt; è¿™ä¸€æ­¥ä¸»è¦æ˜¯æŒ‡å®šæ¨¡å—çš„ä½œç”¨åŸŸåŒ…åï¼Œæ•ˆæœå°±æ˜¯åœ¨Lsposedä¸­å‹¾é€‰ä½œç”¨åŸŸæ—¶ä¼šåœ¨åº”ç”¨ä¸‹æç¤ºæ¨èåº”ç”¨ã€‚\næœ€åï¼Œæˆ‘ä»¬åœ¨Runé‚£é‡Œç¼–è¾‘ä¸€ä¸‹å¯åŠ¨é…ç½®ï¼Œå‹¾é€‰Always install with package managerå¹¶ä¸”å°†Launch Optionsæ”¹æˆNothing\nKotlin åˆ›å»ºé¡¹ç›®çš„éƒ¨åˆ†å’ŒJavaçš„è®¾ç½®æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯éœ€è¦å°†è¯­è¨€åˆ‡æ¢ä¸€ä¸‹ã€‚æ–°ç‰ˆæœ¬çš„Android Studioå°†åŸæ¥çš„æ‰“åŒ…è¯­è¨€æ¢æˆäº†Kotlinï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è®¾ç½®æœ‰ä¸€äº›ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚2024.09.15æ›´æ–°\nåŸæ¥çš„settings.gradleå˜ä¸ºsettings.gradle.kts\n1 2 3 4 5 6 7 8 dependencyResolutionManagement { repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS) repositories { google() mavenCentral() maven { url = uri(\u0026#34;https://api.xposed.info/\u0026#34;) } //æ·»åŠ è¿™ä¸€è¡Œ } } åŸæ¥çš„build.gradleå˜ä¸ºbuild.gradle.kts\n1 2 3 dependencies { compileOnly(\u0026#34;de.robv.android.xposed:api:82\u0026#34;) //æ·»åŠ æˆ‘ } å£°æ˜æ¨¡å— æ¥ä¸‹æ¥å°±æ˜¯è¦å£°æ˜æˆ‘ä»¬æ˜¯ä¸€ä¸ªXposedæ¨¡å—ï¼Œæ–¹ä¾¿æ¡†æ¶å‘ç°ã€‚\nåœ¨./app/src/main/AndroidManifest.xmlé‡Œï¼Œæˆ‘ä»¬å°†\u0026lt;application ... /\u0026gt;æ”¹æˆä»¥ä¸‹å½¢å¼ï¼ˆæ³¨æ„ï¼Œæ˜¯æ”¹æˆï¼å°±æ˜¯æŠŠç»“å°¾çš„/\u0026gt;æ¢æˆ\u0026gt; \u0026lt;/application\u0026gt;ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \u0026lt;application ... \u0026gt; \u0026lt;!-- æ˜¯å¦æ˜¯xposedæ¨¡å—ï¼Œxposedæ ¹æ®è¿™ä¸ªæ¥åˆ¤æ–­æ˜¯å¦æ˜¯æ¨¡å— --\u0026gt; \u0026lt;meta-data android:name=\u0026#34;xposedmodule\u0026#34; android:value=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;!-- æ¨¡å—æè¿°ï¼Œæ˜¾ç¤ºåœ¨xposedæ¨¡å—åˆ—è¡¨é‚£é‡Œç¬¬äºŒè¡Œ --\u0026gt; \u0026lt;meta-data android:name=\u0026#34;xposeddescription\u0026#34; android:value=\u0026#34;ä¸å¯ä»¥æ¶©æ¶©\u0026#34; /\u0026gt; \u0026lt;!-- æœ€ä½xposedç‰ˆæœ¬å·(libæ–‡ä»¶åå¯çŸ¥,ä¸€èˆ¬å¡«54å³å¯) --\u0026gt; \u0026lt;meta-data android:name=\u0026#34;xposedminversion\u0026#34; android:value=\u0026#34;54\u0026#34; /\u0026gt; \u0026lt;!-- æ¨¡å—ä½œç”¨åŸŸ --\u0026gt; \u0026lt;meta-data android:name=\u0026#34;xposedscope\u0026#34; android:resource=\u0026#34;@array/xposedscope\u0026#34;/\u0026gt; \u0026lt;/application\u0026gt; ç„¶ååœ¨src/mainç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åå«assetsï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å«xposed_initï¼Œæ³¨æ„ï¼Œå®ƒæ²¡æœ‰åç¼€åï¼ï¼ã€‚\næ¥ç€æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå…¥å£ç±»ï¼Œåå«MainHookï¼ˆæˆ–è€…éšä¾¿ä½ æƒ³å–ä»€ä¹ˆåå­—éƒ½è¡Œï¼‰ï¼Œåˆ›å»ºå¥½åå›åˆ°æˆ‘ä»¬çš„xposed_inité‡Œå¹¶ç”¨æ–‡æœ¬æ–‡ä»¶çš„æ–¹å¼æ‰“å¼€å®ƒï¼Œè¾“å…¥æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ç±»çš„å®Œæ•´è·¯å¾„ã€‚å¦‚ï¼štop.lbqaq.nosese.MainHookï¼ŒåŒæ—¶æ³¨æ„å¤§å°å†™ã€‚\nå®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¼å¼€å§‹ç¼–å†™Xposedæ¨¡å—äº†ã€‚\næ¨¡å—ç¼–å†™ MainHook åœ¨MainHooké‡Œï¼Œæˆ‘ä»¬éœ€è¦å®ç°Xposedçš„IXposedHookLoadPackageæ¥å£ï¼Œä»¥ä¾¿æ‰§è¡ŒHookæ“ä½œã€‚å°†ä»¥ä¸‹å†…å®¹æ›¿æ¢åŸæ¥çš„ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 import de.robv.android.xposed.IXposedHookLoadPackage; import de.robv.android.xposed.callbacks.XC_LoadPackage; public class MainHook implements IXposedHookLoadPackage { @Override public void handleLoadPackage(XC_LoadPackage.LoadPackageParam lpparam) throws Throwable { // è¿‡æ»¤ä¸å¿…è¦çš„åº”ç”¨ if (!lpparam.packageName.equals(\u0026#34;ceui.lisa.pixiv\u0026#34;)) return; // æ‰§è¡ŒHook hook(lpparam); } private void hook(XC_LoadPackage.LoadPackageParam lpparam) { // å…·ä½“æµç¨‹ } } å¯¹äºKotlinï¼Œä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import de.robv.android.xposed.IXposedHookLoadPackage import de.robv.android.xposed.callbacks.XC_LoadPackage class MainHook : IXposedHookLoadPackage { override fun handleLoadPackage(lpparam: XC_LoadPackage.LoadPackageParam) { // è¿‡æ»¤ä¸å¿…è¦çš„åº”ç”¨ if (lpparam.packageName != \u0026#34;ceui.lisa.pixiv\u0026#34;) return // æ‰§è¡ŒHook hook(lpparam) } private fun hook(lpparam: XC_LoadPackage.LoadPackageParam) { // å…·ä½“æµç¨‹ } } åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„å‡†å¤‡å·¥ä½œå·²ç»å®Œæˆï¼Œå®‰è£…æ¨¡å—å¹¶åœ¨æ¡†æ¶ä¸­æ¿€æ´»å®ƒï¼\né˜»æ­¢åº”ç”¨å¯åŠ¨ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åç¼–è¯‘ç¨‹åºæ¥æ‰¾åˆ°éœ€è¦Hookçš„ç‚¹ã€‚æ ¹æ®å®ä¾‹çš„è¦æ±‚ï¼Œæˆ‘ä»¬éœ€è¦é˜»æ­¢å°æ˜å¯åŠ¨æŸäº›åº”ç”¨ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦Hookå¯åŠ¨å‡½æ•°ï¼Œè®©å…¶æ— æ³•è¿è¡Œå³å¯ã€‚\nåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£Androidçš„å››å¤§ç»„ä»¶ä¹‹ä¸€â€”â€”\u0026ldquo;Activity(æ´»åŠ¨)\u0026rdquo;\nåœ¨åº”ç”¨ä¸­çš„ä¸€ä¸ªActivityå¯ä»¥ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç•Œé¢ï¼Œæ„æ€å¯ä»¥ç†è§£ä¸ºâ€œæ´»åŠ¨â€ï¼Œå³ä¸€ä¸ªæ´»åŠ¨å¼€å§‹ï¼Œä»£è¡¨ Activityç»„ä»¶å¯åŠ¨ï¼Œæ´»åŠ¨ç»“æŸï¼Œä»£è¡¨ä¸€ä¸ªActivityçš„ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚ä¸€ä¸ªAndroidåº”ç”¨å¿…é¡»é€šè¿‡Activityæ¥è¿è¡Œå’Œå¯åŠ¨ï¼ŒActivityçš„ç”Ÿå‘½å‘¨æœŸäº¤ç»™ç³»ç»Ÿç»Ÿä¸€ç®¡ç†ã€‚\nå‡½æ•°åç§° æè¿° onCreate() ä¸€ä¸ªActivityå¯åŠ¨åç¬¬ä¸€ä¸ªè¢«è°ƒç”¨çš„å‡½æ•°ï¼Œå¸¸ç”¨æ¥åœ¨æ­¤æ–¹æ³•ä¸­è¿›è¡ŒActivityçš„ä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚ä¾‹å¦‚åˆ›å»ºViewï¼Œç»‘å®šæ•°æ®ï¼Œæ³¨å†Œç›‘å¬ï¼ŒåŠ è½½å‚æ•°ç­‰ã€‚ onStart() å½“Activityæ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ—¶ï¼Œæ­¤æ–¹æ³•è¢«è°ƒç”¨ä½†æ­¤æ—¶è¿˜æ— æ³•è¿›è¡Œä¸ç”¨æˆ·çš„äº¤äº’æ“ä½œã€‚ onResume() è¿™ä¸ªæ–¹æ³•åœ¨onStart()ä¹‹åè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯åœ¨Activityå‡†å¤‡å¥½ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’çš„æ—¶å€™è°ƒç”¨ï¼Œæ­¤æ—¶çš„Activityä¸€å®šä½äºActivityæ ˆé¡¶ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€ã€‚ onPause() è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ç³»ç»Ÿå‡†å¤‡å»å¯åŠ¨æˆ–è€…æ¢å¤å¦å¤–ä¸€ä¸ªActivityçš„æ—¶å€™è°ƒç”¨ï¼Œé€šå¸¸åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œä¸€äº›é‡Šæ”¾èµ„æºçš„æ–¹æ³•ï¼Œä»¥åŠä¿å­˜ä¸€äº›å…³é”®æ•°æ®ã€‚ onStop() è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Activityå®Œå…¨ä¸å¯è§çš„æ—¶å€™è°ƒç”¨çš„ã€‚ onDestroy() è¿™ä¸ªæ–¹æ³•åœ¨Activityé”€æ¯ä¹‹å‰è°ƒç”¨ï¼Œä¹‹åActivityçš„çŠ¶æ€ä¸ºé”€æ¯çŠ¶æ€ã€‚ onRestart() å½“Activityä»åœæ­¢stopçŠ¶æ€æ¢è¿›å…¥startçŠ¶æ€æ—¶è°ƒç”¨çŠ¶æ€ã€‚ å½“ Activity è¿›å…¥æ–°çŠ¶æ€æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨å…¶ä¸­æ¯ä¸ªå›è°ƒã€‚\né‚£ä¹ˆï¼Œæˆ‘ä»¬çš„æ€è·¯å°±å¾ˆæ˜ç¡®äº†ï¼šåªè¦æ‰¾åˆ°è¿™äº›ç¨‹åºçš„èµ·å§‹Activityï¼Œå¹¶Hookå®ƒçš„onCreate()å‡½æ•°ï¼Œåœ¨å…¶å¯åŠ¨æ—¶å°±å°†å…¶æ€æ­»ï¼Œè¿™æ ·èƒ½å®ç°æ— æ³•å¯åŠ¨è¯¥ç¨‹åºã€‚\næˆ‘ä»¬ä½¿ç”¨å¼€å‘è€…åŠ©æ‰‹ï¼Œé€‰æ‹©å¸ƒå±€æŸ¥çœ‹ï¼Œç„¶åæ‰“å¼€ç›®æ ‡åº”ç”¨ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ˜¾ç¤ºäº†å½“å‰çš„åŒ…åå’Œå½“å‰Activityã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨jadx-guiï¼Œåç¼–è¯‘è¯¥åº”ç”¨ï¼Œæ‰¾åˆ°è¯¥Activity(ceui.lisa.activities.MainActivity)ï¼Œå¹¶å¯»æ‰¾æ˜¯å¦æœ‰onCreate()å‡½æ•°ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥Hookå³å¯ã€‚\nç„¶è€Œï¼Œè¿™ä¸ªç¨‹åºå±…ç„¶æ²¡æœ‰ğŸ˜¥ï¼Œè¯´æ˜å®ƒæ²¡æœ‰é‡å†™è¯¥æ–¹æ³•ï¼Œé‚£è¯¥å¦‚ä½•åšå‘¢ï¼Ÿè¿™æ—¶å°±å¯ä»¥ç”¨ç¬¬äºŒç§æ–¹æ³•äº†ã€‚\néå†æ‰€æœ‰ç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³• ä»æ ‡é¢˜å°±èƒ½çœ‹å‡ºæ¥ï¼Œæˆ‘ç›´æ¥æŠŠä½ æ‰€æœ‰èƒ½Hookçš„æ–¹æ³•å…¨éƒ¨è¯»å‡ºæ¥ï¼Œé‚£ä¸å°±éšä¾¿æˆ‘æŒ‘äº†å˜›ã€‚\næˆ‘ä»¬çŸ¥é“ï¼ŒJavaç¨‹åºéƒ½è¿è¡Œåœ¨jvmè™šæ‹Ÿæœºä¸­ï¼Œjvmè™šæ‹Ÿæœºé€šè¿‡ClassLoaderåŠ¨æ€è£…è½½æ‰€éœ€çš„classã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬ç›´æ¥Hook ClassLoader ï¼Œä¸å°±çŸ¥é“ä½ æœ‰å“ªäº›æ–¹æ³•è¢«åŠ è½½è¿›æ¥äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 public void hook(XC_LoadPackage.LoadPackageParam lpparam) { XposedHelpers.findAndHookMethod(ClassLoader.class, \u0026#34;loadClass\u0026#34;, String.class, new XC_MethodHook() { @Override protected void afterHookedMethod(MethodHookParam param) throws Throwable { super.afterHookedMethod(param); Class clazz = (Class) param.getResult(); String clazzName = clazz.getName(); //æ’é™¤éåŒ…åçš„ç±» if(clazzName.contains(\u0026#34;ceui.lisa\u0026#34;)){ Method[] mds = clazz.getDeclaredMethods(); for(int i =0;i\u0026lt;mds.length;i++){ final Method md = mds[i]; int mod = mds[i].getModifiers(); //å»é™¤æŠ½è±¡ã€nativeã€æ¥å£æ–¹æ³• if(!Modifier.isAbstract(mod) \u0026amp;\u0026amp; !Modifier.isNative(mod) \u0026amp;\u0026amp;!Modifier.isAbstract(mod)){ XposedBridge.hookMethod(mds[i], new XC_MethodHook() { @Override protected void beforeHookedMethod(MethodHookParam param) throws Throwable { super.beforeHookedMethod(param); Log.d(\u0026#34;lbqaq\u0026#34;,md.toString()); } }); } } } } }); } ï¼ˆPSï¼šè¿™ä¸ªç¨‹åºå¾ˆå¥‡æ€ªï¼ŒåŒ…åæœ‰pixivï¼Œä½†ç±»åæ²¡æœ‰ï¼Œæ‰€ä»¥ç”¨ceui.lisa.pixivä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼‰\nå°†ä¸Šé¢è¿™æ®µä»£ç å¤åˆ¶åˆ°ä¹‹å‰å†™å¥½çš„MainHookä¸­å»ï¼Œç¼–è¯‘æ¨é€åˆ°æ‰‹æœºã€‚\nåœ¨ç»ˆç«¯æ‰§è¡Œadb logcat \u0026quot;lbqaq:D *:S\u0026quot;å¼€å¯logcatå¹¶è¿›è¡Œè¿‡æ»¤ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 â¯ adb logcat \u0026#34;lbqaq:D *:S\u0026#34; --------- beginning of main 07-21 10:49:48.185 5050 5050 D lbqaq : public void ceui.lisa.activities.Shaft.onCreate() 07-21 10:49:48.194 5050 5050 D lbqaq : private void ceui.lisa.activities.Shaft.updateTheme() 07-21 10:49:48.216 5050 5050 D lbqaq : public static android.content.Context ceui.lisa.activities.Shaft.getContext() 07-21 10:49:48.238 5050 5050 D lbqaq : protected int ceui.lisa.activities.MainActivity.initLayout() 07-21 10:49:48.238 5050 5050 D lbqaq : public boolean ceui.lisa.activities.MainActivity.hideStatusBar() 07-21 10:49:48.276 5050 5050 D lbqaq : protected void ceui.lisa.activities.MainActivity.initView() 07-21 10:49:48.276 5050 5050 D lbqaq : public static com.tencent.mmkv.MMKV ceui.lisa.activities.Shaft.getMMKV() 07-21 10:49:48.276 5050 5050 D lbqaq : private void ceui.lisa.activities.MainActivity.initDrawerHeader() 07-21 10:49:48.278 5050 5050 D lbqaq : public androidx.drawerlayout.widget.DrawerLayout ceui.lisa.activities.MainActivity.getDrawer() 07-21 10:49:48.279 5050 5050 D lbqaq : protected void ceui.lisa.activities.MainActivity.initData() 07-21 10:49:48.279 5050 5050 D lbqaq : private void ceui.lisa.activities.MainActivity.initFragment() å¯ä»¥çœ‹åˆ°è¯¥ç¨‹åºçš„è°ƒç”¨æ–¹æ³•ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©é åçš„ceui.lisa.activities.MainActivity.initFragment()ä½œä¸ºæˆ‘ä»¬çš„Hookç›®æ ‡ã€‚\nä¸ºä»€ä¹ˆè¦é€‰æ‹©é åçš„æ–¹æ³•ä½œä¸ºæˆ‘ä»¬çš„Hookç›®æ ‡å‘¢ï¼Ÿ\nè¿™æ˜¯ç”±äºå¦‚æœé€‰æ‹©è¾ƒå‰çš„æ–¹æ³•ï¼Œæœ‰äº›å˜é‡è¿˜æ²¡åˆå§‹åŒ–å®Œæˆï¼Œè¿™æ—¶è°ƒç”¨finish()å¯èƒ½ä¼šæŠ¥é”™ã€‚\nHook activity æˆ‘ä»¬ä½¿ç”¨æœ€åŸºç¡€çš„hookæ–¹å¼ï¼Œå³Xposedè‡ªå¸¦çš„XposedHelpers.findAndHookMethodï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 private void hook(XC_LoadPackage.LoadPackageParam lpparam) { // å®ƒæœ‰ä¸¤ä¸ªé‡è½½ï¼ŒåŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯å¡«Classï¼Œä¸€ä¸ªæ˜¯å¡«ClassNameä»¥åŠClassLoader // ç¬¬ä¸€ç§ å¡«ClassName XC_MethodHook.Unhook unhook = XposedHelpers.findAndHookMethod(\u0026#34;me.kyuubiran.xposedapp.MainActivity\u0026#34;, // className lpparam.classLoader, // classLoader ä½¿ç”¨lpparam.classLoader \u0026#34;onCreate\u0026#34;, // è¦hookçš„æ–¹æ³• Bundle.class, // è¦hookçš„æ–¹æ³•çš„å‚æ•°è¡¨ï¼Œå¦‚æœæœ‰å¤šä¸ªå°±ç”¨é€—å·éš”å¼€ new XC_MethodHook() { // æœ€åä¸€ä¸ªå¡«hookçš„å›è°ƒ @Override protected void beforeHookedMethod(MethodHookParam param) {} // Hookæ–¹æ³•æ‰§è¡Œå‰ @Override protected void afterHookedMethod(MethodHookParam param) {} // Hookæ–¹æ³•æ‰§è¡Œå }); // å®ƒè¿”å›ä¸€ä¸ªunhook åœ¨ä½ ä¸éœ€è¦ç»§ç»­hookçš„æ—¶å€™å¯ä»¥è°ƒç”¨å®ƒæ¥å–æ¶ˆHook unhook.unhook(); // å–æ¶ˆç©ºçš„Hook // ç¬¬äºŒç§æ–¹å¼ å¡«Class // é¦–å…ˆä½ å¾—åŠ è½½å®ƒçš„ç±» æˆ‘ä»¬ä½¿ç”¨XposedHelpers.findClasså³å¯ å‚æ•°æœ‰ä¸¤ä¸ª ä¸€ä¸ªæ˜¯ç±»å ä¸€ä¸ªæ˜¯ç±»åŠ è½½å™¨ Class\u0026lt;?\u0026gt; clazz = XposedHelpers.findClass(\u0026#34;me.kyuubiran.xposedapp.MainActivity\u0026#34;, lpparam.classLoader); XposedHelpers.findAndHookMethod(clazz, \u0026#34;onCreate\u0026#34;, Bundle.class, new XC_MethodHook() { @Override protected void afterHookedMethod(MethodHookParam param){ // ç”±äºæˆ‘ä»¬éœ€è¦åœ¨Activityåˆ›å»ºä¹‹åå†å¼¹å‡ºToastï¼Œæ‰€ä»¥æˆ‘ä»¬Hookæ–¹æ³•æ‰§è¡Œä¹‹å Toast.makeText((Activity) param.thisObject, \u0026#34;æ¨¡å—åŠ è½½æˆåŠŸï¼\u0026#34;, Toast.LENGTH_SHORT).show(); } }); } æ ¹æ®ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºå¯¹åº”çš„æ–¹æ³•äº†ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç»“æŸè¿™ä¸ªç¨‹åºå‘¢ï¼Ÿåœ¨å‰é¢æˆ‘ä»¬ä»‹ç»äº†Activityçš„ç”Ÿå­˜å‘¨æœŸï¼Œé€šè¿‡æŸ¥è¯¢å¯çŸ¥Activityå­˜åœ¨ä¸€ä¸ªå…³é—­çš„æ–¹æ³•finish()ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦æ‰‹åŠ¨è°ƒç”¨å³å¯ï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ã€‚\n1 2 3 4 5 6 7 8 9 if (lpparam.packageName.equals(\u0026#34;ceui.lisa.pixiv\u0026#34;)){ XposedHelpers.findAndHookMethod(\u0026#34;ceui.lisa.activities.MainActivity\u0026#34;, lpparam.classLoader, \u0026#34;initFragment\u0026#34;, new XC_MethodHook() { @Override protected void afterHookedMethod(MethodHookParam param) throws Throwable { Toast.makeText((Activity) param.thisObject, \u0026#34;ä¸è®¸æ¶©æ¶©ï¼\u0026#34;, Toast.LENGTH_SHORT).show(); ((Activity) param.thisObject).finish(); } }); } åŒæ ·ï¼Œå¦å¤–ä¸¤ä¸ªåº”ç”¨ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å®ç°\n1 2 3 4 5 6 7 8 9 if(lpparam.packageName.equals(\u0026#34;com.xjs.ehviewer\u0026#34;)){ XposedHelpers.findAndHookMethod(\u0026#34;com.hippo.ehviewer.ui.MainActivity\u0026#34;, lpparam.classLoader, \u0026#34;initUserImage\u0026#34;, new XC_MethodHook() { @Override protected void afterHookedMethod(MethodHookParam param) throws Throwable { Toast.makeText((Activity) param.thisObject, \u0026#34;ä¸è®¸æ¶©æ¶©ï¼\u0026#34;, Toast.LENGTH_SHORT).show(); ((Activity) param.thisObject).finish(); } }); } 1 2 3 4 5 6 7 8 9 if(lpparam.packageName.equals(\u0026#34;com.picacomic.fregata\u0026#34;)){ XposedHelpers.findAndHookMethod(\u0026#34;com.picacomic.fregata.activities.SplashActivity\u0026#34;, lpparam.classLoader, \u0026#34;onCreate\u0026#34;, Bundle.class ,new XC_MethodHook() { @Override protected void afterHookedMethod(MethodHookParam param) throws Throwable { Toast.makeText((Activity) param.thisObject, \u0026#34;ä¸è®¸æ¶©æ¶©ï¼\u0026#34;, Toast.LENGTH_SHORT).show(); ((Activity) param.thisObject).finish(); } }); } è¿™é‡Œè¦æ³¨æ„ï¼Œä½¿ç”¨findAndHookMethodæ—¶è¦hookçš„æ–¹æ³•çš„å‚æ•°è¡¨ä¸€å®šè¦å¡«å¯¹ã€‚å¦‚æœæ²¡æœ‰å¡«å¯¹å°±ä¼šæŠ¥java.lang.NoSuchMethodErroré”™è¯¯ã€‚æˆ‘ä¹‹å‰è¢«è¿™ä¸ªé—®é¢˜æŠ˜ç£¨äº†å¾ˆä¹…ğŸ˜­ï¼ˆä»”ç»†æƒ³æƒ³ä¹Ÿæ˜¯è¿™æ ·ï¼ŒJavaé‡Œæœ‰é‡è½½æœºåˆ¶ï¼Œå‚æ•°ä¸åŒå°±ä¸æ˜¯åŒä¸€ä¸ªæ–¹æ³•äº†ï¼‰\nkotlinæ‰€å¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 if (lpparam.packageName == \u0026#34;com.xjs.ehviewer\u0026#34;){ XposedHelpers.findAndHookMethod(\u0026#34;com.hippo.ehviewer.ui.MainActivity\u0026#34;, lpparam.classLoader, \u0026#34;initUserImage\u0026#34;,object : XC_MethodHook() { override fun afterHookedMethod(param: MethodHookParam){ Toast.makeText(param.thisObject as Activity,\u0026#34;ä¸è®¸æ¶©æ¶©ï¼\u0026#34;,Toast.LENGTH_SHORT).show() (param.thisObject as Activity).finish() } }) } ä¿®æ”¹å†…éƒ¨å‚æ•° è™½ç„¶ä¸€è‚¡è„‘å…³é—­ç¨‹åºéå¸¸ç®€å•ï¼Œä½†å°æ˜ä¸ä¹æ„äº†ã€‚å¯¹äºceui.lisa.pixivæ¥è¯´ï¼Œåªæœ‰é•¿æŒ‰å¤´åƒæ‰ä¼šè§¦å‘ï¼Œç›´æ¥ä¸€åˆ€åˆ‡å®åœ¨æ˜¯å¤ªç²—æš´äº†ã€‚æ²¡é—®é¢˜ï¼Œç›´æ¥å®‰æ’ä¸Šã€‚\né¦–å…ˆæˆ‘ä»¬è¦å®šä½åˆ°è¿™ä¸ªåˆ‡æ¢çš„æ–¹æ³•ç©¶ç«Ÿåœ¨å“ªï¼Ÿä»”ç»†è§‚å¯Ÿï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½ä¼šå¼¹å‡ºä¸€ä¸ªé¢œæ–‡å­—çš„Toastï¼Œæˆ‘ä»¬å°±ä»æ­¤å¤„åˆ‡å…¥ã€‚è¿™ä¸¤ä¸ªé¢œæ–‡å­—åˆ†åˆ«ä¸ºÔ…(â™¡ï¹ƒâ™¡Ô…)å’ŒXï¹Xã€‚\næˆ‘ä»¬ä½¿ç”¨jadx-guiåç¼–è¯‘ç¨‹åºï¼Œå…¨å±€æœç´¢ï¼Œç›´æ¥å°±æ‰¾åˆ°äº†æ‰€åœ¨ä½ç½®ã€‚\nåŒå‡»æŸ¥çœ‹æ­¤å¤„çš„ä»£ç ï¼Œåèµ·æ¥äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œæ ¹æ®ä¸Šé¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ²¡æœ‰è¿™ä¸ªå‡½æ•°åï¼Œè‡ªç„¶ä¹Ÿå°±æ— æ³•å¯¹å…¶è¿›è¡ŒHookã€‚\néš¾é“å°±è¦å¡åœ¨è¿™é‡Œäº†å—ï¼Ÿå¦‚æœçœŸæ˜¯è¿™æ ·æˆ‘å°±ä¸ä¼šå†™è¿™ç¯‡æ–‡ç« äº†\nä»”ç»†åˆ†æè¿™æ®µä»£ç ï¼Œè¿™é‡Œå¯¹this.userHeadè®¾ç½®äº†ä¸€ä¸ªOnLongClickListenerã€‚ä¸€ä¸ªæ§ä»¶åªèƒ½ç»‘å®šä¸€ä¸ªä¾¦å¬å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€ä¸ªæ›¿æ¢ï¼Œä¸å°±å®ç°å¯¹å…¶çš„Hookäº†å—ğŸ˜\nç›´æ¥Hook initViewè¿™ä¸ªæ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 if (lpparam.packageName.equals(\u0026#34;ceui.lisa.pixiv\u0026#34;)){ XposedHelpers.findAndHookMethod(\u0026#34;ceui.lisa.activities.MainActivity\u0026#34;, lpparam.classLoader, \u0026#34;initView\u0026#34;, new XC_MethodHook() { @Override protected void afterHookedMethod(MethodHookParam param) throws Throwable { Field f = param.thisObject.getClass().getDeclaredField(\u0026#34;userHead\u0026#34;); f.setAccessible(true); ImageView v = (ImageView) f.get(param.thisObject); // v.setLongClickable(false); //è®¾ç½®å…¶æ— æ³•å“åº” v.setOnLongClickListener(v1 -\u0026gt; { Toast.makeText((Activity) param.thisObject, \u0026#34;ä¸è®¸æ¶©æ¶©ï¼\u0026#34;, Toast.LENGTH_SHORT).show(); return true; }); } }); } æˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†Javaçš„åå°„æœºåˆ¶ï¼Œæ‹¿åˆ°äº†å®ƒå†…éƒ¨çš„å˜é‡userHeadï¼Œç„¶åé€šè¿‡setAccessibleå°†å…¶è®¾ç½®ä¸ºå¯è®¿é—®ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¯¹å…¶ç§æœ‰å˜é‡è¿›è¡Œä¿®æ”¹äº†ã€‚\næˆ‘ä»¬å¯ä»¥ç®€å•çš„å°†å…¶å¯ç‚¹å‡»å…³é—­ï¼Œä½†æ˜¯è¿™æ ·ä¸€ç‚¹ä¹Ÿä¸é…·ã€‚æˆ‘ç›´æ¥ä½¿ç”¨è‡ªå·±çš„å‡½æ•°å°†å…¶è¿›è¡Œæ›¿æ¢ï¼Œè¿™æ ·æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šå‡ºç°ä¸€ä¸ªToastã€‚\nkotlinçš„ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 if (lpparam.packageName == \u0026#34;ceui.lisa.pixiv\u0026#34;){ XposedHelpers.findAndHookMethod(\u0026#34;ceui.lisa.activities.MainActivity\u0026#34;, lpparam.classLoader, \u0026#34;initView\u0026#34;,object : XC_MethodHook() { override fun afterHookedMethod(param: MethodHookParam){ val f = param.thisObject.javaClass.getDeclaredField(\u0026#34;userHead\u0026#34;) f.isAccessible = true val v = f[param.thisObject] as ImageView v.setOnLongClickListener{ Toast.makeText(param.thisObject as Activity,\u0026#34;ä¸è®¸æ¶©æ¶©ï¼\u0026#34;,Toast.LENGTH_SHORT).show() true } } }) } è‡³æ­¤ï¼Œä¸€ä¸ªç®€å•çš„Xposedæ¨¡å—å°±å†™å¥½äº†ã€‚\né…ç½®æ–‡ä»¶è¯»å– ç°åœ¨çš„æ¨¡å—å¾€å¾€è¿˜ä¼šæ­é…ä¸€ä¸ªUIæ¥å®ç°é…ç½®æ–‡ä»¶çš„è®¾ç½®ï¼Œåœ¨å®‰å“å¼€å‘ä¸­ï¼Œå¸¸ç”¨SharedPreferencesæ¥å®ç°é…ç½®çš„ä¿å­˜ã€‚éšç€googleçš„æ›´æ–°ï¼Œç°åœ¨çš„é…ç½®æ–‡ä»¶æ— æ³•è®¾ç½®MODE_WORLD_READABLEçš„æƒé™ï¼Œå³åªå…è®¸æœ¬åº”ç”¨è¯»å–ã€‚è™½ç„¶Xposedæœ¬èº«æä¾›äº†XSharedPreferencesæ¥è¯»å–é…ç½®æ–‡ä»¶ï¼Œç„¶è€Œæ¨¡å—æ˜¯ä¾é™„äºå®¿ä¸»ç¨‹åºæ‰€æ‰§è¡Œçš„ï¼Œå®ƒçš„è®¿é—®æƒé™å’Œå®¿ä¸»ä¸€è‡´ï¼Œæ‰€ä»¥æ— æ³•è®¿é—®åˆ°æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ã€‚2024.09.15æ›´æ–°\nå¥½åœ¨ç›®å‰å¸¸ç”¨çš„æ¡†æ¶LSPosedæä¾›äº†New XSharedPreferencesï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®šxposedAPIçš„æœ€ä½ç‰ˆæœ¬â‰¥93å°±å¯ä»¥äº†ã€‚\nåœ¨AndroidManifest.xmlé‡Œå°†xposedminversionçš„å€¼æ”¹ä¸º93\nå¯¹äºæ¨¡å—çš„Activityæ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®šæƒé™ä¸ºContext.MODE_WORLD_READABLEå³å¯\n1 val sharedPreferences : SharedPreferences = getSharedPreferences(\u0026#34;config\u0026#34;, Context.MODE_WORLD_READABLE) å¯¹äºhookçš„åº”ç”¨æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨åŸæ¥çš„XSharedPreferenceså³å¯\n1 val xsp = XSharedPreferences(\u0026#34;top.lbqaq.nosese\u0026#34;,\u0026#34;config\u0026#34;) ç»“è¯­ å®Œæ•´çš„é¡¹ç›®ä»£ç å¯ä»¥åœ¨Githubä»“åº“ä¸­æŸ¥çœ‹ï¼Œé€šè¿‡è¿™æ¬¡çš„ç¼–å†™ï¼Œæˆ‘å‘ç°Xposedå®é™…ä¸Šè¿˜æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæƒ³è¦å®ç°å»å¹¿å‘Šç­‰åŠŸèƒ½ï¼Œéƒ½æ˜¯é€šè¿‡åç¼–è¯‘æ¥æ‰¾åˆ°çªç ´å£ï¼Œæœ‰äº†Hookçš„ç›®æ ‡åæ‰éœ€è¦Xposedã€‚\næ‰€ä»¥ï¼Œä¹‹åçš„å­¦ä¹ è¿˜æ˜¯è¦ä»¥å®‰å“é€†å‘ä¸ºä¸»ï¼Œåªæœ‰æ‰“å¥½åŸºæœ¬åŠŸï¼Œæ‰èƒ½å†™å‡ºä¼˜ç§€çš„ä»£ç ã€‚\nåç»­æ›´æ–° 2024.09.15 å°†é¡¹ç›®ä½¿ç”¨äº†ç›®å‰æµè¡Œçš„Kotliné‡æ„äº†ä¸€æ³¢ï¼Œå¹¶æ·»åŠ äº†UIå’Œæ¨¡å—çš„é…ç½®è¯»å–çš„å†…å®¹\nå‚è€ƒæ–‡çŒ® ã€Šå®‰å“é€†å‘è¿™æ¡£äº‹ã€‹ä¸ƒã€Sorryï¼Œä¼šHookçœŸçš„å¯ä»¥ä¸ºæ‰€æ¬²ä¸º-Xposedå¿«é€Ÿä¸Šæ‰‹(ä¸Š)æ¨¡å—ç¼–.. - å¾çˆ±ç ´è§£\nXposedæ¨¡å—å¼€å‘å…¥é—¨ä¿å§†çº§æ•™ç¨‹ - ç‹è¨€ç‹è¯­å’Œä»™è´çš„é­”æ³•å­¦ä¹ è®°å½•\nã€Šå®‰å“é€†å‘è¿™æ¡£äº‹ã€‹å››ã€æ­å–œä½ è·å¾—å¹¿å‘Š\u0026amp;å¼¹çª—é™é»˜å¡ - å¾çˆ±ç ´è§£\nã€Šå®‰å“é€†å‘è¿™æ¡£äº‹ã€‹å…«ã€Sorryï¼Œä¼šHookçœŸçš„å¯ä»¥ä¸ºæ‰€æ¬²ä¸º-Xposedå¿«é€Ÿä¸Šæ‰‹(ä¸‹)æ¨¡å—ç¼–.. - å¾çˆ±ç ´è§£\n","date":"2023-07-21T14:22:44+08:00","image":"https://lbqaq.top/p/init-xposed/109457609.webp","permalink":"https://lbqaq.top/p/init-xposed/","title":"ä»é›¶å¼€å§‹ç¼–å†™Xposedæ¨¡å—"},{"content":"ä»‹ç» åœ¨å¤§æ•°æ®æ—¶ä»£ï¼Œæœºå™¨å­¦ä¹ ï¼ˆMLï¼‰ä¸ºæˆ‘ä»¬çš„ç”Ÿæ´»æä¾›äº†ä¾¿åˆ©ï¼Œå¹¶åœ¨å„ä¸ªé¢†åŸŸå‘æŒ¥ç€ä¸å¯æˆ–ç¼ºçš„ä½œç”¨ã€‚éšç€æ·±åº¦å­¦ä¹ åº”ç”¨åœºæ™¯çš„ä¸°å¯Œå’Œæ•°æ®çš„å¢é•¿ï¼Œä¸»æµäº‘æä¾›å•†ï¼ˆå¦‚è°·æ­Œã€äºšé©¬é€Šå’Œå¾®è½¯ï¼‰æ¨å‡ºäº†æœºå™¨å­¦ä¹ å³æœåŠ¡ï¼ˆMLaaSï¼‰ã€‚\nMLaaS é¡¾åæ€ä¹‰ï¼ŒMLaaSæ˜¯ä¸€ç³»åˆ—æä¾›æœºå™¨å­¦ä¹ å·¥å…·ä½œä¸ºäº‘è®¡ç®—æœåŠ¡ä¸€éƒ¨åˆ†çš„æœåŠ¡ã€‚ è¿™äº›æœåŠ¡çš„ä¸»è¦å¸å¼•åŠ›åœ¨äºï¼Œå°±åƒå…¶ä»–ä»»ä½•äº‘æœåŠ¡ä¸€æ ·ï¼Œå®¢æˆ·æ— éœ€å®‰è£…è½¯ä»¶æˆ–é…ç½®è‡ªå·±çš„æœåŠ¡å™¨å³å¯å¿«é€Ÿå¼€å§‹æœºå™¨å­¦ä¹ ã€‚å®ƒå¸®åŠ©èµ„æºå’Œä¸“ä¸šçŸ¥è¯†æœ‰é™çš„æ•°æ®æ‰€æœ‰è€…ï¼ˆå°å‹ä¼ä¸šæˆ–ä¸ªäººï¼‰è§£å†³æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒå’Œè¯„ä¼°ç­‰åŸºç¡€è®¾æ–½é—®é¢˜ã€‚æ¨¡å‹æä¾›è€…é€šè¿‡æ ¹æ®æŸ¥è¯¢æ—¶é—´å‘ç”¨æˆ·æ”¶è´¹æ¥è·å¾—æ”¶ç›Šã€‚\nç„¶è€Œï¼ŒMLaaSå´å®¹æ˜“å—åˆ°æ¨¡å‹æå–æ”»å‡»çš„å½±å“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè™½ç„¶æ¨¡å‹æ‰˜ç®¡åœ¨å®‰å…¨çš„äº‘æœåŠ¡ä¸­ï¼Œå®¢æˆ·é€šè¿‡åŸºäºäº‘çš„APIè¿›è¡ŒæŸ¥è¯¢ã€‚ä½†æ˜¯ï¼Œæ”»å‡»è€…å¯ä»¥åŸºäºé¢„æµ‹è¾“å‡ºæ¥è®­ç»ƒå…·æœ‰ç›®æ ‡ç§æœ‰æ¨¡å‹ç±»ä¼¼åŠŸèƒ½çš„æ›¿ä»£æ¨¡å‹ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡è®¿é—®æ›¿ä»£æ¨¡å‹è€Œæ— éœ€å‘æ¨¡å‹æä¾›è€…ä»˜è´¹ï¼Œä»è€Œç ´åäº†å…¶å•†ä¸šä»·å€¼ã€‚æ­¤å¤–ï¼Œæ”»å‡»è€…è¿˜å¯ä»¥åˆ©ç”¨æ›¿ä»£æ¨¡å‹æ¥åˆ¶ä½œä¼˜ç§€çš„å¯è½¬ç§»å¯¹æŠ—æ€§ç¤ºä¾‹ï¼Œä»è€Œæœ‰æ•ˆåœ°æ¬ºéª—åŸå§‹æ¨¡å‹åšå‡ºé”™è¯¯çš„é¢„æµ‹ï¼Œæ„æˆä¸¥é‡çš„å®‰å…¨å¨èƒã€‚\nä½œè€…æå‡ºäº†APMSAæ¥é˜²å¾¡æ¨¡å‹æå–æ”»å‡»ã€‚å½“æ”»å‡»è€…çªƒå–æœåŠ¡å™¨ä¸­éƒ¨ç½²çš„ \u0026ldquo;model under attack\u0026rdquo; (MUA) æ—¶ï¼Œé€šè¿‡å‘æ•£ç»™å®šç‰¹å®šç±»åˆ«çš„ç‰¹å¾ç©ºé—´ä¸­æŸ¥è¯¢æ ·æœ¬çš„ç½®ä¿¡å‘é‡è·ç¦»ï¼Œå°±ä¼šæ³„éœ²è¶³å¤Ÿçš„MUAå†…éƒ¨ä¿¡æ¯ï¼Œæœ‰åˆ©äºæ›¿ä»£æ¨¡å‹çš„è®­ç»ƒã€‚å¯¹æ­¤ï¼Œä½œè€…åœ¨MUA ä¹‹å‰å°†å¾®å¦™çš„å™ªå£°æ³¨å…¥æ¯ä¸ªä¼ å…¥çš„è¾“å…¥æŸ¥è¯¢ä¸­ï¼Œä»¥é™åˆ¶å…¶ç½®ä¿¡å‘é‡çš„å¤šæ ·æ€§ã€‚\nç›¸å…³ç ”ç©¶ ç›®å‰ï¼Œå°†å¯¹äºæ¨¡å‹æå–æ”»å‡»çš„é˜²å¾¡é€šå¸¸å¯åˆ†ä¸ºä¸¤ç±»ï¼šè¢«åŠ¨é˜²å¾¡å’Œä¸»åŠ¨é˜²å¾¡ã€‚ å‰è€…æ˜¯è¢«åŠ¨åœ°æ£€æµ‹æ¶æ„æŸ¥è¯¢è¡Œä¸ºï¼Œç„¶åé™åˆ¶æˆ–æ‹’ç»ä¸ºæ›´å¯èƒ½æ¥è‡ªæ”»å‡»è€…çš„æ¶æ„ä¼ å…¥æŸ¥è¯¢æä¾›æ¨ç†æœåŠ¡ã€‚ åè€…ä¸»è¦æ˜¯æŒ‡ä¸»åŠ¨ç½®ä¿¡æ‰°åŠ¨æŠ€æœ¯ã€‚æœ¬æ–‡ä»‹ç»çš„APMSAå±äºä¸»åŠ¨é˜²å¾¡æŠ€æœ¯ï¼Œä½œè€…å°†ç›¸å…³çš„æ–‡ç« è¿›è¡Œäº†æ•´ç†ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚\nModel extraction warning in MLaaS paradigm PRADA: Protecting against DNN model stealing attacks Defending against model stealing attacks with adaptive misinformation Defending against neural network model stealing attacks using deceptive perturbations BODAME: Bilevel optimization for defense against model extraction Prediction poisoning: Towards defenses against DNN model stealing attacks Model stealing defense with hybrid fuzzy models: Work-in-progress ä¸ç°æœ‰çš„ç›´æ¥ç½®ä¿¡æ‰°åŠ¨æŠ€æœ¯ç›¸æ¯”ï¼ŒAPMSAä¸ä»…ä¿ç•™äº†MUAçš„å¯ç”¨æ€§ï¼Œè¿˜ä¿ç•™äº†MUAçš„å®ç”¨æ€§ã€‚ä¸å…¶ä»–ä¸»åŠ¨é˜²å¾¡ç›¸æ¯”ï¼ŒAPMSAå¯ä»¥ç®€å•åœ°åœ¨MUAä¹‹å‰æ’å…¥ï¼Œè€Œæ— éœ€å¯¹MUAæœ¬èº«è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œå› æ­¤å®ƒæ˜¯é€šç”¨çš„ï¼Œæ˜“äºéƒ¨ç½²çš„ã€‚\nè´¡çŒ® é€šè¿‡å»ºè®¾æ€§åœ°æœ€å°åŒ–å¯¹è®­ç»ƒæ›¿ä»£æ¨¡å‹è‡³å…³é‡è¦çš„å‘æ•£ç½®ä¿¡åº¦ä¿¡æ¯æ¥ç¦ç”¨è¢«ç›—æ¨¡å‹çš„å¯ç”¨åŠŸèƒ½ã€‚ é€šè¿‡å½¢å¼åŒ–çš„ä¼˜åŒ–å®ç°äº†ç½®ä¿¡å‘é‡å¯¹ MUA å†³ç­–è¾¹ç•Œçš„é™åˆ¶ã€‚ APMSAä¸ä¼šå¯¹å…·æœ‰ç¡¬æ ‡ç­¾æ¨ç†çš„æ™®é€šç”¨æˆ·é€ æˆæ•ˆç”¨æŸå¤± é—®é¢˜æ„é€  å¨èƒæ¨¡å‹ å‡è®¾æ”»å‡»è€…ä¸äº†è§£ç³»ç»Ÿçš„æ¨¡å‹ä½“ç³»ç»“æ„ã€‚æ”»å‡»è€…åªèƒ½é€šè¿‡è¿ç§»å­¦ä¹ å‘èµ·æ”»å‡»ï¼Œå³æ”»å‡»è€…ä½¿ç”¨æ¶æ„æ ·æœ¬æŸ¥è¯¢é»‘ç›’æ¨¡å‹ï¼Œä»¥æ ‡è®°è¿™äº›å°†ç”¨äºè®­ç»ƒæ›¿ä»£æ¨¡å‹çš„æ ·æœ¬ã€‚æ”»å‡»è€…ä»å…¬ä¼—ä¸­è¯†åˆ«é¢„è®­ç»ƒæ¨¡å‹ï¼Œå¹¶åŸºäºé¢„è®­ç»ƒæ¨¡å‹é€šè¿‡è¿ç§»å­¦ä¹ æ„å»ºæ›¿ä»£æ¨¡å‹;è®­ç»ƒæ•°æ®é›†æ˜¯é€šè¿‡ MUA ä¸Šçš„æŸ¥è¯¢çš„ä¸€ç»„è¾“å…¥è¾“å‡ºå¯¹ã€‚å…·ä½“ç®—æ³•å¦‚ä¸‹ï¼š\næ”»å‡»è€…åªèƒ½é€šè¿‡ API ä¸æ¨¡å‹äº¤äº’ï¼ŒæŸ¥è¯¢æ¬¡æ•°å—é¢„ç®—é™åˆ¶ã€‚ä½†æ˜¯ï¼Œä»–ä»¬å¯ä»¥è‡ªç”±é€‰æ‹©ä»»ä½•æ ·æœ¬è¿›è¡ŒæŸ¥è¯¢ï¼ˆå³æœªæ ‡è®°çš„å…¬å…±æ•°æ®é›†$X_{pub}$ï¼‰ã€‚å› æ­¤ï¼Œæ”»å‡»è€…å®Œå…¨äº†è§£è¾“å…¥ï¼ˆå³æ ·æœ¬ç±»å‹ï¼‰å’Œè¾“å‡ºï¼ˆå³æ ‡ç­¾é›†ï¼‰çš„ç‰¹å¾ã€‚ä½†æ˜¯ï¼Œæ”»å‡»è€…åªèƒ½è§‚å¯Ÿè¿”å›çš„é¢„æµ‹ç½®ä¿¡å‘é‡ï¼Œè€Œä¸èƒ½è§‚å¯Ÿæ¨¡å‹æ¶æ„å’Œæ¢¯åº¦ä¿¡æ¯ã€‚\næ”»å‡»è€…æ—¨åœ¨è·å¾—ä¸ç§æœ‰æ¨¡å‹$f$å…·æœ‰ç›¸ä¼¼åŠŸèƒ½çš„æ›¿ä»£æ¨¡å‹$f\u0026rsquo;$ã€‚æ›¿ä»£æ¨¡å‹$f\u0026rsquo;$åœ¨å…¬å…±æ•°æ®é›† $\\mathbf{S}\\subseteq\\mathbf{X}_{pub}$ çš„å­é›†ä¸Šè¿›è¡Œè®­ç»ƒï¼š\n$$f^{\\prime}\\approx\\arg\\min\\mathcal{L}\\left(\\\\{(\\mathbf{x},f(\\mathbf{x})):\\mathbf{x}\\in\\mathbf{S}\\\\},f^{\\prime}(\\mathbf{x})\\right)$$é˜²å¾¡è€…æ—¨åœ¨å°†å™ªå£°æ³¨å…¥æ¯ä¸ªæŸ¥è¯¢çš„è¾“å…¥ä¸­ï¼Œä»¥é—´æ¥å¹²æ‰°æ¨¡å‹è¿”å›çš„é¢„æµ‹ã€‚APMSAæœ‰ä¸¤ä¸ªä¸»è¦ç›®æ ‡ã€‚ä¸€æ–¹é¢ï¼Œä¿ç•™äº†æ¨¡å‹çš„ç²¾åº¦ï¼Œå³ä¸ä½¿ç”¨APMSAæ—¶çš„ç²¾åº¦åº”ä¸åŸå§‹ç²¾åº¦ç›¸åŒã€‚å¦ä¸€æ–¹é¢ï¼Œè¢«ç›—æ¨¡å‹çš„å‡†ç¡®æ€§åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè¢«ç ´åï¼Œä½¿æ”»å‡»è€…çš„å…è´¹ç§äººæŸ¥è¯¢ä¸å†æœ‰æ•ˆã€‚ä½œè€…å°†ä½¿ç”¨ APMSA å‰åæ¨¡å‹å‡†ç¡®æ€§çš„ä¸‹é™ç¨‹åº¦ä½œä¸ºæŒ‡æ ‡ã€‚\nAPMSAçš„æ¦‚è¿° APMSAçš„ç›´è§‰æ˜¯å¦‚æœé˜²å¾¡è€…ç­–ç•¥æ€§åœ°æ··æ·†è¾“å…¥æŸ¥è¯¢ä¸å…¶è¿”å›çš„ç½®ä¿¡åº¦ï¼ˆå‘é‡ï¼‰çš„è¾“å‡ºä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œåˆ™å½“æ”»å‡»è€…åˆ©ç”¨è¿™æ ·çš„è¾“å…¥-è¾“å‡ºå¯¹æ¥è®­ç»ƒå…¶æ›¿ä»£æ¨¡å‹æ—¶ï¼Œå¯¹æ”»å‡»è€…æœ‰ç”¨çš„æ³„æ¼ä¿¡æ¯å°†è¢«æœ€å°åŒ–ç”šè‡³è¯¯å¯¼ã€‚\nä¸Šå›¾æ˜¯APMSAçš„æµç¨‹ã€‚å½“å‘APIæŸ¥è¯¢è¾“å…¥æ—¶ï¼ŒAPMSAä¸ç›´æ¥å°†è¯¥è¾“å…¥é¦ˆé€åˆ°æ¨¡å‹å¹¶è¿”å›ç½®ä¿¡å‘é‡ã€‚ ç›¸åï¼ŒAPMSAé€šè¿‡å°†å¯¹æŠ—æ€§å™ªå£°æ‰°åŠ¨æ³¨å…¥åˆ°è¾“å…¥ä¸­æ¥å°†è¯¥è¾“å…¥è½¬æ¢ä¸ºå¯¹æŠ—æ€§è¾“å…¥ã€‚æ¨¡å‹æœ€ç»ˆè¿”å›çš„æ˜¯å˜æ¢åçš„å¯¹æŠ—æ€§è¾“å…¥ç›¸å¯¹åº”çš„ç½®ä¿¡åº¦å‘é‡ã€‚ä»æ”»å‡»è€…çš„è§’åº¦æ¥çœ‹ï¼Œå…¶è¾“å…¥ä¸è¿”å›çš„ç½®ä¿¡å‘é‡ä¹‹é—´çš„å…³ç³»æ˜ å°„å·²ç»è¢«æ··æ·†ã€‚å¹¶ä¸”å°†ç»™å®šç±»åˆ«æ ·æœ¬çš„ç½®ä¿¡åº¦å‘é‡çº¦æŸåœ¨ä¸€ä¸ªå°çš„åŒºåŸŸå†…ï¼Œä»è€Œå¤§å¤§å‡å°‘äº†æ³„æ¼ä¿¡æ¯ï¼Œä¾¿äºå…¶æ›¿ä»£æ¨¡å‹çš„è®­ç»ƒã€‚åŒæ—¶ï¼Œç”±äºAPMSAä¸ä¼šä¿®æ”¹è¾“å…¥çš„ç¡¬æ ‡ç­¾ï¼Œæ‰€ä»¥å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´æ€§èƒ½å‡ ä¹æ²¡æœ‰æŸå¤±ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒAPMSAæ˜¯ä½œä¸ºæ’ä»¶ä½¿ç”¨ï¼Œä¸éœ€è¦ä¿®æ”¹æ¨¡å‹ã€‚\nAPMSAçš„å®ç° ä½œè€…åœ¨æ­¤ç”¨ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šäº†APMSAã€‚å‡è®¾æœ‰ä¸€ä¸ªäºŒåˆ†ç±»æ¨¡å‹ï¼ˆæ€§åˆ«åˆ†ç±»ï¼‰ï¼Œå¦‚æœæ¨¡å‹å°†$k$ä¸ªç”·æ€§ç±»åˆ«çš„å›¾åƒæ˜ å°„åˆ°$k$ä¸ªä¸åŒçš„æ¦‚ç‡åˆ†å¸ƒï¼Œåˆ™åœ¨ç»™å®šä¸åŒåˆ†å¸ƒçš„æƒ…å†µä¸‹ï¼Œ$k$ä¸ªè¾“å…¥-è¾“å‡ºå¯¹çš„æ˜ å°„å…³ç³»å°†æ­ç¤ºæ›´å¤šå…³äºæ¨¡å‹çš„å†…éƒ¨ä¿¡æ¯ã€‚ ï¼ˆå¦‚å›¾aæ‰€ç¤ºï¼‰ä½†æ˜¯ï¼Œå¦‚æœæ§åˆ¶$k$ä¸ªä¸åŒçš„ç”·æ€§å›¾åƒæ˜ å°„åˆ°ç‰¹å¾ç©ºé—´ä¸­çš„ç›¸é‚»åŒºåŸŸï¼Œåˆ™æ³„éœ²çš„ä¿¡æ¯å°†å¤§å¤§å‡å°‘ã€‚ æ­¤å¤–ï¼Œè¿™äº›æ··æ·†çš„è¾“å…¥-è¾“å‡ºå¯¹å°†åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè¯¯å¯¼è®­ç»ƒæ›¿ä»£æ¨¡å‹ã€‚ï¼ˆå¦‚å›¾bæ‰€ç¤ºï¼‰\nä¹Ÿå°±æ˜¯è¯´å¦‚æœè¾“å‡ºéƒ½å †åœ¨ä¸€èµ·ï¼Œå°±å¯ä»¥æ··æ·†è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å…³ç³»ï¼Œå¹¶ä¸”å¯ä»¥æ›´å¥½åœ°ä¿æŠ¤æ¨¡å‹çš„éšç§ã€‚\nä½œè€…éšåä»‹ç»äº†APMSAçš„è¯¦ç»†åŸç†ã€‚åŒæ ·æ˜¯ä»¥äºŒåˆ†ç±»çš„æ¨¡å‹ä¸ºä¾‹ï¼Œ$f$æ˜¯åŸæ¨¡å‹ï¼Œ$f\u0026rsquo;$æ˜¯æ”»å‡»è€…å¾—åˆ°çš„æ›¿ä»£æ¨¡å‹ã€‚å…¶ä¸­ï¼Œæ”»å‡»è€…åˆ©ç”¨æŸ¥è¯¢$x$æ¥è·å¾—é¢„æµ‹$y=f(x)$ï¼Œå…¶ä¸­$y=\\{y_1,y_2\\}$ï¼Œæ”»å‡»è€…ä½¿ç”¨$(x,y)$æ¥è®­ç»ƒæ›¿ä»£æ¨¡å‹ã€‚APMSAåˆ™æ˜¯é€šè¿‡å°†å‘è¾“å…¥ç©ºé—´ä¸­çš„$x$æ·»åŠ å¯¹æŠ—æ€§å™ªå£°æ¥å°†æ ·æœ¬$x$å˜ä¸ºæ··æ·†æ ·æœ¬$x_c$ã€‚è¿™é‡Œåº”ç”¨äº†åˆ¶ä½œå¯¹æŠ—æ€§æ ·æœ¬$x\u0026rsquo;$çš„æŠ€æœ¯ã€‚ä¸$x\u0026rsquo;$ä¸åŒçš„æ˜¯ï¼Œ$x_c$çš„ç¡¬æ ‡ç­¾ä¸APMSAä¸­çš„$x$çš„ç¡¬æ ‡ç­¾ç›¸åŒã€‚è¿™æ ·ï¼Œæ”»å‡»è€…é€šè¿‡$\\{x,y_c=f(x_c)\\}$è®­ç»ƒå‡ºæ¥çš„æ¨¡å‹$f\u0026rsquo;$å†³ç­–è¾¹ç•Œå°±ä¼šå¯¼è‡´$x_t$è¢«è¯¯åˆ†ç±»ï¼Œä»è€Œé˜²æ­¢æ¨¡å‹çªƒå–æ”»å‡»ã€‚\nä¸ä¼ å…¥çš„æŸ¥è¯¢è¾“å…¥$x$ç›¸æ¯”ï¼Œç»å˜æ¢çš„å¯¹æŠ—è¾“å…¥$x_c$æ¥è¿‘å†³ç­–è¾¹ç•Œã€‚ä½œè€…å°†å…¶è½¬åŒ–æˆäº†ä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼š\næ··æ·†çš„è¾“å…¥$x\u0026rsquo;$ä¸å…¶å¯¹åº”çš„å¯¹æŠ—ç¤ºä¾‹$x_c$åœ¨ç‰¹å¾ç©ºé—´ä¸­ç›¸ä¼¼ï¼Œä½†$x_c$çš„ç¡¬æ ‡ç­¾ä¸åŸå§‹è¾“å…¥$x$çš„ç±»åˆ«ç›¸åŒ æ··æ·†è¾“å…¥$x_c$å’ŒåŸå§‹è¾“å…¥$x$çš„ç½®ä¿¡å‘é‡ä¹‹é—´çš„é—´éš™åº”å°½å¯èƒ½å° å°†å…¶å…¬å¼åŒ–è¡¨ç¤ºä¸ºï¼š\n$$\\begin{aligned}\\mathcal{L}\\_1\u0026=J\\left(\\mathbf{x}\\_c\\right)=J(\\mathbf{x}+\\delta)\\\\\\\\\u0026=\\min\\_\\delta\\max\\left(Z(\\mathbf{x}+\\delta)\\_s-Z(\\mathbf{x}+\\delta)\\_t,0\\right)\\end{aligned}$$å…¶ä¸­$Z(x_c)_t$è¡¨ç¤ºç›®æ ‡ç±»åˆ«$t$çš„å¯¹æ•°å€¼ï¼Œ$Z(x_c)_s$è¡¨ç¤ºåŸç±»åˆ«$s$ã€‚\nå¦‚æœä½¿$Z(x_c)_s-Z(x_c)_t$å˜å°ï¼Œå°±è¡¨æ˜æŒ‡å®šç±»åˆ«çš„å¯¹æ•°å€¼å’Œæºç±»åˆ«ä¹‹é—´çš„å·®è·è¶Šæ¥è¶Šå¤§ï¼Œåˆ™æ··æ·†è¾“å…¥$x_t$æ›´æ¥è¿‘ç›®æ ‡ç±»åˆ«çš„å¯¹æŠ—æ ·æœ¬ã€‚ä½œè€…æå‡ºäº†æ–°çš„çº¦æŸæ¥æé«˜ä¼˜åŒ–é€Ÿåº¦ã€‚\n$$\\begin{cases}\\mathcal{L}\\_2=Clip\\_{(0,\\infty)}\\left(\\max\\left\\\\{Z(\\mathbf{x}+\\delta)\\_i:i\\neq t,o\\right\\\\}-Z(\\mathbf{x}+\\delta)\\_t\\right)\\\\\\\\ \\mathcal{L}\\_3=Clip\\_{(0,\\infty)}\\left(\\max\\left\\\\{Z(\\mathbf{x}+\\delta)\\_i:i\\neq t,s\\right\\\\}-Z(\\mathbf{x}+\\delta)\\_s\\right)\\end{cases}$$å…¶ä¸­$Clip(Â·)$è¡¨ç¤ºèŒƒå›´çº¦æŸã€‚\nä¸ºäº†ç¡®ä¿ APMSA ä¸ä¼šå½±å“æ¨¡å‹çš„æ€§èƒ½ï¼ˆå³æ ‡ç­¾ä¸ä¼šæ›´æ”¹ï¼‰ï¼Œä¼˜åŒ–ç›®æ ‡æ˜¯ï¼š\n$$\\begin{aligned} \\mathcal{L}\\_{4}\u0026 =\\text{distance }(\\mathbf{y},\\mathbf{y}\\_c)=\\min\\_\\delta\\|\\mathbf{y}-\\mathbf{y}\\_c\\| \\\\\\\\ \u0026=\\min\\_\\delta\\|f(\\mathbf{x})-f(\\mathbf{x}+\\delta)\\| \\end{aligned}$$è¿™æ˜¯ä¸ºäº†æµ‹é‡æ‰°åŠ¨è¾“å…¥å‰åçš„ç½®ä¿¡å·®ï¼Œä»¥å‡è½»APMSAå¯¹æ¨¡å‹æ•ˆç”¨å¯¹æ™®é€šç”¨æˆ·çš„å½±å“ã€‚ç»¼ä¸Šï¼Œå¯ä»¥å¾—åˆ°ä¼˜åŒ–å‡½æ•°ï¼š\n$$\\begin{aligned}\\mathcal{L}\u0026=\\mathcal{L}\\_1+c\\_1\\cdot\\mathcal{L}\\_2+\\mathcal{L}\\_3+c\\_2\\cdot\\mathcal{L}\\_4\\\\\\\\\u0026=\\min\\_\\delta J(\\mathbf{x}+\\delta)+c\\_1\\cdot\\mathcal{L}\\_2+\\mathcal{L}\\_3+c\\_2\\cdot\\|f\\left(\\mathbf{x}\\right)-f\\left(\\mathbf{x}+\\delta\\right)\\|\\end{aligned}$$å…¶ä¸­è¶…å‚æ•°$c_1$å’Œ$c_2$ç”¨äºæ­£åˆ™åŒ–æŸå¤±å‡½æ•°ï¼Œåœ¨å®éªŒä¸­æ ¹æ®ç»éªŒåˆ†åˆ«è®¾ç½®ä¸º2å’Œ0.01ã€‚ ä¼˜åŒ–è¿‡ç¨‹ä¸æ˜¯è¦æ‰¾åˆ°å¯¹æŠ—æ€§æ ·ä¾‹ï¼Œè€Œæ˜¯è¦è¯†åˆ«ä»¥æ­£ç¡®ä¿å­˜ç±»åˆ«ä¸ºæ¡ä»¶çš„æ¥è¿‘å…¶å¯¹åº”å¯¹æŠ—æ€§æ ·ä¾‹çš„æ··æ·†è¾“å…¥$x_c$ã€‚\nAPMSAçš„å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š\nå®éªŒè¯„ä»· æ•°æ®é›†ï¼š\nCIFAR10 GTSRB è¯„ä¼°æŒ‡æ ‡ï¼š\nTop-1 ç²¾åº¦ æ¨¡å‹æå–æ”»å‡»è¯„ä¼° é€‰æ‹©VGG16ä½œä¸ºæ”»å‡»è€…åˆå§‹æ›¿ä»£æ¨¡å‹çš„æ¨¡å‹ç»“æ„ã€‚ä½¿ç”¨å­¦ä¹ ç‡ä¸º 0.0001 çš„ SGD æ¥æœ€å°åŒ–å‡æ–¹è¯¯å·®çš„æŸå¤±ã€‚\nä½¿ç”¨CIFAR-10æ•°æ®é›†è®­ç»ƒäº†ä¸€ä¸ªåŸºäºResNet-18çš„æ¨¡å‹ï¼Œå‡†ç¡®ç‡ä¸º91.94%ï¼Œå¹¶åœ¨ä¸åº”ç”¨é˜²å¾¡çš„æƒ…å†µä¸‹éƒ¨ç½²ã€‚ å¯¹äºåˆå§‹æ›¿ä»£æ¨¡å‹ï¼Œä½œè€…é€‰æ‹©äº†åœ¨ImageNetä¸Šé¢„è®­ç»ƒçš„VGG 16æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨STL 10æ•°æ®é›†ä½œä¸ºå…¬å…±æŸ¥è¯¢æ ·æœ¬ã€‚\næ”¾å®½é™åˆ¶ï¼Œå°†æŸ¥è¯¢æ ·æœ¬è®¾ç½®ä¸º CIFAR10 æµ‹è¯•é›†çš„ä¸€å°éƒ¨åˆ†è¿›è¡ŒæŸ¥è¯¢ã€‚\nä½¿ç”¨GTSRBæ•°æ®é›†è®­ç»ƒäº†ä¸€ä¸ªåŸºäºResNet-18çš„MUAæ¨¡å‹ï¼Œå‡†ç¡®ç‡ä¸º95.40%ï¼Œå¹¶åœ¨ä¸åº”ç”¨é˜²å¾¡çš„æƒ…å†µä¸‹éƒ¨ç½²ã€‚ å¯¹äºåˆå§‹æ›¿ä»£æ¨¡å‹ï¼Œé€‰æ‹©äº†åœ¨ImageNetä¸Šé¢„è®­ç»ƒçš„VGG 16æ¨¡å‹ã€‚\nä¸Šè¿°æ¡ˆä¾‹è¡¨æ˜ï¼š\næŸ¥è¯¢æ ·æœ¬çš„é€‰æ‹©ä¼šå½±å“æ¨¡å‹çªƒå–æ”»å‡»çš„æ•ˆç‡ã€‚å…·ä½“æ¥è¯´ï¼Œæ›´æ¥è¿‘ç›®æ ‡åŸŸæ•°æ®åˆ†å¸ƒçš„æŸ¥è¯¢æ ·æœ¬å§‹ç»ˆæœ‰åˆ©äºæ”»å‡»ã€‚ åŸºäºå†³ç­–è¾¹ç•Œçš„æ ·æœ¬åˆæˆæŠ€æœ¯ï¼ˆå³é€šè¿‡PGDã€CWï¼‰å¯ä»¥æä¾›æ¯”éšæœºæŸ¥è¯¢æ›´æœ‰ç”¨çš„ä¿¡æ¯ã€‚ éšç€æŸ¥è¯¢é¢„ç®—çš„å¢åŠ ï¼ŒåŸºäºå†³ç­–è¾¹ç•Œçš„æ ·æœ¬ç”Ÿæˆå¹¶æ²¡æœ‰å¸¦æ¥å¤ªå¤§çš„æ€§èƒ½æå‡ã€‚åŸå› å¯èƒ½æ˜¯æ‰€é€‰æ ·æœ¬åˆ†å¸ƒä¸åŸå§‹æ¨¡å‹çš„è®­ç»ƒé›†è¿‡äºæ¥è¿‘ï¼ŒåŸºäºå†³ç­–è¾¹ç•Œçš„æ ·æœ¬ç»“æ„æä¾›çš„ä¿¡æ¯é‡ç›¸å¯¹æœ‰é™ã€‚ å½“æ ·æœ¬æ•°é‡è¾ƒå°‘æ—¶ï¼ŒåŸºäºè¿ç§»å­¦ä¹ çš„æ¨¡å‹çªƒå–æ”»å‡»å¯æé«˜æ”»å‡»æ•ˆæœã€‚åŸå› æ˜¯æ ·æœ¬è¶Šå°‘ï¼Œå†—ä½™ä¿¡æ¯è¶Šå°‘ã€‚ç„¶è€Œï¼Œç”±äºè·å¾—çš„ä¿¡æ¯ç›¸ä¼¼ï¼Œæ›´å¤šçš„æŸ¥è¯¢æ ·æœ¬å¯èƒ½ä¼šå¯¼è‡´ä¿¡æ¯å†—ä½™ï¼Œè¿™ä¸ä¼šä¸ºä¿ƒè¿›æ”»å‡»æä¾›æ›´å¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚ ä½œè€…è¿›ä¸€æ­¥è¯„ä¼°æ”»å‡»è€…é€‰æ‹©çš„ä¸åŒæ›¿ä»£æ¨¡å‹æ¶æ„å¯¹æ”»å‡»æ•ˆæœçš„å½±å“ã€‚æ›¿ä»£æ¨¡å‹çš„æ€§èƒ½å—æ‰€é€‰æ¨¡å‹æ¶æ„çš„å½±å“ã€‚å¦‚å›¾æ‰€ç¤ºï¼ŒVGG16å§‹ç»ˆè¡¨ç°å‡ºä¼˜äºCIFAR10å…¶ä»–æ¨¡å‹çš„æ”»å‡»æ€§èƒ½ã€‚\nåŒæ ·ï¼Œåœ¨åœ¨GTSRBæ•°æ®é›†ä¸Šè¯„ä¼°æ—¶ï¼ŒResNet50è¡¨ç°å‡ºæœ€å¥½çš„æ”»å‡»æ•ˆæœï¼Œç•¥å¥½äºVGG16ï¼Œä½¿ç”¨AlexNetçš„æ€§èƒ½æœ€å·®ã€‚è¿™è¡¨æ˜é€‰æ‹©åˆé€‚çš„æ›¿ä»£æ¨¡å‹å¯ä»¥é™ä½æ”»å‡»æˆæœ¬ã€‚\nç»¼ä¸Šï¼ŒæŸ¥è¯¢æ ·æœ¬çš„é€‰æ‹©ä¼šå½±å“æ¨¡å‹çªƒå–æ”»å‡»çš„æ•ˆç‡å’Œæ›¿ä»£æ¨¡å‹çš„å‡†ç¡®æ€§ã€‚å…·ä½“æ¥è¯´ï¼Œæ”»å‡»æœ€å¥½é€‰æ‹©ç±»ä¼¼äºç›®æ ‡åŸŸçš„æ•°æ®åˆ†å¸ƒçš„å…¬å…±æŸ¥è¯¢æ ·æœ¬ã€‚\næ­¤å¤–ï¼ŒåŸºäºå†³ç­–è¾¹ç•Œçš„æ ·æœ¬åˆæˆæŠ€æœ¯ï¼ˆPGDã€CWç­‰ï¼‰å¯ä»¥æä¾›æ¯”éšæœºæŸ¥è¯¢æ›´æœ‰ç”¨çš„ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œéšç€æŸ¥è¯¢æ¬¡æ•°çš„å¢åŠ ï¼ŒåŸºäºå†³ç­–è¾¹ç•Œçš„æ ·æœ¬å¹¶æ²¡æœ‰å¸¦æ¥å¤ªå¤§çš„æ€§èƒ½æå‡ã€‚åŸå› å¯èƒ½æ˜¯æ‰€é€‰æ ·æœ¬åˆ†å¸ƒä¸åŸå§‹æ¨¡å‹çš„è®­ç»ƒé›†å¤ªæ¥è¿‘ã€‚\né˜²å¾¡éªŒè¯ ä½¿ç”¨APMSAåï¼Œæ›¿ä»£æ¨¡å‹çš„å‡†ç¡®ç‡ç”šè‡³ä½äºåŸºå‡†ï¼Œè¡¨æ˜é˜²å¾¡å‡å°‘äº†æ¨¡å‹é¢„æµ‹å¼•èµ·çš„æ¨¡å‹å†…éƒ¨ä¿¡æ¯æ³„éœ²ã€‚\nAPMSAçš„å…³é”®è§è§£æ˜¯ï¼Œé€šè¿‡å°†è¾“å…¥æ˜ å°„åˆ°ç‰¹å¾ç©ºé—´çš„å°å°ºåº¦åŒºåŸŸï¼Œå¯ä»¥å°½å¯èƒ½å‡å°‘è¾“å…¥è¾“å‡ºå¯¹æºå¸¦çš„ä¿¡æ¯æ³„æ¼ï¼Œç”šè‡³åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šäº§ç”Ÿè¯¯å¯¼æ€§ä¿¡æ¯ã€‚ä¸ºäº†å¯è§†åŒ–è¿™ä¸€å…³é”®è§è§£ï¼Œä½œè€…ä½¿ç”¨ t-SNE å’Œå½’ä¸€åŒ–æ“ä½œæ¥å‡å°‘ç”¨äºå¯è§†åŒ–çš„æ··æ·†è¾“å…¥çš„ç»´åº¦ã€‚\nCIFAR10 æ•°æ®é›†ä¸Šçš„æ··æ·†è¾“å…¥å’ŒæŸ¥è¯¢æ ·æœ¬ä¹‹é—´å­˜åœ¨æ˜æ˜¾çš„åˆ†ç¦»â€”â€”æ¯ä¸ªæ··æ·†è¾“å…¥éƒ½æ˜¯ä»ä¼ å…¥çš„æŸ¥è¯¢æ ·æœ¬ä¸­æ‰¾åˆ°çš„ã€‚åœ¨å°†åŸå§‹æŸ¥è¯¢æ ·æœ¬ä¸æ··æ·†è¾“å‡ºç›¸å…³è”æ—¶ï¼Œé€šè¿‡å¹²æ‰°æ¨¡å‹é¢„æµ‹ä¸­æ³„éœ²çš„ä¿¡æ¯ï¼Œä»¥å‡å°‘æ¨¡å‹çªƒå–æ”»å‡»çš„å½±å“ã€‚\n","date":"2023-07-20T14:57:05+08:00","image":"https://lbqaq.top/p/apmsa-adversarial-perturbation-against-model-stealing-attacks/108529802.webp","permalink":"https://lbqaq.top/p/apmsa-adversarial-perturbation-against-model-stealing-attacks/","title":"APMSA: Adversarial Perturbation Against Model Stealing Attacks"},{"content":"å­—ä½“çš„åˆ†ç±» å­—ä½“çš„æ•°é‡å¯ä»¥è¯´æ˜¯æˆåƒä¸Šä¸‡ï¼Œä½†ä¸€èˆ¬åœ¨ç”µè„‘ä¸Šæ˜¾ç¤ºçš„åŸºæœ¬ä¸ºä»¥ä¸‹è¿™ä¸‰ç±»1ï¼š\nmonospace [ç­‰å®½]\nç­‰å®½å­—ä½“æ˜¯æŒ‡å­—ç¬¦å®½åº¦ç›¸åŒçš„å­—ä½“ï¼Œç”¨äºéœ€è¦å­—ç¬¦ä¸¥æ ¼å¯¹é½çš„åœºåˆï¼Œä¾‹å¦‚æ§åˆ¶å°å’Œæºä»£ç ã€‚ä¸æ­¤ç›¸å¯¹ï¼Œå­—ç¬¦å®½åº¦å„ä¸ç›¸åŒçš„å­—ä½“ç§°ä¸ºæ¯”ä¾‹å­—ä½“(å…¶ä½™å››ç±»å­—ä½“éƒ½æ˜¯)ã€‚ä¸è¿‡ï¼Œå¯¹äºä¸­æ–‡å­—ä½“è€Œè¨€ï¼Œå¹¶ä¸å­˜åœ¨ç­‰å®½ä¸æ¯”ä¾‹çš„å·®åˆ«ï¼Œå› ä¸ºæ‰€æœ‰ä¸­æ–‡å­—éƒ½æ˜¯ç­‰å®½çš„ã€‚ä¸­æ–‡å­—ä½“ä¸­çš„â€œç­‰å®½â€æŒ‡çš„æ˜¯å­—ä½“çš„è¥¿æ–‡éƒ¨åˆ†æ˜¯ç­‰å®½çš„ï¼Œ2ä¸ªå­—æ¯å¯¹åº”1ä¸ªæ±‰å­—ã€‚\nsans-serif [æ— è¡¬çº¿]\næ˜¯æŒ‡ç¬”ç”»æœ«ç«¯æ²¡æœ‰ä¿®é¥°(è¡¬çº¿)çš„å­—ä½“ï¼Œé€šå¸¸ç”¨äºå±å¹•æ˜¾ç¤ºã€‚ä¸­æ–‡çš„é»‘ä½“ä¸åœ†ä½“å°±å±äºæ­¤ç±»å­—ä½“ã€‚\nserif [æœ‰è¡¬çº¿]\næ˜¯æŒ‡ç¬”ç”»æœ«ç«¯æœ‰ä¿®é¥°(è¡¬çº¿)çš„å­—ä½“ï¼Œé€šå¸¸ç”¨äºæ‰“å°ã€‚ä¸­æ–‡çš„å®‹ä½“ä¸ä»¿å®‹å°±å±äºæ­¤ç±»å­—ä½“ã€‚\næˆ‘ä»¬è¦åšçš„å­—ä½“é…ç½®ä¸»è¦å°±æ˜¯é’ˆå¯¹ä¸Šé¢è¿™ä¸‰ç±»å­—ä½“ã€‚\né€‰å­—ä½“ æœ‰äº†ç›®æ ‡ï¼Œä¸‹é¢å°±æ˜¯é€‰ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„å­—ä½“äº†ã€‚ä¸è¿‡ï¼Œå¯¹äºä¸­æ–‡å­—ä½“ï¼Œç›®å‰ç°åœ¨ Linux ä¸Šå¸¸ç”¨çš„ã€åœ¨ç»´æŠ¤çš„å¼€æºä¸­æ–‡å­—ä½“å°±ä¸€å¥—â€”â€”â€œæ€æºé»‘ä½“â€å’Œâ€œæ€æºå®‹ä½“â€ï¼ŒåŒæ—¶è¢« Noto å’Œæ€æºä¸¤ä¸ªé¡¹ç›®æ”¶å½•ã€‚Noto ç³»åˆ—å­—ä½“æ˜¯ Google ä¸»å¯¼çš„ï¼Œæ€æºç³»åˆ—å­—ä½“æ˜¯ Adobe ä¸»å¯¼çš„ã€‚2\nå¯¹äºç¼–ç¨‹å­—ä½“ï¼Œå¯ä»¥é€‰æ‹©çš„ä½™åœ°å°±å¤šå¤šäº†ï¼Œåƒæ˜¯Source Code Proï¼ŒConsolasï¼ŒMenloç­‰ç­‰ã€‚æˆ‘ä¸€å¼€å§‹é€‰æ‹©çš„æ˜¯ Iosevka ã€‚ä½†æ˜¯ï¼Œè¿™æ¬¾å­—ä½“ç»™æˆ‘æ„Ÿè§‰å¤ªç˜¦äº†ï¼Œçœ‹èµ·æ¥å¾ˆæ˜¯åˆ«æ‰­ã€‚æœ€åï¼Œæˆ‘é€‰æ‹©äº†å¹¿å—å¥½è¯„çš„ Fira Code ã€‚\nå°ç»“ä¸€ä¸‹ï¼Œæˆ‘çš„é€‰æ‹©æ˜¯ï¼š\næ— è¡¬çº¿ï¼šè¥¿æ–‡ Noto Sansï¼Œä¸­æ–‡ Noto Sans CJK è¡¬çº¿ï¼šè¥¿æ–‡ Noto Serifï¼Œä¸­æ–‡ Noto Serif CJK ç­‰å®½ï¼šè¥¿æ–‡ Fira Codeï¼Œä¸­æ–‡ Noto Sans Mono CJK åœ¨ArchLiunxä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦å®‰è£…noto-fontså’Œnoto-fonts-cjkè¿™ä¸¤ä¸ªåŒ…å³å¯ï¼Œä»–ä»¬åˆ†åˆ«æä¾›äº†è¥¿æ–‡å­—ä½“ Noto Sans / Noto Serifå’Œä¸­æ–‡å­—ä½“ Noto Sans CJK / Noto Serif CJK / Noto Sans Mono CJK ã€‚3\nå…³äº emojiï¼Œæˆ‘é€‰æ‹©äº† Twitter æ¨å‡ºçš„å­—ä½“ Twemojiã€‚\nttf-twemoji å¦å¤–ï¼Œå°‘ä¸äº†äººè§äººçˆ±çš„å›¾æ ‡å­—ä½“ Nerd Fontsã€‚\nttf-nerd-fonts-symbols è¿™é‡Œå°±æœ‰å°ä¼™ä¼´å¼€å§‹å¥½å¥‡äº†ï¼Œå¦‚ä½•è®©è¥¿æ–‡å’Œä¸­æ–‡ä½¿ç”¨ä¸åŒçš„å­—ä½“å‘¢ï¼Ÿ\nåœ¨ Windows ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åˆæˆå­—ä½“ï¼Œå³å°†å„ç±»å­—ä½“æ‰“åŒ…åˆ°ä¸€èµ·ã€‚ä¾‹å¦‚æ›´çº±é»‘ä½“å°±æ˜¯ç”±æ€æºé»‘ä½“å’Œè¥¿æ–‡å­—ä½“ Iosevka æ•´åˆè€Œæ¥çš„ã€‚è¿™ç§å­—ä½“çš„å¥½å¤„å°±æ˜¯æ–¹ä¾¿ï¼Œç›´æ¥é€‰æ‹©ä½¿ç”¨å³å¯ã€‚ä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§ï¼Œå°±æ˜¯æ‰“åŒ…å¤ªéº»çƒ¦äº†ï¼Œå¼•å…¥ Iosevka è¦æ‰“ä¸€æ¬¡åŒ…ï¼Œæƒ³è¦æ”¯æŒ Nerd Fontsï¼Œåˆè¦æ‰“ä¸€æ¬¡åŒ…ã€‚å¦‚æœæ˜¯åˆ«äººå¸®ä½ æä¾›å¥½çš„åˆæˆå­—ä½“é‚£è¿˜å¥½è¯´ï¼Œ ä»ç½‘ä¸Šä¸‹è½½ã€ä»è½¯ä»¶ä»“åº“å®‰è£…å°±å®Œäº‹äº†ï¼Œè‡ªå·±æ‰“åŒ…çš„è¯çœŸçš„å·¥ä½œé‡å·¨å¤§ã€‚\nè€Œåœ¨ Liunx ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½® fontconfig å°±å¥½äº†ï¼Œæ— è®ºæƒ³æ€ä¹ˆæ­é…éƒ½å¯ä»¥å®ç°ï¼Œå¬èµ·æ¥æ˜¯ä¸æ˜¯ç‰¹åˆ«é…·ğŸ˜ã€‚å¯æƒœçš„æ˜¯ï¼Œæœ‰ä¸€äº›ç¨‹åºå¯¹ fontconfig æ”¯æŒå¹¶ä¸å®Œå–„ï¼Œè¿™å°±è¾¾ä¸åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚ï¼ˆè¯´çš„å°±æ˜¯ä½ ï¼ŒChromeğŸ˜ ï¼‰\nfontconfig åœ¨æˆ‘ä»¬å¼€å§‹æ­£å¼é…ç½®å‰ï¼Œè¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€äº›åŸºæœ¬çš„çŸ¥è¯†ã€‚è¿™é‡Œæˆ‘å°±ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œå¦‚æœæƒ³è¦æ·±å…¥äº†è§£çš„è¯å¯ä»¥çœ‹çœ‹åŒçŒ«å¤§ä½¬çš„è¿™ç¯‡æ–‡ç« ï¼Œé‡Œé¢è¯¦ç»†ä»‹ç»äº†Linux fontconfig çš„å­—ä½“åŒ¹é…æœºåˆ¶ã€‚\nå­—ä½“çš„å±æ€§ å­—ä½“æœ‰å¾ˆå¤šå±æ€§ï¼Œå¸¸ç”¨çš„æœ‰å­—æ—ï¼ˆfamilyï¼‰ã€å€¾æ–œï¼ˆslantï¼‰ã€å­—é‡ï¼ˆweightï¼‰ã€‚åä¸¤è€…åˆä¸€èµ·å«æ ·å¼ï¼ˆstyleï¼‰ã€‚\nå­—æ—å°±æ˜¯å®ƒçš„åå­—å•¦ã€‚ä¸€ä¸ªå­—ä½“æ–‡ä»¶ï¼Œå¯ä»¥æä¾›å¤šä¸ªå­—ä½“æ—å (family)ã€‚æ¯”å¦‚ Arch Linux ç”¨æˆ·åœ¨å®‰è£… wqy-microhei åï¼Œç³»ç»Ÿç«¯å¢åŠ äº† wqy-microhei.ttc è¿™ä¸ªå­—ä½“æ–‡ä»¶ï¼Œåˆ†åˆ«æä¾›ã€ŒWenQuanYi Micro Heiã€ã€Œæ–‡æ³‰é©›å¾®ç±³é»‘ã€,ã€Œæ–‡æ³‰é©¿å¾®ç±³é»‘ã€ä¸‰ä¸ªå­—ä½“æ—åï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªæ„æ€ã€‚æˆ‘ä»¬å¯ä»¥è¿è¡Œ fontconfig æä¾›çš„å‘½ä»¤è¡Œå·¥å…· fc-list å»æŸ¥çœ‹ç³»ç»Ÿä¸Šå·²å®‰è£…çš„å­—ä½“å·²ç»å®ƒä»¬å¯¹åº”çš„å­—ä½“æ—åã€‚\nå€¾æ–œå°±æ˜¯æ–œä¸æ–œï¼Œè‹±æ–‡å«ã€ŒRomanã€ã€ŒItalicã€æˆ–è€…ã€ŒObliqueã€ï¼ŒItalic æ˜¯ä¸“é—¨çš„æ–œä½“å†™æ³•ï¼ˆæ›´æ¥è¿‘æ‰‹å†™æ ·å¼ï¼‰ï¼Œ Oblique æ˜¯æŠŠå¸¸è§„å†™æ³•å€¾æ–œä¸€ä¸‹å®Œäº‹ã€‚\nå­—é‡å°±æ›´ç®€å•äº†ï¼Œå°±æ˜¯ç¬”åˆ’çš„ç²—ç»†ã€‚å¸¸è§çš„æœ‰ Regularã€Normalã€Mediumã€Boldã€Semiboldã€Blackã€Thinã€Lightã€Extralight ç­‰ã€‚\né€šç”¨å­—æ—å å¾ˆå¤šæ—¶å€™ï¼Œç¨‹åºå¹¶ä¸åœ¨ä¹ç”¨æˆ·å…·ä½“ä½¿ç”¨çš„æ˜¯å“ªæ¬¾å­—ä½“ï¼Œåƒå¾ˆå¤šç½‘ç«™çš„ CSS é‚£æ ·æŠŠå„ä¸ªå¹³å°çš„å¸¸è§å­—ä½“å…¨éƒ¨åˆ—å‡ºæ¥å¤ªå‚»äº†ï¼Œåˆå®¹æ˜“å‡ºé—®é¢˜ã€‚æ‰€ä»¥ï¼Œäººä»¬å‘æ˜äº†ã€Œé€šç”¨å­—æ—åã€ï¼Œä¹Ÿå°±æ˜¯ sans-serif (sans)ã€serif å’Œ monospace (mono) è¿™äº›ã€‚å®ƒä»¬ä¸æ˜¯çœŸå®å­˜åœ¨çš„å­—ä½“ï¼Œè€Œæ˜¯åˆ†åˆ«æŒ‡ç¤ºç¨‹åºå»ä½¿ç”¨æ— è¡¬çº¿ã€è¡¬çº¿ã€ç­‰å®½å­—ä½“ã€‚é‚£ä¹ˆæ¡Œé¢ç¨‹åºåˆæ˜¯å¦‚ä½•çŸ¥é“å…·ä½“ä½¿ç”¨å“ªäº›å­—ä½“å‘¢ï¼Ÿå®ƒåªéœ€è¦å»æŸ¥è¯¢ fontconfig å°±è¡Œäº†ã€‚ç”±äºå®ƒä»¬å¿…å®šè¦ç»è¿‡ fontconfig çš„æŸ¥è¯¢æµç¨‹åæ‰èƒ½ä½¿ç”¨å­—ä½“ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ fontconfig çš„é…ç½®å»ç²¾å‡†æ§åˆ¶ç¨‹åºä½¿ç”¨çš„å­—ä½“ã€‚\nå¦‚ä½•è°ƒè¯• ä¼ å…¥ç¯å¢ƒå˜é‡FC_DEBUG=4å³å¯ï¼Œä¾‹å¦‚ï¼š\n1 FC_DEBUG=4 kitty fontconfig å°±ä¼šæ‰“å°è°ƒè¯•ä¿¡æ¯ï¼Œå…¶ä¸­å¯ä»¥çœ‹åˆ°ï¼š\n1 2 3 4 5 6 7 FcConfigSubstitute Pattern has 6 elts (size 16) family: \u0026#34;monospace\u0026#34;(s) slant: 0(i)(s) weight: 80(i)(s) pixelsize: 19.1667(f)(s) lang: \u0026#34;en\u0026#34;(w) prgname: \u0026#34;kitty\u0026#34;(s) é™¤äº†å¯åŠ¨ä¸€ä¸ªç¨‹åºæ¥çœ‹å®ƒå­—ä½“çš„è°ƒç”¨æ—¥å¿—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œæˆ‘æƒ³çœ‹ monospace åœ¨ç³»ç»Ÿé‡Œè¢«ä¿®æ”¹æˆäº†ä»€ä¹ˆå­—ä½“ï¼Œå°±å¯ä»¥æ‰§è¡Œï¼š\n1 FC_DEBUG=4 fc-match \u0026#39;monospace\u0026#39; æ‰“å°å‡ºçš„è°ƒè¯•ä¿¡æ¯ä¼šå¾ˆé•¿ï¼Œæˆ‘ä»¬ä¸»è¦çœ‹å‡ ä¸ªéƒ¨åˆ†ï¼š\nç¬¬ä¸€éƒ¨åˆ†ï¼ŒAdd Ruleï¼ŒæŒ‡å·²æ·»åŠ çš„é…ç½®æ–‡ä»¶è§„åˆ™ã€‚è¿™é‡Œé¢ä¹ŸåŒ…å«äº†å®¶ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æ‰¾æ¥çœ‹çœ‹è¢«è§£ææˆäº†ä»€ä¹ˆã€‚\nç¬¬äºŒéƒ¨åˆ†ï¼Œåœ¨ Add Rule ä¹‹åï¼Œè¿æ¥äº†æœ€å…³é”®çš„ã€æˆ‘ä»¬åº”å½“å…³å¿ƒçš„ FcConfigSubstitute Patternï¼Œå®ƒåŒ…å«äº† font patternã€‚(s) å’Œ (w) åˆ†åˆ«ä»£è¡¨å¼ºå¼±ç»‘å®šï¼›prgname ä»£è¡¨ç¨‹åºåï¼Œæ­¤æ—¶å°±æ˜¯ fc-matchã€‚è‡³äº langï¼Œç”±äºæ²¡æœ‰å¯¹ fc-match æŒ‡å®šè¯­è¨€ï¼Œæ‰€ä»¥é»˜è®¤æ˜¯ enã€‚\næ¥ä¸‹æ¥æœ‰å¾ˆå¤šæ¡ FcConfigSubstitute editPatternï¼Œä»£è¡¨å¯¹ font pattern çš„æ›¿æ¢æ“ä½œã€‚ä½†æ˜¯å¿…é¡»å½“è§„åˆ™åŒ¹é…çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ Rule Set ä¸æ˜¯ No match çš„æƒ…å†µä¸‹ï¼Œæ‰æ‰§è¡Œ FcConfigSubstitute editPatternã€‚é‚£ä¹ˆï¼Œåˆåº”è¯¥æ€ä¹ˆçœ‹ FcConfigSubstitute editPattern å‘¢ï¼Ÿä¸»è¦çœ‹ familyï¼Œå› ä¸º family ä»£è¡¨ç€å­—ä½“åŒ¹é…é¡ºåºã€‚å®ƒå°±æ˜¯é…ç½®æ–‡ä»¶ä¸­çš„\u0026lt;edit target=\u0026quot;pattern\u0026quot;\u0026gt;æ“ä½œã€‚\næœ€ååº”è¯¥å…³å¿ƒ FcConfigSubstitute donePatternï¼Œè¿™æ˜¯ fontconfig æ‰§è¡Œå®Œå­—ä½“æ›¿æ¢åçš„ç»“æœã€‚\né…ç½®æ–‡ä»¶ æ•´ä¸ªé…ç½®æ–‡ä»¶ç”±å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ä¾æ¬¡æ‹¼æ¥è€Œæˆï¼š\nç›®å½•è®¾ç½®(\u0026lt;dir\u0026gt;, \u0026lt;cachedir\u0026gt;, \u0026lt;include\u0026gt;) æ‚é¡¹è®¾ç½®(\u0026lt;config\u0026gt;) æ‰«æé˜¶æ®µ(\u0026lt;match target=\u0026quot;scan\u0026quot;\u0026gt;) åŒ¹é…é˜¶æ®µ(\u0026lt;alias\u0026gt;, \u0026lt;match target=\u0026quot;pattern\u0026quot;\u0026gt;) æ¸²æŸ“é˜¶æ®µ(\u0026lt;match target=\u0026quot;font\u0026quot;\u0026gt;) æƒ³è¦å®ç°åˆæˆå­—ä½“çš„æ•ˆæœï¼Œä¸€ä¸ªæœ€ç®€å•çš„æ€è·¯ï¼Œæœ¬æ–‡ä¹ŸåŸºäºè¯¥æ€è·¯ï¼šä¸è®©ç¨‹åºä½¿ç”¨æŸä¸ªå…·ä½“çš„å­—ä½“ï¼Œè€Œæ˜¯ä½¿ç”¨é€šç”¨å­—ä½“æ—å (Generic Font Family)ã€‚æ¯”å¦‚ï¼Œè®©ç¨‹åºä½¿ç”¨ sans-serifï¼Œä¹Ÿå°±æ˜¯é»˜è®¤çš„æ— è¡¬çº¿å­—ä½“ã€‚\næˆ‘ä»¬è¦å…³å¿ƒç¬¬å››ä¸ªéƒ¨åˆ†ï¼Œå³åŒ¹é…é˜¶æ®µï¼Œä½¿ç”¨ fontconfig é…ç½®å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;sans-serif\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Noto Sans\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Twemoji\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; è¿™ç§ font stack çš„æ–¹å¼ï¼Œå³å¯è®©ç¨‹åºæŒ‰ç…§ä»¥ä¸‹é¡ºåºæ¸²æŸ“å­—ä½“ï¼š\n1 Noto Sans CJK SC â€”\u0026gt; Noto Sans -\u0026gt; Twemoji è¿™é‡Œçš„\u0026lt;test\u0026gt;å°±æ˜¯æ¡ä»¶åˆ¤æ–­ï¼Œmode=\u0026quot;prepend\u0026quot;æŒ‡åœ¨å‰æ·»åŠ ï¼Œbinding=\u0026quot;strong\u0026quot;åˆ™æ˜¯å¼ºç»‘å®š\nå¼€å§‹é…ç½® æˆ‘ä»¬çš„æ€è·¯å°±æ˜¯å°±æ˜¯ä¿®æ”¹é»˜è®¤çš„å­—æ—ï¼Œè®©å…¶æˆä¸ºæˆ‘ä»¬æƒ³è¦æŒ‡å®šçš„å­—ä½“ã€‚ç„¶åå°†æ‰€æœ‰ç¨‹åºçš„å­—ä½“é…ç½®æ”¹ä¸ºé€šç”¨å­—ä½“æ—åï¼šsans-serifï¼Œserifï¼Œmonospaceã€‚\næˆ‘ä»¬çš„é…ç½®éƒ½æ”¾åœ¨æ­¤ç›®å½•ä¸­~/.config/fontconfig/fonts.confï¼Œæˆ‘çš„å®Œæ•´é…ç½®åœ¨æ­¤ä»“åº“ä¸­ã€‚\nè®¾ç½®é»˜è®¤å­—ä½“ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 \u0026lt;!-- Default system-ui fonts --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;system-ui\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;sans-serif\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Default sans-serif fonts--\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;sans-serif\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Noto Sans\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Twemoji\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Default serif fonts--\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;serif\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Serif CJK SC\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Noto Serif\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Twemoji\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- Default monospace fonts--\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;monospace\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK SC\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Symbols Nerd Font\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Twemoji\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Source Code\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Fira Code\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; å¯¹ system-uiï¼Œsans-serifï¼Œserifï¼Œmonospace è®¾ç½®ä¼˜å…ˆæ˜¾ç¤ºçš„å­—ä½“ã€‚åœ¨è¿™é‡Œæˆ‘è®© system-ui é»˜è®¤ä¸ºæ— è¡¬çº¿ã€‚æ³¨æ„ï¼Œsystem-ui å¿…é¡»åœ¨æœ€å‰ã€‚ç”±äº fontconfig å¯¹ font pattern çš„æ“ä½œæ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¿…é¡»å…ˆè®© system-ui èƒ½ä¼˜å…ˆä»¥ sans-serif æ˜¾ç¤ºï¼Œç„¶åæ‰æ˜¯å¯¹ sans-serif çš„æ“ä½œã€‚\næ‰€æœ‰çš„ Noto CJK å­—ä½“éƒ½ä»¥ SC ç»“å°¾ï¼Œå› ä¸ºæˆ‘å¸Œæœ›åœ¨æ²¡æŒ‡å®šè¯­è¨€çš„é»˜è®¤æƒ…å†µä¸‹ï¼Œä»¥ç®€ä½“ä¸­æ–‡æ˜¾ç¤ºä¸­æ–‡å­—å½¢ã€‚\nè®¾ç½®å¼‚å½¢å­— ä»€ä¹ˆæ˜¯å¼‚å½¢å­—ï¼ŸNoto Sans CJK ä¸­çš„å¼‚ä½“å­—ï¼Œæ˜¯åœ¨ ç›¸åŒçš„ Unicode ç ä½ä¸‹ï¼Œä¸åŒçš„è¯­è¨€ä¼šä½¿ç”¨ä¸åŒçš„å­—å½¢ã€‚\nå¯ä»¥åœ¨åŒçŒ«å¤§ä½¬çš„è¿™ä¸ªæµ‹è¯•ç½‘ç«™ä¸­çœ‹åˆ°ï¼Œä¸åŒçš„è¯­è¨€ç¯å¢ƒä¸‹ï¼Œè¿™äº›å­—çš„æ˜¾ç¤ºæ˜¯ä¸åŒçš„ã€‚\næˆ‘ä»¬æƒ³è¦å®ç°åœ¨ä¿ç•™å¼‚ä½“å­—çš„æƒ…å†µä¸‹ï¼Œè®©å®ƒé»˜è®¤æ˜¾ç¤ºä¸­å›½å¤§é™†å­—å½¢ï¼›åªåœ¨ç‰¹å®šè¯­è¨€ä¸‹æ˜¾ç¤ºå¼‚ä½“å­—ï¼Œæ¯”å¦‚ç”¨æµè§ˆå™¨æŸ¥çœ‹ä¸€ä¸ªæ—¥æ–‡é¡µé¢ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!-- Replace fonts for Japanese --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34;\u0026gt; \u0026lt;string\u0026gt;ja\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK JP\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; åœ¨å­—ä½“åŒ¹é…æ—¶ï¼Œå°† Noto Sans CJK SC æ›¿æ¢æˆ Noto Sans CJK JPã€‚é™¤äº† ï¼Œä½ è¿˜éœ€è¦ç…§è‘«èŠ¦ç”»ç“¢åˆ†åˆ«æŒ‡å®š zh-TWã€zh-HKã€jaã€koï¼Œä»¥åŠå¯¹å®‹ä½“å’Œç­‰å®½å­—ä½“è¿›è¡Œé‡å¤çš„æ­¥éª¤ã€‚åœ¨æ­¤æˆ‘å°±ä¸é‡å¤äº†ã€‚\nè§£å†³å…¨è§’å¼•å· è‹±æ–‡ä¸­çš„å•å¼•å·æœ‰ä¸¤ç§ï¼Œ'(U+0027) å’Œâ€™(U+2019)ã€‚å¯èƒ½ä¼šè§‰å¾—å‰ä¸€ç§å‡ºç°åœ¨è‹±æ–‡æ–‡æœ¬ä¸­ï¼Œåä¸€ç§å‡ºç°åœ¨ä¸­æ–‡æ–‡æœ¬ä¸­ï¼Œå¹¶ä¸”å®½åº¦å’Œä¸­æ–‡ç­‰å®½ã€‚ç„¶è€Œï¼Œè‹±è¯­ä¸–ç•Œä¸­çš„ä¸€äº›äººåœ¨è‹±æ–‡æ–‡ç« ä¸­ä¹Ÿæ˜¯ä¼šä½¿ç”¨åä¸€ç§çš„ã€‚æ‰€ä»¥ï¼Œå­—ä½“åœ¨æ˜¾ç¤ºåä¸€ç§å¼•å·çš„æ—¶å€™ï¼Œç©¶ç«Ÿæ˜¯å’Œè‹±æ–‡å­—æ¯ä¸€æ ·çª„ï¼Œè¿˜æ˜¯è¯¥å’Œä¸­æ–‡å­—ä½“ç­‰å®½å‘¢ï¼Ÿå¦‚æœåœ¨è‹±æ–‡æ–‡ç« ä¸­æ˜¾ç¤ºæˆå…¨å®½å­—ç¬¦åˆ™ä¼šæ˜¾å¾—çªå…€ã€‚\næ¯”å¦‚ï¼Œæ€æºé»‘ä½“å…¶å®ä¹ŸåŒ…å«äº†æ‹‰ä¸å­—æ¯çš„å­—å½¢ï¼Œå¯ä»¥å®Œå…¨ä½¿ç”¨æ€æºé»‘ä½“å»æ˜¾ç¤ºè¥¿æ–‡ã€‚æ­¤æ—¶ï¼Œåä¸€ç§å•å¼•å·çš„å®½åº¦ä¼šæ˜¾ç¤ºæˆä¸­æ–‡å­—å½¢çš„å®½åº¦ã€‚å¯¼è‡´å³ä½¿åœ¨å…¨è‹±æ–‡ç¯å¢ƒä¸­ï¼Œå•å¼•å·ä¹Ÿä¼šçªå…€åœ°åœ¨æ–‡æœ¬ä¸­è¿‡å®½ã€‚\nåŒæ ·åœ°ï¼Œâ€˜(U+2018) â€œ(U+201C) â€(U+201D) ä¹Ÿæœ‰ç±»ä¼¼çš„æƒ…å†µã€‚\næˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨ä¸åŒè¯­è¨€ç¯å¢ƒä¸‹å­—å½¢ä¼šæœ‰æ‰€åŒºåˆ«ï¼Œè®©å¼•å·åªåœ¨ä¸­æ–‡æ–‡æœ¬ä¸­å…¨å®½ã€‚\nåŒæ ·ï¼Œåœ¨åŒçŒ«å¤§ä½¬çš„è¿™ä¸ªæµ‹è¯•ç½‘ç«™ä¸­å¯ä»¥è¿›è¡Œæµ‹è¯•ï¼š\nåˆ©ç”¨fontconfigï¼Œå¯ä»¥æ–¹ä¾¿çš„è§£å†³æ­¤é—®é¢˜\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!-- è§£å†³å…¨è§’å¼•å· --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;en\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; è¦†ç›–è¥¿æ–‡å­—ä½“ å¦‚æœå»è§‚å¯Ÿ Noto Sans CJK è¿™ä¸ªä¸­æ–‡å­—ä½“ï¼Œä¼šå‘ç°å®ƒçš„è¥¿æ–‡éƒ¨åˆ†çš„å­—å½¢å…¶å®å’Œ Noto Sans ä¸ä¸€æ ·ï¼Œè™½ç„¶å®ƒä»¬éƒ½ä»¥ Noto è‡ªç§°ã€‚ä¸­æ–‡å­—ä½“æºå¸¦çš„è‹±æ–‡å­—ç¬¦æœ‰å¯èƒ½ååˆ†ç³Ÿç³•ï¼Œç‰¹åˆ«æ˜¯ Windows è‡ªå¸¦çš„ SimHeiï¼Œä¹Ÿå°±æ˜¯ä¸­æ˜“é»‘ä½“ï¼Œå®ƒçš„è‹±æ–‡ç›¸å½“ç³Ÿç³•ã€‚å¦å¤–ï¼Œå¾®è½¯é›…é»‘çš„å­—é‡å®åœ¨æ˜¯å¤ªå°‘äº†ï¼Œå¯¹äºè®¾è®¡å¸ˆæ¥è¯´å¾ˆä¸å‹å¥½ã€‚è€Œå„ç§æµè¡Œçš„è‹±æ–‡å­—ä½“æ”¯æŒå¾ˆå¤šå­—é‡ã€‚\nNoto Sans CJK çš„è‹±æ–‡è¿˜æ˜¯æ¯”è¾ƒä¸é”™çš„ï¼Œä¸ºäº†å­—ä½“çš„æ ·å¼ç»Ÿä¸€ï¼Œè¿™é‡Œå°±ä¸ä¿®æ”¹sans-serifå’Œseriäº†ã€‚ä¸»è¦å°†ç¼–ç¨‹ç”¨çš„ç­‰å®½å­—ä½“æ¢æˆFira Codeã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!-- Replace english fonts--\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;prgname\u0026#34; compare=\u0026#34;not_eq\u0026#34;\u0026gt; \u0026lt;string\u0026gt;msedge\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans Mono CJK\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Fira Code\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; è¿™é‡Œä¸ºä»€ä¹ˆè¦å¤šåŠ ä¸€å¥åˆ¤æ–­å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºæœ‰äº›ç¨‹åºå±…ç„¶åªä½¿ç”¨ font pattern ç»“æœä¸­çš„é¦–ä¸ªå­—ä½“ï¼Œæ¯”å¦‚ Chromeï¼ˆä»¥åŠè¡ç”Ÿçš„Chromiumï¼‰ï¼Œè™½ç„¶ Chrome æ¥å—äº†æˆ‘ä»¬æŒ‡å®šçš„è¥¿æ–‡å­—ä½“ï¼Œä½†æ˜¯å®ƒå¿½ç•¥äº†ç´§æ¥å…¶åçš„ä¸­æ–‡å­—ä½“ï¼Œå³ä½¿é…ç½®é‡‡ç”¨äº†å¼ºç»‘å®šï¼ç„¶åä¸­æ–‡å­—ä½“åˆä¸çŸ¥é“å®ƒ fallback åˆ°å“ªå»äº†ï¼Œå¯èƒ½ä¼šå‡ºç°ä½ æƒ³è¦çš„ä¸­æ–‡å­—ä½“ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯ã€‚\nè¿™é‡Œæ˜¯ msedge ä¸»è¦æ˜¯æˆ‘å¹³æ—¶éƒ½ç”¨ edge è€Œä¸æ˜¯ Chromeã€‚å¯æƒœç”±äº Chromium åœ¨ Linux ä¸Šå°é—®é¢˜å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œè¿˜æ˜¯è€è€å®å®çš„ç”¨ firefox å§ã€‚\nåœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œé™¤äº†ç¨‹åºåä¸º msedge çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆä½¿ç”¨ Fira Code æ˜¾ç¤ºè¥¿æ–‡ï¼Œå†ç”¨ Noto Sans Mono CJK æ˜¾ç¤ºä¸­æ–‡ã€‚è™½ç„¶æˆ‘ä¸èƒ½è®© msedge ä½¿ç”¨ Fira Codeï¼Œä½†å®ƒä¸€å®šèƒ½ç”¨ä¸Š Noto Sans Mono CJK æ˜¾ç¤ºä¸­æ–‡ã€‚\næ›¿æ¢ä»»æ„å­—ä½“ å½“ç³»ç»Ÿé‡Œå·²ç»å®‰è£…äº†ä¸€äº›ä¸éœ€è¦çš„å­—ä½“ï¼Œä½†åˆä¸æƒ³åˆ é™¤æˆ–è€…å±è”½å®ƒæ€ä¹ˆåŠå‘¢ï¼Ÿæ›¿æ¢æ‰ font pattern å°±å¯ä»¥äº†ã€‚\næˆ‘è¿™é‡Œåˆ™æ˜¯ç”¨æ¥æ›¿æ¢æ€æºå­—ä½“ï¼Œæ¯•ç«Ÿå®ƒå°±æ˜¯ Noto å˜›\n1 2 3 4 5 6 7 8 \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test qual=\u0026#34;any\u0026#34; name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Source Han Sans\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;assign\u0026#34; binding=\u0026#34;same\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; å­—ä½“æ¸²æŸ“å‚æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 \u0026lt;!--rendering options--\u0026gt; \u0026lt;match target=\u0026#34;font\u0026#34;\u0026gt; \u0026lt;edit name=\u0026#34;autohint\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;bool\u0026gt;false\u0026lt;/bool\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;hinting\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;bool\u0026gt;true\u0026lt;/bool\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;hintstyle\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;const\u0026gt;hintslight\u0026lt;/const\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;antialias\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;bool\u0026gt;true\u0026lt;/bool\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;lcdfilter\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;const\u0026gt;lcddefault\u0026lt;/const\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;edit name=\u0026#34;rgba\u0026#34; mode=\u0026#34;assign\u0026#34;\u0026gt; \u0026lt;const\u0026gt;rgb\u0026lt;/const\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; è¿™é‡Œä¸»è¦è®¾ç½®äº†ä¸€äº›å­—ä½“çš„æ¸²æŸ“æ–¹å¼ï¼š\nautohintï¼šä¼˜å…ˆä½¿ç”¨å†…åµŒå¾®è°ƒ hintingï¼šå¼€å¯å¾®è°ƒ hintstyleï¼šå¾®è°ƒçš„ç¨‹åº¦ï¼Œè½»å¾® antialiasï¼šå¼€å¯æŠ—é”¯é½¿åŠŸèƒ½ lcdfilterï¼šLCD filter çš„é£æ ¼ï¼Œé»˜è®¤ rgbaï¼šLCD å­åƒç´ çš„æ’åˆ—é¡ºåºï¼Œrgb è¿™é‡Œå°±ç›´æ¥æŠ„ä½œä¸šäº†ã€‚\né‡åˆ°çš„é—®é¢˜ å…¨è§’å¼•å·è®¾ç½®æ— æ•ˆ ä¸€å¼€å§‹æˆ‘é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ— è®ºæ€ä¹ˆè®¾ç½®éƒ½æ˜¯åŠè§’ï¼Œç»è¿‡æ’æŸ¥ä»¥åŠç½‘å‹çš„ç•™è¨€åå‘ç°ï¼Œè¿™æ˜¯ç”±äºç³»ç»Ÿå˜é‡ä¸­çš„LANGä¸ºen_US.utf-8ï¼Œè¿™ä¼šå¯¼è‡´ä¼ é€’ç»™ fontconfig çš„ lang æ˜¯ lang: zh-cn(s) \u0026quot;en\u0026quot;(w)ã€‚äºæ˜¯å°±ä¸€ç›´åŒ¹é…è¥¿æ–‡å­—ä½“ã€‚\nè§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ç›´æ¥ä¿®æ”¹LANGç¯å¢ƒå˜é‡ä¸ºzh_CN.UTF-8ï¼Œæˆ‘ç›®å‰é‡‡ç”¨çš„å°±æ˜¯è¿™ç§å½¢å¼ã€‚\næˆ–è€…å°±æ˜¯é»˜è®¤æ¸²æŸ“è‹±æ–‡ï¼Œå½“ç½‘é¡µå£°æ˜æ˜¯ä¸­æ–‡æ—¶å†æ¢å­—ä½“ï¼Œç›¸å…³é…ç½®å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \u0026lt;!-- Default sans-serif fonts--\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34;\u0026gt; \u0026lt;string\u0026gt;sans-serif\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;string\u0026gt;Noto Color Emoji\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;!-- cn --\u0026gt; \u0026lt;match target=\u0026#34;pattern\u0026#34;\u0026gt; \u0026lt;test name=\u0026#34;lang\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;cn\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;test name=\u0026#34;family\u0026#34; compare=\u0026#34;contains\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans\u0026lt;/string\u0026gt; \u0026lt;/test\u0026gt; \u0026lt;edit name=\u0026#34;family\u0026#34; mode=\u0026#34;prepend\u0026#34; binding=\u0026#34;strong\u0026#34;\u0026gt; \u0026lt;string\u0026gt;Noto Sans CJK SC\u0026lt;/string\u0026gt; \u0026lt;/edit\u0026gt; \u0026lt;/match\u0026gt; è¿™æ ·å¦‚æœç½‘é¡µå£°æ˜äº†lang=zh-cnï¼Œå°±ä¼šç”¨Noto Sans CJK SCå­—ä½“è¿›è¡Œè¦†ç›–ï¼Œä¹Ÿå°±å®ç°äº†å…¨å®½å¼•å·ã€‚å‡å¦‚ç½‘é¡µæ²¡æœ‰å£°æ˜langæˆ–è€…é”™è¯¯åœ°å£°æ˜äº†lang=enï¼Œè¿™æ—¶å°±ä¼šå‡ºç°åŠè§’å¼•å·+æ±‰å­—çš„ç»„åˆäº†ã€‚\nä¸èƒ½è§£å†³çš„é—®é¢˜ Linux ä¸å¼ºè¿«ç¨‹åºå¿…é¡»ä½¿ç”¨ç‰¹å®šçš„ä¾èµ–ï¼Œè€Œæ˜¯ç¨‹åºä¸»åŠ¨é€‰æ‹©äº†çº¦å®šä¿—æˆçš„ä¾èµ–ã€‚è€è¯é‡è°ˆï¼Œç¨‹åºå¯ä»¥è‡ªç”±é€‰æ‹©å®Œå…¨éµå®ˆ fontconfigï¼Œä¹Ÿå¯ä»¥é€‰æ‹©éƒ¨åˆ†ä½¿ç”¨ fontconfig çš„é…ç½®ï¼Œæˆ–è€…å®Œå…¨ä¸éµå®ˆå®ƒã€‚è¿™ä¹Ÿå¯¼è‡´äº†å¯¹ä¸€äº›ç¨‹åºæ— æ³•å®ç°å­—ä½“çš„ä¿®æ”¹ã€‚ä»¥åŠä¸Šé¢æåˆ°çš„ chrome å¯¹ fontconfig å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæˆ–è®¸é¢å¯¹è¿™ç§ç¨‹åºï¼Œå°±éœ€è¦åˆæˆå­—ä½“çš„å‡ºåœºäº†ã€‚\nå‚è€ƒæ–‡çŒ® Linuxå­—ä½“ç¾åŒ–å®æˆ˜(Fontconfigé…ç½®) [é‡‘æ­¥å›½]\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nLinux ä¸Šçš„å­—ä½“é…ç½®ä¸æ•…éšœæ’é™¤ - ä¾äº‘\u0026rsquo;s Blog\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nç”¨ fontconfig æ²»ç† Linux ä¸­çš„å­—ä½“ - åŒçŒ«CC\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2023-07-05T20:58:15+08:00","image":"https://lbqaq.top/p/linux-font/109572761.webp","permalink":"https://lbqaq.top/p/linux-font/","title":"fontconfigï¼šLinuxä¸‹çš„å­—ä½“é…ç½®"},{"content":"æœ€è¿‘æ‰“ç®—å°†ArchLinuxä½œä¸ºä¸»åŠ›ç³»ç»ŸæŒ‘æˆ˜ä¸€ä¸‹ï¼Œç”±äºå¹³æ—¶æœ‰ç”¨ç”µè„‘æŒ‚æ˜æ—¥æ–¹èˆŸçš„ä¹ æƒ¯ï¼Œäºæ˜¯æ‰“ç®—å®‰è£…æ¨¡æ‹Ÿå™¨åœ¨Linuxä¸Šã€‚ç›¸è¾ƒäºWindowsä¸‹å„ç§xxæ¨¡æ‹Ÿå™¨ç™¾èŠ±é½æ”¾ï¼ŒLinuxä¸‹å°±æƒ¨ä¸å¿ç¹äº†ã€‚ç½‘ä¸Šæœç´¢åˆ°çš„çŸ¥åæ¨¡æ‹Ÿå™¨ä¸­ï¼ŒAnboxå·²ç»è¢«ä½œè€…å¼ƒå‘äº†ï¼ŒAndroid Studioæ¨¡æ‹Ÿå™¨åˆ™æ˜¯é¢å‘å¼€å‘è€…ï¼Œæƒ³è¦ä½¿ç”¨è¿˜è¦å®‰è£…Android Studioå¼€å‘ç¯å¢ƒã€‚\nåœ¨æœç´¢ä¸­ï¼Œæˆ‘å‘ç°ReDroidå¯ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‚ä½œä¸ºä¸€ä¸ªâ€œäº‘æ‰‹æœºâ€çš„æ–¹æ¡ˆï¼Œè‡ªç„¶æ˜¯å¯ä»¥éƒ¨ç½²åœ¨æœ¬åœ°ï¼Œæ‘¸ç´¢æ˜ç™½äº†éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šä¹ŸæŒºä¸é”™(é›¾ã€‚\nå…·ä½“çš„å®‰è£…çš„æ•™ç¨‹æˆ‘å‚è€ƒçš„æ˜¯Ivonå¤§ä½¬çš„è¿™ç¯‡æ–‡ç« ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šä½œäº†ä¸€äº›å°å°çš„ä¿®æ”¹ã€‚\nReDroidé…ç½® å®‰è£…ç¯å¢ƒ ReDroidéœ€è¦Linuxå†…æ ¸å¯ç”¨binderfsæ¨¡å—ï¼ŒArch Liunxé»˜è®¤çš„linuxå†…æ ¸å¹¶ä¸åŒ…å«æ­¤æ¨¡å—ï¼Œéœ€è¦å®‰è£…linux-zenæ¨¡å—ã€‚\n1 pacman -S linux-zen è¿™é‡Œæˆ‘å¼ºçƒˆå»ºè®®å®‰è£…å®˜æ–¹çš„å®‰è£…æŒ‡å—æ¥ï¼Œæˆ‘ä¸€å¼€å§‹æŒ‰ç…§Ivonå¤§ä½¬çš„æ•™ç¨‹å°è¯•åœ¨é»˜è®¤çš„Linuxå†…æ ¸é‡Œå¯ç”¨è¯¥æ¨¡å—ï¼Œç»“æœReDroidä¸€ç›´å¯åŠ¨ä¸äº†ã€‚æœ€åæ›´æ¢å†…æ ¸åå°±æˆåŠŸè¿è¡Œèµ·æ¥äº†QAQã€‚\næ¥ç€å®‰è£…dockerå’Œdocker-composeï¼Œç”¨æ¥è¿è¡ŒReDroidçš„å®¹å™¨\n1 sudo pacman -S docker docker-compose è¿˜è¦å®‰è£…ADBå’ŒScrcpyï¼Œç”¨äºè¿æ¥åˆ°å®‰å“è™šæ‹Ÿæœº\n1 2 sudo pacman -S android-tools sudo pacman -S scrcpy [å¯é€‰]é…ç½®ARMè½¬è¯‘å™¨ å¤§éƒ¨åˆ†å®‰å“åº”ç”¨éƒ½åªæœ‰ARMç‰ˆï¼Œè¿™ä¹Ÿæ„å‘³ç€æ— æ³•åœ¨X86çš„ç”µè„‘ä¸Šè¿è¡Œï¼Œè¿™æ—¶å°±éœ€è¦å®‰è£…ARMè½¬è¯‘å™¨äº†ã€‚\nç„¶è€Œï¼Œæ˜æ—¥æ–¹èˆŸå±…ç„¶æ”¯æŒX86ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‹ç¼©å·¥å…·è§£å‹æ–¹èˆŸçš„å®‰è£…åŒ…ï¼Œå¯ä»¥çœ‹åˆ°libä¸‹æœ‰x86ç›®å½•ã€‚è¿™ä¹Ÿæ„å‘³ç€å¦‚æœåªæ˜¯ç”¨æ¥ç©æ–¹èˆŸçš„è¯ï¼Œå®Œå…¨ä¸éœ€è¦é…ç½®ARMè½¬è¯‘ã€‚\nåŒæ—¶ï¼Œæ ¹æ®å¤§ä½¬çš„æ•™ç¨‹é…ç½®å¥½è½¬è¯‘å™¨åï¼Œæ–¹èˆŸåè€Œä¼šé—ªé€€ï¼Œæ‰€ä»¥å®Œå…¨ä¸ç”¨åšæ­¤æ­¥ğŸ˜¥ã€‚å¦‚æœéœ€è¦å®‰è£…armåº”ç”¨ï¼Œå¯ä»¥çœ‹ä¸Šé¢å¤§ä½¬çš„æ•™ç¨‹æ¥åšã€‚\næˆ‘åé¢å¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨libhoudiniæ¥ä½œä¸ºReDroidçš„è½¬è¯‘å™¨ã€‚\nå¯åŠ¨é•œåƒ æˆ‘è¿™é‡Œå°±ä½¿ç”¨ä¸åŒ…å«ARMè½¬è¯‘å™¨çš„ReDroidç»§ç»­äº†ã€‚é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å³å¯éƒ¨ç½²ReDroidï¼š\n1 2 3 4 5 sudo docker run -itd --privileged \\ -v /home/luobo/redroid:/data \\ -p 5555:5555 \\ --name redroid11 \\ redroid/redroid:11.0.0-latest ç„¶åä½¿ç”¨adbè¿æ¥ï¼Œå¹¶æ‰§è¡ŒScrcpyï¼Œæ˜¾ç¤ºæ‰‹æœºç”»é¢ï¼š\n1 2 adb connect localhost:5555 scrcpy -s localhost:5555 å¯¹äºGoogleæœåŠ¡æ¡†æ¶ï¼Œæˆ‘å¹¶ä¸æ˜¯åˆšéœ€ï¼Œå°±ä¸å®‰è£…äº†ã€‚å¦‚æœéœ€è¦å®‰è£…ï¼Œå¯ä»¥æŸ¥çœ‹ä¹‹å‰æåˆ°çš„æ•™ç¨‹ã€‚\nScrcpy2.0ç‰ˆæœ¬ï¼Œå·²ç»è‡ªå¸¦äº†å£°éŸ³æ¨¡å—ï¼Œæ— éœ€å†å®‰è£…é¢å¤–çš„è½¯ä»¶ã€‚\nå¦‚æœé‡åˆ°æŠ¥é”™Failed to initialize audio/opus, error 0xfffffffe\nåªéœ€è¦æ‰‹åŠ¨æŒ‡å®šå…¶ä»–çš„éŸ³é¢‘è§£æå™¨å³å¯ï¼Œå¦‚ä¸‹é¢æ‰€ç¤ºï¼š\n1 scrcpy -s localhost:5555 --audio-codec=aac å¦‚æœä¸éœ€è¦å£°éŸ³ï¼Œåªéœ€è¦åŠ ä¸Š--no-audioï¼Œå¦‚ä¸‹é¢æ‰€ç¤ºï¼š\n1 scrcpy -s localhost:5555 --no-audio å®‰è£…åº”ç”¨åŠå¼€å…³æœº å‘ReDroidå®‰è£…åº”ç”¨ï¼Œåªéœ€è¦ä½¿ç”¨adbå³å¯\n1 adb -s localhost:5555 install \u0026#34;/mnt/data/Downloads/mrfz_2.0.11_20230605_102450_87eb5.apk\u0026#34; å¼€å…³æœºä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€å¯¹dockerå®¹å™¨è¿›è¡Œæ“ä½œã€‚\n1 2 sudo docker stop redroid11 #å…³æœº sudo docker start redroid11 #å¼€æœº MAAé…ç½® MAAä½œä¸ºè‡ªåŠ¨åŒ–çš„æŒ‚æœºé•¿è‰ç¥å™¨ï¼Œè‚¯å®šæ˜¯è¦å®‰æ’ä¸Šçš„ã€‚\nå®‰è£…MAA Archç”¨æˆ·ç›´æ¥aurå®‰è£…å³å¯\n1 yay -S maa-assistant-arknights æˆ‘ä½¿ç”¨yayå®‰è£…æ—¶ï¼Œä¼šå®‰è£…è®¸å¤šç”¨ä¸åˆ°çš„åº“ï¼Œè€Œä¸”ä¼šå› ä¸ºä¾èµ–é”™è¯¯è€Œæ— æ³•å®‰è£…ã€‚æ•…è¿˜æ˜¯å»å®˜ç½‘ä¸‹è½½å‹ç¼©åŒ…è§£å‹ä½¿ç”¨ã€‚\né…ç½®MAA æˆ‘ä»¬éœ€è¦ä¿®æ”¹./MAA-v{ç‰ˆæœ¬å·}-linux-{æ¶æ„}/Python/ ç›®å½•ä¸‹çš„ sample.py æ–‡ä»¶\né¦–å…ˆéœ€è¦é…ç½®adbè¿æ¥ï¼Œç”±äºæˆ‘ä»¬ä¹‹å‰å·²ç»å®‰è£…è¿‡adbäº†ï¼Œè¿™é‡Œç›´æ¥æ›¿æ¢åœ°å€å³å¯ï¼š\n1 if asst.connect(\u0026#39;adb\u0026#39;, \u0026#39;127.0.0.1:5555\u0026#39;): æˆ‘ä»¬å¯ä»¥æ‰§è¡Œpython sample.pyï¼Œå¦‚æœè¾“å‡ºè¿æ¥æˆåŠŸåˆ™é…ç½®æˆåŠŸ\nä¹‹åæˆ‘ä»¬éœ€è¦é…ç½®MAAçš„ä»»åŠ¡ï¼Œè¿™é‡Œå¯ä»¥å‚è€ƒå®˜æ–¹çš„æ–‡æ¡£è¿›è¡Œä¿®æ”¹\nè¿™é‡Œé™„ä¸Šæˆ‘çš„é…ç½®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 asst.append_task(\u0026#39;StartUp\u0026#39;) asst.append_task(\u0026#39;Fight\u0026#39;, { \u0026#39;stage\u0026#39;: \u0026#39;\u0026#39;, # å…³å¡åï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸ºç©ºï¼Œè¯†åˆ«å½“å‰/ä¸Šæ¬¡çš„å…³å¡ã€‚ \u0026#39;report_to_penguin\u0026#39;: True, # æ˜¯å¦æ±‡æŠ¥ä¼é¹…æ•°æ® \u0026#34;expiring_medicine\u0026#34;: 999, # æœ€å¤§ä½¿ç”¨ 48 å°æ—¶å†…è¿‡æœŸç†æ™ºè¯æ•°é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤ 0 # \u0026#39;penguin_id\u0026#39;: \u0026#39;1234567\u0026#39; }) asst.append_task(\u0026#39;Recruit\u0026#39;, { \u0026#39;enable\u0026#39;: True, # æ˜¯å¦å¯ç”¨æœ¬ä»»åŠ¡ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º true \u0026#39;select\u0026#39;: [4, 5], # ä¼šå»ç‚¹å‡»æ ‡ç­¾çš„ Tag ç­‰çº§ï¼Œå¿…é€‰ \u0026#39;confirm\u0026#39;: [3, 4], \u0026#39;times\u0026#39;: 4 }) asst.append_task(\u0026#39;Infrast\u0026#39;, { \u0026#39;facility\u0026#39;: [ \u0026#34;Mfg\u0026#34;, \u0026#34;Trade\u0026#34;, \u0026#34;Control\u0026#34;, \u0026#34;Power\u0026#34;, \u0026#34;Reception\u0026#34;, \u0026#34;Office\u0026#34;, \u0026#34;Dorm\u0026#34; ], \u0026#39;drones\u0026#39;: \u0026#34;Money\u0026#34;, # æ— äººæœºç”¨é€” \u0026#34;_NotUse\u0026#34;ã€\u0026#34;Money\u0026#34;ã€\u0026#34;SyntheticJade\u0026#34;ã€\u0026#34;CombatRecord\u0026#34;ã€\u0026#34;PureGold\u0026#34;ã€\u0026#34;OriginStone\u0026#34;ã€\u0026#34;Chip\u0026#34; \u0026#39;replenish\u0026#39;: True, # è´¸æ˜“ç«™â€œæºçŸ³ç¢ç‰‡â€æ˜¯å¦è‡ªåŠ¨è¡¥è´§, \u0026#39;dorm_trust_enabled\u0026#39;: True # æ˜¯å¦å°†å®¿èˆå‰©ä½™ä½ç½®å¡«å…¥ä¿¡èµ–æœªæ»¡å¹²å‘˜ }) asst.append_task(\u0026#39;Visit\u0026#39;) asst.append_task(\u0026#39;Mall\u0026#39;, { \u0026#39;shopping\u0026#39;: True, \u0026#39;buy_first\u0026#39;: [\u0026#39;æ‹›è˜è®¸å¯\u0026#39;, \u0026#39;é¾™é—¨å¸\u0026#39;], \u0026#39;blacklist\u0026#39;: [\u0026#39;å®¶å…·\u0026#39;, \u0026#39;ç¢³\u0026#39;], }) asst.append_task(\u0026#39;Award\u0026#39;) é…ç½®å¥½ååªéœ€è¦ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥æ‰§è¡Œè„šæœ¬äº†\n1 python sample.py è‡³æ­¤ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥æ„‰å¿«çš„æŒ‚æœºäº†ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒä½“åŠ›è¢«æµªè´¹äº†ï¼ˆé›¾\nç”±äºReDroidæ˜¯åŸºäºDokcerçš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€å¯ä»¥å°†å…¶é…ç½®åˆ°æœåŠ¡å™¨ä¸Šï¼Œå°±å¯ä»¥å®ç°24å°æ—¶è‡ªåŠ¨æŒ‚æœºäº†ã€‚ä¸è¿‡ï¼Œè¦æƒ³æµç•…çš„è¿è¡Œæ–¹èˆŸï¼Œæœ€å¥½è¿˜æ˜¯æœ‰4Gä»¥ä¸Šçš„å†…å­˜ï¼Œç›®å‰æˆ‘çš„æœåŠ¡å™¨è¿˜æ²¡æœ‰è¿™ä¹ˆå¤§çš„å†…å­˜ï¼Œä¹‹åæœ‰æœºä¼šå†å°è¯•å§ã€‚\n","date":"2023-06-17T16:47:00+08:00","image":"https://lbqaq.top/p/redroid-maa/103123878.webp","permalink":"https://lbqaq.top/p/redroid-maa/","title":"ReDroid+MAAï¼šåœ¨Linuxä¸‹æ¸¸ç©æ˜æ—¥æ–¹èˆŸ"},{"content":"æœ€è¿‘éœ€è¦æ„å»ºå±äºè‡ªå·±çš„YOLOè®­ç»ƒæ•°æ®é›†ï¼Œå¦‚æœæ‰‹åŠ¨æ ‡æ³¨2kå¼ å›¾ç‰‡è¿™å·¥ä½œé‡å¤ªå¤§äº†ï¼Œäºæ˜¯å°±å¯»æ‰¾æœ‰ä»€ä¹ˆå¯ä»¥è‡ªåŠ¨æ ‡æ³¨çš„æ–¹æ³•ã€‚ç¢°å·§çš„æ˜¯ï¼Œ çŸ¥ä¹æ­£å¥½æ¨èäº†ä¸€ç¯‡ç›¸å…³çš„æ–‡ç« ï¼Œé‡Œé¢ä»‹ç»äº†Grounding DINOè¿™ä¸ªé¡¹ç›®å®Œç¾ç¬¦åˆæˆ‘çš„éœ€æ±‚ã€‚é‚£å°±ä¸ç”¨å¤šè¯´äº†ï¼Œç›´æ¥ä¿®æ”¹ä»–æ¥å®ç°æˆ‘æ‰€éœ€çš„åŠŸèƒ½ã€‚\néœ€æ±‚ é¦–å…ˆè¦æ˜ç¡®ä¸€ä¸‹æˆ‘çš„éœ€æ±‚ï¼š\nèƒ½æ ¹æ®promptå®ç°ç”»æ¡†æ ‡æ³¨ èƒ½å¯¹æ–‡ä»¶å¤¹å†…çš„æ•°æ®è¿›è¡Œæ‰¹é‡å¤„ç† èƒ½å°†è¯†åˆ«çš„ç»“æœä¿å­˜ä¸ºYOLO TXTæ ¼å¼ è¿™ä¸ªé¡¹ç›®å¯ä»¥å®ç°ç¬¬ä¸€ä¸ªåŠŸèƒ½ï¼Œä½†å¯¹äºç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªåŠŸèƒ½å°±éœ€è¦æˆ‘è‡ªå·±æ¥å®ç°äº†ã€‚\nå®ç° Grounding DINOå¯ä»¥åœ¨CPUä¸Šè¿è¡Œï¼Œä¸è¿‡ä¸ºäº†æ•ˆç‡è€ƒè™‘ï¼Œæœ€å¥½è¿˜æ˜¯è¿è¡Œåœ¨GPUä¸Šï¼Œä¸ºæ­¤æˆ‘æ‰€æœ‰çš„ä»£ç éƒ½åœ¨Colabä¸Šå®ç°ã€‚\né¦–å…ˆæ˜¯ç¯å¢ƒé…ç½®ï¼Œæˆ‘ä»¬è¦æŒ‚è½½Googleäº‘ç›˜ä»¥åŠå®‰è£…Grounding DINOã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 from google.colab import drive drive.mount(\u0026#39;/content/drive\u0026#39;) import os HOME = os.getcwd() print(HOME) %cd {HOME} !git clone https://github.com/IDEA-Research/GroundingDINO.git %cd {HOME}/GroundingDINO !pip install -q -e . !pip install -q roboflow CONFIG_PATH = os.path.join(HOME, \u0026#34;GroundingDINO/groundingdino/config/GroundingDINO_SwinB.cfg.py\u0026#34;) print(CONFIG_PATH, \u0026#34;; exist:\u0026#34;, os.path.isfile(CONFIG_PATH)) %cd {HOME} !mkdir {HOME}/weights %cd {HOME}/weights !wget -q https://github.com/IDEA-Research/GroundingDINO/releases/download/v0.1.0-alpha2/groundingdino_swinb_cogcoor.pth WEIGHTS_NAME = \u0026#34;groundingdino_swinb_cogcoor.pth\u0026#34; WEIGHTS_PATH = os.path.join(HOME, \u0026#34;weights\u0026#34;, WEIGHTS_NAME) print(WEIGHTS_PATH, \u0026#34;; exist:\u0026#34;, os.path.isfile(WEIGHTS_PATH)) %cd {HOME}/GroundingDINO from groundingdino.util.inference import load_model, load_image, predict, annotate model = load_model(CONFIG_PATH, WEIGHTS_PATH) é€šè¿‡ä¸Šé¢è¿™äº›ä»£ç ï¼Œæˆ‘ä»¬å°±æˆåŠŸé…ç½®å¥½Grounding DINOå¹¶è½½å…¥äº†æ¨¡å‹ã€‚\nä¸‹é¢å°±æ˜¯æˆ‘è‡ªå·±å®ç°çš„è®­ç»ƒé›†è‡ªåŠ¨æ ‡æ³¨ä»£ç ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 TRAIN_DATA_PATH = os.path.join(\u0026#34;/content/my_data/images\u0026#34;) print(TRAIN_DATA_PATH, \u0026#34;; exist:\u0026#34;, os.path.isdir(TRAIN_DATA_PATH)) TEXT_PROMPT = \u0026#34;face . phone\u0026#34; BOX_TRESHOLD = 0.35 TEXT_TRESHOLD = 0.25 for filename in os.listdir(TRAIN_DATA_PATH): if filename.endswith(\u0026#34;.png\u0026#34;): image_path = os.path.join(TRAIN_DATA_PATH, filename) image_source, image = load_image(image_path) boxes, logits, phrases = predict( model=model, image=image, caption=TEXT_PROMPT, box_threshold=BOX_TRESHOLD, text_threshold=TEXT_TRESHOLD ) save_path = os.path.join(TRAIN_DATA_PATH,os.path.splitext(filename)[0]) with open(save_path + \u0026#34;.txt\u0026#34;, \u0026#34;w\u0026#34;) as f: for i in range(len(phrases)): class_id = 0 if phrases[i] == \u0026#39;face\u0026#39; else 1 f.write(f\u0026#34;{class_id} {boxes[i][0]} {boxes[i][1]} {boxes[i][2]} {boxes[i][3]}\\n\u0026#34;) print(f\u0026#34;{filename} is over\u0026#34;) æˆ‘ä»¬çš„ä»£ç ä¼šè‡ªåŠ¨éå†æ–‡ä»¶å¤¹ä¸‹é¢æ‰€æœ‰çš„.pngæ ¼å¼çš„æ–‡ä»¶ï¼Œå¹¶è°ƒç”¨Grounding DINOè¿›è¡Œæ ‡æ³¨ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œfaceçš„class_idä¸º0ï¼Œphoneçš„class_idä¸º1ã€‚\nç‰¹åˆ«çš„ï¼Œå‚è€ƒè¿™ç¯‡issueï¼Œæˆ‘ä»¬çš„promptä½¿ç”¨äº†.åˆ†å‰²ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…ä¸åŒé¡ºåºå¯¹ç»“æœçš„å½±å“ã€‚\næµ‹è¯• ç”±äºæ‹¿åˆ°çš„æ•°æ®æ˜¯txtæ ¼å¼ï¼Œäººç±»å¾ˆéš¾è¯†åˆ«ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å€ŸåŠ©cv2å°†è¯†åˆ«çš„ç»“æœåœ¨å›¾ç‰‡ä¸­æ¡†å‡ºï¼Œç›´æ¥å†™ä¸ªå°è„šæœ¬ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 import os import cv2 DATA_PATH = \u0026#34;D:\\Code\\Python\\yolo\u0026#34; for filename in os.listdir(DATA_PATH): if filename.endswith(\u0026#34;.png\u0026#34;): image_path = os.path.join(DATA_PATH, filename) txt_path = os.path.join(DATA_PATH,os.path.splitext(filename)[0]) + \u0026#39;.txt\u0026#39; with open(txt_path, \u0026#39;r\u0026#39;) as f: # è¯»å–å›¾åƒæ–‡ä»¶ image = cv2.imread(image_path) w = image.shape[1] h = image.shape[0]\twhile True: line = f.readline() if line: msg = line.split(\u0026#34; \u0026#34;) # print(x_center,\u0026#34;,\u0026#34;,y_center,\u0026#34;,\u0026#34;,width,\u0026#34;,\u0026#34;,height) x1 = int((float(msg[1]) - float(msg[3]) / 2) * w) # x_center - width/2 y1 = int((float(msg[2]) - float(msg[4]) / 2) * h) # y_center - height/2 x2 = int((float(msg[1]) + float(msg[3]) / 2) * w) # x_center + width/2 y2 = int((float(msg[2]) + float(msg[4]) / 2) * h) # y_center + height/2 print(x1,\u0026#34;,\u0026#34;,y1,\u0026#34;,\u0026#34;,x2,\u0026#34;,\u0026#34;,y2) if msg[0] == \u0026#39;0\u0026#39;: # ç”»å‡ºæ¡† cv2.rectangle(image, (x1, y1), (x2, y2), (0, 255, 0), 2) else: cv2.rectangle(image, (x1, y1), (x2, y2), (255, 0, 0), 2) else: break\t# æ˜¾ç¤ºå›¾åƒ cv2.imshow(\u0026#39;image\u0026#39;, image) cv2.waitKey(0) # cv2.destroyAllWindows() è¿™ä¸ªæ¨¡å‹è¯†åˆ«çš„æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼Œä¸è¿‡è¿˜æ˜¯æœ‰äº›å¤šä½™çš„è¯†åˆ«éœ€è¦æ‰‹å·¥å»é™¤ã€‚\n","date":"2023-04-14T10:07:42+08:00","image":"https://lbqaq.top/p/using-grounded-dino-label-data/75910823.webp","permalink":"https://lbqaq.top/p/using-grounded-dino-label-data/","title":"åˆ©ç”¨Grounding DINOè‡ªåŠ¨æ ‡æ³¨æ•°æ®"},{"content":"ä»‹ç» è¿‘å¹´æ¥ï¼Œäººä»¬å¯¹åˆ©ç”¨æ¥è‡ªå¤šä¸ªç»„ç»‡çš„åˆ†å¸ƒå¼æºçš„æ•°æ®æ¥è®¾è®¡å¤æ‚çš„æœºå™¨å­¦ä¹ æ¨¡å‹è¶Šæ¥è¶Šæ„Ÿå…´è¶£ã€‚\nä½†æ˜¯ï¼Œç”±äº\nç”¨æˆ·æ•æ„Ÿæ•°æ®çš„ä½¿ç”¨è¢«è¿«éµå®ˆæ ‡å‡†éšç§è§„ç« æˆ–æ³•å¾‹ï¼Œä¾‹å¦‚GDPRæˆ–CCPA æ•°æ®æ˜¯ç»„ç»‡ä¿æŒä¸šåŠ¡ç«äº‰ä¼˜åŠ¿çš„å®è´µèµ„äº§ï¼Œåº”è¯¥å—åˆ°é«˜åº¦ä¿æŠ¤ è¿™ä¸¤ä¸ªåŸå› ï¼Œä¸“æœ‰æ•°æ®ä¸èƒ½è¢«ç›´æ¥å…±äº«ã€‚äºæ˜¯ï¼Œè”é‚¦å­¦ä¹ ä¾¿è¢«æå‡ºã€‚è”é‚¦å­¦ä¹ æ˜¯ä¸€ç§æ–°å…´çš„æ•°æ®åä½œèŒƒä¾‹ï¼Œå®ƒå…è®¸å¤šä¸ªæ•°æ®æ‰€æœ‰è€…è”åˆæ„å»ºMLæ¨¡å‹è€Œä¸å‘å½¼æ­¤æ³„éœ²å…¶ç§æœ‰æ•°æ®ã€‚\nè”é‚¦å­¦ä¹ æ ¹æ®æ•°æ®åˆ’åˆ†ï¼Œè¢«åˆ†ä¸ºæ¨ªå‘è”é‚¦å­¦ä¹ ã€çºµå‘è”é‚¦å­¦ä¹ ã€è”é‚¦è¿ç§»å­¦ä¹ ä¸‰ç±»ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œä½œè€…ä¸»è¦è€ƒè™‘çš„æ˜¯çºµå‘è”é‚¦å­¦ä¹ è¿™ä¸€ç±»ã€‚ä½•ä¸ºçºµå‘è”é‚¦å­¦ä¹ å‘¢ï¼Ÿä¹Ÿå°±æ˜¯ï¼’ä¸ªæ•°æ®é›†çš„ç”¨æˆ·é‡å éƒ¨åˆ†è¾ƒå¤§ï¼Œè€Œç”¨æˆ·ç‰¹å¾é‡å éƒ¨åˆ†è¾ƒå°ï¼Œä½œè€…ç»™å‡ºäº†ä¸€ä¸ªå®ä¾‹ï¼š\nä¸€å®¶é“¶è¡Œå¸Œæœ›æ„å»ºä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œé€šè¿‡åŠ å…¥Fintechå…¬å¸çš„æ›´å¤šç‰¹æ€§æ¥è¯„ä¼°æ˜¯å¦æ‰¹å‡†ç”¨æˆ·çš„ä¿¡ç”¨å¡ç”³è¯·ã€‚è¿™å®¶é“¶è¡Œæ‹¥æœ‰â€œå¹´é¾„â€å’Œâ€œæ”¶å…¥â€çš„ç‰¹å¾ï¼Œè€ŒFintechå…¬å¸æ‹¥æœ‰â€œå­˜æ¬¾â€å’Œâ€œå¹³å‡åœ¨çº¿è´­ç‰©æ¬¡æ•°â€çš„ç‰¹å¾ã€‚åªæœ‰é“¶è¡Œæ‹¥æœ‰è®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†ä¸­çš„æ ‡ç­¾ä¿¡æ¯ï¼Œå³ï¼šæ˜¯å¦åº”æ‰¹å‡†ç”³è¯·ã€‚æˆ‘ä»¬å°†å¸¦æœ‰æ ‡ç­¾çš„ä¸€æ–¹ç§°ä¸ºä¸»åŠ¨æ–¹ï¼Œå…¶ä½™æ²¡æœ‰æ ‡ç­¾å€¼çš„ä¸€æ–¹æˆ–è€…å‡ æ–¹ç§°ä¸ºè¢«åŠ¨æ–¹ã€‚\nåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼ŒæŠŠæ‹¥æœ‰æ ‡ç­¾å€¼çš„ä¸€æ–¹çœ‹ä½œè¿›æ”»æ–¹ï¼Œè€Œæ²¡æœ‰æ ‡ç­¾å€¼çš„ä¸€æ–¹æˆ–è€…å‡ æ–¹æ‰€æ‹¥æœ‰çš„ç‰¹å¾å€¼çœ‹ä½œç›®æ ‡å€¼ï¼Œè¿›æ”»æ–¹é€šè¿‡ä¸€å®šçš„æ–¹æ³•å¾—åˆ°ç›®æ ‡æ–¹çš„ç›®æ ‡å€¼ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æ¨¡å‹ä¸­è¢«åŠ¨æ–¹çš„éšç§æ•°æ®ã€‚\nç›¸å…³ç ”ç©¶ Comprehensive privacy analysis of deep learning: Stand-alone and federated learning under passive and active white-box inference attacks The secret sharer: Measuring unintended neural network memorization \u0026amp; extracting secrets Exploiting unintended feature leakage in collaborative learning Deep models under the gan: information leakage from collaborative deep learning ç­‰ç­‰ï¼Œè¿™äº›æ–‡ç« æ—¨åœ¨æ¨æ–­æ¨ªå‘è”é‚¦å­¦ä¹ ä¸­å‚ä¸æ–¹çš„ç‰¹å¾å€¼ï¼Œå…¶ä¸­å„æ–¹å…·æœ‰ç›¸åŒçš„ç‰¹å¾ä½†å…·æœ‰ä¸åŒçš„æ ·æœ¬ã€‚ ç„¶è€Œï¼Œè¿™äº›æ”»å‡»æå¤§åœ°ä¾èµ–äºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­äº¤æ¢çš„æ¨¡å‹æ¢¯åº¦ï¼Œä¸€æ—¦æ¨¡å‹æ¢¯åº¦è¢«å®‰å…¨åœ°ä¿æŠ¤ï¼Œè¿™äº›æ”»å‡»å°†æ˜¯æ— æ•ˆçš„ã€‚è€Œä¸”ï¼Œå¯¹äºé¢„æµ‹é˜¶æ®µä¸­çš„æ¨ç†æ”»å‡»ï¼Œè”é‚¦å­¦ä¹ æ¨¡å‹äº‹å…ˆä¸çŸ¥é“é¢„æµ‹æ ·æœ¬ã€‚äºæ˜¯ï¼Œä½œè€…æå‡ºå‡ ç§åŸºäºæ¨¡å‹é¢„æµ‹çš„ç‰¹å¾æ¨ç†æ”»å‡»ï¼Œç ”ç©¶äº†çºµå‘è”é‚¦å­¦ä¹ é¢„æµ‹é˜¶æ®µçš„éšç§æ³„éœ²é—®é¢˜ï¼Œè¯¥æ”»å‡»æ–¹æ³•åœ¨é¢„æµ‹è¾“å‡ºçš„è®¡ç®—è¿‡ç¨‹ä¸­ä¸ä¾èµ–ä»»ä½•ä¸­é—´ä¿¡æ¯ã€‚\næœ¬æ–‡è´¡çŒ® é¦–æ¬¡æå‡ºäº†çºµå‘è”é‚¦å­¦ä¹ é¢„æµ‹æ¨¡å‹çš„ç‰¹å¾æ¨ç†æ”»å‡» æå‡ºäº†é’ˆå¯¹é€»è¾‘å›å½’å’Œå†³ç­–æ ‘çš„ä¸¤ç§ç‰¹å®šçš„æ”»å‡»æ€è·¯ åˆ©ç”¨æ”»æ–¹ç§¯ç´¯çš„å¤šç§é¢„æµ‹è¾“å‡ºï¼Œæ¥è®¾è®¡ä¸€ç§ä»ä¸­å­¦ä¹ æ”»æ–¹ç‰¹å¾å’Œç›®æ ‡ç‰¹å¾å…³è”çš„é€šç”¨æ”»å‡»æ€è·¯ åœ¨çœŸå®å’Œåˆæˆçš„æ•°æ®é›†ä¸Šï¼Œå®è·µäº†æå‡ºçš„æ–¹æ³•å¹¶è¿›è¡Œäº†å¤§é‡çš„è¯„ä¼°ã€‚ç»“è®ºæ˜¾ç¤ºäº†æ”»å‡»çš„æœ‰æ•ˆæ€§ï¼Œæœ¬æ–‡ä¹Ÿåˆ†æå’Œå»ºè®®äº†å‡ ç§æ½œåœ¨çš„åº”å¯¹æ€è·¯ é—®é¢˜æ„é€  ç³»ç»Ÿæ¨¡å‹ æˆ‘ä»¬è€ƒè™‘ä¸€ç»„mä¸ªåˆ†å¸ƒæ–¹ï¼ˆæˆ–æ•°æ®æ‰€æœ‰è€…ï¼‰${P_1,\u0026hellip;,P_m}$ï¼Œä»–ä»¬é€šè¿‡åˆå¹¶å„è‡ªçš„æ•°æ®é›†æ¥è®­ç»ƒçºµå‘è”é‚¦å­¦ä¹ æ¨¡å‹ã€‚åœ¨è·å¾—ç»è®­ç»ƒçš„çºµå‘è”é‚¦å­¦ä¹ æ¨¡å‹å‚æ•°$\\theta$ä¹‹åï¼Œå„æ–¹åä½œåœ°å¯¹å…¶è”åˆé¢„æµ‹æ•°æ®é›†$D_{pred}={D_1,\u0026hellip;,D_m}$è¿›è¡Œé¢„æµ‹ã€‚ æ•°æ®é›†ä¸­çš„æ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªæ ·æœ¬ï¼Œæ¯ä¸€åˆ—å¯¹åº”ä¸€ä¸ªè¦ç´ ã€‚ è®¾$n$ä¸ºæ ·æœ¬æ•°ï¼Œ$d_i$ä¸º$D_i$ä¸­çš„ç‰¹å¾æ•°ï¼Œå…¶ä¸­$i\\in{1,\u0026hellip;,m}$ã€‚æˆ‘ä»¬è¡¨ç¤º$D_i={x^t_i}^n_{t=1}$ï¼Œå…¶ä¸­$x^t_i$è¡¨ç¤º$D_i$çš„ç¬¬tä¸ªæ ·æœ¬ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½œè€…è€ƒè™‘ç›‘ç£åˆ†ç±»ä»»åŠ¡ï¼Œå¹¶ç”¨$c$è¡¨ç¤ºåˆ†ç±»çš„æ•°é‡ã€‚\nå¨èƒæ¨¡å‹ æˆ‘ä»¬è€ƒè™‘åŠè¯šå®æ¨¡å‹ï¼Œå…¶ä¸­æ¯ä¸€æ–¹éƒ½ä¸¥æ ¼æŒ‰ç…§è§„å®šéµå¾ªåè®®ï¼Œä½†å¯èƒ½è¯•å›¾åŸºäºæ¥æ”¶åˆ°çš„æ¶ˆæ¯æ¨æ–­å…¶ä»–æ–¹çš„ç§æœ‰ä¿¡æ¯ã€‚å…·ä½“è€Œè¨€ï¼Œæœ¬æ–‡ç€é‡ç ”ç©¶äº†ä¸»åŠ¨æ–¹ä¸ºå¯¹æŠ—æ–¹çš„æƒ…å½¢ã€‚ä¸»åŠ¨æ–¹è¿˜å¯ä»¥ä¸å…¶ä»–è¢«åŠ¨æ–¹ä¸²é€šæ¥æ¨æ–­ä¸€ç»„ç›®æ ‡è¢«åŠ¨æ–¹çš„ç§æœ‰ç‰¹å¾å€¼ã€‚æœ€å¼ºçš„æ¦‚å¿µæ˜¯m-1ä¸ªå‚ä¸æ–¹ï¼ˆåŒ…æ‹¬ä¸»åŠ¨æ–¹ï¼‰åˆè°‹æ¨æ–­å…¶ä½™è¢«åŠ¨æ–¹çš„ç‰¹å¾å€¼ã€‚\næ”»å‡»æ–¹æ³• é€»è¾‘å›å½’æ¨¡å‹(LR)çš„ç­‰å¼æ±‚è§£æ”»å‡» ç»™å®šé¢„æµ‹è¾“å‡º$v$ï¼Œå¯¹æ‰‹$P_{adv}$å¯ä»¥æ„é€ ä¸€ç»„æ–¹ç¨‹ï¼Œ$P_{adv}$å¯ä»¥ä»è¯¥ç»„æ–¹ç¨‹æ¨æ–­å‡º$P_{target}$æ‰€æŒæœ‰çš„ç‰¹å¾å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´æ”»å‡»è€…åˆ©ç”¨çºµå‘è”é‚¦å­¦ä¹ é¢„æµ‹ç»“æœä»¥åŠè‡ªå·±æ‰€æŒæœ‰çš„å‚æ•°æ¨æ–­æ•°æ®å…¶ä»–æä¾›æ–¹çš„å‚æ•°ã€‚\nä½œè€…åˆ†åˆ«è®¨è®ºäº†äºŒåˆ†ç±»é€»è¾‘å›å½’ä»¥åŠå¤šåˆ†ç±»é€»è¾‘å›å½’ã€‚\näºŒåˆ†ç±»é€»è¾‘å›å½’ å°†æ¨¡å‹å‚æ•°è¡¨ç¤ºä¸º$\\theta = \\theta (\\theta_{adv},\\theta_{target})$ï¼Œå…¶ä¸­$\\theta_{adv}$å’Œ$\\theta_{target}$åˆ†åˆ«æ˜¯å¯¹åº”äº$P_{adv}$å’Œ$P_{target}$æ‰€æ‹¥æœ‰çš„ç‰¹å¾çš„æƒé‡ã€‚\nä»¤$v$ä¸ºç»™å®šæ ·æœ¬$x=(x_{adv},x_{target})$çš„é¢„æµ‹è¾“å‡ºã€‚å¯¹äºäºŒå…ƒLRåˆ†ç±»ï¼Œ$v$ä¸­åªæœ‰ä¸€ä¸ªæœ‰æ„ä¹‰çš„ç½®ä¿¡åº¦åˆ†æ•°ï¼Œæˆ‘ä»¬ä»¤å…¶ä¸º$v_1$ã€‚\nç»™å®š$v_1$å’Œå¯¹æ‰‹è‡ªå·±çš„ç‰¹å¾å€¼$x_{adv}$ï¼Œ$P_{adv}$å¯ä»¥ç›´æ¥åˆ›å»ºä»¥$x_{target}$ä½œä¸ºå˜é‡çš„æ–¹ç¨‹ï¼Œå³ï¼Œ\n$$\\sigma\\left(x\\_{\\text {adv }} \\cdot \\theta\\_{\\text {adv }}+x\\_{\\text {target }} \\cdot \\theta\\_{\\text {target }}\\right)=v\\_{1}$$å…¶ä¸­$\\sigma(\\cdot)$æ˜¯Så½¢å‡½æ•°ã€‚æ˜¾ç„¶ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæœªçŸ¥ç‰¹å¾ï¼Œå³ï¼Œ$d_{target} = 1$ï¼Œåˆ™æ–¹ç¨‹åªæœ‰ä¸€ä¸ªè§£ï¼Œè¿™æ„å‘³ç€å¯ä»¥ç²¾ç¡®åœ°æ¨æ–­æœªçŸ¥ç‰¹å¾å€¼$x_{target}$ã€‚\nå¤šåˆ†ç±»é€»è¾‘å›å½’ å¯¹äºå¤šåˆ†ç±»é€»è¾‘å›å½’ï¼Œå­˜åœ¨$c$ä¸ªçº¿æ€§å›å½’æ¨¡å‹ã€‚è®¾$\\theta = (\\theta^{(1)},\u0026hellip;,\\theta^{(c)})$åˆ†åˆ«ä¸ºè¿™äº›$c$æ¨¡å‹çš„å‚æ•°ã€‚\nä¸ºäº†å‘èµ·ç‰¹å¾æ¨ç†æ”»å‡»ï¼Œå¯¹æ‰‹çš„ç›®æ ‡æ˜¯æ„é€ $k\\in{1,\u0026hellip;,c}$çš„çº¿æ€§æ–¹ç¨‹ã€‚\n$$x \\_ { a d v } \\cdot \\theta \\_ { a d v } ^ { ( k ) } + x \\_ { target } \\cdot \\theta \\_ { target } ^ { ( k ) } = z \\_ { k }$$å…¶ä¸­$z_k$æ˜¯ç¬¬$k$ä¸ªçº¿æ€§å›å½’æ¨¡å‹çš„è¾“å‡ºã€‚ç„¶è€Œï¼Œ$P_{adv}$åªçŸ¥é“ç½®ä¿¡åº¦å‘é‡$v =(v_1,\u0026hellip;,v_c)$ï¼Œä½¿å¾—\n$$v \\_ { k } = \\frac { e x p ( z \\_ { k } ) } { \\sum \\_ { k' } exp ( z \\_ { k' } ) }$$ä¸Šé¢ä¸¤ä¸ªå¼å­æ˜¯æˆ‘ä»¬ç”¨é€»è¾‘å›å½’è§£å†³å¤šåˆ†ç±»é—®é¢˜çš„é€šç”¨çš„å…¬å¼ï¼Œå…¶ä¸­ä½œè€…åœ¨ç¬¬ä¸€ä¸ªå¼å­ä¸­æŠŠxå’ŒÎ¸åˆ†æˆäº†æ”»æ–¹å’Œç›®æ ‡æ–¹çš„æ•°æ®ã€‚\nä½œè€…å°†ç¬¬äºŒä¸ªå¼å­åŒæ–¹å–å¯¹æ•°\n$$\\ln v \\_ { k } = z \\_ { k } - \\ln ( \\sum \\_ { k ^ { \\prime } } e x p ( z \\_ { k } ^ { \\prime } ) )$$ç­‰å¼å³è¾¹çš„ç¬¬äºŒé¡¹å¯¹äºæ‰€æœ‰$k\\in{1,\u0026hellip;,c}$æ˜¯ç›¸åŒçš„ã€‚å› æ­¤ï¼Œå¯¹ä¸¤ä¸ªç›¸é‚»ç±»åˆ«æ¦‚ç‡vçš„å¯¹æ•°å–å·®å€¼\n$$\\ln v \\_ { k } - \\ln v \\_ { k'} = z \\_ { k } - z \\_ { k' }$$æœ€åå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ— å…³zå€¼çš„ä¸€ä¸ªç­‰å¼\n$$x\\_{\\text {adv }}\\left(\\theta\\_{\\text {adv }}^{(k)}-\\theta\\_{\\text {adv }}^{(k+1)}\\right)+x\\_{\\text {target }}\\left(\\theta\\_{\\text {target }}^{(k)}-\\theta\\_{\\text {target }}^{(k+1)}\\right)=a\\_{k}^{\\prime}$$å…¶ä¸­$a^\\prime_k=\\ln v_k-\\ln v_{k+1},k\\in{1,\u0026hellip;,c}$ã€‚\nä½†æ˜¯åœ¨åé¢æ¨ç†çš„æ—¶å€™æœ¬æ–‡æœ‰ä¸€äº›ä¸ºäº†é€»è¾‘ä¸Šæ–¹ä¾¿è€Œé‡‡ç”¨äº†ä¸€ä¸ªæŠŠçºµå‘è”é‚¦é™åˆ¶å‡å°‘çš„åšæ³•ï¼šæŠŠç›®æ ‡æ–¹æˆ–è€…è¯´è¢«åŠ¨æ–¹çš„å‚æ•°Î¸çœ‹ä½œè¿›æ”»æ–¹æˆ–è€…ä¸»åŠ¨æ–¹èƒ½å¤Ÿå¾—åˆ°çš„æ•°æ®ã€‚\nå®é™…æƒ…å†µä¸­ï¼Œä¸»åŠ¨æ–¹æˆ–è€…è¿›æ”»æ–¹åœ¨ä¸€èˆ¬çš„çºµå‘è”é‚¦æ¡†æ¶ä¸­æ˜¯æ— æ³•å¾—åˆ°è¢«åŠ¨æ–¹çš„å‚æ•°Î¸æ•°æ®çš„ã€‚\næœ¬æ–‡ä¸­æˆ‘ä»¬å§‘ä¸”è®¤ä¸ºè¿›æ”»æ–¹èƒ½å¾—åˆ°ï¼Œé‚£ä¹ˆä¸Šå¼ä¸­çš„æœªçŸ¥æ•°åªæœ‰$x_{target}$äº†ï¼Œè€Œ$x_{target}$çš„ç»´æ•°ä¸º$d_{target}$ï¼Œæ•°é‡ä¸ºç›®æ ‡æ–¹æ‰€ç”¨æ‹¥æœ‰çš„ç‰¹å¾æ•°ã€‚\nè¿™é‡Œæˆ‘ä»¬æŠŠ$x_{target}$çš„æœªçŸ¥æ•°çœ‹ä½œè‡ªå˜é‡ï¼Œä¸ªæ•°ä¸ºç›®æ ‡æ”¾æ‰€æ‹¥æœ‰çš„ç‰¹å¾æ•°ã€‚é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œ$d_{target}$ä¸ªè‡ªå˜é‡ï¼Œ$c-1$ä¸ªæ–¹ç¨‹ï¼Œå½“$d_{target}\\le c-1$ï¼Œé‚£ä¹ˆ$x_{target}$åªæœ‰ä¸€ä¸ªè§£ï¼Œå¯ä»¥ç²¾ç¡®åœ°æ¨æ–­å‡ºæ¥ã€‚\nå†³ç­–æ ‘æ¨¡å‹çš„è·¯å¾„é™åˆ¶æ”»å‡» æ”»å‡»æ–¹å¯ä»¥æ ¹æ®è‡ªå·±çš„éƒ¨åˆ†ç‰¹å¾ä¿¡æ¯(è“è‰²æ–¹æ¡†) é™åˆ¶æ ‘æ¨¡å‹ä¸­å¯èƒ½çš„è·¯å¾„(ç°è‰²ç®­å¤´ -\u0026gt; è“è‰²ç®­å¤´ 5:2)ï¼Œç»“åˆé¢„æµ‹ç±»åˆ«ç»“æœ1è¿›ä¸€æ­¥é™åˆ¶å†³ç­–è·¯å¾„(è“è‰² - \u0026gt; çº¢è‰²ç®­å¤´ 2:1 )ï¼Œå¯ä»¥æ¨æµ‹ç›®æ ‡æ–¹Targetçš„depositå±æ€§(ç»¿è‰²æ–¹æ¡†) \u0026gt; 5Kã€‚\nç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡» ä¸Šé¢ä»‹ç»çš„ä¸¤ç§æ”»å‡»æ–¹å¼éƒ½æ˜¯åŸºäºå•ä¸ªæ¨¡å‹é¢„æµ‹ã€‚ç„¶è€Œï¼Œè¿™äº›æ”»å‡»å¾ˆéš¾åº”ç”¨äºå¤æ‚çš„æ¨¡å‹ï¼Œå¦‚ç¥ç»ç½‘ç»œï¼ˆNNï¼‰å’Œéšæœºæ£®æ—ï¼ˆRFï¼‰ã€‚\né’ˆå¯¹ä¸Šè¿°ç¼ºé™·ï¼Œä½œè€…è®¾è®¡äº†ä¸€ç§åŸºäºå¤šæ¨¡å‹é¢„æµ‹çš„é€šç”¨ç‰¹å¾æ¨ç†æ”»å‡»ï¼Œå³ç”Ÿæˆå›å½’ç½‘ç»œï¼ˆGRNï¼‰æ”»å‡»ï¼Œè¿™æ˜¯æœ¬ç¯‡è®ºæ–‡çš„é‡ç‚¹ã€‚\nåŸºæœ¬æ€æƒ³ï¼š\nè®¡ç®—å‡ºå¯¹æ‰‹è‡ªèº«ç‰¹å¾ä¸æ”»å‡»ç›®æ ‡æœªçŸ¥ç‰¹å¾ä¹‹é—´çš„æ€»ä½“ç›¸å…³æ€§ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæ¨æ–­æœªçŸ¥ç‰¹å¾å€¼çš„é—®é¢˜ç­‰æ•ˆäºç”Ÿæˆæ–°å€¼$\\hat{x}_{target}$ä»¥åŒ¹é…å‚ç›´FLæ¨¡å‹çš„å†³ç­–çš„é—®é¢˜ï¼Œå…¶ä¸­$\\hat{x}_{target}$éµå¾ªç”±å¯¹æ‰‹çš„å·²çŸ¥ç‰¹å¾å€¼å’Œç‰¹å¾ç›¸å…³æ€§ç¡®å®šçš„æ¦‚ç‡åˆ†å¸ƒã€‚\nç›®æ ‡å‡½æ•°ï¼š\n$$\\min \\_{\\theta\\_{G}} \\frac{1}{n} \\sum\\_{t=1}^{n} \\ell\\left(f\\left(x\\_{\\mathrm{adv}}^{t}, f\\_{G}\\left(x\\_{\\mathrm{adv}}^{t}, r^{t} ; \\theta\\_{G}\\right) ; \\theta\\right), v^{t}\\right)+\\Omega\\left(f\\_{G}\\right)$$å…¶ä¸­$\\theta$å’Œ$\\theta_G$åˆ†åˆ«æ˜¯çºµå‘è”é‚¦å­¦ä¹ æ¨¡å‹å’Œç”Ÿæˆæ¨¡å‹çš„å‚æ•°ã€‚æ­¤å¤–ï¼Œ$f_G$è¡¨ç¤º$\\hat{x}_{target}^t$ï¼Œå³ç”Ÿæˆæ¨¡å‹çš„è¾“å‡º,$f$è¡¨ç¤ºç»™å®šæ‰€ç”Ÿæˆæ ·æœ¬çš„çºµå‘è”é‚¦å­¦ä¹ æ¨¡å‹çš„è¾“å‡ºï¼ˆç”±$x_{adv}^t$å’Œ$\\hat{x}_{target}^t$è¿æ¥ï¼‰ã€‚æ­¤å¤–ï¼Œ$\\Omega(\\cdot)$æ˜¯ç”Ÿæˆçš„æœªçŸ¥ç‰¹å¾å€¼${\\hat{x}_{target}^t}_{t=1}^n$çš„æ­£åˆ™åŒ–é¡¹ã€‚\nå…·ä½“æ–¹æ³•ï¼š\næŠŠè¿›æ”»æ–¹æ‰€æ‹¥æœ‰çš„æ•°æ®ï¼ˆè“è‰²ï¼‰å’Œéšæœºç”Ÿæˆçš„æ•°æ®ï¼ˆæ©™è‰²ï¼‰ï¼Œåˆæˆä¸€ä¸ªdç»´å‘é‡ï¼Œå…¶ä¸­dä¸ºè¿›æ”»æ–¹çš„ç‰¹å¾æ•°é‡å’Œç›®æ ‡æ–¹ç‰¹å¾æ•°é‡ä¹‹å’Œï¼Œéšæœºç”Ÿæˆçš„æ•°æ®æ˜¯ä¸ºäº†åˆå§‹åŒ–ç”Ÿæˆæ¨¡å‹çš„åˆå§‹è¾“å…¥ã€‚\nç”Ÿæˆæ¨¡å‹è®¡ç®—ä¹‹åï¼Œè¾“å‡ºç”Ÿæˆæ¨¡å‹å¯¹äºç›®æ ‡æ–¹ç‰¹å¾å€¼çš„é¢„æµ‹ã€‚\næŠŠç”Ÿæˆæ¨¡å‹ç”Ÿæˆçš„ç›®æ ‡æ–¹ç‰¹å¾å€¼çš„é¢„æµ‹ï¼ˆæ©™è‰²ï¼‰ä¸è¿›æ”»æ–¹æ‰€æ‹¥æœ‰çš„æ•°æ®ï¼ˆè“è‰²ï¼‰åˆå¹¶ï¼Œå¾—åˆ°å¦ä¸€ä¸ªdç»´çš„å‘é‡ï¼Œä½œä¸ºå·²ç»ç”Ÿæˆçš„çºµå‘è”é‚¦å­¦ä¹ é¢„æµ‹æ¨¡å‹ï¼ˆæ¯”å¦‚ç¥ç»ç½‘ç»œï¼‰çš„è¾“å…¥ã€‚\nå¾—åˆ°è¾“å‡ºçš„å¯¹ä¸åŒç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡çŸ©é˜µï¼ˆæ©™è‰²ï¼‰ï¼Œä¸çœŸå®çš„æ”»æ–¹ç‰¹å¾å€¼å’Œç›®æ ‡æ–¹ç‰¹å¾å€¼å¾—åˆ°çš„ä¸åŒç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡çŸ©é˜µï¼ˆè“è‰²ï¼‰æ±‚æŸå¤±ã€‚\nå¯¹å¾—åˆ°çš„æŸå¤±è¿›è¡Œåå‘ä¼ æ’­ï¼Œä¿®æ”¹ç”Ÿæˆæ¨¡å‹çš„å‚æ•°ï¼Œå¾—åˆ°æ–°çš„ç”Ÿæˆæ¨¡å‹å¯¹ç›®æ ‡æ”¾ç‰¹å¾å€¼çš„é¢„æµ‹ã€‚\nè¿™ç§æ–¹æ³•å¯¹äºç›®æ ‡å‡½æ•°ä¸ºå¯å¾®çš„æƒ…å†µä¸‹æ•ˆæœä¸é”™ï¼Œä¹Ÿå°±è¯´æ˜å¯ä»¥ç”¨æ¥å¯¹é€»è¾‘å›å½’å’Œç¥ç»ç½‘ç»œè¿›è¡Œç”Ÿæˆæ¨¡å‹æ”»å‡»ã€‚\néšæœºæ£®æ—çš„ç”Ÿæˆæ¨¡å‹çš„æ”»å‡» è·¯å¾„é™åˆ¶æ”»å‡»ä¸é€‚ç”¨äºéšæœºæ£®æ—çš„æ¨¡å‹ï¼Œç‰¹åˆ«æ˜¯å½“éšæœºæ£®æ—çš„æ ‘æ•°é‡å¾ˆå¤§çš„æ—¶å€™ã€‚\nå› æ­¤ï¼Œåœ¨éšæœºæ£®æ—æ¨¡å‹ä½¿ç”¨GRNæ”»å‡»çš„æ€æƒ³ã€‚\nä½†æ˜¯ï¼Œå› ä¸ºéšæœºæ£®æ—ï¼ˆRFï¼‰æ¨¡å‹çš„ç›®æ ‡å‡½æ•°å¹¶ä¸æ˜¯å¯å¾®çš„ï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡éšæœºæ£®æ—ï¼ˆRFï¼‰æŠŠé¢„æµ‹æŸå¤±åå‘ä¼ æ’­ç»™ç”Ÿæˆæ¨¡å‹ã€‚\nå› æ­¤ï¼Œæœ¬æ–‡åœ¨å¾—åˆ°çºµå‘è”é‚¦æ¨¡å‹ï¼ˆæ¯”å¦‚éšæœºæ£®æ—RFï¼‰ä¹‹åï¼Œæ”»æ–¹ä¼šå¦å¤–è®­ç»ƒä¸€ä¸ªå¯å¾®çš„æ¨¡å‹ï¼ˆæ¯”å¦‚ç¥ç»ç½‘ç»œNNï¼‰æ¥è¿‘ä¼¼RFæ¨¡å‹ã€‚\nå®éªŒè¯„ä»· æ•°æ®é›†ï¼š\nå››ä¸ªæ•°æ®é›†ï¼Œåˆ†åˆ«æ˜¯é“¶è¡Œè¥é”€ï¼ˆ20ä¸ªç‰¹å¾çš„2åˆ†ç±»ï¼‰ï¼Œä¿¡ç”¨å¡ï¼ˆ23ä¸ªç‰¹å¾çš„2åˆ†ç±»ï¼‰ï¼Œè¯Šæ–­ï¼ˆ48ä¸ªç‰¹å¾çš„11åˆ†ç±»ï¼‰å’Œæ–°é—»æµè¡Œï¼ˆ59ä¸ªç‰¹å¾çš„5åˆ†ç±»ï¼‰ã€‚\næ­¤å¤–ï¼Œåˆ©ç”¨sklearnåº“ç”Ÿæˆäº†ä¸¤ä¸ªåˆæˆæ•°æ®é›†ï¼Œç”¨äºè¯„ä¼°é¢„æµ‹æ•°æ®é›†ä¸­æ ·æœ¬æ•°nå¯¹ç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»æ€§èƒ½çš„å½±å“ã€‚\næŒ‡æ ‡ï¼š\nå¯¹äºç­‰å¼æ±‚è§£æ”»å‡»ï¼ˆESAï¼‰å’Œç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»ï¼ˆGRNAï¼‰ï¼Œç”±äºæ˜¯å›å½’ä»»åŠ¡ï¼Œå› æ­¤ä½¿ç”¨æ¯ä¸ªç‰¹å¾çš„å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰æ¥è¡¡é‡å®ƒä»¬åœ¨é‡å»ºå¤šä¸ªç›®æ ‡ç‰¹å¾æ—¶çš„æ€»ä½“å‡†ç¡®æ€§ã€‚å…·ä½“è€Œè¨€ï¼Œæ¯ä¸ªç‰¹å¾çš„MSEè®¡ç®—å¦‚ä¸‹ï¼š\n$$\\mathrm{MSE}=\\frac{1}{n * d\\_{\\text {target }}} \\sum\\_{t=1}^{n} \\sum\\_{i=1}^{d\\_{\\text {target }}}\\left(\\hat{x}\\_{\\text {target }, i}^{t}-x\\_{\\text {target }, i}^{t}\\right)^{2}$$å¯¹äºè·¯å¾„é™åˆ¶æ”»å‡»ï¼ˆPRAï¼‰ï¼Œä½œè€…æµ‹é‡äº†æ­£ç¡®åˆ†æ”¯ç‡ï¼ˆCBRï¼‰ã€‚\n$d_{target}$å¯¹ç­‰å¼æ±‚è§£æ”»å‡»çš„å½±å“ å¯¹äºæ‰€æœ‰æ•°æ®é›†ï¼Œå¦‚æœæ»¡è¶³é˜ˆå€¼æ¡ä»¶$d_{target}\\le c-1$ï¼ˆåœ¨æ¯ä¸ªå­å›¾ä¸­ç”¨â€œTâ€è¡¨ç¤ºï¼‰ï¼Œåˆ™æ¯ä¸ªç‰¹å¾çš„MSEä¸º0ï¼Œè¿™è¯æ˜äº†ä¸Šé¢è®¨è®ºçš„æ€§è´¨æ­£ç¡®ã€‚\né€šè¿‡è§‚å¯Ÿbå’Œcï¼Œæˆ‘ä»¬å‘ç°å³ä½¿ä¸æ»¡è¶³é˜ˆå€¼æ¡ä»¶ï¼Œç­‰å¼æ±‚è§£æ”»å‡»ä»ç„¶å¯ä»¥æ‰¾åˆ°$x_{target}$çš„è‰¯å¥½æ¨æ–­ï¼Œè¿™å¤§å¤§ä¼˜äºéšæœºçŒœæµ‹æ–¹æ³•ã€‚\nè¿˜æœ‰ä¸€ä¸ªæ˜æ˜¾çš„è¶‹åŠ¿ï¼Œæ¯ä¸ªç‰¹å¾çš„MSEéšç€$d_{target}$åˆ†æ•°çš„å¢åŠ è€Œå¢åŠ ï¼Œå³æ”»æ–¹æ‰€æŒæ¡çš„ç‰¹å¾æ•°è¶Šå°‘ï¼Œä¾›ç»™çš„å‡†ç¡®ç‡è¶Šä½ã€‚\nåŒæ—¶ï¼Œä½œè€…è¿˜åˆ†æäº†ä¸ºä»€ä¹ˆBankæ•°æ®é›†çš„MSEå¢é‡è¿œå¤§äºå…¶ä»–æ•°æ®é›†çš„MSEå¢é‡ï¼Œè¿™æ˜¯å› ä¸ºä¸åŒæ•°æ®é›†çš„æ•°æ®åˆ†å¸ƒå·®å¼‚ã€‚\nç”±ä¼ªé€†çŸ©é˜µè®¡ç®—å‡ºçš„è§£$\\hat{x}_{target}$åœ¨æ‰€æœ‰è§£ä¸­å…·æœ‰æœ€å°çš„æ¬§å‡ é‡Œå¾·èŒƒæ•°ï¼Œå³$||\\hat{x}_{target}||_2\\le||x_{target}||_2$\nå…¶ä¸­\n$$\\sum\\_{i=1}^{d\\_{\\text {target }}} \\hat{x}\\_{\\text {target }, i}^{2} \\leq \\sum\\_{i=1}^{d\\_{\\text {target }}} x\\_{\\text {target }, i}^{2}$$å› æ­¤ï¼Œæˆ‘ä»¬æœ‰\n$$\\begin{aligned} \\mathrm{MSE} \u0026 =\\frac{1}{d\\_{\\text {target }}} \\sum\\_{i=1}^{d\\_{\\text {target }}}\\left(\\hat{x}\\_{\\text {target }, i}-x\\_{\\text {target }, i}\\right)^{2} \\\\\\\\ \u0026 =\\frac{1}{d\\_{\\text {target }}} \\sum\\_{i=1}^{d\\_{\\text {target }}}\\left(\\hat{x}\\_{\\text {target }, i}^{2}+x\\_{\\text {target }, i}^{2}-2 \\hat{x}\\_{\\text {target }, i} x\\_{\\text {target }, i}\\right) \\\\\\\\ \u0026 \\leq \\frac{1}{d\\_{\\text {target }}} \\sum\\_{i=1}^{d\\_{\\text {target }}}\\left(\\hat{x}\\_{\\text {target }, i}^{2}+x\\_{\\text {target }, i}^{2}\\right) \\\\\\\\ \u0026 \\leq \\frac{1}{d\\_{\\text {target }}} \\sum\\_{i=1}^{d\\_{\\text {target }}} 2 x\\_{\\text {target }, i}^{2}, \\end{aligned}$$æˆ‘ä»¬ä¾¿æ¨å¯¼å‡º$\\mathrm{MSE}(\\hat{x}_{target},x_{target})$çš„ä¸Šç•Œã€‚\nä½œè€…åˆ†åˆ«è®¡ç®—äº†Bankã€Creditã€Driveå’ŒNewså››ä¸ªæ•°æ®é›†çš„ä¸Šç•Œï¼Œåˆ†åˆ«ä¸º0.60ã€0.14ã€0.45å’Œ0.34ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œä¸Šç•Œè¶Šå¤§ï¼Œå¯¹æ‰‹çš„æ”»å‡»ç²¾åº¦å°±è¶Šå·®ã€‚è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆBankçš„MSEæ¯”å…¶ä»–æ•°æ®é›†å¢é•¿å¾—æ›´å¿«ã€‚\n$d_{target}$å¯¹è·¯å¾„é™åˆ¶æ”»å‡»çš„å½±å“ ä¸ç­‰å¼æ±‚è§£æ”»å‡»ç±»ä¼¼ï¼Œæ”»å‡»ç²¾åº¦éšç€$d_{target}$çš„å¢åŠ è€Œé™ä½ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸æ›´å¤šçš„ç›®æ ‡ç‰¹å¾å°†å¯¼è‡´æ›´å¤šå¯èƒ½çš„é¢„æµ‹è·¯å¾„ï¼Œä»è€Œå¯¼è‡´é€‰æ‹©æ­£ç¡®è·¯å¾„çš„æ¦‚ç‡é™ä½ã€‚\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œç¬¬ä¸‰ä¸ªæ•°æ®é›†æ˜¯å¼‚å¸¸çš„ï¼Œå®ƒç”šè‡³éšç€$d_{target}$çš„å¢åŠ è€Œå¢åŠ äº†ã€‚è¿™æ˜¯å› ä¸ºDriveæ•°æ®é›†æœ‰11ä¸ªç±»ï¼Œæ¯”å…¶ä»–æ•°æ®é›†çš„ç±»è¦å¤šå¾—å¤šã€‚å› æ­¤ï¼Œåœ¨Driveä¸­ï¼Œæ¯ä¸ªç±»åˆ«å¯¹åº”çš„æ ‘å½¢è·¯å¾„æ•°é‡è¾ƒå°‘ã€‚å…¶æ¬¡ï¼Œå†³ç­–æ ‘æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åªé€‰æ‹©ä¿¡æ¯é‡å¤§çš„ç‰¹å¾ï¼Œè¿™æ„å‘³ç€Driveæ•°æ®é›†ä¸­$d_{target}$çš„å¢åŠ ä¸ä¸€å®šä¼šå¢åŠ æ ‘ä¸­æœªçŸ¥ç‰¹å¾çš„æ•°é‡ï¼Œå› ä¸ºæœ‰äº›ç‰¹å¾å¯èƒ½æ°¸è¿œä¸ä¼šè¢«é€‰ä¸­ã€‚\nç»¼ä¸Šï¼Œè¾ƒå¤§çš„ç›®æ ‡æ•°æ®å¹¶ä¸æ€»æ˜¯èƒ½é™ä½è·¯å¾„é™åˆ¶æ”»å‡»çš„CBRã€‚\n$d_{target}$å¯¹ç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»çš„å½±å“ ä½œè€…å±•ç¤ºäº†ç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»å¯¹ä¸‰ç§æ¨¡å‹çš„æ”»å‡»æ€§èƒ½ï¼ˆLRï¼šé€»è¾‘å›å½’ã€RFï¼šéšæœºæ£®æ—ã€NNï¼šç¥ç»ç½‘ç»œï¼‰\nç±»ä¼¼åœ°ï¼Œæ¯ä¸ªç‰¹å¾çš„MSEéƒ½éšç€$d_{target}$çš„å¢åŠ è€Œä¸Šå‡ã€‚è¿™æ˜¯å› ä¸ºç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»ä¾èµ–äº$x_{adv}$å’Œ$x_{target}$ä¹‹é—´çš„ç‰¹å¾ç›¸å…³æ€§æ¥æ¨æ–­æœªçŸ¥ç‰¹å¾å€¼ã€‚å¦‚æœ$d_{target}$æ‰€å æ¯”ä¾‹è¾ƒå¤§ï¼Œå­¦ä¹ åˆ°çš„ç›¸å…³æ€§ä¼šå˜å¼±ï¼Œå¯¼è‡´æ”»å‡»æ€§èƒ½ç›¸å¯¹è¾ƒå·®ã€‚ç„¶è€Œï¼Œå³ä½¿åœ¨$d_{target}$çš„åˆ†æ•°ä¸º60%æ—¶ï¼Œç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»ä»ç„¶æ¯”éšæœºçŒœæµ‹æ–¹æ³•è·å¾—äº†æ›´å¥½çš„æ•ˆæœï¼Œè¯æ˜äº†å…¶æœ‰æ•ˆæ€§ã€‚\nä½œè€…å‘ç°ï¼Œé‡‡ç”¨ç¥ç»ç½‘ç»œæ¨¡å‹çš„ç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»çš„æ€§èƒ½ä¼˜äºé€»è¾‘å›å½’å’Œéšæœºæ£®æ—æ¨¡å‹ã€‚åŸå› åœ¨äºç¥ç»ç½‘ç»œæ¨¡å‹æ¯”å…¶ä»–ä¸¤ç§æ¨¡å‹å…·æœ‰æ›´å¤æ‚çš„å†³ç­–è¾¹ç•Œï¼Œä»è€Œæå¤§åœ°é™åˆ¶äº†ç»™å®šç›¸åŒ$x_{adv}$å’Œ$v$æ—¶$x_{target}$çš„å¯èƒ½åˆ†å¸ƒã€‚åŒæ—¶ï¼Œç¥ç»ç½‘ç»œæ¨¡å‹æœ¬èº«å…·æœ‰æ›´å¤šçš„å‚æ•°ï¼Œå¯ä»¥æ•è·æ›´å¤šå…³äºç‰¹å¾ç›¸å…³æ€§çš„é‡è¦ä¿¡æ¯ï¼Œä»è€Œè·å¾—æ›´å¥½çš„æ”»å‡»æ€§èƒ½ã€‚\nä½œè€…è¿˜å°†CBRåº¦é‡ç”¨äºè¯„ä¼°RFæ¨¡å‹ä¸Šçš„GRNAï¼ŒåŒæ ·æ•ˆæœä¹Ÿæ¯”éšæœºçŒœæµ‹æ–¹æ³•ä¼˜ç§€ã€‚\néœ€è¦é¢„æµ‹çš„æ ·æœ¬æ•°å¯¹ç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»çš„å½±å“ å››ä¸ªæ•°æ®é›†ä¸Šçš„è¶‹åŠ¿è¡¨æ˜ï¼Œé¢„æµ‹æ•°æ®é›†ä¸­çš„æ ·æœ¬è¶Šå¤šï¼Œå¯¹æ‰‹å¯ä»¥è·å¾—çš„æ¯ä¸ªç‰¹å¾çš„MSEè¶Šå°‘ã€‚ æ¢å¥è¯è¯´ï¼Œå¯¹æ‰‹å¯ä»¥é•¿æœŸç§¯ç´¯æ›´å¤šçš„é¢„æµ‹è¾“å‡ºï¼Œä»¥æé«˜å…¶æ”»å‡»ç²¾åº¦ã€‚\næ•°æ®ç›¸å…³æ€§å¯¹ç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»çš„å½±å“ ç”±äºLRå’ŒRFæ¨¡å‹çš„æ€§èƒ½ä½äºNNæ¨¡å‹ï¼Œä½œè€…æ¨æ–­æ˜¯å› ä¸ºä¸€å°éƒ¨åˆ†æ¨æ–­å‡ºçš„ç‰¹å¾å€¼ä¸çœŸå®ç›¸å·®ç”šè¿œï¼Œå¯¼è‡´æ•´ä½“æ”»å‡»æ€§èƒ½ç›¸å¯¹è¾ƒä½ï¼Œäºæ˜¯ä½œè€…ç ”ç©¶æ•°æ®ç›¸å…³æ€§çš„å½±å“ã€‚\næ•°æ®ç›¸å…³æ€§å®šä¹‰å¦‚ä¸‹ï¼š\n$$\\begin{aligned} \\operatorname{corr}\\left(x\\_{\\mathrm{adv}}, x\\_{\\mathrm{target}, i}\\right) \u0026 =\\frac{1}{d\\_{\\mathrm{adv}}} \\sum\\_{j=1}^{d\\_{\\mathrm{adv}}} a b s\\left(r\\left(x\\_{\\mathrm{adv}, j}, x\\_{\\mathrm{target}, i}\\right)\\right), \\\\\\\\ \\operatorname{corr}\\left(v, x\\_{\\mathrm{target}, i}\\right) \u0026 =\\frac{1}{c} \\sum\\_{j=1}^{c} a b s\\left(r\\left(v\\_{j}, x\\_{\\mathrm{target}, i}\\right)\\right), \\end{aligned}$$å…¶ä¸­$r(a,b)$è¡¨ç¤ºaå’Œbä¹‹é—´çš„çš®å°”é€Šç›¸å…³ç³»æ•°ï¼Œ$abs(\\cdot)$è¡¨ç¤ºç»å¯¹å€¼ã€‚ æœ¬è´¨ä¸Šï¼Œä¸¤ä¸ªç³»æ•°è¶Šå¤§ï¼Œå¯¹æ‰‹è¶Šå®¹æ˜“é€šè¿‡ç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»å­¦ä¹ ç‰¹å¾ç›¸å…³æ€§ã€‚\næˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ç›¸å…³ç³»æ•°$x_{adv}$å’Œ$v$éƒ½ä¼šå½±å“ç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»çš„æ”»å‡»æ€§èƒ½ã€‚$x_{target}$ï¼Œ$i$ä¸$x_{adv}$å’Œ$v$ä¹‹é—´è¾ƒå¼±çš„ç›¸å…³æ€§å¯¼è‡´è¾ƒä½çš„æ¨æ–­å‡†ç¡®åº¦ï¼Œä¾‹å¦‚å›¾10aä¸­çš„ç‰¹å¾1å’Œ3ä»¥åŠå›¾10bä¸­çš„ç‰¹å¾4å’Œ6ã€‚\nå¯¹ç­– ä½œè€…è®¨è®ºäº†å‡ ç§å¯èƒ½å‡è½»æ‰€æå‡ºçš„ç‰¹å¾æ¨æ–­æ”»å‡»çš„æ½œåœ¨é˜²å¾¡æ–¹æ³•ã€‚\nç­–ç•¥åç§° æ•ˆæœ Rounding confidence scores ç­‰å¼æ±‚è§£æ”»å‡»æœ‰æ•ˆï¼Œä½†ç”Ÿæˆå›å½’ç½‘ç»œæ”»å‡»æ•ˆæœç”šå¾® Dropout for neural networks model æœ‰æ•ˆï¼Œä½†æ”»å‡»è€…è¿˜æ˜¯æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ¨æ–­ Pre-processing before collaboration æœªåšæµ‹è¯• Post-processing for verification å¯¼è‡´æ¨¡å‹é¢„æµ‹è®¡ç®—çš„å·¨å¤§å¼€é”€ Hide the vertical FL model å¯èƒ½ä¼šå¯¼è‡´æ–°çš„éšç§æ³„éœ² Differential Privacy (DP) ä¸é€‚ç”¨ å‚è€ƒæ–‡ç«  ã€è®ºæ–‡é˜…è¯»ã€‘Feature Inference Attack on Model Predictions in Vertical Federated Learning - linear345 - åšå®¢å›­ (cnblogs.com) çºµå‘è”é‚¦å­¦ä¹ VFL å±æ€§æ¨ç†æ”»å‡» Feature inference attack on model predictions in VFL (ICDE21ï¼‰ - çŸ¥ä¹ (zhihu.com) ","date":"2023-01-03T16:27:11+08:00","image":"https://lbqaq.top/p/feature-inference-attack-on-model-predictions-in-vertical-federated-learning/100018879.webp","permalink":"https://lbqaq.top/p/feature-inference-attack-on-model-predictions-in-vertical-federated-learning/","title":"Feature Inference Attack on Model Predictions in Vertical Federated Learning"},{"content":"ç»§ä¸Šæ–‡ã€Šåœ¨PowerPointé‡Œä¼˜é›…çš„æ’å…¥LaTeXå…¬å¼ã€‹åï¼Œæ²¡æƒ³åˆ°æˆ‘åˆé‡åˆ°äº†LaTeXç›¸å…³çš„é—®é¢˜ï¼Œè¿™æ¬¡æ˜¯æˆ‘åšå®¢æ— æ³•æ­£ç¡®çš„æ˜¾ç¤ºå…¬å¼äº†ã€‚å½“ç„¶ï¼Œæœ€ç®€å•å’Œç²—æš´çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è½¬æˆå›¾ç‰‡ï¼Œä½†æœ¬ç€èƒ½æŠ˜è…¾å°±æŠ˜è…¾çš„ç²¾ç¥ï¼Œè¿˜æ˜¯ç ”ç©¶äº†ä¸€ä¸‹å¦‚ä½•ä¼˜é›…çš„è§£å†³ã€‚\né—®é¢˜å¤ç° ç”±äºåœ¨LaTeXè¯­æ³•ä¸­ï¼Œ_æ˜¯ç”¨æ¥è¡¨ç¤ºä¸‹æ ‡ï¼Œç”±äºä¸‹æ ‡ç»å¸¸è¢«ä½¿ç”¨ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå¯¼è‡´ä¸€å¥è¯ä¸­å‡ºç°ä¸¤ä¸ª_ã€‚è€Œåœ¨Markdownè¯­æ³•é‡Œï¼Œä¸‹åˆ’çº¿æ˜¯è¡¨ç¤ºæ–œä½“çš„æ„æ€ï¼Œäºæ˜¯Hugoå°±ä¼šå°†å…¶è½¬ä¹‰æˆ\u0026lt;em\u0026gt;æ ‡ç­¾ï¼Œå¯¼è‡´å…¬å¼æ ¼å¼é”™è¯¯ï¼Œä»è€Œä½¿KaTeXæ— æ³•æ­£ç¡®æ¸²æŸ“ã€‚\nè¿™å°±å¾ˆç¬¨äº†ï¼Œæœ¬åœ°çš„Markdownç¼–è¾‘å™¨éƒ½æ²¡æœ‰å‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œæ€ä¹ˆåˆ°ä½ Hugoè¿™å°±æ‹‰äº†å‘¢ï¼Ÿ\nIs there any way to ignore underscore when rendering markdown? - support - HUGO (gohugo.io)\næœ‰è¿™æ ·é—®é¢˜çš„äººä¹Ÿä¸æ­¢æˆ‘ä¸€ä¸ªï¼Œå®˜æ–¹è®ºå›ä¸Šæ—©åœ¨2017å¹´å°±æœ‰äººæé—®äº†ï¼Œé‚£ä¹ˆå®˜æ–¹çš„ç­”å¤æ˜¯ï¼š\næ²¡é”™ï¼Œå®˜æ–¹å¹¶æ²¡æœ‰ç»™å‡ºå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œåªæœ‰åœ¨æ–‡æ¡£ä¸­ç¨å¾®æåˆ°äº†ä¸€å˜´ï¼Œä½ å¯ä»¥ä½¿ç”¨pandocæ¥è¿›è¡ŒMarkdownçš„è½¬ä¹‰ã€‚1\nğŸ¤”æœ¬æ¥ç”¨ä½ å°±æ˜¯å›¾ä½ çš„ç”Ÿæˆé€Ÿåº¦å¿«ï¼Œè¿™è°ƒç”¨å…¶ä»–ç¨‹åºåï¼Œè¿™é€Ÿåº¦ä¸å°±æ…¢äº†æ²¡ä¼˜åŠ¿äº†å—ã€‚\næ²¡åŠæ³•ï¼Œè¿˜æ˜¯è‡ªå·±åŠ¨æ‰‹è§£å†³å§ã€‚\nè§£å†³æ–¹æ¡ˆ åœ¨æœç´¢è¿‡åï¼Œç½‘ä¸Šç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ä¸‹åˆ’çº¿å‰é¢åŠ ä¸Š\\ï¼Œé¿å…è¢«Hugoè¿›è¡Œè½¬ä¹‰ã€‚ä½†æ˜¯å¦‚æœåœ¨å†™æ–‡æ¡£çš„æ—¶å€™å°±åŠ ä¸Šçš„è¯ï¼Œå°±ä¼šå¯¼è‡´æœ¬åœ°å…¬å¼æ— æ³•æ­£ç¡®æ¸²æŸ“ï¼Œæ‰€ä»¥è¾¹å†™è¾¹åŠ æ˜¯è‚¯å®šä¸å¯èƒ½äº†ã€‚å†™å®Œåæ‰‹åŠ¨æ·»åŠ ï¼Œå¦‚æœæ˜¯ä¸€ä¸¤ä¸ªè¿˜å¥½ï¼Œä½†ä¸‹åˆ’çº¿åœ¨LaTeXé‡Œå®åœ¨æ˜¯å¤ªå¸¸ç”¨äº†ï¼Œæ‰€ä»¥æ‰‹å·¥ä¿®æ”¹ä¹Ÿä¸ç°å®ã€‚\näºæ˜¯ï¼Œæˆ‘ä¾¿å†³å®šå†™ä¸ªå°ç¨‹åºæ¥è‡ªåŠ¨ä¿®æ”¹ã€‚ç”±äºå¤©å¤©Apexå¤§è„‘é€€åŒ–ä¸¥é‡ï¼Œæˆ‘å®åœ¨æƒ³ä¸åˆ°ä»€ä¹ˆæ¯”è¾ƒå¥½çš„å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•ï¼Œåªå¥½ç”¨éå†å¤§æ³•ã€‚ï¼ˆè¿™æ—¢è§†æ„Ÿï¼Œç¼–è¯‘åŸç†ï¼šâ€¦â€¦ï¼Œä»€ä¹ˆâ€¦â€¦åœ¨æƒ³æˆ‘çš„äº‹æƒ…â€¦â€¦ï¼Ÿï¼‰\nä¸ç©æ¢—äº†ï¼Œç›´æ¥ä¸Šä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #include \u0026lt;fstream\u0026gt; #include \u0026lt;iostream\u0026gt; #include \u0026lt;string\u0026gt; #include \u0026lt;vector\u0026gt; using namespace std; const bool DEBUG = false; int main(int argc, char* argv[]) { string file; ifstream fin; if (argc \u0026lt;= 1) { cout \u0026lt;\u0026lt; \u0026#34;è¯·è¾“å…¥æ–‡ä»¶åç§°ï¼š\u0026#34;; cin \u0026gt;\u0026gt; file; } else { file = argv[1]; } fin.open(file); if (!fin.is_open()) { cout \u0026lt;\u0026lt; \u0026#34;æ— æ³•æ‰“å¼€æ–‡ä»¶\u0026#34; \u0026lt;\u0026lt; endl; system(\u0026#34;pause\u0026#34;); return 1; } // è¯»å…¥æ–‡ä»¶ string code((std::istreambuf_iterator\u0026lt;char\u0026gt;(fin)), std::istreambuf_iterator\u0026lt;char\u0026gt;()); fin.close(); if (DEBUG) { cout \u0026lt;\u0026lt; code \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;-----------------\u0026#34; \u0026lt;\u0026lt; endl; } // æ‰€æœ‰æ•°å­¦å…¬å¼çš„å¼€å¤´å’Œç»“å°¾ vector\u0026lt;pair\u0026lt;int, int\u0026gt;\u0026gt; maths; cout \u0026lt;\u0026lt; \u0026#34;å¼€å§‹å¯»æ‰¾æ‰€æœ‰æ•°å­¦å…¬å¼\u0026#34; \u0026lt;\u0026lt; endl; for (int i = 0; i \u0026lt; code.length(); i++) { if (code[i] == \u0026#39;$\u0026#39;) { i++; bool is_double = false; int start = i; if (code[i] == \u0026#39;$\u0026#39;) { is_double = true; i++; start = i; } while (i \u0026lt; code.length() \u0026amp;\u0026amp; code[i] != \u0026#39;$\u0026#39;) { i++; } if (is_double) { i++; } if (i \u0026gt;= code.length() || code[i] != \u0026#39;$\u0026#39;) { cout \u0026lt;\u0026lt; \u0026#34;é”™è¯¯ï¼šç¼ºå°‘ç»“æŸç¬¦\u0026#34; \u0026lt;\u0026lt; endl; system(\u0026#34;pause\u0026#34;); return 1; } int end = i; maths.push_back(pair\u0026lt;int, int\u0026gt;(start, end)); cout \u0026lt;\u0026lt; start \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; end \u0026lt;\u0026lt; endl; if (DEBUG) { string math = code.substr(start, end - start); cout \u0026lt;\u0026lt; math \u0026lt;\u0026lt; endl; } } } cout \u0026lt;\u0026lt; \u0026#34;å¯»æ‰¾å®Œæˆï¼Œå¼€å§‹å¤„ç†\u0026#34; \u0026lt;\u0026lt; endl; int count = 0; for (int i = 0; i \u0026lt; maths.size(); i++) { for (int j = maths[i].first + count; j \u0026lt; maths[i].second + count; j++) { if (code[j] == \u0026#39;_\u0026#39;) { code.insert(j, \u0026#34;\\\\\u0026#34;); count++; j++; } else if (code[j] == \u0026#39;\\\\\u0026#39;) { j++; if (code[j] == \u0026#39;\\\\\u0026#39;) { code.insert(j, \u0026#34;\\\\\\\\\u0026#34;); count += 2; j += 2; } else if (code[j] == \u0026#39;{\u0026#39; || code[j] == \u0026#39;}\u0026#39;) { code.insert(j, \u0026#34;\\\\\u0026#34;); count++; j++; } } } } if (DEBUG) { cout \u0026lt;\u0026lt; code \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;å¤„ç†å®Œæˆï¼Œå¼€å§‹å†™å…¥æ–‡ä»¶\u0026#34; \u0026lt;\u0026lt; endl; ofstream fout; string location = file.substr(0, file.find_last_of(\u0026#39;\\\\\u0026#39;) + 1); fout.open(location + \u0026#34;index.md\u0026#34;); if (!fout.is_open()) { cout \u0026lt;\u0026lt; \u0026#34;æ— æ³•æ‰“å¼€æ–‡ä»¶\u0026#34; \u0026lt;\u0026lt; endl; system(\u0026#34;pause\u0026#34;); return 1; } fout \u0026lt;\u0026lt; code; return 0; } ç”±äºåªæ˜¯éšæ‰‹å†™çš„å°å·¥å…·ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰åˆ†å‡½æ•°å•¥çš„ï¼Œç›´æ¥å…¨æ”¾ä¸€èµ·äº†ã€‚\nè¿™ä¸ªç¨‹åºä¼šåŒ¹é…$...$å’Œ$$...$$è¿™ä¸¤ç§æ ¼å¼ï¼Œå°†å…¶ä¸­æ‰€æœ‰çš„_æ›¿æ¢ä¸º\\_ï¼Œæ‰€æœ‰çš„\\\\æ›¿æ¢ä¸º\\\\\\\\ï¼ŒåŒæ—¶å°†æ–‡ä»¶åœ¨åŸä½ç½®ä¿å­˜ä¸ºindex.mdã€‚\nè¿™æ ·æ¯æ¬¡å†™å¥½æ–‡ç« ï¼Œåªè¦å°†å…¶æ‹–åˆ°è¯¥ç¨‹åºä¸Šå°±èƒ½è‡ªåŠ¨è½¬æ¢å®Œæˆäº†ã€‚\nè¿™æ ·å°±èƒ½ç¡®ä¿æœ¬åœ°æŸ¥çœ‹ç¼–è¾‘å’Œç½‘é¡µéƒ½å¯ä»¥æ­£ç¡®æ˜¾ç¤ºå…¬å¼äº†ã€‚ç¼ºç‚¹åˆ™æ˜¯æ¯ä¸ªæœ‰å…¬å¼çš„æ–‡ä»¶éƒ½ä¼šå¤šä¿å­˜ä¸€ä»½ï¼Œä¸è¿‡æ–‡æœ¬æ–‡ä»¶å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œæ‰€ä»¥ä¹Ÿæ— ä¼¤å¤§é›…ã€‚\nå½“ç„¶ï¼Œè¿™ä¸ªç¨‹åºè¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Œæ¯”å¦‚è‡ªåŠ¨å¯¹å«æœ‰å…¬å¼çš„æ–‡ç« è¿›è¡Œå¤„ç†ç­‰ç­‰ã€‚ä¸è¿‡çœ‹è¿™æˆ‘æ–‡ç« æ›´æ–°çš„é€Ÿåº¦ğŸ•Šï¸ï¼Œæ‰‹åŠ¨æ‹–ä¸€ä¸‹è¿˜æ˜¯å¯ä»¥æ¥å—çš„ã€‚\næ›´æ–°è®°å½• 2023.7.20ï¼š\nå¢åŠ å¯¹\\{å’Œ\\}çš„å¤„ç† 2023.1.3ï¼š\nå¢åŠ å¯¹\\\\çš„å¤„ç† Content Formats |Hugo (gohugo.io)\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2023-01-02T22:19:15+08:00","image":"https://lbqaq.top/p/latex-in-hugo/103706981.webp","permalink":"https://lbqaq.top/p/latex-in-hugo/","title":"è®©Hugoä¼˜é›…çš„æ˜¾ç¤ºå…¬å¼"},{"content":"æœ€è¿‘ï¼Œéœ€è¦æˆ‘åœ¨PPTä¸­æ’å…¥å…¬å¼çš„æ¬¡æ•°è¶Šæ¥è¶Šå¤šäº†ã€‚æœ€ä¼ ç»Ÿçš„åŠæ³•è‡ªç„¶æ˜¯å°†å…¬å¼ç”Ÿæˆå¥½åç›´æ¥è¿›è¡Œæˆªå›¾æ’å…¥ï¼Œä½†è¿™ç§æ–¹å¼è¿˜æ˜¯ä¸å¤Ÿä¼˜é›…ï¼Œå¦‚æœéœ€è¦è°ƒèŠ‚å¤§å°ä¹Ÿååˆ†çš„éº»çƒ¦ï¼Œäºæ˜¯æˆ‘ä¾¿é€šè¿‡æ£€ç´¢æ‰¾åˆ°äº†ä¸¤ç§æ’å…¥å…¬å¼çš„æ–¹æ³•ï¼Œåœ¨æ­¤åšä¸€ä¸ªè®°å½•ã€‚\nä½¿ç”¨åŸç”Ÿçš„å…¬å¼åŠŸèƒ½ 2202å¹´äº†ï¼Œå¦‚æœè¯´PowerPointæœ¬èº«ä¸æ”¯æŒLaTeXå…¬å¼é‚£å°±å¤§é”™ç‰¹é”™äº†ã€‚\nå°†LaTeXä»£ç æ’å…¥åˆ°æ–‡æœ¬æ¡†ä¸­ é€‰ä¸­åˆšåˆšè¾“å…¥çš„ä»£ç ï¼Œä¾æ¬¡ç‚¹å‡»åŠŸèƒ½åŒºä¸Šçš„â€œæ’å…¥â€â€”â€”â€œå…¬å¼â€â€”â€”â€œä¸“ç”¨â€ åªéœ€è¦ç®€å•ä¸¤æ­¥å³å¯è½¬æ¢å®Œæˆã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å´å­˜åœ¨å¾ˆå¤§çš„é—®é¢˜ï¼Œå°±æ˜¯æ”¯æŒçš„å…¬å¼å¤ªå°‘äº†ï¼Œä¸€äº›ç®€å•çš„å…¬å¼è¿˜å¯ä»¥æˆåŠŸè½¬æ¢ï¼Œä½†å¦‚æœæ˜¯å…¬å¼å—æˆ–è€…ç”¨äº†ä¸€äº›å®åŒ…ï¼Œå°±ä¼šå¯¼è‡´è½¬æ¢ä¸å‡ºæ¥ã€‚\nè¿™ç§æ–¹å¼çš„ä¼˜ç‚¹å°±æ˜¯æ— éœ€é¢å¤–é…ç½®ï¼Œä»¥åŠå¯ä»¥ä¸æ–‡å­—æ”¾åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿æ’ç‰ˆã€‚ä½†å¦‚æœä½ çš„å…¬å¼æ¯”è¾ƒå¤æ‚ï¼Œé‚£æˆ‘è¿˜æ˜¯æ¨èä¸‹é¢çš„æ–¹æ³•ã€‚\nä½¿ç”¨IguanaTexæ’ä»¶ è¦è¯´å¯¹LaTeXæ”¯æŒæœ€å¥½çš„ï¼Œé‚£è‚¯å®šå°±æ˜¯ä½¿ç”¨ä½ ç”µè„‘ä¸Šå®‰è£…å¥½çš„å‘è¡Œç‰ˆè¿›è¡Œç”Ÿæˆï¼ŒIguanaTexæ’ä»¶å°±æ˜¯åŸºäºè¿™ç§æ–¹å¼å®ç°çš„ã€‚\næ‰€ä»¥æƒ³è¦ä½¿ç”¨IguanaTexï¼Œä½ å¿…é¡»è¦å‡†å¤‡å¥½ä¸€ä¸ªLaTeXå‘è¡Œç‰ˆï¼Œæˆ‘è¿™é‡Œæ¨èMiKTeXï¼Œå®ƒä¸ä¼šå®‰è£…å®Œæ•´çš„å®åŒ…è€Œæ˜¯åœ¨ä½ éœ€è¦çš„æ—¶å€™è¿›è¡Œå®‰è£…ï¼Œé¿å…å ç”¨è¿‡å¤§çš„ç©ºé—´ï¼Œå…·ä½“çš„å®‰è£…æ–¹æ³•è¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚\nåœ¨å®˜ç½‘ä¸Šä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œä¸‹è½½åç¼€åä¸ºppamçš„æ–‡ä»¶æ”¾å…¥C:\\Users\\%APPDATA%\\Microsoft\\AddInsç›®å½•ä¸­ æ‰“å¼€PPTï¼Œä¾æ­¤é€‰æ‹©ï¼š æ–‡ä»¶-\u0026gt;é€‰é¡¹-\u0026gt;åŠ è½½é¡¹-\u0026gt;ç®¡ç†ï¼ˆä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©ï¼šPowerPointåŠ è½½é¡¹ï¼‰-\u0026gt;è½¬åˆ° åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©ï¼š æ·»åŠ -\u0026gt;é€‰æ‹©åˆšä¸‹è½½çš„æ’ä»¶æ–‡ä»¶ æ­¤æ—¶åŠŸèƒ½åŒºä¸Šé¢å°±å·²ç»æœ‰äº†IguanaTexï¼Œç‚¹å‡»ç¬¬ä¸€ä¸ªNew LaTeX displayå°±å¯ä»¥æ’å…¥å…¬å¼äº†ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥ç‚¹å‡»Main Settingsæ¥è¿›è¡Œä¿®æ”¹ç›¸å…³è®¾ç½®ã€‚ æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¿®æ”¹ä¸´æ—¶æ–‡ä»¶ä½ç½®ä»¥åŠå›¾ç‰‡ç”Ÿæˆçš„æ–¹å¼ æˆ‘æ¨èå°†Outputä¿®æ”¹æˆVectorï¼Œè¿™æ ·ç”Ÿæˆçš„å…¬å¼å°±æ˜¯çŸ¢é‡å½¢çŠ¶ï¼Œå³ä½¿æ”¾å¤§ä¹Ÿä¸ä¼šå˜å½¢ã€‚\nä¸‹é¢å°±æ˜¯ç”Ÿæˆçš„å…¬å¼ï¼Œå¯ä»¥çœ‹å‡ºæ¯ä¸ªå­—æ¯éƒ½æ˜¯å›¾å½¢ã€‚åŒæ—¶å…¬å¼ä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥æ’ä»¶è¿›è¡Œä¿®æ”¹ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ã€‚\nç»¼ä¸Šï¼Œä¸ªäººæ¨èè¿˜æ˜¯ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œå”¯ä¸€éº»çƒ¦çš„åœ°æ–¹å°±æ˜¯ä½ éœ€è¦è‡ªå¤‡LaTeXç¯å¢ƒã€‚\næœ€è¿‘çš„æ–‡ç« çœŸçš„æ˜¯è¶Šæ¥è¶Šæ°´äº†QAQ\n","date":"2022-12-31T15:25:22+08:00","image":"https://lbqaq.top/p/latex-in-ppt/102317894.webp","permalink":"https://lbqaq.top/p/latex-in-ppt/","title":"åœ¨PowerPointé‡Œä¼˜é›…çš„æ’å…¥LaTeXå…¬å¼"},{"content":"ç”±äºè¿è¥å•†é»˜è®¤æä¾›çš„DNSæœ‰å¾ˆå¤šçš„æ±¡æŸ“ï¼Œè®¸å¤šåŸŸåç›´æ¥0.0.0.0æˆ–è€…127.0.0.1ä¼ºå€™ï¼Œå¯¼è‡´ä¸Šç½‘ä½“éªŒå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ•…æƒ³åˆ°è‡ªå»ºåŠ å¯†DNSæ¥æŠµå¾¡æ±¡æŸ“ã€‚\nä¸€å¼€å§‹ä½¿ç”¨çš„æ˜¯AdGuardHomeï¼Œç„¶è€Œåœ¨æˆ‘çœ‹åˆ°äº†CloudflareSpeedTestè¿™ä¸ªé¡¹ç›®åï¼Œå°±èŒç”Ÿäº†ipé‡å®šå‘è¿™ä¸ªéœ€æ±‚ï¼Œä¸ºæ­¤æˆ‘åˆå¥—äº†ä¸€å±‚mosdnsï¼ˆç»å…¸ä¸ºé†‹åŒ…é¥ºå­ï¼‰ã€‚æ—¢ç„¶ä¸Šäº†mosdnsï¼Œå°±å¹²è„†åšé…ä¸Šåˆ†æµå§ï¼Œäºæ˜¯ç°åœ¨çš„è¿™å¥—æ–¹æ¡ˆå°±å½¢æˆäº†ã€‚è™½ç„¶æˆ‘çš„è¿™äº›éœ€æ±‚ä¸€ä¸ªmosdnså°±å¯ä»¥è§£å†³ï¼Œä½†AdGuardHomeçš„å‰ç«¯uiã€æ›´æ–¹ä¾¿çš„å¹¿å‘Šè¿‡æ»¤ã€æ•°æ®ç»Ÿè®¡è¿™äº›åŠŸèƒ½æ˜¯mosdnsæ‰€æ²¡æœ‰çš„ã€‚\n23.2.8æ–°æ–¹æ¡ˆ ç”±äºCloudFlareçš„ä¼˜é€‰IPåœ¨ä¸åŒè®¾å¤‡ä¸Šé€Ÿåº¦éƒ½ä¸åŒï¼Œæ‰€ä»¥åœ¨è®¾å¤‡æœ¬åœ°æ­å»ºæ›´ä¼˜ã€‚äºæ˜¯ï¼Œæˆ‘ç°åœ¨å°†mosdnsä»æœåŠ¡å™¨ä¸Šç§»åˆ°äº†æœ¬åœ°ã€‚å½“ç„¶ï¼Œåœ¨è·¯ç”±å™¨ä¸Šéƒ¨ç½²è¦æ›´å¥½ï¼Œä½†æˆ‘å®¶çš„è·¯ç”±å™¨æ€§èƒ½å¤ªå¼±äº†ï¼Œå°±ç®—äº†ã€‚åŒæ—¶ï¼Œå»å¹¿å‘Šå°±äº¤ç»™mosdnsï¼Œè¿™æ ·å°±æ— éœ€ä½¿ç”¨ä¸¤ä¸ªè½¯ä»¶è¿›è¡Œå¥—å¨ƒäº†ã€‚\nmosdnsåœ¨è¿™æ®µæ—¶é—´ä¹Ÿæ›´æ–°äº†V5ç‰ˆæœ¬ï¼ŒåŸå…ˆçš„é…ç½®æ–‡ä»¶ä¹Ÿæ— æ³•ä½¿ç”¨äº†ï¼Œæ­£å¥½åšå‡ºV5å¯ç”¨çš„é…ç½®ã€‚\nåœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­ï¼Œéœ€è¦ç”¨ä¸Šä»¥ä¸‹é¡¹ç›®æä¾›çš„åŸŸå/IPæ–‡ä»¶ï¼š\nreject-list.txt å’Œ direct-list.txt CN-ip-cidr.txt cloudflare.txtï¼šç”±ip.txtå’Œipv6.txtåˆå¹¶è€Œæ¥ ad-domains.txtï¼šä¸‹è½½domains.txtå¹¶æ”¹å 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 # Powered by luoboQAQ log: level: info plugins: # ç¼“å­˜æ’ä»¶ - tag: cache type: cache args: size: 10240 lazy_cache_ttl: 86400 # å°†ç¼“å­˜ä¿å­˜åœ¨ç£ç›˜ dump_file: ./cache.dump # è½¬å‘è‡³æœ¬åœ°æœåŠ¡å™¨çš„æ’ä»¶ - tag: forward_local type: forward args: upstreams: - tag: alidns_doh addr: \u0026#34;https://223.5.5.5/dns-query\u0026#34; - tag: dnspod_doh addr: \u0026#34;https://120.53.53.53/dns-query\u0026#34; # è½¬å‘è‡³è¿œç¨‹æœåŠ¡å™¨çš„æ’ä»¶ - tag: forward_remote type: forward args: upstreams: - tag: easymosdns addr: \u0026#34;https://doh.apad.pro/dns-query\u0026#34; bootstrap: \u0026#34;223.5.5.5\u0026#34; - tag: dns_sb addr: \u0026#34;https://45.11.45.11/dns-query\u0026#34; # fallback ç”¨æœ¬åœ°æœåŠ¡å™¨ sequence # è¿”å›ä¸åŒ…å«æœ¬åœ° ip åˆ™ reject - tag: local_ip_sequence type: sequence args: - exec: $forward_local - matches: resp_ip \u0026amp;./data/CN-ip-cidr.txt exec: accept - exec: drop_resp # v5.1.2 ä»¥åä¸èƒ½ç”¨ reject # fallback ç”¨è¿œç¨‹æœåŠ¡å™¨ sequence - tag: remote_sequence type: sequence args: - exec: $forward_remote # CloudFlareåŠ«æŒåˆ°ä¼˜é€‰IP - matches: - resp_ip \u0026amp;./data/cloudflare.txt exec: black_hole 172.67.210.33 - exec: accept # fallbackæ’ä»¶ - tag: fallback type: fallback args: primary: local_ip_sequence secondary: remote_sequence threshold: 500 always_standby: true # ä¸»è¦è¿è¡Œé€»è¾‘æ’ä»¶ - tag: main type: sequence args: - matches: qtype 65 exec: reject 3 # å»å¹¿å‘Š - matches: qname \u0026amp;./data/reject-list.txt exec: reject 3 - matches: qname \u0026amp;./data/ad-domains.txt exec: reject 3 - exec: prefer_ipv4 - exec: $cache - matches: has_resp exec: accept - matches: qname \u0026amp;./data/direct-list.txt exec: $forward_local - matches: has_resp exec: accept - exec: $fallback # å¯åŠ¨ udpæœåŠ¡å™¨ - type: udp_server args: entry: main listen: 127.0.0.1:53 æ­¤é…ç½®æ–‡ä»¶å‚è€ƒäº†è¯¥å›ç­”\næ–¹æ¡ˆè®¾è®¡ é¦–å…ˆç”±AdGuardHomeæ¥å—è¯·æ±‚ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºå¹¿å‘ŠåŸŸå:\næ˜¯ï¼šç›´æ¥æ‹¦æˆªï¼Œç»“æŸæµç¨‹ å¦ï¼šç»§ç»­ä¼ å…¥mosdns åˆ¤æ–­æ˜¯å¦ä¸ºå›½å†…åŸŸåï¼š\næ˜¯ï¼šå‘æœ¬åœ°DNSæŸ¥è¯¢ å¦ï¼šå‘è¿œç«¯DNSæŸ¥è¯¢ åˆ¤æ–­æ˜¯å¦ä¸ºCloudFlareçš„IPï¼š\næ˜¯ï¼šä¿®æ”¹å“åº”ä¸ºä¼˜é€‰çš„IP å¦ï¼šä¸è¿›è¡Œæ“ä½œ ç³»ç»Ÿæ­å»º æ­å»ºmosdns å¦‚ä½•å®‰è£…å’Œé…ç½®mosdnsï¼Œå®˜æ–¹æ–‡æ¡£å·²ç»å†™çš„éå¸¸è¯¦ç»†äº†ï¼Œç›´æ¥çœ‹æ–‡æ¡£å°±å¥½äº†ã€‚\né…ç½®æ–‡ä»¶ä¸»è¦å‚è€ƒäº†pmkol/easymosdns\nè¿™é‡Œä¸»è¦åˆ†äº«ä¸€ä¸‹æˆ‘çš„é…ç½®ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 # Powered by luoboQAQ log: file: \u0026#34;./mosdns.log\u0026#34; level: error # æ•°æ®æºè®¾ç½® data_providers: - tag: CloudFlareIP file: \u0026#34;./rules/cloudflare.txt\u0026#34; auto_reload: true - tag: chinalist file: \u0026#34;./rules/geosite_cn.txt\u0026#34; auto_reload: true plugins: # ç¼“å­˜çš„æ’ä»¶ - tag: cache type: cache args: size: 10240 lazy_cache_ttl: 86400 cache_everything: true # åŒ¹é…PTRç±»å‹è¯·æ±‚çš„æ’ä»¶ - tag: query_is_ptr type: query_matcher args: qtype: [12] # åŒ¹é…TYPE65ç±»å‹è¯·æ±‚çš„æ’ä»¶ - tag: qtype65 type: query_matcher args: qtype: [65] # å±è”½è¯·æ±‚çš„æ’ä»¶ - tag: black_hole type: blackhole args: rcode: 0 ipv4: \u0026#34;127.0.0.1\u0026#34; ipv6: \u0026#34;::1\u0026#34; # åŒ¹é…æœ¬åœ°åŸŸåçš„æ’ä»¶ - tag: query_is_cn_domain type: query_matcher args: domain: - \u0026#34;provider:chinalist\u0026#34; # è½¬å‘è‡³æœ¬åœ°æœåŠ¡å™¨çš„æ’ä»¶ # [local|alidns] - tag: forward_local type: fast_forward args: upstream: - addr: \u0026#34;udp://100.100.2.138\u0026#34; - tag: forward_alidns type: fast_forward args: upstream: - addr: \u0026#34;https://dns.alidns.com:443/dns-query\u0026#34; dial_addr: \u0026#34;223.5.5.5\u0026#34; # CloudFlareåŠ«æŒçš„æ’ä»¶ - tag: response_is_cloudflare_ip type: response_matcher args: ip: - \u0026#34;provider:CloudFlareIP\u0026#34; - tag: hijack_cloudflare_ip type: blackhole args: ipv4: 104.16.111.240 # è½¬å‘è‡³è¿œç«¯æœåŠ¡å™¨çš„æ’ä»¶ - tag: forward_easymosdns type: fast_forward args: upstream: - addr: \u0026#34;https://doh.apad.pro/dns-query\u0026#34; bootstrap: \u0026#34;223.5.5.5\u0026#34; # ä¸»è¦çš„è¿è¡Œé€»è¾‘æ’ä»¶ - tag: main_sequence type: sequence args: exec: # ç¼“å­˜ - cache # å±è”½TYPE65ç±»å‹è¯·æ±‚ - if: qtype65 exec: - black_hole - _return # åˆ†æµ - if: \u0026#34;(query_is_cn_domain) || (query_is_ptr)\u0026#34; exec: - forward_alidns else_exec: - forward_easymosdns # CloudFlareåŠ«æŒåˆ°ä¼˜é€‰IP - if: response_is_cloudflare_ip exec: - hijack_cloudflare_ip - _return servers: - exec: main_sequence timeout: 5 listeners: - addr: 127.0.0.1:5533 protocol: udp å…¶ä¸­ï¼Œcloudflare.txtæ¥è‡ªäºä¸Šé¢çš„CloudflareSpeedTesté¡¹ç›®ï¼Œæ˜¯åŒ…å«ipv4å’Œipv6çš„CloudflareIPæ®µã€‚\ngeosite_cn.txtæ˜¯å›½å†…åŸŸåçš„é›†åˆï¼Œæ¥è‡ªLoyalsoldier/v2ray-rules-datï¼Œå°†geosite.datä½¿ç”¨mosdns v2dat unpack-domain è§£åŒ…å¾—åˆ°ã€‚\nè¿™é‡Œæˆ‘æ²¡æœ‰å¯ç”¨mosdnsçš„ç¼“å­˜ï¼Œå› ä¸ºæˆ‘åœ¨AdGuardHomeé‡Œå¯ç”¨ï¼Œå°±ä¸é‡å¤ç¼“å­˜äº†ã€‚å¦‚æœä½ æ˜¯ç›´æ¥ä½¿ç”¨mosdnsï¼Œé‚£ä¹ˆå°±å¯ä»¥å¯ç”¨ç¼“å­˜ã€‚\näº‹å®ä¸Šï¼Œè¿˜æ˜¯è¦å¼€å¯mosdnsçš„ç¼“å­˜ï¼Œä»¥æ­¤æ¥å‡å°DNSæŸ¥è¯¢çš„å»¶æ—¶ã€‚\næ­å»ºAdGuardHome è¿™é‡Œæˆ‘ä¸ºäº†æ–¹ä¾¿ï¼Œå°±ç›´æ¥ä½¿ç”¨äº†dockerï¼Œå…¶å®å¯ä»¥ä¸ç”¨çš„è¯´\n1 2 3 4 5 6 docker run --name adguardhome\\ --restart unless-stopped\\ -v /root/adguardhome/work:/opt/adguardhome/work\\ -v /root/adguardhome/conf:/opt/adguardhome/conf\\ --net=host\\ -d adguard/adguardhome æˆ‘æ¯”è¾ƒæ‡’ï¼Œå°±ç›´æ¥è®©å®¹å™¨ä½¿ç”¨äº†hostæ¨¡å¼ï¼Œè¿™æ ·å°±ä¸ç”¨é…ç½®ç«¯å£äº†ã€‚\nè®¾ç½®æ–¹é¢\nä¸Šæ¸¸DNSæœåŠ¡å™¨å¡«å…¥127.0.0.1:5533ï¼Œå³mosdnsçš„ç«¯å£ã€‚\nå¯ç”¨å¯ç”¨ EDNS å®¢æˆ·ç«¯å­ç½‘ï¼Œä½¿DNSæŸ¥è¯¢é™„ä¸Šç”¨æˆ·çš„ipï¼Œä½¿è§£æçš„ipåœ°å€é è¿‘æœ¬åœ°ä½ç½®ã€‚\nå¼€å¯ä¹è§‚ç¼“å­˜ï¼Œè®¾ç½®è¦†ç›–æœ€å°TTLå€¼ä¸º600ï¼Œè¦†ç›–æœ€å¤§TTLå€¼ä¸º3600ï¼Œé¿å…æ¯æ¬¡éƒ½è¦æŸ¥è¯¢\nå¼€å¯å¯ç”¨åŠ å¯†ï¼ˆHTTPSã€DNS-over-HTTPSã€DNS-over-TLSï¼‰ï¼Œå¯ç”¨DoH\næ ¹æ®è‡ªå·±çš„å–œå¥½æ·»åŠ è¿‡æ»¤è§„åˆ™\næˆ‘æ¨èå¯ç”¨CHN: anti-ADï¼Œè¿™ä¸ªåˆ—è¡¨è¿˜æ˜¯å¾ˆä¸é”™çš„\nNginxåä»£é…ç½® è¿™é‡Œä¸ºäº†é¿å…DoHè¢«æ»¥ç”¨ï¼Œæˆ‘ä¿®æ”¹äº†é»˜è®¤çš„è·¯å¾„ï¼ŒåŒæ—¶å°†é»˜è®¤è·¯å¾„è¿”å›444ï¼ˆä¸­æ–­è¿æ¥ï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 server { listen 80; listen 443 ssl http2; server_name you.domain; if ($server_port !~ 443){ rewrite ^(/.*)$ https://$host$1 permanent; } ssl_certificate ./cert/xxx.pem; ssl_certificate_key ./cert/xxxx.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; #è¡¨ç¤ºä½¿ç”¨çš„åŠ å¯†å¥—ä»¶çš„ç±»å‹ã€‚ ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #è¡¨ç¤ºä½¿ç”¨çš„TLSåè®®çš„ç±»å‹ã€‚ ssl_prefer_server_ciphers on; location /set/ { proxy_pass http://127.0.0.1:11451/; proxy_redirect / /set/; proxy_cookie_path / /set/; proxy_set_header X-Real-IP $remote_addr; proxy_set_header Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } location /query { proxy_http_version 1.1; proxy_pass https://127.0.0.1:11450/dns-query; proxy_set_header X-Real-IP $remote_addr; proxy_set_header Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } location / { return 444; } } å®¢æˆ·ç«¯é…ç½® Windows åœ¨win11 22H2ä¸­ï¼Œåœ¨ è®¾ç½®â€”â€”ç½‘ç»œå’ŒInternetä¸­ å°±å¯ä»¥è®¾ç½®åŠ å¯†DNSï¼Œè¾“å…¥æœåŠ¡å™¨ipåœ°å€åé€‰æ‹©æ‰‹åŠ¨æ¨¡æ¿å°±å¯ä»¥è¾“å…¥DoHåœ°å€äº†ã€‚\nå¦‚æœè¿˜æ²¡æœ‰å‡çº§åˆ°è¿™ä¸ªç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œpowershellæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\n1 Add-DnsClientDohServerAddress -ServerAddress \u0026#39;123.xx.xx.xx\u0026#39; -DohTemplate \u0026#39;https://your.domain/dns-query\u0026#39; -AllowFallbackToUdp $False -AutoUpgrade $True éšåç›´æ¥å°†ä½ æœåŠ¡å™¨çš„ipè®¾ç½®æˆDNSæœåŠ¡å™¨å°±å¯ä»¥äº†ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨DoHè¿›è¡Œè¯·æ±‚ã€‚\nAndroid å®‰å“ç³»ç»Ÿä»9å¼€å§‹æ”¯æŒDoTï¼Œåªè¦åœ¨è¿æ¥ä¸å…±äº«â€”â€”ç§äººDNSå¡«å…¥æœåŠ¡å™¨çš„åŸŸåå³å¯ã€‚\næ ¹æ®è°·æ­Œçš„å…¬å‘Šï¼Œä»13å¼€å§‹ï¼Œå®‰å“å¼€å§‹æ”¯æŒDoHã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæƒ³è¦ä½¿ç”¨DoHå°±åªèƒ½ä¾é ç¬¬ä¸‰æ–¹è½¯ä»¶äº†ã€‚\nåè®° å•ç‹¬ä½¿ç”¨AdGuardHomeçš„æƒ…å†µä¸‹ï¼Œå¼€å¯ç¼“å­˜å¹³å‡å¤„ç†æ—¶é—´æ˜¯5msï¼›AdGuardHome+mosdnsç›®å‰æ˜¯11msã€‚\næŠ˜è…¾äº†ä¸¤å±‚è§£æï¼Œåªæ˜¯ä¸ºäº†å®ç°CloudFlareçš„IPä¼˜é€‰ï¼Œé€Ÿåº¦æœç„¶ä¸å‡ºæ‰€æ–™çš„æ…¢äº†ä¸€ç‚¹ï¼ˆå½“ç„¶ä¹Ÿå¯èƒ½æ˜¯ç¼“å­˜è¿˜æ²¡å®Œå…¨ï¼‰ã€‚å°±å½“æ˜¯å­¦ä¹ äº†ï¼Œæ­£å¸¸ä½¿ç”¨ç•™å…¶ä¸€å³å¯ã€‚_(:Ğ·)âˆ )_\né€šè¿‡è¿™æ¬¡æŠ˜è…¾ï¼Œå¯¹DNSçš„è®¤è¯†æ›´åŠ æ·±äº†ä¸€æ­¥ï¼Œä¹Ÿæ°´äº†ä¸€ç¯‡åšå®¢ã€‚\n","date":"2022-11-30T11:05:31+08:00","image":"https://lbqaq.top/p/mydns/100669875.webp","permalink":"https://lbqaq.top/p/mydns/","title":"è‡ªå»ºDNSå®ç°åˆ†æµåŠå¹¿å‘Šè¿‡æ»¤"},{"content":"å‰è¨€ è¯´åˆ°ææœºï¼Œé‚£è‚¯å®šç»•ä¸å¼€å¤§åé¼é¼çš„Magiskã€‚å°±æˆ‘æ¥è¯´ï¼Œrootå®Œååšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯å®‰è£…å„ç§å„æ ·çš„æ¨¡å—ï¼Œä½†æ˜¯ï¼Œæˆ‘å´ä»æ¥æ²¡æœ‰ç ”ç©¶è¿‡Magiskçš„å†…å®¹ã€‚åŒæ—¶ï¼Œç°åœ¨ä¹Ÿæœ‰è®¸å¤šå¿ƒæ€€ä¸è½¨çš„äººåˆ¶ä½œé”æœºæ¨¡å—éª—äººåˆ·å…¥ã€‚æ‰€ä»¥ï¼Œäº†è§£Magiskæ¨¡å—çš„ä¸€äº›åŸºæœ¬å†…å®¹å°±æ˜¾å¾—æ¯”è¾ƒé‡è¦äº†ã€‚\nè®¤è¯†Magiskæ¨¡å— æ ¹æ®å®˜æ–¹çš„æ–‡æ¡£ï¼Œä¸€ä¸ªå…¸å‹çš„Magiskæ¨¡å—çš„ç›®å½•åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š1\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 module.zip â”‚ â”œâ”€â”€ META-INF â”‚ â””â”€â”€ com â”‚ â””â”€â”€ google â”‚ â””â”€â”€ android â”‚ â”œâ”€â”€ update-binary \u0026lt;--- ä»å®˜æ–¹ä»“åº“ä¸Šä¸‹è½½çš„module_installer.sh â”‚ â””â”€â”€ updater-script \u0026lt;--- åªæœ‰ä¸€è¡Œæ–‡å­—ä¸º \u0026#34;#MAGISK\u0026#34; â”‚ â”œâ”€â”€ module.prop \u0026lt;--- æ¨¡å—çš„æ ‡è¯†ä¿¡æ¯ â”œâ”€â”€ customize.sh \u0026lt;--- (å¯é€‰)ç”¨äºè‡ªå®šä¹‰æ¨¡å—å®‰è£…è¿‡ç¨‹ â”œâ”€â”€ ... â”œâ”€â”€ ... /* æ¨¡å—çš„å…¶ä½™æ–‡ä»¶ */ â”‚ å¯ä»¥çœ‹å‡ºæ¥ï¼ŒMETA-INFç›®å½•æ˜¯ç”±å®˜æ–¹æä¾›ï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬è¿›è¡Œä¿®æ”¹ã€‚\nmodule.prop è¿™ä¸ªæ–‡ä»¶æ˜¯æ¨¡å—çš„æ ‡è¯†ä¿¡æ¯ï¼Œæ¨¡å—çš„åŸºæœ¬ä¿¡æ¯å°±å­˜æ”¾åœ¨è¿™é‡Œï¼Œæ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ã€‚1\n1 2 3 4 5 6 7 id=\u0026lt;string\u0026gt; name=\u0026lt;string\u0026gt; version=\u0026lt;string\u0026gt; versionCode=\u0026lt;int\u0026gt; author=\u0026lt;string\u0026gt; description=\u0026lt;string\u0026gt; updateJson=\u0026lt;url\u0026gt; (optional) å„é”®å€¼çš„ä½œç”¨è¯´æ˜å¦‚ä¸‹ï¼š\nåç§° è¯´æ˜ id æ¨¡å—çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œéœ€ç¬¦åˆè¯¥æ­£åˆ™è¡¨è¾¾å¼^[a-zA-Z][a-zA-Z0-9._-]+$ name æ¨¡å—åç§° version æ¨¡å—ç‰ˆæœ¬å· versionCode æ¨¡å—ç‰ˆæœ¬æ ‡è¯†ï¼Œå¿…é¡»ä¸ºæ•´æ•°ï¼Œç”¨äºæ›´æ–° author ä½œè€…ä¿¡æ¯ description æ¨¡å—æè¿° updateJson æ›´æ–°ä¿¡æ¯é“¾æ¥ï¼Œç°åœ¨Magiskç§»é™¤äº†å†…éƒ¨çš„æ›´æ–°åŠŸèƒ½ï¼Œè¿™ä¸ªå±æ€§åº”è¯¥æ˜¯æ— ç”¨äº† systemæ–‡ä»¶å¤¹ Magiskçš„ä¸€ä¸ªä¸»è¦ä½œç”¨å°±æ˜¯å¯¹ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œæ³¨å…¥æˆ–æ›¿æ¢ï¼Œåªè¦å°†æ–‡ä»¶æŒ‰é¡ºåºæ”¾å…¥æ­¤ç›®å½•ä¸­å³å¯ã€‚ä¾‹å¦‚æˆ‘æƒ³ä¿®æ”¹hostsæ–‡ä»¶ï¼Œåªéœ€è¦å°†ä¿®æ”¹å¥½çš„hostsæ–‡ä»¶æ”¾å…¥system/etcè¿™ä¸ªç›®å½•ä¸‹ï¼ŒMagiskå°±ä¼šè‡ªåŠ¨å°†å…¶æ›¿æ¢äº†ã€‚\nå¦‚æœè¦æ›¿æ¢/vendorã€/productæˆ–/system_extä¸­çš„æ–‡ä»¶ï¼Œåªéœ€å°†å®ƒä»¬åˆ†åˆ«æ”¾åœ¨system/vendorã€system/productå’Œsystem/system_extä¸‹ã€‚Magiskå°±ä¼šè‡ªåŠ¨æ›¿æ¢å®Œæˆã€‚\ncustomize.sh è¿™æ˜¯è‡ªå®šä¹‰æ¨¡å—å®‰è£…è¿‡ç¨‹ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„æ›¿æ¢æ–‡ä»¶å°±ä¸éœ€è¦ç”¨åˆ°å®ƒã€‚ä½†æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯ä»…éœ€æ›¿æ¢æ–‡ä»¶ï¼Œè¿˜éœ€è¦æ‰§è¡Œä¸€äº›è„šæœ¬ï¼Œè¿™é‡Œå°±éœ€è¦ä½¿ç”¨åˆ°å®ƒäº†ã€‚\næ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œæ”¯æŒä»¥ä¸‹çš„ç¯å¢ƒå˜é‡ï¼š\nå˜é‡å ä½œç”¨ MAGISK_VER (string) å½“å‰å®‰è£…çš„Magiskçš„ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚v20.0ï¼‰ MAGISK_VER_CODE (int) å½“å‰å®‰è£…çš„Magiskçš„ç‰ˆæœ¬ä»£ç ï¼ˆä¾‹å¦‚20000ï¼‰ BOOTMODE (bool) å¦‚æœæ¨¡å—æ­£åœ¨Magiskåº”ç”¨ç¨‹åºä¸­å®‰è£…ï¼Œåˆ™ä¸ºtrue MODPATH (path) å®‰è£…æ¨¡å—æ–‡ä»¶çš„è·¯å¾„ TMPDIR (path) å¯ä»¥ä¸´æ—¶å­˜å‚¨æ–‡ä»¶çš„ä½ç½® ZIPFILE (path) æ‚¨çš„æ¨¡å—çš„å®‰è£…zip ARCH (string) è®¾å¤‡çš„CPUæ¶æ„ï¼Œå€¼å¯ä»¥æ˜¯armã€arm 64ã€x86æˆ–x64 IS64BIT (bool) å¦‚æœ$ARCHä¸ºarm 64æˆ–x64ï¼Œåˆ™ä¸ºtrue API (int) è®¾å¤‡çš„APIçº§åˆ«ï¼ˆAndroidç‰ˆæœ¬ï¼‰ï¼ˆä¾‹å¦‚ï¼ŒAndroid 5.0ä¸º21ï¼‰ ä»¥åŠä»¥ä¸‹çš„å‘½ä»¤ï¼š\nui_print \u0026lt;msg\u0026gt;ï¼šåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºä¿¡æ¯ abort \u0026lt;msg\u0026gt;ï¼šå°†é”™è¯¯æ¶ˆæ¯æ‰“å°åˆ°æ§åˆ¶å°å¹¶ç»ˆæ­¢å®‰è£… set_permå’Œset_perm_recursiveï¼šä¿®æ”¹æ–‡ä»¶æƒé™ å®è·µ ä¿®æ”¹ç³»ç»ŸHosts æˆ‘ä¸€å¼€å§‹æƒ³ç ”ç©¶Magiskçš„å¥‘æœºï¼Œå°±æ˜¯æƒ³è¦ä¿®æ”¹æˆ‘æ‰‹æœºçš„Hostsæ–‡ä»¶ã€‚ä¸€å¼€å§‹æŒ‰ç™¾åº¦çš„æ•™ç¨‹åšï¼Œä½†æ²¡æœ‰æ•ˆæœï¼Œåæ¥å°±å°è¯•äº†ä¸€ä¸‹Magiskæ¨¡å—ï¼Œç›´æ¥å°±æˆåŠŸäº†ã€‚\næœ‰äº†å‰é¢çŸ¥è¯†çš„é“ºå«ï¼Œæƒ³è¦å®ç°è¿™ä¸ªåŠŸèƒ½å°±éå¸¸ç®€å•äº†ï¼Œä¸‹é¢åˆ—å‡ºæˆ‘ä»¬ç¨‹åºçš„ç›®å½•æ ‘ã€‚\n1 2 3 4 5 6 7 8 9 10 11 ChangeHosts.zip â”œâ”€â”€ META-INF â”‚ â””â”€â”€ com â”‚ â””â”€â”€ google â”‚ â””â”€â”€ android â”‚ â””â”€â”€ update-binary â”‚ â””â”€â”€ updater-script â”œâ”€â”€ module.prop â”œâ”€â”€ system â””â”€â”€ etc â””â”€â”€ hosts å®é™…æˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†åªæœ‰module.propå’Œhostsï¼Œhostsæ˜¯æˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±åªè¦å…³æ³¨module.propã€‚\n1 2 3 4 5 6 id=ChangeHosts name=ChangeHosts version=v1.0.0 versionCode=100 author=luoboQAQ description=ä¿®æ”¹hostsæ–‡ä»¶æ¥å±è”½å¹¿å‘Š å¦‚æ­¤çœ‹æ¥ï¼Œå¦‚æœåªè¦æ›¿æ¢æ–‡ä»¶ï¼ŒåŸºæœ¬æ²¡æœ‰ä»»ä½•éš¾åº¦ã€‚\nä½¿ç”¨dnscrypt-proxyå®ç°DoH è¿™éƒ¨åˆ†æˆ‘æ­£åœ¨ç ”ç©¶ï¼Œç­‰ç ”ç©¶æ˜ç™½äº†å°±è¡¥ä¸ŠğŸ•Šï¸ã€‚\nMagiskå®˜æ–¹å¼€å‘æŒ‡å¯¼\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-10-07T11:30:17+08:00","image":"https://lbqaq.top/p/%E7%AE%80%E6%98%93magisk%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%B6%E4%BD%9C/95936465.webp","permalink":"https://lbqaq.top/p/%E7%AE%80%E6%98%93magisk%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%B6%E4%BD%9C/","title":"ç®€æ˜“Magiskæ¨¡å—çš„åˆ¶ä½œ"},{"content":"ä¹‹å‰åœ¨ã€Šå¦‚ä½•ä¼˜é›…çš„çœ‹ç•ªã€‹è¿™ç¯‡æ–‡ç« ä¸­æˆ‘æåˆ°äº†è¡¥å¸§çš„3æ¬¾è½¯ä»¶ï¼Œåœ¨Windowsç³»ç»Ÿä¸Šæˆ‘ä½¿ç”¨çš„æ˜¯dmitriRenderè¿™æ¬¾è½¯ä»¶ï¼Œè€Œå…¶å¹¶æ²¡æœ‰æä¾›Linuxç‰ˆæœ¬çš„ç¨‹åºã€‚ä¸ä¹‹ç›¸åçš„æ˜¯ï¼ŒSVPä¸ä½†æä¾›äº†Linuxç‰ˆæœ¬ï¼Œè€Œä¸”è¿˜æ˜¯å…è´¹çš„ã€‚\nç”±äºå®˜æ–¹æ–‡æ¡£æ˜¯è‹±æ–‡ä¸”æœ‰äº›åœ°æ–¹æ²¡æœ‰è¡¨è¿°æ¸…æ¥šï¼Œè¿™é‡Œæˆ‘å°±å°†æˆ‘å®‰è£…å’Œé…ç½®çš„æ–¹å¼è®°å½•ä¸‹æ¥ä¾›å¤§å®¶å‚è€ƒã€‚\nå®‰è£… å¯¹äºArchç”¨æˆ·éå¸¸ç®€å•ï¼Œç›´æ¥yay -S svp-binå³å¯å®Œæˆå®‰è£…ã€‚\nå¯¹äºå…¶ä»–å‘è¡Œç‰ˆï¼Œå¯ä»¥é€‰æ‹©åœ¨å®˜ç½‘ä¸Šä¸‹è½½å¹¶å®‰è£…ã€‚\nå®‰è£…æ’­æ”¾å™¨ï¼Œè¿™é‡Œæˆ‘æ¨èå®‰è£…VLCï¼Œå› ä¸ºå…¶å®‰è£…ç®€ä¾¿ï¼Œå¹¶ä¸”åé¢é…ç½®SVPä¹Ÿå¾ˆå®¹æ˜“ã€‚\nå®‰è£…ç›´æ¥è¾“å…¥sudo pacman -S vlcå³å¯\nå¦‚æœéœ€è¦GPUåŠ é€Ÿï¼Œè¿˜éœ€è¦å®‰è£…ç›¸åº”çš„æ’ä»¶sudo pacman -S ocl-icdã€‚æˆ‘ä¹‹å‰å°±æ˜¯æ²¡æœ‰å®‰è£…ï¼Œå¯¼è‡´ä¸€ç›´æ— æ³•è¯»å–åˆ°æˆ‘çš„æ˜¾å¡ã€‚\nå®‰è£…å¥½åå°±å¯ä»¥åœ¨SVPèœå•â€”â€”åº”ç”¨ç¨‹åºè®¾ç½®â€”â€”GPUåŠ é€Ÿé‡Œçœ‹åˆ°ä½ çš„æ˜¾å¡äº†\né…ç½® ä¿®æ”¹VLCæ’ä»¶ç›®å½•æƒé™ï¼Œä»¥ä¾¿SVPå†™å…¥æ’ä»¶ã€‚\n1 sudo chmod 777 /usr/lib/vlc/plugins/video_filter åœ¨SVPçš„èœå•é‡Œé€‰æ‹©â€œå·¥å…·â€â€”â€”â€œVLCçš„SVPæ’ä»¶â€ï¼Œå°†å…¶é€‰ä¸­\næ£€æŸ¥/usr/lib/vlc/plugins/video_filterç›®å½•ä¸‹çš„libsvpcontrol_plugin.soå’Œlibvapoursynth_plugin.soæ˜¯å¦æœ‰å¯æ‰§è¡Œæƒé™ï¼Œæˆ‘ä¹‹å‰å°±æ˜¯å› ä¸ºæ²¡æœ‰ç»™æ‰§è¡Œæƒé™ï¼Œå¯¼è‡´VLCä¸€ç›´ä¸ä¼šè°ƒç”¨SVP\n1 2 chmod +x /usr/lib/vlc/plugins/video_filter/libsvpcontrol_plugin.so chmod +x /usr/lib/vlc/plugins/video_filter/libvapoursynth_plugin.so å®˜ç½‘è¡¨ç¤ºéœ€è¦å¼€å¯â€œåäº¤é”™â€æ‰ä¼šå¯ç”¨ï¼Œä½†å®æµ‹å¥½åƒä¸å¼€å¯ä¹Ÿå¯ä»¥è¿è¡Œã€‚\nå¦‚æœVLCåå¥½è®¾ç½®â€”â€”æ˜¾ç¤ºè®¾ç½®â€”â€”å…¨éƒ¨â€”â€”æ§åˆ¶ç•Œé¢æœ‰SVP control interface\nä»¥åŠæ»¤é•œé‡Œæœ‰Vapoursynth filterå³è¡¨æ˜å®‰è£…æˆåŠŸäº†ã€‚\nå°ç»“ å®˜ç½‘ä¸Šçš„å®‰è£…æ–‡æ¡£å†™äº†å¾ˆé•¿ï¼Œä½†å®é™…ä¸Šå¯¹äºVLCä½¿ç”¨SVPå¹¶ä¸å¤æ‚ï¼Œå¤æ‚çš„æ˜¯MPVä½¿ç”¨SVPã€‚æœ¬æ¥æ‰“ç®—é…å‡ å¼ å›¾çš„ï¼Œä½†å®é™…å†™ä¸‹æ¥ä¹Ÿæ²¡æœ‰å‘ç°éœ€è¦å›¾ç‰‡è¾…åŠ©è¯´æ˜çš„ï¼Œé‚£å°±ç®—äº†ï¼Œç›¸ä¿¡èªæ˜çš„ä½ ä¸€å®šèƒ½çœ‹æ‡‚ _(:Ğ·)âˆ )_\n","date":"2022-08-23T09:58:00+08:00","image":"https://lbqaq.top/p/svp4inlinux/100213137.webp","permalink":"https://lbqaq.top/p/svp4inlinux/","title":"åœ¨Linuxä¸‹å®‰è£…SVP4"},{"content":"éšç€ç­”è¾©çš„ç»“æŸï¼Œæ™ºæ…§ç‰©æµè¿™ä¸ªé¡¹ç›®å°±ç®—æ˜¯å½»åº•ç»“æŸäº†ã€‚ä¸å‡ºæ„å¤–çš„è¯ï¼Œè¿™åº”è¯¥æ˜¯æˆ‘å¤§å­¦ç”Ÿæ¶¯çš„å‚åŠ çš„æœ€åä¸€ä¸ªæ¯”èµ›äº†ã€‚çœ‹äº†çœ‹gitçš„è®°å½•ï¼Œæäº¤çš„ä»£ç è¶…è¿‡äº†1kè¡Œï¼ŒåŒæ—¶ä¹ŸèŠ±äº†ä¸å°‘çš„æ—¶é—´åœ¨ä¸Šé¢ã€‚åšäº†è¿™ä¹ˆå¤šä¸œè¥¿ï¼Œä¸ç•™ä¸‹ç‚¹ä»€ä¹ˆæ€»è§‰å¾—ä¸å¥½ï¼Œæƒ³æ¥æƒ³å»ï¼Œè¿˜æ˜¯æŠŠæ¯”èµ›åšçš„ä¸œè¥¿åšä¸ªå°ç»“å§ï¼Œä¹Ÿç®—æ˜¯çºªå¿µæˆ‘è¿™ä¸ç®—ä¸°å¯Œçš„æ¯”èµ›æ—¶å…‰å§ï¼ˆé›¾ï¼‰\nè¿™é‡Œéå¸¸æ„Ÿè°¢æˆ‘ä»¬é˜Ÿé•¿ï¼Œæ¯”èµ›é‡Œè®¸å¤šå…³é”®çš„é—®é¢˜æ˜¯ä»–è§£å†³çš„ï¼Œä»–çš„åŠ¨æ‰‹èƒ½åŠ›å’Œå–„äºæå‡ºåˆ›æ–°æ€§æƒ³æ³•çš„èƒ½åŠ›ï¼Œéƒ½æ˜¯å€¼å¾—æˆ‘å»å­¦ä¹ çš„ã€‚ä¹Ÿæ„Ÿè°¢å¦ä¸€ä½é˜Ÿå‹ï¼Œåœ¨èµ›å‰ç´§å¼ çš„å‡†å¤‡æ—¶é—´é‡Œç‹¬è‡ªä¸€äººåˆ†æ‹…äº†åˆ¶ä½œPPTçš„å·¥ä½œï¼Œå¹¶ä¸”èƒ½åšå‡ºå¦‚æ­¤ç²¾ç¾çš„PPTã€‚ï¼ˆå¤§ä½¬å¸¦å¸¦æˆ‘ _(:Ğ·)âˆ )_ ï¼‰\næ„Ÿæƒ³ä¹Ÿå°±å†™è¿™ä¹ˆå¤šå§ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»æˆ‘ä»¬æ¯”èµ›æ—¶æ‰€åšçš„ä¸€äº›å·¥ä½œå’Œåˆ›æ–°ã€‚\nç¨‹åºçš„å¤§ä½“æ€è·¯å’Œæµç¨‹ æ ¹æ®èµ›é¢˜è¦æ±‚ï¼Œç¨‹åºè¦å®ç°ä¸‹é¢å‡ ä¸ªåŠŸèƒ½ï¼š\nå¯¼èˆªè‡³é‚®ä»¶åˆ†æ‹£å° è¿ç”¨è§†è§‰ç®—æ³•è¯†åˆ«é‚®ä»¶ æœºæ¢°è‡‚å®šä½æŠ“å–é‚®ä»¶ æœºå™¨äººè¿é€é‚®ä»¶æŠ•å…¥æ­£ç¡®çš„é‚®ç®± æ‰€ä»¥ç¨‹åºå¤§è‡´çš„æ­¥éª¤å°±æ˜¯ï¼šå»ºå›¾-\u0026gt;å¯¼èˆªè‡³åˆ†æ‹£å°-\u0026gt;è¯†åˆ«-\u0026gt;æŠ“å–-\u0026gt;å¯¼èˆªè‡³æŠ•é€’ç‚¹-\u0026gt;æŠ•é€’-\u0026gt;å¯¼èˆªè‡³åˆ†æ‹£å°-\u0026gt;\u0026hellip;\u0026hellip;\nè¿™é‡Œæˆ‘å°±æŒ‰ä¸Šé¢çš„è¦æ±‚ä¸€éƒ¨åˆ†ä¸€éƒ¨åˆ†çš„è®²äº†ã€‚\nå»ºå›¾ å»ºå›¾ç®—æ³•æ˜¯Gmappingç®—æ³•ï¼Œè¿™æ˜¯ä¸€ç§åŸºäº2Dæ¿€å…‰é›·è¾¾é€šè¿‡ä½¿ç”¨RBPFç²’å­æ»¤æ³¢æ–¹æ³•æ‰€å®Œæˆçš„äºŒç»´æ …æ ¼åœ°å›¾æ„å»ºSLAMç®—æ³•ï¼Œå®ƒä¹Ÿæ˜¯ç§»åŠ¨æœºå™¨äººä¸­é€‚ç”¨æœ€å¤šçš„ç®—æ³•ã€‚å®ƒå¯¹æ¿€å…‰é›·è¾¾é¢‘ç‡è¦æ±‚ç›¸å¯¹è¾ƒä½ï¼Œç¨³å®šæ€§è¾ƒé«˜ï¼Œä¸”èƒ½å¤Ÿç»“åˆé‡Œç¨‹è®¡ã€é™€èºä»ªç­‰è¿›è¡Œå®šä½ä¸åœ°å›¾æ„å»ºï¼Œæ„å»ºå°åœºæ™¯åœ°å›¾æ—¶é€Ÿåº¦å¿«ã€è®¡ç®—é‡å°ï¼Œç¼ºç‚¹å°±æ˜¯éå¸¸ä¾èµ–é‡Œç¨‹è®¡ï¼Œæ‰€ä»¥æ— æ³•é€‚åº”ä¸å¹³å¦çš„åœ°é¢ï¼Œæ— æ³•ä½¿ç”¨å›ç¯æ£€æµ‹ï¼Œåœ¨å¤§åœºæ™¯ã€ç²’å­å¤šçš„æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ¶ˆè€—èµ„æºã€‚\nå½“ç„¶æˆ‘ä»¬å¹¶æ²¡æœ‰å»ä»”ç»†ç ”ç©¶è¿™ä¸ªç®—æ³•ï¼Œå»ºå›¾çš„è¯æŒ‰ç…§å®˜æ–¹æä¾›çš„æ•™ç¨‹æ¥ä¸€æ­¥æ­¥åšå°±å¥½äº†ã€‚ä¸å¾—ä¸åæ§½çš„æ˜¯æˆ‘ä»¬çš„å°è½¦ä¸€å¼€å§‹åè½®æ˜¯åé«˜çš„ï¼Œå¯¼è‡´é›·è¾¾ä¼šæ‰“åˆ°åœ°é¢ï¼Œé¢„é€‰èµ›å»ºå›¾çš„æ—¶å€™ä¸€ç›´å»ºä¸å¥½ï¼Œæœ€ç»ˆåªèƒ½é ä¾§è¾¹çš„é›·è¾¾æ‰æŠŠå›¾å»ºå¥½ï¼Œå½“æ—¶ä»¥ä¸ºè½¦å°±æ˜¯è¿™æ ·çš„ï¼Œç›´åˆ°æ­£èµ›æ—¶æ‰çŸ¥é“æ˜¯è½¦çš„é—®é¢˜ã€‚æ‰€ä»¥è¿™ç§ç¡¬ä»¶é—®é¢˜ä¸€å®šè¦åŠæ—¶å’Œå‚å•†è”ç³»ï¼Œä¸ç„¶å…¨æ˜¯æ³ªå•ŠğŸ˜­ã€‚\nå¯¼èˆª å¯¼èˆªè¿™é‡Œä¸æ˜¯æˆ‘ä»¬å†™ï¼Œè€Œæ˜¯ä½¿ç”¨äº†å®˜æ–¹æä¾›çš„å¯¼èˆªåŒ…ã€‚æ ¹æ®åŸ¹è®­æ–‡æ¡£ï¼Œè¿™é‡Œä¸»è¦é‡‡ç”¨äº†AMCLè‡ªé€‚åº”è’™ç‰¹å¡ç½—ç®—æ³•ï¼Œå®ƒæ˜¯æœºå™¨äººåœ¨äºŒç»´ç§»åŠ¨è¿‡ç¨‹ä¸­çš„ä¸€ç§æ¦‚ç‡å®šä½ç³»ç»Ÿï¼Œé€šè¿‡å®ƒå®ç°äº†è‡ªé€‚åº”ï¼ˆæˆ– kld é‡‡æ ·ï¼‰çš„è’™ç‰¹å¡ç½—å®šä½æ–¹æ³•ã€‚ç”±äºé‡‡ç”¨ç²’å­æ»¤æ³¢å™¨æ¥è·Ÿè¸ªå·²ç»çŸ¥é“çš„åœ°å›¾ä¸­æœºå™¨äººä½å§¿ï¼Œæ•…å¯¹äºå¤§èŒƒå›´çš„å±€éƒ¨å®šä½é—®é¢˜å·¥ä½œè‰¯å¥½ã€‚è·¯å¾„è§„åˆ’åˆ™æ˜¯æœ€çŸ­è·¯å¾„è§„åˆ’ç®—æ³•ï¼Œä¾‹å¦‚é‡‡ç”¨Floydç®—æ³•ã€Dijkstraç®—æ³•ã€Bellman-Fordç®—æ³•ç­‰ã€‚\nå¯¼èˆªè¿™é‡Œå…¶å®æ˜¯æœ‰å¤§å‘çš„ï¼Œæˆ‘ä»¬æœ€ç»ˆæ¯”èµ›æ—¶å°±æ ½åœ¨è¿™é‡Œäº†ã€‚æˆ‘ä»¬å‘ç°å°è½¦è¿è¡Œæ—¶ï¼Œæ¿€å…‰é›·è¾¾ç»å¸¸ä¼šå‘ç”Ÿé”™ä½ï¼Œå¯¼è‡´å¯¼èˆªå‘ç”Ÿåç§»ã€‚è¿™ç§æƒ…å†µåŸºæœ¬æ˜¯å‡ºç°åœ¨å°è½¦è½¬å‘æ—¶ï¼Œæˆ‘ä»¬æ€€ç–‘æ˜¯è½®å­æ‰“æ»‘ï¼Œä¹Ÿè°ƒç´§äº†åè½®çš„å¼¹ç°§ï¼Œä½†ä¹Ÿæ²¡æœ‰ç”¨ã€‚æˆ‘ä»¬å½“æ—¶è®¤ä¸ºè¿™å°±æ˜¯å°è½¦æœ¬èº«çš„å±€é™æ€§ï¼ŒåŒæ—¶åœ¨å°è½¦è¿è¡Œæ—¶ä¹Ÿä¼šè‡ªåŠ¨è°ƒæ•´è‡³æ­£ç¡®ä½ç½®ï¼Œæˆ‘ä»¬å°±æ²¡æœ‰ç‰¹åˆ«é‡è§†è¿™ä¸ªé—®é¢˜ã€‚ç»“æœåœ¨æ­£å¼æ¯”èµ›æ—¶å¯¼èˆªå°±å‡ºç°åç§»ï¼Œå¯¼è‡´å¥½å‡ ä¸ªåŒ…è£¹éƒ½é”™ä½æŠ“å–äº†ï¼Œè™½ç„¶æœ€ç»ˆéƒ½å…¨éƒ¨æŠ“å–ä¸Šäº†ï¼Œä½†æµªè´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œéå¸¸çš„å¯æƒœã€‚æ‰€ä»¥æœ‰æ—¶é—´çš„è¯ï¼Œä¸€å®šè¦çœ‹çœ‹å®˜æ–¹æä¾›çš„å¯¼èˆªå®šä½ç®—æ³•ï¼Œæˆ–è€…è”ç³»å‚å®¶çœ‹çœ‹é›·è¾¾æœ‰æ— é—®é¢˜ï¼Œä¸ç„¶ç¨‹åºæ²¡é—®é¢˜ï¼Œå´å› ä¸ºç¡¬ä»¶é—®é¢˜è€Œå‡ºé”™è¿˜æ˜¯å¾ˆéš¾å—çš„ã€‚( â€˜-Ï‰à¸Ì€ )\nå›¾åƒè¯†åˆ« å›¾åƒè¯†åˆ«è¿™é‡Œæˆ‘ä»¬æ˜¯è°ƒç”¨æ˜¯ç™¾åº¦çš„PaddleOCRæ¨¡å—ï¼Œç”±äºROSé‡Œçš„Pythonæ˜¯2ç‰ˆæœ¬çš„ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„ä¹Ÿæ˜¯PaddleOCRé‡Œçš„developåˆ†æ”¯è€Œéæœ€æ–°ç‰ˆæœ¬ã€‚\næˆ‘ä»¬ä¸€å¼€å§‹æ˜¯æ‰“ç®—è‡ªå·±è®­ç»ƒPaddleOCRæ¨¡å‹çš„ï¼Œç„¶è€Œæˆ‘å°è¯•äº†ä¸€æ™šä¸Šï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šæ¨¡å‹è®­ç»ƒçš„æ–¹æ³•ï¼Œå¥½ä¸å®¹æ˜“è¿è¡Œäº†ä¸€ä¸ªå…¬å¼€çš„è®­ç»ƒé›†ï¼Œå‘ç°è®­ç»ƒæ—¶é—´è¦ä¸€å¤©å¤šï¼ŒåŒæ—¶è¿˜éœ€è¦è‡ªå·±åšè®­ç»ƒé›†ã€‚è€ƒè™‘åˆ°æ—¶é—´çš„é—®é¢˜ï¼Œæœ€ç»ˆè¿˜æ˜¯é€‰æ‹©é‡‡ç”¨å®˜æ–¹çš„æ¨¡å‹ã€‚å½“ç„¶ï¼Œæœ€ä¸»è¦çš„åŸå› è¿˜æ˜¯åˆ†å¸ƒå¼å›¾åƒè¯†åˆ«æå‡äº†æ€§èƒ½ï¼Œè¿™éƒ¨åˆ†æˆ‘åœ¨ä¸‹é¢ä¼šæåˆ°ï¼Œè¿™é‡Œå°±å…ˆæŒ‰ä¸‹ä¸è¡¨ã€‚\næœºæ¢°è‡‚æŠ“å–åŠæŠ•é€’ æ ¹æ®æœºæ¢°è‡‚çš„å®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œæ¶‰åŠçš„åæ ‡ç³»ä¸»è¦æ˜¯ä¸¤ç§ï¼Œä¸€ç§æ˜¯å…³èŠ‚åæ ‡ç³»ï¼Œä¸€ç›´æ˜¯ç¬›å¡å°”åæ ‡ç³»ã€‚å…³èŠ‚åæ ‡ç³»æ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯é‡‡ç”¨æ¯”è¾ƒç›´è§‚çš„ç¬›å¡å°”åæ ‡ç³»ã€‚\nåŒæ ·ï¼Œæœºæ¢°è‡‚çš„æŠ“å–ä¹Ÿæœ‰3ç§ä¸åŒæ¨¡å¼ï¼šMOVJã€MOVLã€JUMPã€‚MOVJæ¨¡å¼ç›¸è¾ƒäºMOVLæ¨¡å¼ï¼Œé€Ÿåº¦å¿«ï¼›MOVJæ¨¡å¼ç›¸è¾ƒäºJUMPæ¨¡å¼ï¼Œç¨³å®šæ€§é«˜ï¼Œä¸æ˜“è¶Šç•Œã€‚1\nç»¼ä¸Šï¼Œæˆ‘ä»¬çš„æœºæ¢°è‡‚æ§åˆ¶éƒ½é‡‡ç”¨çš„æ˜¯ç¬›å¡å°”åæ ‡ç³»é‡Œçš„MOVEJæ¨¡å¼ï¼Œè¿™æ ·èƒ½ä¿è¯æœºæ¢°è‡‚æŠ“å–æ—¶ä¸ä¼šå‡ºç°è¶…å‡ºæŠ“å–èŒƒå›´çš„å¼‚å¸¸ã€‚\næ§åˆ¶æœºæ¢°è‡‚åŸºæœ¬å°±åªè¦ç”¨åˆ°ä¸‹é¢è¿™å‡ ä¸ªè¯é¢˜ï¼Œè¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼š\nDobotServer/SetPTPCmdï¼šç§»åŠ¨æœºæ¢°è‡‚åˆ°æŒ‡å®šåæ ‡ DobotServer/SetEndEffectorSuctionCupï¼šæœºæ¢°è‡‚æ°”æ³µæ§åˆ¶ DobotServer/ClearAllAlarmsStateï¼šæ¸…é™¤æœºæ¢°è‡‚è­¦æŠ¥ æŠ•é€’å°±æ²¡ä»€ä¹ˆå¥½è¯´çš„äº†ï¼Œæ ¹æ®æ–‡å­—è¯†åˆ«çš„ç»“æœè¿›è¡ŒæŠ•é€’ï¼Œåªè¦èƒ½æŠ“å–åˆ°ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šå‡ºç°æŠ•é€’é”™ä½çš„æƒ…å†µã€‚è¿™é‡Œä¼šå‡ºç°çš„é—®é¢˜ä¸»è¦è¿˜æ˜¯å¯¼èˆªä¸å‡†ï¼Œå®¹æ˜“åæˆ–è€…æ’ã€‚è§£å†³åŠæ³•åªèƒ½æ˜¯ä¸åœçš„æµ‹è¯•æ‰¾å‡†åæ ‡ä»¥åŠå°†å¯¼èˆªç›®çš„ä½ç½®è¿œç¦»æŠ•é€’ç‚¹ã€‚\nä¸€äº›åˆ›æ–°ç‚¹ é”®ç›˜æ“æ§ç¨‹åº åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œä¸»è¦æ˜¯é€šè¿‡å¼€å¯ä¸¤ä¸ªçº¿ç¨‹æ¥å®ç°ç¨‹åºçš„æš‚åœå’Œæ¢å¤ï¼Œå¦‚æœä½¿ç”¨inputå‡½æ•°è¿›è¡Œé”®ç›˜è¾“å…¥çš„æ¥æ”¶ï¼Œåˆ™ä¼šé˜»å¡çº¿ç¨‹ï¼ŒåŒæ—¶åœ¨è¾“å…¥å®Œæˆåè¿˜éœ€è¦æŒ‰ä¸‹å›è½¦ï¼Œä¸æ˜¯å¾ˆåˆé€‚ã€‚å®˜æ–¹æ˜¯æä¾›äº†ä¸€ä¸ªé”®ç›˜æ§åˆ¶ç¨‹åºçš„æ ·ä¾‹ï¼Œç„¶è€Œè¿™ä¸ªç¨‹åºæœ‰ä¸ªæˆ‘è®¤ä¸ºå¾ˆå¤§çš„BUGï¼Œä¼šå¯¼è‡´ç¨‹åºçš„è¾“å‡ºåç§»ã€‚\nä½œä¸ºä¸€ä¸ªå¯¹ä»£ç ç¾è§‚æœ‰æ´ç™–çš„äººï¼Œè¿™æ€ä¹ˆèƒ½å¿ï¼Œäºæ˜¯æˆ‘å¼€å§‹äº†ç™¾åº¦ï¼Œä¸‹é¢æ˜¯æˆ‘æ‰¾åˆ°çš„å¯ä»¥åœ¨Windowså’ŒLinuxä¸¤ç§ç¯å¢ƒä¸‹å®ç°ç±»ä¼¼Cè¯­è¨€getchar()å‡½æ•°çš„ä»£ç ã€‚2\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 def getChar(): # figure out which function to use once, and store it in _func if\u0026#34;_func\u0026#34; not in getChar.__dict__: try: # for Windows-based systems import msvcrt # If successful, we are on Windows getChar._func=msvcrt.getch except ImportError: # for POSIX-based systems (with termios \u0026amp; tty support) import tty, sys, termios # raises ImportError if unsupported def _ttyRead(): fd = sys.stdin.fileno() oldSettings = termios.tcgetattr(fd) try: tty.setcbreak(fd) answer = sys.stdin.read(1) finally: termios.tcsetattr(fd, termios.TCSADRAIN, oldSettings) return answer getChar._func=_ttyRead return getChar._func() answer = getChar() è¿™é‡Œå’Œå®˜æ–¹æä¾›çš„ç¨‹åºä¸»è¦ä¸åŒå°±åœ¨æ˜¯tty.setcbreak(fd)ï¼Œä½†æˆ‘ä¸çŸ¥é“åŸç†ï¼Œä¸è¿‡æ—¢ç„¶èƒ½ç”¨ï¼Œå°±ç®—äº†ğŸ˜‡ã€‚\nä¸Šé¢çš„ä»£ç è¿˜åŒ…æ‹¬åœ¨Windowsç¯å¢ƒä¸‹çš„æƒ…å†µï¼Œæˆ‘ä»¬ä¸éœ€è¦å¦‚æ­¤å¤æ‚ï¼Œç¨ä½œä¿®æ”¹å°†å…¶æ•´åˆè¿›æˆ‘ä»¬çš„ç¨‹åºï¼Œå°±æ„æˆäº†ä¸€ä¸ªå¤šçº¿ç¨‹ç¨‹åºçš„æ¨¡æ¿ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 #!/usr/bin/env python # coding=utf-8 import rospy import threading import sys import termios import tty def main(): \u0026#39;\u0026#39;\u0026#39;ç¨‹åºä¸»è¦é€»è¾‘å…¥å£\u0026#39;\u0026#39;\u0026#39; pass def getKey(): \u0026#39;\u0026#39;\u0026#39;è·å–è¾“å…¥çš„å­—ç¬¦\u0026#39;\u0026#39;\u0026#39; fd = sys.stdin.fileno() oldSettings = termios.tcgetattr(fd) try: tty.setcbreak(fd) key = sys.stdin.read(1) finally: termios.tcsetattr(fd, termios.TCSADRAIN, oldSettings) return key def initKeyListener(): \u0026#39;\u0026#39;\u0026#39;è¾“å…¥ç›‘å¬ç¨‹åº\u0026#39;\u0026#39;\u0026#39; while(1): key = getKey() if key == \u0026#39;k\u0026#39;: rospy.loginfo(\u0026#34;é€€å‡ºç¨‹åº\u0026#34;) os._exit(0) elif key == \u0026#39;a\u0026#39;: rospy.loginfo(\u0026#34;æ¢å¤å¯¼èˆª\u0026#34;) elif key == \u0026#39;s\u0026#39;: rospy.loginfo(\u0026#39;å–æ¶ˆå¯¼èˆª\u0026#39;) elif key == \u0026#39;q\u0026#39;: rospy.loginfo(\u0026#39;å¼€å§‹æ‰§è¡Œç¨‹åº\u0026#39;) if __name__ == \u0026#34;__main__\u0026#34;: # ç»™æœ¬ç¨‹åºåˆå§‹åŒ–ä¸€ä¸ªèŠ‚ç‚¹åç§° rospy.init_node(\u0026#39;match_topic\u0026#39;) # å¼€ä¸€ä¸ªçº¿ç¨‹å¤„ç†é”®ç›˜ç›‘å¬ key_thread = threading.Thread(target=initKeyListener) key_thread.start() # å¼€ä¸€ä¸ªçº¿ç¨‹å¤„ç†ä»»åŠ¡ main_thread = threading.Thread(target=main) main_thread.start() æ‘„åƒå¤´åˆ†è¾¨ç‡æå‡åŠå»ç•¸å˜ ç”±äºROSé»˜è®¤ä»æ‘„åƒå¤´ä¸­è·å–çš„å›¾åƒæ˜¯640*480ï¼Œä¸”å»ç•¸å˜ä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªåˆ†è¾¨ç‡è¿›è¡Œè®¾ç½®çš„ï¼Œè¿™ä¼šå¯¼è‡´æ–‡å­—è¯†åˆ«å¾ˆå®¹æ˜“è¯†åˆ«ä¸å‡ºæ–‡å­—ã€‚æˆ‘ä»¬å°†å°è½¦ä¸Šçš„æ‘„åƒå¤´æ¥å…¥ç”µè„‘ï¼Œå‘ç°æ˜¯720Pçš„ï¼Œæ—¢ç„¶ä½ èƒ½æ¸…æ™°ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ç”¨å‘¢ï¼Ÿäºæ˜¯ï¼Œæˆ‘ä»¬ä¿®æ”¹äº†ç›¸å…³çš„lanuchæ–‡ä»¶ï¼Œå°†æ‘„åƒå¤´çš„åˆ†è¾¨ç‡æå‡åˆ°äº†720Pï¼Œå¹¶ä½¿ç”¨æˆ‘ä»¬è‡ªå·±æ‰“å°çš„æ ‡å®šæ¿è¿›è¡Œæ ‡å®šã€‚\nä¸‹é¢ä»‹ç»ä¸€ä¸‹ä¿®æ”¹çš„æ–¹æ³•\nåœ¨moveit_ws/src/moveit/probot_vision/launchç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°usb_cam_in_hand.launchæ–‡ä»¶ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 \u0026lt;launch\u0026gt; \u0026lt;node name=\u0026#34;usb_cam\u0026#34; pkg=\u0026#34;usb_cam\u0026#34; type=\u0026#34;usb_cam_node\u0026#34; output=\u0026#34;screen\u0026#34; \u0026gt; \u0026lt;param name=\u0026#34;video_device\u0026#34; value=\u0026#34;/dev/video0\u0026#34; /\u0026gt; \u0026lt;param name=\u0026#34;image_width\u0026#34; value=\u0026#34;1280\u0026#34; /\u0026gt; \u0026lt;param name=\u0026#34;image_height\u0026#34; value=\u0026#34;720\u0026#34; /\u0026gt; \u0026lt;param name=\u0026#34;pixel_format\u0026#34; value=\u0026#34;yuyv\u0026#34; /\u0026gt; \u0026lt;param name=\u0026#34;camera_frame_id\u0026#34; value=\u0026#34;cameral_base\u0026#34; /\u0026gt; \u0026lt;param name=\u0026#34;io_method\u0026#34; value=\u0026#34;mmap\u0026#34;/\u0026gt; \u0026lt;param name=\u0026#34;camera_info_url\u0026#34; type=\u0026#34;string\u0026#34; value=\u0026#34;file://$(find probot_vision)/ost-720p.yaml\u0026#34; /\u0026gt; \u0026lt;!--rosparam file=\u0026#34;$(find probot_vision)/ost_4_new.yaml\u0026#34; command=\u0026#34;load\u0026#34; /--\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;/launch\u0026gt; å¯¹å…¶çš„image_widthå’Œimage_heightè¿›è¡Œä¿®æ”¹ï¼Œæ”¹ä¸º1280å’Œ720å³å¯å®ç°æ‘„åƒå¤´ç”»è´¨æå‡è‡³720Pã€‚\nå¯¹äºæ‰‹åŠ¨æ ‡å®šï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡æ ‡å®šæ¿ï¼Œå¯ä»¥è‡ªå·±æ‰“å°ä¹Ÿå¯ä»¥ä¸Šæ·˜å®è´­ä¹°ï¼Œå°±æ˜¯åƒä¸‹é¢è¿™æ ·çš„é»‘ç™½æ–¹æ ¼ã€‚\nç„¶ååœ¨å°è½¦ä¸Šå¯åŠ¨æ ‡å®šç¨‹åºï¼ˆä¸ºä»€ä¹ˆä¸åœ¨è‡ªå·±ç”µè„‘ä¸Šå¯åŠ¨å‘¢ï¼Œå› ä¸ºå°è½¦ä¸Šå·²ç»å¸®ä½ åšå¥½ç¡¬ä»¶ç«¯å£ç»‘å®šäº†ï¼Œåœ¨è‡ªå·±ç”µè„‘ä¸Šè¿˜è¦å†æ¥ä¸€æ¬¡ï¼‰\n1 2 3 4 # å¯åŠ¨æ‘„åƒå¤´ roslaunch usb_cam usb_cam-test.launch # å¯åŠ¨æ ‡å®šç¨‹åº rosrun camera_calibration cameracalibrator.py --size 8x6 --square 0.024 image:=/usb_cam/image_raw camera:=/usb_cam è¿™é‡Œè¦æ³¨æ„ä¿®æ”¹sizeå‚æ•°ï¼Œæ”¹æˆä½ æ ‡å®šæ¿çš„é»‘ç™½æ ¼ä¸­é—´äº¤ç‚¹çš„ä¸ªæ•°ã€‚ squareå‚æ•°è¿™é‡Œåˆ™æ˜¯ä½ æ ‡å®šæ¿ä¸Šæ–¹æ ¼çš„è¾¹é•¿ï¼Œå•ä½æ˜¯ç±³ã€‚\nå¯åŠ¨å®Œæˆä»¥åå°±å¯ä»¥çœ‹åˆ°æ ‡å®šç•Œé¢äº†ï¼Œé€šè¿‡è°ƒæ•´æ ‡å®šæ¿çš„ä¸Šä¸‹å·¦å³ä»¥åŠè§’åº¦ï¼Œè®©å³è¾¹çš„è¿›åº¦æ¡å…¨å˜ç»¿å°±ç®—æ ‡å®šå®Œæˆäº†ã€‚ç‚¹å‡»è®¡ç®—æŒ‰é’®å¾—åˆ°æ•°æ®ï¼Œå°†ä¿å­˜çš„ymlæ–‡ä»¶è·¯å¾„æ›¿æ¢ä¸Šé¢çš„camera_info_urlã€‚\nä»…ä»…æ˜¯è¿™æ ·è¿˜ä¸ç®—æ˜¯å®Œæˆï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹å»ç•¸å˜ç¨‹åºé‡Œçš„å‚æ•°ï¼Œå°†moveit_ws/src/moveit/probot_vision/src/image_correct.cppé‡Œçš„ç›¸å…³å‚æ•°æŒ‰ç…§ymlæ–‡ä»¶çš„å‚æ•°è¿›è¡Œä¿®æ”¹ã€‚ï¼ˆè¿™é‡Œæœ‰ç–‘ä¼¼æ˜¯è‡ªåŠ¨è¯»å–çš„ä»£ç ï¼Œä½†è¢«æ³¨é‡Šäº†ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æµ‹è¯•èƒ½ä¸èƒ½ç”¨ï¼‰ä¿®æ”¹å¥½åå°±å¯ä»¥æ‰§è¡Œç¼–è¯‘äº†ï¼Œæˆ‘ä»¬åœ¨moveit_wsç›®å½•ä¸‹æ‰§è¡Œcatkin_make --pkg probot_visionï¼Œç­‰å¾…ç¼–è¯‘å®Œæˆåè¿™é¡¹å·¥ä½œå°±ç®—å®Œæˆäº†ã€‚\nåé€€è·ç¦»åˆ¤æ–­ ç”±äºå°è½¦çš„åé¢æ˜¯æ²¡æœ‰é›·è¾¾çš„ï¼Œä¸ºäº†é¿å…ç¢°æ’ï¼Œæˆ‘ä»¬ç¼–å†™äº†åŸºäºæ‘„åƒå¤´çš„åé€€è·ç¦»åˆ¤æ–­ã€‚å½“å°è½¦åˆ°è¾¾åˆ†æ‹£å°å‰æ—¶ï¼Œè°ƒç”¨æ‘„åƒå¤´è¿›è¡Œæ‹ç…§ï¼Œå¯¹å…¶è¿›è¡Œè“è‰²åŒºåŸŸçš„è¯†åˆ«ï¼Œå¾—åˆ°åˆ†æ‹£å°åœ¨å›¾åƒä¸­çš„åƒç´ ä½ç½®ï¼Œå†åˆ©ç”¨å…¬å¼è¿›è¡Œè½¬åŒ–ï¼Œå¾—åˆ°å°è½¦å½“å‰è·ç¦»åˆ†æ‹£å°çš„è·ç¦»ï¼Œæœ€åä½¿ç”¨checkè¯é¢˜æ§åˆ¶å°è½¦åé€€è‡³è·ç¦»åˆ†æ‹£å°5cmå·¦å³çš„ä½ç½®ï¼Œæ—¢é¿å…äº†ç¢°æ’ï¼Œåˆæœ€å¤§åŒ–äº†æŠ“å–èŒƒå›´ã€‚\nç”±æ¶ˆæ¯é©±åŠ¨ç¨‹åºé€»è¾‘ åœ¨ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬çš„ç¨‹åºæ˜¯åœ¨å‡½æ•°é‡Œè°ƒç”¨å°è½¦å¯¼èˆªï¼Œå¹¶é˜»å¡ç›´åˆ°å¯¼èˆªæˆåŠŸå†ç»§ç»­æ‰§è¡Œã€‚è¿™æ ·çš„ç¨‹åºæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“å°è½¦å‡ºç°é”™è¯¯æ—¶ï¼Œæ— æ³•ç«‹å³åœä¸‹å°è½¦å¹¶ä¿å­˜å½“å‰ç¨‹åºæ‰§è¡Œçš„è¿›åº¦ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬ä¾¿å°†ç¨‹åºä¿®æ”¹ä¸ºåŸºäºROSæ¶ˆæ¯æ¥é©±åŠ¨ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ç¨‹åºåªæœ‰æ”¶åˆ°æˆåŠŸæˆ–è€…å¤±è´¥çš„æ¶ˆæ¯åæ‰ä¼šæ‰§è¡Œå¯¹åº”çš„é€»è¾‘ï¼Œä¾¿äºå¤±è´¥åçŠ¶æ€çš„æ¢å¤ã€‚\næƒ³è¦å®ç°ç›¸å…³çš„åŠŸèƒ½ï¼Œé¦–å…ˆæ˜¯å¯¼èˆªä¸èƒ½é‡‡ç”¨åŸæ¥åŸºäºåŠ¨ä½œçš„æ¨¡å¼äº†ï¼Œè€Œæ˜¯æ”¹æˆåŸºäºæ¶ˆæ¯çš„æ¨¡å¼ã€‚æˆ‘ä»¬åœ¨ç¨‹åºè¿è¡Œçš„ä¸€å¼€å§‹æ³¨å†Œç›¸å…³çš„è¯é¢˜å‘å¸ƒè€…ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 def initPublisher(): # å¾®è°ƒå‘å¸ƒå™¨ global checkPub # æš‚åœå¯¼èˆªå‘å¸ƒå™¨ global pauseNav # ç›®æ ‡ç‚¹å‘å¸ƒå™¨ global goalPub goalPub = rospy.Publisher( \u0026#39;move_base/goal\u0026#39;, MoveBaseActionGoal, queue_size=1) # ç›®æ ‡ç‚¹é‡Œé¢çš„goal_idçš„idä¸ä¸Šä¸€æ¬¡çš„idä¸èƒ½ç›¸åŒ checkPub = rospy.Publisher(\u0026#39;check\u0026#39;, String, queue_size=1) pauseNav = rospy.Publisher( \u0026#39;move_base/cancel\u0026#39;, GoalID, queue_size=1) åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ³¨å†Œç›¸å…³è¯é¢˜çš„ç›‘å¬è€…ä»¥åŠå¯¹åº”çš„å›è°ƒå‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 def initListener(): # è®¢é˜…å¯¼èˆªç»“æœè¯é¢˜æ•°æ® rospy.Subscriber(\u0026#39;move_base/result\u0026#39;, MoveBaseActionResult, navCallback) # è®¢é˜…ï¼ˆå¾®è°ƒï¼‰èµ°å›ºå®šè·ç¦»ç»“æœè¯é¢˜æ•°æ® rospy.Subscriber(\u0026#39;check_server/result\u0026#39;, check_msgActionResult, checkCallback) rospy.loginfo(\u0026#34;åˆå§‹åŒ–è®¢é˜…è¯é¢˜æˆåŠŸ\u0026#34;) def checkCallback(data): \u0026#39;\u0026#39;\u0026#39;ä½ç½®å¾®ç§»å›è°ƒ\u0026#39;\u0026#39;\u0026#39; if data.result.issuccess: rospy.loginfo(\u0026#34;ä½ç½®å¾®è°ƒå®Œæˆ\u0026#34;) pass def navCallback(data): \u0026#39;\u0026#39;\u0026#39;å¯¼èˆªæ¶ˆæ¯å›è°ƒ\u0026#39;\u0026#39;\u0026#39; PROVINCES = {\u0026#34;å››å·\u0026#34;, \u0026#34;å®‰å¾½\u0026#34;, \u0026#34;æ¹–å—\u0026#34;, \u0026#34;å¹¿ä¸œ\u0026#34;, \u0026#34;æµ™æ±Ÿ\u0026#34;, \u0026#34;æ±Ÿè‹\u0026#34;, \u0026#34;ç¦å»º\u0026#34;, \u0026#34;æ²³å—\u0026#34;} if data.status.status == 3: rospy.loginfo(\u0026#34;å¯¼èˆªåˆ°è¾¾æŒ‡å®šåœ°ç‚¹\u0026#34;) goal_name = data.status.goal_id.id.split(\u0026#39;_\u0026#39;)[0] if goal_name[:9] == \u0026#34;åˆ†æ‹£å°\u0026#34;: # åˆ°è¾¾åˆ†æ‹£å°å‰ pass elif goal_name[:6] in PROVINCES: # åˆ°è¾¾æŠ•é€’ç‚¹ pass else: rospy.logwarn(\u0026#34;æœªçŸ¥çš„èŠ‚ç‚¹:{}\u0026#34;.format(data.status.goal_id.id)) elif data.status.status == 4: rospy.logwarn(\u0026#34;å¯¼èˆªå¤±è´¥,å½“å‰idä¸º:{}\u0026#34;.format(data.status.goal_id.id)) else: rospy.logwarn(\u0026#34;å¯¼èˆªè¢«å–æ¶ˆ:{}\u0026#34;.format(data.status.status)) åœ¨å¯¼èˆªæ¶ˆæ¯å›è°ƒä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨goal_id.idæ¥è¿›è¡Œç›®æ ‡åœ°ç‚¹çš„ä¼ é€’ï¼Œå…¶æ„é€ æ¨¡å¼ä¸ºtargetName +'_' + str(time.time())[-9:-3]ã€‚è¿™æ ·æ—¢æœ‰ç›®æ ‡åœ°ç‚¹ä¿¡æ¯ï¼Œä¹Ÿé¿å…äº†idé‡å¤ã€‚è¿™é‡Œä¸€ä¸ªæ±‰å­—å 3ä½ï¼Œæ‰€ä»¥çœ‹åˆ°ä¸Šé¢çš„[:6]çš„å†™æ³•ä¹Ÿå°±ä»£è¡¨å‰2ä¸ªå­—ã€‚\nåˆ†å¸ƒå¼éƒ¨ç½²å›¾åƒè¯†åˆ« å¯¹äºå›¾åƒè¯†åˆ«ï¼Œæˆ‘ä»¬ä¸€å¼€å§‹æ˜¯æ”¾åœ¨å°è½¦ä¸Šè¿›è¡Œçš„ï¼Œç»“æœå‘ç°åœ¨å°è½¦ä¸Šè¯†åˆ«é€Ÿåº¦å¹¶ä¸æ˜¯å¾ˆå¿«ï¼Œå¹³å‡æ¯å¼ å›¾ç‰‡éœ€è¦5~6ç§’çš„æ—¶é—´æ‰èƒ½å®Œæˆã€‚\næ£€æŸ¥å°è½¦çš„CPUå‘ç°ï¼Œè¿™æ€§èƒ½è¿˜æ˜¯ä¸è¦æŒ‡æœ›å…¶æ¥è·‘å›¾åƒè¯†åˆ«ç®—æ³•äº†ï¼Œè¿˜æ˜¯é‡‡ç”¨åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šè·‘å›¾åƒè¯†åˆ«ï¼Œå°†ç»“æœè¿”å›ç»™å°è½¦å§ã€‚\næƒ³è¦å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œå°±éœ€è¦åœ¨ç”µè„‘é‡Œè£…å¥½ROSç¯å¢ƒï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥ä½¿ç”¨è™šæ‹Ÿæœºï¼Œé‡Œé¢å·²ç»é…ç½®å¥½ç›¸å…³çš„ç¯å¢ƒäº†ã€‚\nåœ¨~/.bashrcé‡Œå¢åŠ export ROS_MASTER_URI=http://192.168.31.200:11311ï¼Œè®©è™šæ‹Ÿæœºä½¿ç”¨å°è½¦ä½œä¸ºæœåŠ¡ç«¯ã€‚ä¹‹åå°±æ˜¯ç¼–å†™ç¨‹åºæ³¨å†ŒæœåŠ¡ï¼Œä¾›ä¸»ç¨‹åºè°ƒç”¨äº†ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒç”¨ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™äº†ç›¸åº”çš„æ•°æ®ç»“æ„ã€‚\næˆ‘ä»¬æ³¨å†Œäº†Province.msgï¼Œå­˜æ”¾è¯†åˆ«åˆ°çš„å¿«é€’ç›’ä¸Šæ‰€éœ€çš„æ•°æ®ã€‚nameä»£è¡¨çœä»½åç§°ï¼Œxå’Œyåˆ†åˆ«æ˜¯ç›¸å¯¹åç§»é‡ã€‚\n1 2 3 string name float32 x float32 y ç„¶åæ³¨å†Œäº†ProvinceList.srvï¼Œä½œä¸ºæˆ‘ä»¬æœåŠ¡çš„æ¶ˆæ¯ã€‚\n1 2 --- Province[] provinces ç”±äºä½¿ç”¨äº†è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹ï¼Œè¦æ³¨æ„ä¿®æ”¹CMakeLists.txtï¼Œå°†ç›¸åº”çš„æ–‡ä»¶æ·»åŠ è¿›å»ï¼Œå¹¶æ³¨æ„å¼•å…¥message_generationï¼Œå¦åˆ™ä¸ä¼šç”Ÿæˆä¾›Pythonè°ƒç”¨çš„æ¶ˆæ¯ç±»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 cmake_minimum_required(VERSION 3.0.2) project(imgocr) ## Compile as C++11, supported in ROS Kinetic and newer # add_compile_options(-std=c++11) ## Find catkin macros and libraries ## if COMPONENTS list like find_package(catkin REQUIRED COMPONENTS xyz) ## is used, also find other catkin packages find_package(catkin REQUIRED COMPONENTS rospy std_msgs sensor_msgs message_generation ) ## System dependencies are found with CMake\u0026#39;s conventions # find_package(Boost REQUIRED COMPONENTS system) ## Uncomment this if the package has a setup.py. This macro ensures ## modules and global scripts declared therein get installed ## See http://ros.org/doc/api/catkin/html/user_guide/setup_dot_py.html # catkin_python_setup() ## Generate messages in the \u0026#39;msg\u0026#39; folder add_message_files( FILES Province.msg ) ## Generate services in the \u0026#39;srv\u0026#39; folder add_service_files( FILES ProvinceList.srv ) ## Generate added messages and services with any dependencies listed here generate_messages( DEPENDENCIES std_msgs sensor_msgs ) catkin_package( CATKIN_DEPENDS rospy std_msgs message_runtime ) include_directories( # include ${catkin_INCLUDE_DIRS} ) åŒæ ·ï¼Œåœ¨package.xmlé‡Œä¹Ÿè¦æ·»åŠ message_generationç­‰ä¾èµ–\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 \u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;package format=\u0026#34;2\u0026#34;\u0026gt; \u0026lt;name\u0026gt;imgocr\u0026lt;/name\u0026gt; \u0026lt;version\u0026gt;0.0.0\u0026lt;/version\u0026gt; \u0026lt;description\u0026gt;The imgocr package\u0026lt;/description\u0026gt; \u0026lt;maintainer email=\u0026#34;eaibot@todo.todo\u0026#34;\u0026gt;eaibot\u0026lt;/maintainer\u0026gt; \u0026lt;license\u0026gt;TODO\u0026lt;/license\u0026gt; \u0026lt;buildtool_depend\u0026gt;catkin\u0026lt;/buildtool_depend\u0026gt; \u0026lt;build_depend\u0026gt;rospy\u0026lt;/build_depend\u0026gt; \u0026lt;build_depend\u0026gt;std_msgs\u0026lt;/build_depend\u0026gt; \u0026lt;build_depend\u0026gt;message_generation\u0026lt;/build_depend\u0026gt; \u0026lt;build_export_depend\u0026gt;rospy\u0026lt;/build_export_depend\u0026gt; \u0026lt;build_export_depend\u0026gt;std_msgs\u0026lt;/build_export_depend\u0026gt; \u0026lt;exec_depend\u0026gt;rospy\u0026lt;/exec_depend\u0026gt; \u0026lt;exec_depend\u0026gt;std_msgs\u0026lt;/exec_depend\u0026gt; \u0026lt;exec_depend\u0026gt;message_runtime\u0026lt;/exec_depend\u0026gt; \u0026lt;export\u0026gt; \u0026lt;/export\u0026gt; \u0026lt;/package\u0026gt; è¿™æ ·ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªæ–‡å­—è¯†åˆ«èŠ‚ç‚¹äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 #!/usr/bin/env python # encoding: utf-8 from imp import reload import sys import rospy import cv2 from imgocr.srv import ProvinceList, ProvinceListResponse from imgocr.msg import Province from sensor_msgs.msg import CompressedImage from cv_bridge import CvBridge, CvBridgeError import time # æ”¯æŒä¸­æ–‡ reload(sys) sys.setdefaultencoding(\u0026#34;utf8\u0026#34;) def getImage(): \u0026#39;\u0026#39;\u0026#39;è·å–æ‘„åƒå¤´çš„å›¾ç‰‡\u0026#39;\u0026#39;\u0026#39; data = rospy.wait_for_message( \u0026#39;/usb_cam/image_correct/compressed\u0026#39;, CompressedImage, timeout=15.0) try: cv_image = CvBridge().compressed_imgmsg_to_cv2(data, \u0026#34;bgr8\u0026#34;) except CvBridgeError as e: rospy.logerr(e) cv_image = cv2.rotate(cv_image, cv2.ROTATE_180) cv_image = cv2.flip(cv_image, 1) return cv_image def doReq(req): rospy.loginfo(\u0026#34;å¼€å§‹æ‰§è¡Œæ–‡å­—è¯†åˆ«\u0026#34;) start_time = time.time() img = getImage() pass rospy.loginfo(\u0026#34;è¯†åˆ«ç”¨æ—¶ï¼š{}\u0026#34;.format(time.time()-start_time)) resp = ProvinceListResponse() for pro in ans: a = Province() a.name = pro[\u0026#34;province\u0026#34;] a.x = pro[\u0026#34;x\u0026#34;] a.y = pro[\u0026#34;y\u0026#34;] resp.provinces.append(a) return resp def main(): rospy.init_node(\u0026#34;imgocr\u0026#34;) server = rospy.Service(\u0026#34;imgocr/getProvince\u0026#34;, ProvinceList, doReq) rospy.loginfo(\u0026#34;èŠ‚ç‚¹åˆå§‹åŒ–å®Œæˆ\u0026#34;) rospy.spin() if __name__ == \u0026#34;__main__\u0026#34;: main() è¿™é‡Œæˆ‘ä»¬ä¸€å¼€å§‹è·å–æ‘„åƒå¤´çš„å›¾ç‰‡æ˜¯é‡‡ç”¨/usb_cam/image_correctè¿™ä¸ªè¯é¢˜ï¼Œä½†è¿™ä¸ªè¯é¢˜å¾—åˆ°çš„å›¾ç‰‡æ˜¯æœªå‹ç¼©çš„ï¼Œä½¿ç”¨rostopic bw /usb_cam/image_correctå¯ä»¥çœ‹å‡ºå¤§å°å·®ä¸å¤šæ˜¯å¥½å‡ Mï¼Œè¿™å°±ä¼šå¯¼è‡´è·å–å›¾åƒçš„æ—¶é•¿è¿œè¶…æ–‡å­—è¯†åˆ«æ—¶é•¿ï¼Œç”šè‡³æ˜¯æ— æ³•è·å–åˆ°å›¾ç‰‡ã€‚æˆ‘ä»¬æ ¹æ®æ¢ç´¢ï¼Œå‘ç°/usb_cam/image_correct/compressedè¯é¢˜æä¾›çš„æ˜¯å‹ç¼©åçš„å›¾ç‰‡ï¼Œä½¿ç”¨åè·å–å›¾åƒçš„æ—¶é•¿å¤§å¤§å‡å°ã€‚\nä½¿ç”¨åˆ†å¸ƒå¼å›¾åƒè¯†åˆ«åï¼Œè¯†åˆ«æ—¶é•¿åŸºæœ¬æ§åˆ¶åœ¨2Så†…ã€‚\nç”±äºæˆ‘ä»¬æ˜¯ä½¿ç”¨è™šæ‹Ÿæœºï¼Œæ— æ³•è°ƒç”¨çœŸæœºçš„æ˜¾å¡ï¼Œå¦‚æœæœ‰æœºä¼šçš„è¯ï¼Œå¯ä»¥å°è¯•åœ¨çœŸæœºä¸Šè£…ç›¸åº”çš„ç¯å¢ƒï¼Œä½¿ç”¨GPUæ¥è¿›è¡Œå›¾åƒè¯†åˆ«ï¼Œé€Ÿåº¦åº”è¯¥ä¼šæ›´è¿›ä¸€æ­¥ã€‚\næœºæ¢°è‡‚å¼‚å¸¸è‡ªåŠ¨æ£€æµ‹å’Œæ¸…é™¤ åœ¨ä¸Šé¢ä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬è·å–åˆ°çœä»½çš„åæ ‡å°±å¯ä»¥é€è‡³æœºæ¢°è‡‚è¿›è¡ŒæŠ“å–äº†ã€‚ä½†æ˜¯ï¼Œæœºæ¢°è‡‚çš„æŠ“å–èŒƒå›´æ˜¯æœ‰é™çš„ï¼Œä¸€æ—¦è¶…å‡ºæŠ“å–èŒƒå›´æœºæ¢°è‡‚å°±ä¼šåœæ­¢æ‰§è¡Œç›´è‡³æ‰§è¡Œæ¸…é™¤è­¦æŠ¥ã€‚ä¸€ç§æ€è·¯æ˜¯æˆ‘ä»¬é¦–å…ˆæ˜¯åœ¨ä¸€ä¸ªå›ºå®šçš„å®šå»è¯†åˆ«é‚®ä»¶ï¼Œé¦–å…ˆè®°å½•è¿™ä¸ªç‚¹çš„é«˜åº¦ï¼Œç„¶åæˆ‘ä»¬éœ€è¦é™åˆ°æ¡Œé¢å»å¸å–é‚®ä»¶ï¼Œè¿™æ˜¯ç¬¬äºŒä¸ªé«˜åº¦ï¼Œæˆ‘ä»¬åªéœ€è¦æµ‹å®šè¿™ä¸¤ä¸ªé«˜åº¦Zçš„å‰æä¸‹ï¼ŒYçš„ç§»åŠ¨èŒƒå›´å°±å¯ä»¥äº†ã€‚1\nè¿™ç§æ€è·¯ç¡®å®å¯è¡Œï¼Œä½†å¦‚æœåæœŸæ›´æ¢äº†æœºæ¢°è‡‚é«˜åº¦ï¼Œåˆè¦æ‰‹åŠ¨æµ‹é‡ï¼Œååˆ†éº»çƒ¦ã€‚äºæ˜¯ï¼Œæˆ‘æƒ³äº†å¦ä¸€ä¸ªæ€è·¯ï¼Œé€šè¿‡æŸ¥è¯¢APIæ–‡æ¡£ï¼Œæˆ‘æ‰¾åˆ°äº†è­¦æŠ¥æ£€æµ‹çš„APIï¼Œé‚£å°±å¥½è¯´äº†ã€‚åœ¨æ‰§è¡Œå¯èƒ½è¶Šç•Œçš„æŒ‡ä»¤åæ¥ä¸Šå¼‚å¸¸æ£€æµ‹ï¼Œå¦‚æœå¼‚å¸¸å°±è‡ªåŠ¨æ¸…é™¤ï¼Œè¿™æ ·å°±èƒ½è‡ªåŠ¨åŒ–çš„åˆ¤æ–­äº†ã€‚\nè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #!/usr/bin/env python # coding=utf-8 import rospy from dobot.srv import GetAlarmsState, ClearAllAlarmsState def getAlarmsState(): \u0026#39;\u0026#39;\u0026#39; æŸ¥è¯¢æœºæ¢°è‡‚æŠ¥è­¦çŠ¶æ€ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œæ¸…é™¤ return æ˜¯å¦å­˜åœ¨æŠ¥è­¦ \u0026#39;\u0026#39;\u0026#39; rospy.wait_for_service(\u0026#39;DobotServer/GetAlarmsState\u0026#39;) rospy.wait_for_service(\u0026#39;DobotServer/ClearAllAlarmsState\u0026#39;) try: client = rospy.ServiceProxy( \u0026#39;DobotServer/GetAlarmsState\u0026#39;, GetAlarmsState) client2 = rospy.ServiceProxy( \u0026#39;DobotServer/ClearAllAlarmsState\u0026#39;, ClearAllAlarmsState) a = client() isError = False if a.alarmsState != \u0026#34;\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\u0026#34;: rospy.loginfo(\u0026#34;æ£€æµ‹åˆ°è­¦æŠ¥ï¼Œè‡ªåŠ¨è¿›è¡Œæ¸…é™¤\u0026#34;) client2() isError = True return isError except rospy.ServiceException as e: rospy.logerr(\u0026#34;æŸ¥è¯¢æœºæ¢°è‡‚æŠ¥è­¦çŠ¶æ€å¤±è´¥: %s\u0026#34; % e) ROSæ—¥å¿—è¾“å‡ºçº§åˆ«æ§åˆ¶ åœ¨ä¸Šé¢æˆ‘æåˆ°è¿‡ï¼Œæˆ‘å¯¹ä»£ç ç¾è§‚æœ‰æ´ç™–ï¼Œé‚£ç¨‹åºè¾“å‡ºä¹Ÿè‡ªç„¶ä¸èƒ½æ”¾è¿‡ã€‚è¿™ä¸ªé¡¹ç›®é‡Œæ‰€æœ‰çš„è¾“å‡ºæˆ‘éƒ½ä½¿ç”¨rospy.logæ¥è¾“å‡ºï¼Œè¿™å°±å¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰äº›è¾“å‡ºæˆ‘å°†å…¶è®¾ä¸ºDEBUGçº§åˆ«ï¼Œè€ŒROSé»˜è®¤çš„æ—¥å¿—çº§åˆ«ä¸ºINFOï¼Œå¯¼è‡´è¿™äº›ä¿¡æ¯æ ¹æœ¬çœ‹ä¸åˆ°ã€‚æ¯æ¬¡æƒ³çœ‹æ—¶æ‰‹åŠ¨å°†ä»£ç æ¢ä¸ºINFOå†æ¢å›å»ï¼Œè™½ç„¶å¯è¡Œï¼Œä½†ä¸ä¼˜é›…ã€‚äºæ˜¯æˆ‘ç ”ç©¶äº†ä¸€ä¸‹ROSçš„æ—¥å¿—æ–¹é¢çš„æ–‡æ¡£ï¼Œå‘ç°æ˜¯æœ‰æ–¹æ³•æ¥å®ç°æ—¥å¿—è¾“å‡ºçº§åˆ«çš„æ§åˆ¶çš„ã€‚\nåœ¨ç»ˆç«¯è¿è¡Œrqt_logger_levelï¼Œä¹‹åé€‰æ‹©ä½ çš„ç¨‹åºèŠ‚ç‚¹ä¸­çš„rosoutï¼Œåœ¨åé¢ä¿®æ”¹å°±å¯ä»¥ä¿®æ”¹ROSæ—¥å¿—è¾“å‡ºçš„çº§åˆ«äº†ã€‚\næ—¶é—´æœ‰é™ï¼Œæˆ‘å°±æ‰¾åˆ°äº†è¿™ä¸€ä¸ªå¯è¡Œçš„æ–¹æ³•ï¼Œå…¶ä½™æ–¹æ³•æˆ‘æµ‹è¯•åå¹¶æ²¡ç”Ÿæ•ˆï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ³•æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚\nä¸€äº›å°å·¥å…· åœ¨å†™ç¨‹åºæ—¶ï¼Œä¸ºäº†é¿å…é‡å¤å·¥ä½œï¼Œè¿˜æ˜¯åšäº†ä¸€äº›å°å·¥å…·ï¼Œæœ¬ç€â€œä¸è¦é‡å¤é€ è½®å­â€çš„ç²¾ç¥ï¼Œåœ¨æ­¤ä¸€å¹¶å¼€æºäº†ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°æœ‰éœ€è¦çš„åŒå­¦ã€‚\néšæœºå¿«é€’ç®±é¡ºåºç”Ÿæˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #!/usr/bin/env python # coding=utf-8 import random provinces = [] for i in range(3): provinces.append(\u0026#39;å››å·\u0026#39;) for i in range(2): provinces.append(\u0026#39;å®‰å¾½\u0026#39;) for i in range(2): provinces.append(\u0026#39;æ¹–å—\u0026#39;) for i in range(3): provinces.append(\u0026#39;å¹¿ä¸œ\u0026#39;) for i in range(3): provinces.append(\u0026#39;æµ™æ±Ÿ\u0026#39;) for i in range(2): provinces.append(\u0026#39;æ±Ÿè‹\u0026#39;) for i in range(3): provinces.append(\u0026#39;ç¦å»º\u0026#39;) for i in range(2): provinces.append(\u0026#39;æ²³å—\u0026#39;) random.shuffle(provinces) for pro in provinces: print(pro) EAIèµ„æºç‚¹åæ ‡æ ¼å¼è½¬yamlæ ¼å¼ å°†å®˜æ–¹QTEAIBotDemoPub(VER2)è¿™ä¸ªç¨‹åºåˆ›å»ºçš„å¯¼èˆªç›®æ ‡ç‚¹è½¬æˆyamlæ ¼å¼ï¼Œæ–¹ä¾¿äººä¿®æ”¹åŠç¨‹åºè°ƒç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #!/usr/bin/env python # coding=utf-8 loacate = input(\u0026#34;file loacate:\u0026#34;) file = open(loacate, \u0026#34;r\u0026#34;) file_data = file.readlines() for row in file_data: tmp_list = row.split(\u0026#39;,\u0026#39;) print(tmp_list[0]+\u0026#34;:\u0026#34;) positions = tmp_list[2].split(\u0026#39;#\u0026#39;) print(\u0026#34; x: \u0026#34;+positions[0]) print(\u0026#34; y: \u0026#34;+positions[1]) orientations = tmp_list[3].split(\u0026#39;#\u0026#39;) print(\u0026#34; z: \u0026#34;+orientations[2]) print(\u0026#34; w: \u0026#34;+orientations[3]) å°ç»“ è¿™ä¸ªé¡¹ç›®åˆ°æ­¤ä¹Ÿå°±å®Œå…¨ç»“æŸäº†ï¼Œå›å¤´çœ‹æ¥ï¼Œè¿™ä¸ªé¡¹ç›®ä¹Ÿæ˜¯æ¶‰åŠäº†è®¸å¤šçŸ¥è¯†ï¼Œè¯¸å¦‚å›¾åƒè¯†åˆ«ã€è‡ªä¸»å®šä½ç­‰ç­‰ï¼Œä¸è¿‡æ—¶é—´æœ‰é™ï¼ŒåŸºæœ¬éƒ½æ²¡æ€ä¹ˆäº†è§£å…¶ä¸­åŸç†ï¼Œåªæ˜¯è°ƒç”¨äº†ç›¸å…³çš„æ¥å£ï¼Œå¦‚æœä»¥åæœ‰ç©ºï¼Œå¯ä»¥ç»§ç»­ç ”ç©¶ç ”ç©¶ğŸ˜‡ã€‚\nç¬¬äº”å¤©ï¼šäº†è§£è¶Šç–†dobotæœºæ¢°è‡‚ï¼Œä½¿ç”¨pythonï¼Œç¼–å†™é€šè¿‡rosæœåŠ¡æ§åˆ¶æœºæ¢°è‡‚è¿åŠ¨ç¨‹åº_ç“œæ´²å¤§å¤§çš„åšå®¢-CSDNåšå®¢_dobotæœºæ¢°è‡‚\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nå…³äºè¾“å…¥ï¼šPythonä»ç”¨æˆ·è¯»å–å•ä¸ªå­—ç¬¦ | ç å†œå®¶å›­\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-08-21T21:20:00+08:00","image":"https://lbqaq.top/p/roslogistic/97096454.webp","permalink":"https://lbqaq.top/p/roslogistic/","title":"æˆ‘çš„æ™ºæ…§ç‰©æµä¹‹æ—…"},{"content":"å‰è¨€ é˜¿é‡Œäº‘æœ€è¿‘å‘çŸ­ä¿¡ç»™æˆ‘ï¼Œæç¤ºæˆ‘ä¹‹å‰å…è´¹ç”³è¯·çš„SSLè¯ä¹¦è¦åˆ°æœŸäº†ã€‚å€Ÿæ­¤æœºä¼šï¼Œæ­£å¥½å°†acme.shé…ç½®åˆ°æœåŠ¡å™¨ä¸Šï¼Œä¸€åŠ³æ°¸é€¸çš„è§£å†³è¯ä¹¦é—®é¢˜ã€‚ç›¸è¾ƒäºåœ¨é˜¿é‡Œäº‘ä¸Šç”³è¯·è¯ä¹¦ï¼Œä½¿ç”¨acme.shçš„ä¼˜åŠ¿åœ¨äºå¯ä»¥ç”³è¯·æ³›åŸŸåè¯ä¹¦åŠå¯ä»¥è‡ªåŠ¨ç»­æœŸã€‚\nä¸‹é¢æˆ‘å°±è®°å½•ä¸€ä¸‹æˆ‘ä½¿ç”¨çš„æ­¥éª¤å§ã€‚æˆ‘è¿™é‡Œé‡‡ç”¨çš„æ˜¯ä½¿ç”¨é˜¿é‡Œäº‘çš„APIè‡ªåŠ¨è¿›è¡ŒDNSæ–¹å¼çš„ç”³è¯·ï¼Œä¸åŒçš„æœåŠ¡å•†å‘½ä»¤æœ‰ç¨è®¸ä¸åŒï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚\næ­¥éª¤ åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°ç”³è¯·api https://ram.console.aliyun.com/users\nåœ¨é˜¿é‡Œäº‘çš„è§’è‰²æ§åˆ¶é‡Œèµ‹äºˆåˆšåˆšç”³è¯·çš„ç”¨æˆ·æ§åˆ¶DNSçš„æƒé™AliyunDNSFullAccess https://ram.console.aliyun.com/permissions\nå®‰è£…acme.sh\n1 curl https://get.acme.sh | sh -s email=my@example.com é…ç½®APIç¯å¢ƒ\n1 2 export Ali_Key=\u0026#34;xxxx\u0026#34; export Ali_Secret=\u0026#34;xxxxx\u0026#34; è¿™é‡Œæ˜¯é…ç½®APIç¯å¢ƒï¼Œå¡«å…¥åˆšåˆšç”³è¯·çš„å¯†é’¥ã€‚è¿™æ­¥åªéœ€è¦åšä¸€æ¬¡ï¼Œacme.shä¼šå°†å…¶ä¿å­˜ä¸‹æ¥ã€‚\nç”Ÿæˆè¯ä¹¦ï¼Œè¿™é‡Œå¡«å…¥åˆšåˆšç”³è¯·APIå¾—åˆ°çš„å¯†é’¥\n1 acme.sh --issue --dns dns_ali -d lbqaq.top -d \u0026#34;*.lbqaq.top\u0026#34; é€šè¿‡ä¸Šé¢å‘½ä»¤ï¼Œå¯ä»¥ç”³è¯·åˆ°åŒ…å«lbqaq.topå’Œ*.lbqaq.topè¿™ä¸¤ä¸ªDNSè®°å½•çš„è¯ä¹¦ã€‚è¿™é‡Œå¦‚æœæœ‰*ï¼Œæ˜¯éœ€è¦åŠ åŒå¼•å·çš„ï¼Œæˆ‘ä¹‹å‰æ²¡åŠ å°±æŠ¥é”™äº†ã€‚\nå¤åˆ¶è¯ä¹¦åˆ°nginxç›®å½•\n1 2 3 4 acme.sh --install-cert -d lbqaq.top \\ --key-file /usr/local/nginx/conf/cert/lbqaq.top.key \\ --fullchain-file /usr/local/nginx/conf/cert/lbqaq.top.pem \\ --reloadcmd \u0026#34;nginx -s reload\u0026#34; è¿™é‡Œkey-fileå¯¹åº”çš„æ˜¯Nginxé…ç½®é‡Œçš„ssl_certificate_keyï¼Œfullchain-fileå¯¹åº”çš„æ˜¯ssl_certificate\næ¥ä¸‹æ¥ä¿®æ”¹Nginxé…ç½®æ–‡ä»¶å³å¯\né™„ä¸Šæˆ‘çš„æ¨¡æ¿\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 #å¦‚æœä¸æ˜¯httpså°±è·³è½¬è‡³https if ($server_port !~ 443){ rewrite ^(/.*)$ https://$host$1 permanent; } ssl_certificate ./cert/lbqaq.top.pem; ssl_certificate_key ./cert/lbqaq.top.key; ssl_session_timeout 5m; #è¡¨ç¤ºä½¿ç”¨çš„åŠ å¯†å¥—ä»¶çš„ç±»å‹ã€‚ ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; #è¡¨ç¤ºä½¿ç”¨çš„TLSåè®®çš„ç±»å‹ã€‚ ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; add_header Strict-Transport-Security \u0026#34;max-age=31536000\u0026#34;; å¸¸ç”¨å‘½ä»¤ åœ¨é™„ä¸Šä¸€äº›æˆ‘ç”¨åˆ°çš„ä¸€äº›acme.shç›¸å…³çš„å‘½ä»¤ã€‚æ‰ä¸æ˜¯æ°´å­—æ•°å‘¢\nacme.sh --listæŸ¥çœ‹å·²ç”³è¯·çš„è¯ä¹¦ acme.sh --remove -d example.comåˆ é™¤æŒ‡å®šçš„è¯ä¹¦ ","date":"2022-07-21T19:05:52+08:00","image":"https://lbqaq.top/p/%E4%B8%80%E6%AD%A5%E5%88%B0%E4%BD%8D%E8%87%AA%E5%8A%A8%E7%94%B3%E8%AF%B7ssl%E8%AF%81%E4%B9%A6/99528942.webp","permalink":"https://lbqaq.top/p/%E4%B8%80%E6%AD%A5%E5%88%B0%E4%BD%8D%E8%87%AA%E5%8A%A8%E7%94%B3%E8%AF%B7ssl%E8%AF%81%E4%B9%A6/","title":"ä¸€æ­¥åˆ°ä½ï¼Œè‡ªåŠ¨ç”³è¯·SSLè¯ä¹¦"},{"content":"äº‘è®¡ç®—çš„ä¸‰ä¸ªç‰¹ç‚¹ èµ„æºæ± åŒ–\nå¤§éƒ¨åˆ†äº‘è®¡ç®—èµ„æºï¼Œéƒ½æ˜¯æ± åŒ–äº†çš„èµ„æºã€‚ä»€ä¹ˆå«æ± åŒ–ï¼Ÿæ± åŒ–å°±æ˜¯ç‰©ç†èµ„æºçš„åŸºç¡€ä¸Šï¼Œé€šè¿‡è½¯ä»¶å¹³å°ï¼Œå°è£…æˆè™šæ‹Ÿçš„è®¡ç®—èµ„æºï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è™šæ‹ŸåŒ–ã€‚\nå¼¹æ€§ä¼¸ç¼©\näº‘è®¡ç®—çš„è®¡ç®—èµ„æºï¼Œå¯ä»¥æŒ‰éœ€ä»˜è´¹ã€‚ä½ æƒ³è¦ç”¨å¤šå°‘ï¼Œå°±ç§Ÿå¤šå°‘ï¼Œæƒ³ä»€ä¹ˆæ—¶å€™è¦å°±ä»€ä¹ˆæ—¶å€™è¦ï¼Œé…ç½®æ˜¯æ”¯æŒè‡ªå®šä¹‰çš„ã€‚\nå®‰å…¨å¯é \nè€Œäº‘è®¡ç®—ï¼Œä»ç‰©ç†è§’åº¦æ¥è¯´ï¼Œæ‰€æœ‰çš„è®¡ç®—èµ„æºéƒ½æ±‡é›†åœ¨å¤§å‹äº’è”ç½‘æ•°æ®ä¸­å¿ƒï¼ˆIDCï¼‰ï¼Œé‚£é‡Œæœ‰ä¸¥æ ¼çš„å®‰ä¿ã€æŠ—éœ‡çš„å»ºç­‘ã€å®‰å…¨çš„ä¾›ç”µï¼Œæœ‰éå¸¸å…¨é¢çš„å®¹ç¾è®¾è®¡å’Œåº”æ€¥æ–¹æ¡ˆï¼Œèƒ½å¤Ÿæ›´å¥½åœ°ä¿æŠ¤è®¡ç®—èµ„æºï¼Œä¸ä¼šè½»æ˜“åœ°ä¸­æ–­æœåŠ¡ã€‚\nä»è½¯ä»¶ä¸Šæ¥è¯´ï¼Œäº‘è®¡ç®—æœåŠ¡æä¾›å•†æœ‰æ›´ä¸“ä¸šçš„æŠ€æœ¯å›¢é˜Ÿï¼Œæ›´æˆç†Ÿçš„æŠ€æœ¯å‚¨å¤‡ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°ä¿æŠ¤è®¡ç®—èµ„æºä¸è¢«å…¥ä¾µæˆ–ç ´åã€‚\näº‘è®¡ç®—æœåŠ¡ åº”è¯¥ä¸è€ƒï¼Œä¸ºäº†å®Œå¤‡æ€§è¿˜æ˜¯æ”¾è¿›æ¥å§\nInfrastructure as a Service (IaaS)ï¼šåŸºç¡€è®¾æ–½å³æœåŠ¡ Platform as a Service (PaaS) ï¼šå¹³å°å³æœåŠ¡ Software as a Service (SaaS) ï¼šè½¯ä»¶å³æœåŠ¡ äº‘è®¡ç®—ç±»å‹ å…¬æœ‰äº‘ å…¬æœ‰äº‘é€šå¸¸æŒ‡ç¬¬ä¸‰æ–¹æä¾›å•†ç”¨æˆ·èƒ½å¤Ÿä½¿ä½¿ç”¨çš„äº‘ï¼Œå…¬æœ‰äº‘ä¸€èˆ¬å¯é€šè¿‡ Internet ä½¿ç”¨ï¼Œå¯èƒ½æ˜¯å…è´¹æˆ–æˆæœ¬ä½å»‰çš„ã€‚å…¬æœ‰äº‘çš„æœ€å¤§æ„ä¹‰æ˜¯èƒ½å¤Ÿä»¥ä½å»‰çš„ä»·æ ¼ï¼Œæä¾›æœ‰å¸å¼•åŠ›çš„æœåŠ¡ç»™æœ€ç»ˆç”¨æˆ·ï¼Œåˆ›é€ æ–°çš„ä¸šåŠ¡ä»·å€¼ï¼Œå…¬æœ‰äº‘ä½œä¸ºä¸€ä¸ªæ”¯æ’‘å¹³å°ï¼Œè¿˜èƒ½å¤Ÿæ•´åˆä¸Šæ¸¸çš„æœåŠ¡ï¼ˆå¦‚å¢å€¼ä¸šåŠ¡ï¼Œå¹¿å‘Šï¼‰æä¾›è€…å’Œä¸‹æ¸¸æœ€ç»ˆç”¨æˆ·ï¼Œæ‰“é€ æ–°çš„ä»·å€¼é“¾å’Œç”Ÿæ€ç³»ç»Ÿã€‚å®ƒä½¿å®¢æˆ·èƒ½å¤Ÿè®¿é—®å’Œå…±äº«åŸºæœ¬çš„è®¡ç®—æœºåŸºç¡€è®¾æ–½ï¼Œå…¶ä¸­åŒ…æ‹¬ç¡¬ä»¶ã€å­˜å‚¨å’Œå¸¦å®½ç­‰èµ„æºã€‚\nå…¬æœ‰äº‘æ˜¯ä¸ºå¤§ä¼—å»ºçš„ï¼Œæ‰€æœ‰å…¥é©»ç”¨æˆ·éƒ½ç§°ç§Ÿæˆ·ï¼Œä¸ä»…åŒæ—¶æœ‰å¾ˆå¤šç§Ÿæˆ·ï¼Œè€Œä¸”ä¸€ä¸ªç§Ÿæˆ·ç¦»å¼€ï¼Œå…¶èµ„æºå¯ä»¥é©¬ä¸Šé‡Šæ”¾ç»™ä¸‹ä¸€ä¸ªç§Ÿæˆ·ã€‚\nä¼˜ç‚¹ï¼š\næˆæœ¬ä½ æ–¹ä¾¿ æ˜“æ‰©å±• ç¼ºç‚¹ï¼š\nå®‰å…¨é¡¾è™‘ æ€§èƒ½è¶…å–é—®é¢˜ ç®¡ç†è¦å¤æ‚ ç§æœ‰äº‘ æ˜¯ä¸ºä¸€ä¸ªå®¢æˆ·å•ç‹¬ä½¿ç”¨è€Œæ„å»ºçš„ï¼Œå› è€Œæä¾›å¯¹æ•°æ®ã€å®‰å…¨æ€§å’ŒæœåŠ¡è´¨é‡çš„æœ€æœ‰æ•ˆæ§åˆ¶ã€‚è¯¥å…¬å¸æ‹¥æœ‰åŸºç¡€è®¾æ–½ï¼Œå¹¶å¯ä»¥æ§åˆ¶åœ¨æ­¤åŸºç¡€è®¾æ–½ä¸Šéƒ¨ç½²åº”ç”¨ç¨‹åºçš„æ–¹å¼ã€‚ç§æœ‰äº‘å¯éƒ¨ç½²åœ¨ä¼ä¸šæ•°æ®ä¸­å¿ƒçš„é˜²ç«å¢™å†…(æœ¬åœ°ç§æœ‰äº‘)ï¼Œä¹Ÿå¯ä»¥å°†å®ƒä»¬éƒ¨ç½²åœ¨ä¸€ä¸ªå®‰å…¨çš„ä¸»æœºæ‰˜ç®¡åœºæ‰€ï¼ˆæ‰˜ç®¡ç§æœ‰äº‘ï¼‰ã€‚\nä¼˜ç‚¹ï¼š\nå®‰å…¨ è‡ªä¸»å¯æ§ ç¼ºç‚¹ï¼š\næˆæœ¬é«˜ è¿œç¨‹è®¿é—®å›°éš¾ ç¤¾åŒºäº‘ ç¤¾åŒºäº‘çš„æ ¸å¿ƒç‰¹å¾æ˜¯äº‘ç«¯èµ„æºåªç»™ä¸¤ä¸ªæˆ–è€…ä¸¤ä¸ªä»¥ä¸Šçš„ç‰¹å®šå•ä½ç»„ç»‡å†…çš„å‘˜å·¥ä½¿ç”¨ï¼Œé™¤æ­¤ä¹‹å¤–çš„äººå’Œæœºæ„éƒ½æ— æƒç§Ÿèµå’Œä½¿ç”¨äº‘ç«¯è®¡ç®—èµ„æºã€‚ä¸ç§æœ‰äº‘ç±»ä¼¼ï¼Œç¤¾åŒºäº‘çš„äº‘ç«¯ä¹Ÿæœ‰ä¸¤ç§éƒ¨ç½²æ–¹æ³•ï¼Œå³æœ¬åœ°éƒ¨ç½²å’Œæ‰˜ç®¡éƒ¨ç½²ã€‚\næ··åˆäº‘ æ˜¯ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šä¸åŒç±»å‹çš„äº‘ï¼ˆç§æœ‰äº‘ã€ç¤¾åŒºäº‘ã€å…¬å…±äº‘ï¼‰æœåŠ¡çš„ç»“åˆï¼Œè¿™ç§ç»“åˆå¯ä»¥æ˜¯è®¡ç®—çš„ã€å­˜å‚¨çš„ï¼Œä¹Ÿå¯ä»¥ä¸¤è€…å…¼è€Œæœ‰ä¹‹ã€‚\nä¼˜ç‚¹ï¼š\næ“ä½œçµæ´» å¼¹æ€§ æˆæœ¬æ•ˆç›Šã€‚æ··åˆäº‘æ¨¡å¼å…·æœ‰æˆæœ¬æ•ˆç›Šï¼Œå› ä¸ºä¼ä¸šå¯ä»¥æ ¹æ®éœ€è¦å†³å®šä½¿ç”¨æˆæœ¬æ›´æ˜‚è´µçš„äº‘è®¡ç®—èµ„æºã€‚ ç¼ºç‚¹ï¼š\nå®‰å…¨æ€§ä¸å¼º è´¹ç”¨é«˜ã€‚ å…¬æœ‰äº‘+ç§æœ‰äº‘ç®¡ç†è´¹ç”¨é«˜æ˜‚ å…¼å®¹æ€§é—®é¢˜ RDDçš„åˆ›å»º ä½¿ç”¨makeRDDå³å¯ï¼Œä¾‹å¦‚val rdd = sc.makeRDD(List(1, 2, 3, 4)) ã€‚åœ¨ä½¿ç”¨makeRDDæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šåˆ†åŒºæ•°é‡ï¼Œå¦‚val rdd: RDD[Int] = sc.makeRDD(List(1, 2, 3, 4), 3)ï¼Œè¿™é‡Œæˆ‘ä»¬å°±åˆ›å»ºäº†3ä¸ªåˆ†åŒºã€‚\nå½“ç„¶ï¼Œé™¤äº†ä»ç¨‹åºä¸­åˆ›å»ºï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œä½¿ç”¨sc.textFile(\u0026quot;input\u0026quot;)å‡½æ•°æ¥æŒ‰è¡Œè¯»å–æ–‡ä»¶é‡Œçš„æ•°æ®ã€‚å¦‚val lineRDD: RDD[String] = sc.textFile(\u0026quot;E:\\\\datas\u0026quot;)\nValueç±»å‹è½¬æ¢ç®—å­ map def map[U: ClassTag](f: T =\u0026gt; U ): RDD[U]\nå°†å¤„ç†çš„æ•°æ®é€æ¡è¿›è¡Œæ˜ å°„è½¬æ¢ï¼Œè¿™é‡Œçš„è½¬æ¢å¯ä»¥æ˜¯ç±»å‹çš„è½¬æ¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å€¼çš„è½¬æ¢ã€‚\n1 2 3 4 5 6 7 8 9 10 val rdd = sc.makeRDD(List(1, 2, 3, 4)) def mapFunction(num: Int): Int = {num * 2} //è½¬æ¢å‡½æ•° val mapRDD1: RDD[Int] = rdd.map(mapFunction) val mapRDD2 = rdd.map((num: Int) =\u0026gt; {num * 2}) //åŒ¿åå‡½æ•° val mapRDD3 = rdd.map((num: Int) =\u0026gt; num * 2) //å‡½æ•°çš„ä»£ç é€»è¾‘åªæœ‰ä¸€è¡Œçš„æ—¶å€™ï¼Œ{}å¯çœç•¥ val mapRDD4 = rdd.map((num) =\u0026gt; num * 2) //å‚æ•°ç±»å‹å¯ä»¥æ¨æ–­å‡ºæ¥ï¼Œå‚æ•°ç±»å‹å¯ä»¥çœç•¥ val mapRDD5 = rdd.map(num =\u0026gt; num * 2) //å‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°åªæœ‰ä¸€ä¸ªï¼Œ()å¯ä»¥çœç•¥ val mapRDD6 = rdd.map(_ * 2) //å‚æ•°åœ¨é€»è¾‘ä¸­åªå‡ºç°ä¸€æ¬¡ï¼Œä¸”é¡ºåºå‡ºç°ï¼Œå‚æ•°å¯ç”¨_ä»£æ›¿ æ³¨æ„è¦è®¤è¯†æœ€åçš„ç®€å†™å½¢å¼ã€‚\nmapPartiotions def mapPartitions[U: ClassTag]( f: Iterator[T] =\u0026gt; Iterator[U],preservesPartitioning: Boolean = false): RDD[U]\nä»¥åˆ†åŒºä¸ºå•ä½è¿›è¡Œæ•°æ®è½¬æ¢æ“ä½œï¼Œä½†æ˜¯ä¼šå°†æ•´ä¸ªåˆ†åŒºçš„æ•°æ®åŠ è½½åˆ°å†…å­˜è¿›è¡Œå¼•ç”¨ï¼Œç”±äºå­˜åœ¨å¯¹è±¡çš„å¼•ç”¨ï¼Œå› æ­¤å¤„ç†å®Œçš„æ•°æ®ä¸ä¼šè¢«é‡Šæ”¾æ‰ã€‚\n1 2 3 4 5 6 7 8 val lineRdd = sc.makeRDD(List(1, 2, 3, 4),2) val rdd2: RDD[Int] = lineRdd.mapPartitions( iter =\u0026gt; { println(\u0026#34;+++++++++++++++\u0026#34;) iter.map(_ * 2) } ) rdd2.collect().foreach(println) ç»“æœï¼š\n1 2 3 4 5 6 +++++++++++++++ +++++++++++++++ 2 4 6 8 ä¸Šé¢ä»£ç çš„æ„æ€æ˜¯å°†æ¯ä¸ªæ•°æ®ä¹˜ä»¥2ï¼Œå¹¶åœ¨æ¯æ¬¡è®¡ç®—æ—¶è¾“å‡º+++++ï¼Œä»è¾“å‡ºä¸¤æ¡+++++å¯çŸ¥ï¼ŒmapPartiotionsç®—å­ç¡®å®æ˜¯æŒ‰åˆ†åŒºè¿›è¡Œæ“ä½œã€‚\nmap å’Œ mapPartitions çš„åŒºåˆ«ï¼Ÿ\nMap ç®—å­æ˜¯åˆ†åŒºå†…ä¸€ä¸ªæ•°æ®ä¸€ä¸ªæ•°æ®çš„æ‰§è¡Œï¼Œç±»ä¼¼äºä¸²è¡Œæ“ä½œã€‚è€Œ mapPartitions ç®—å­æ˜¯ä»¥åˆ†åŒºä¸ºå•ä½è¿›è¡Œæ‰¹å¤„ç†æ“ä½œã€‚ Map ç®—å­ä¸»è¦ç›®çš„å°†æ•°æ®æºä¸­çš„æ•°æ®è¿›è¡Œè½¬æ¢å’Œæ”¹å˜ã€‚ä½†æ˜¯ä¸ä¼šå‡å°‘æˆ–å¢å¤šæ•°æ®ã€‚MapPartitions ç®—å­éœ€è¦ä¼ å…¥ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ²¡æœ‰è¦æ±‚çš„å…ƒç´ çš„ä¸ªæ•°ä¿æŒä¸å˜ï¼Œ æ‰€ä»¥å¯ä»¥å¢åŠ æˆ–å‡å°‘æ•°æ®ã€‚ Map ç®—å­å› ä¸ºç±»ä¼¼äºä¸²è¡Œæ“ä½œï¼Œæ‰€ä»¥æ€§èƒ½æ¯”è¾ƒä½ï¼Œè€Œæ˜¯ mapPartitions ç®—å­ç±»ä¼¼äºæ‰¹å¤„ç†ï¼Œæ‰€ä»¥æ€§èƒ½è¾ƒé«˜ã€‚ä½†æ˜¯mapPartitions ç®—å­ä¼šé•¿æ—¶é—´å ç”¨å†…å­˜ï¼Œé‚£ä¹ˆè¿™æ ·ä¼šå¯¼è‡´å†…å­˜å¯èƒ½ä¸å¤Ÿç”¨ï¼Œå‡ºç°å†…å­˜æº¢å‡ºçš„é”™è¯¯ã€‚ mapPartitionWithIndex def mapPartitionsWithIndex[U: ClassTag]( f: (Int, Iterator[T]) =\u0026gt; Iterator[U] ,preservesPartitioning: Boolean = false): RDD[U]\nå°†å¾…å¤„ç†çš„æ•°æ®ä»¥åˆ†åŒºä¸ºå•ä½å‘é€åˆ°è®¡ç®—èŠ‚ç‚¹è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œçš„å¤„ç†æ˜¯æŒ‡å¯ä»¥è¿›è¡Œä»»æ„çš„å¤„ç†ï¼Œå“ªæ€•æ˜¯è¿‡æ»¤æ•°æ®ï¼Œåœ¨å¤„ç†æ—¶åŒæ—¶å¯ä»¥è·å–å½“å‰åˆ†åŒºç´¢å¼•ã€‚\n1 2 3 4 5 6 7 8 9 10 11 val lineRdd = sc.makeRDD(List(1, 2, 3, 4), 2) val rdd2: RDD[Int] = lineRdd.mapPartitionsWithIndex( (index, iter) =\u0026gt; { if (index == 1) { iter } else { Nil.iterator //Nilæ˜¯ç©ºList } } ) rdd2.collect().foreach(println) ç»“æœï¼š\n1 2 3 4 åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯¹ç¬¬0ä¸ªåˆ†åŒºè¿›è¡ŒæŠ›å¼ƒï¼Œå¯¹ç¬¬1ä¸ªåˆ†åŒºè¿›è¡Œä¿ç•™ã€‚å¦‚æ‰€ç¤ºï¼Œç¨‹åºä»…è¾“å‡ºäº†ç¬¬1åˆ†åŒºé‡Œçš„å†…å®¹ã€‚\nflatMap def flatMap[U: ClassTag](f: T =\u0026gt; TraversableOnce[U]): RDD[U]\nå°†å¤„ç†çš„æ•°æ®è¿›è¡Œæ‰å¹³åŒ–åå†è¿›è¡Œæ˜ å°„å¤„ç†ï¼Œæ‰€ä»¥ç®—å­ä¹Ÿç§°ä¹‹ä¸ºæ‰å¹³æ˜ å°„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 val lineRdd: RDD[Int] = sc.makeRDD(List(1, 2, 3, 4, 5), 2) val groupRDD: RDD[(Int, Iterable[Int])] = lineRdd.groupBy(_ % 2) groupRDD.foreach(println) val rdd1: RDD[Int] = groupRDD.flatMap( _._2) println(\u0026#34;Iterable[Int]çš„flatMapï¼š\u0026#34; + rdd1.collect().mkString(\u0026#34;,\u0026#34;)) val data2: RDD[List[Int]] = groupRDD.map(_._2.toList) val rdd2: RDD[Int] = data2.flatMap(t =\u0026gt; t) println(\u0026#34;List[Int]çš„flatMapï¼š\u0026#34; + rdd2.collect().mkString(\u0026#34;,\u0026#34;)) val lineRdd2 = sc.makeRDD(List(List(1, 2), 3, List(4,5)),2) val rdd22: RDD[Any] = lineRdd2.flatMap { case list: List[_] =\u0026gt; list case num: Int =\u0026gt; List(num) } rdd22.collect().foreach(println) ç»“æœï¼š\n1 2 3 4 5 6 7 8 9 (0,CompactBuffer(2, 4)) (1,CompactBuffer(1, 3, 5)) Iterable[Int]çš„flatMapï¼š2,4,1,3,5 List[Int]çš„flatMapï¼š2,4,1,3,5 1 2 3 4 5 åœ¨ç¬¬ä¸€æ®µç¨‹åºä¸­ï¼Œæˆ‘ä»¬çœ‹å‡ºRDD[List]å’ŒRDD[iterable]éƒ½å¯ä»¥è¢«flaMapç®—å­è¿›è¡Œæ‰å¹³åŒ–ã€‚åœ¨ç¬¬äºŒæ®µç¨‹åºä¸­ï¼Œæˆ‘ä»¬å°†å°† List(List(1,2),3,List(4,5))è¿›è¡Œæ‰å¹³åŒ–æ“ä½œã€‚\né‡æ–°åˆ†åŒºä¸æ•°æ®ç­›é€‰ coalesce def coalesce(numPartitions: Int, shuffle: Boolean = false, partitionCoalescer: Option[PartitionCoalescer] = Option.empty) (implicit ord: Ordering[T] = null): RDD[T]\næ ¹æ®æ•°æ®é‡ç¼©å‡åˆ†åŒºï¼Œç”¨äºå¤§æ•°æ®é›†è¿‡æ»¤åï¼Œæé«˜å°æ•°æ®é›†çš„æ‰§è¡Œæ•ˆç‡ã€‚\nå½“ spark ç¨‹åºä¸­ï¼Œå­˜åœ¨è¿‡å¤šçš„å°ä»»åŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ coalesce æ–¹æ³•ï¼Œæ”¶ç¼©åˆå¹¶åˆ†åŒºï¼Œå‡å°‘åˆ†åŒºçš„ä¸ªæ•°ï¼Œå‡å°ä»»åŠ¡è°ƒåº¦æˆæœ¬ã€‚\ncoalesceæ–¹æ³•é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šå°†åˆ†åŒºçš„æ•°æ®æ‰“ä¹±é‡æ–°ç»„åˆï¼Œåªæ˜¯å°†å¤šä¸ªåˆ†åŒºåˆå¹¶ä¸º1ä¸€ä¸ªåˆ†åŒºã€‚\n1 2 3 4 5 val rdd = sc.makeRDD(List(1, 2, 3, 4, 5,6),3) val rdd2: RDD[Int] = rdd.coalesce(2) //1:1 2 //2:3 4 5 6 ä¸Šé¢ä»£ç çš„å«ä¹‰æ˜¯å°†3ä¸ªåˆ†åŒºç¼©å‡æˆ2ä¸ªï¼Œå¯è§æˆåŠŸæ‰§è¡Œï¼Œä¸€ä¸ªåˆ†åŒºé‡Œæœ‰2ä¸ªæ•°ï¼Œè€Œå¦ä¸€ä¸ªåˆ†åŒºé‡Œæœ‰4ä¸ªæ•°ã€‚\nrepartition def repartition(numPartitions: Int)(implicit ord: Ordering[T] = null): RDD[T]\nè¯¥æ“ä½œå†…éƒ¨å…¶å®æ‰§è¡Œçš„æ˜¯ coalesce æ“ä½œï¼Œå‚æ•° shuffle çš„é»˜è®¤å€¼ä¸º trueã€‚æ— è®ºæ˜¯å°†åˆ†åŒºæ•°å¤šçš„RDD è½¬æ¢ä¸ºåˆ†åŒºæ•°å°‘çš„RDDï¼Œè¿˜æ˜¯å°†åˆ†åŒºæ•°å°‘çš„ RDD è½¬æ¢ä¸ºåˆ†åŒºæ•°å¤šçš„RDDï¼Œrepartition æ“ä½œéƒ½å¯ä»¥å®Œæˆï¼Œå› ä¸ºæ— è®ºå¦‚ä½•éƒ½ä¼šç» shuffle è¿‡ç¨‹ã€‚\n1 2 3 4 5 val rdd = sc.makeRDD(List(1, 2, 3, 4, 5,6),3) val rdd2: RDD[Int] = rdd.repartition(2) //1:1 4 5 //2:2 3 6 ç”±äºå‚æ•° shuffle çš„å€¼ä¸º trueï¼Œå°†åˆ†åŒºçš„æ•°æ®æ‰“ä¹±é‡æ–°ç»„åˆä»¥ä¿è¯ä¸ä¼šå‡ºç°æ•°æ®å€¾æ–œ\ndistinct def distinct()(implicit ord: Ordering[T] = null): RDD[T]\nå°†æ•°æ®é›†ä¸­é‡å¤çš„æ•°æ®å»é‡\n1 2 3 4 5 val rdd = sc.makeRDD(List(1, 2, 3, 4, 1, 2, 3, 4)) val disRDD = rdd.distinct() disRDD.collect().foreach(println) //4 1 3 2 filter def filter(f: T =\u0026gt; Boolean): RDD[T]\nå°†æ•°æ®æ ¹æ®æŒ‡å®šçš„è§„åˆ™è¿›è¡Œç­›é€‰è¿‡æ»¤ï¼Œç¬¦åˆè§„åˆ™çš„æ•°æ®ä¿ç•™ï¼Œä¸ç¬¦åˆè§„åˆ™çš„æ•°æ®ä¸¢å¼ƒã€‚å½“æ•°æ®è¿›è¡Œç­›é€‰è¿‡æ»¤åï¼Œåˆ†åŒºä¸å˜ï¼Œä½†æ˜¯åˆ†åŒºå†…çš„æ•°æ®å¯èƒ½ä¸å‡è¡¡\n1 2 3 4 5 val lineRdd = sc.makeRDD(List(1,2,3,4),2) val filterRDD: RDD[Int] = lineRdd.filter((num =\u0026gt; num % 2 == 0)) filterRDD.collect().foreach(println) //2 4 åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬è¿‡æ»¤æ‰æ‰€æœ‰çš„å¥‡æ•°ï¼Œä»…ä»…ä¿ç•™å¶æ•°\ngroupBy å°†æ•°æ®æ ¹æ®æŒ‡å®šçš„è§„åˆ™è¿›è¡Œåˆ†ç»„, åˆ†åŒºé»˜è®¤ä¸å˜ï¼Œä½†æ˜¯æ•°æ®ä¼šè¢«æ‰“ä¹±é‡æ–°ç»„åˆï¼Œæˆ‘ä»¬å°†è¿™æ ·çš„æ“ä½œç§°ä¹‹ä¸ºshuffleã€‚æé™æƒ…å†µä¸‹ï¼Œæ•°æ®å¯èƒ½è¢«åˆ†åœ¨åŒä¸€ä¸ªåˆ†åŒºä¸­ã€‚\n1 2 3 4 5 6 7 8 9 10 val lineRdd = sc.makeRDD(List(1, 2, 3, 4), 2) def groupFunction(num: Int): Int = { num % 2 } //val groupRDD: RDD[(Int, Iterable[Int])] = lineRdd.groupBy(_ % 2) val groupRDD: RDD[(Int, Iterable[Int])] = lineRdd.groupBy(groupFunction) groupRDD.collect().foreach(println) ç»“æœï¼š\n1 2 (0,CompactBuffer(2, 4)) (1,CompactBuffer(1, 3)) åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒæŒ‰å¥‡å¶æ•°è¿›è¡Œåˆ†ç»„\nsortBy def sortBy[K] ( f: (T) =\u0026gt; K, ascending: Boolean = true, numPartitions: Int = this.partitions.length) (implicit ord: Ordering[K], ctag: ClassTag[K]): RDD[T]\nè¯¥æ“ä½œç”¨äºæ’åºæ•°æ®ã€‚åœ¨æ’åºä¹‹å‰ï¼Œå¯ä»¥å°†æ•°æ®é€šè¿‡ f å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œä¹‹åæŒ‰ç…§ f å‡½æ•°å¤„ç†çš„ç»“æœè¿›è¡Œæ’åºï¼Œé»˜è®¤ä¸ºå‡åºæ’åˆ—ã€‚æ’åºåæ–°äº§ç”Ÿçš„ RDD çš„åˆ†åŒºæ•°ä¸åŸRDD çš„åˆ†åŒºæ•°ä¸€è‡´ã€‚ä¸­é—´å­˜åœ¨ shuffle çš„è¿‡ç¨‹\n1 2 3 4 5 6 7 val rdd = sc.makeRDD(List((\u0026#34;11\u0026#34;, 2), (\u0026#34;1\u0026#34;, 1), (\u0026#34;2\u0026#34;, 3)), 2) val sortRDD: RDD[(String, Int)] = rdd.sortBy(t =\u0026gt; t._1) sortRDD.collect().foreach(println) //(1,1) //(11,2) //(2,3) ä¸Šé¢æ˜¯å­—ç¬¦ä¸²æ’åºï¼ŒæŒ‰å­—å…¸åºã€‚ä¸‹é¢è½¬æ¢æˆæ•°å­—ï¼Œæ³¨æ„ä¸¤è€…åŒºåˆ«\n1 2 3 4 5 6 7 val rdd = sc.makeRDD(List((\u0026#34;11\u0026#34;, 2), (\u0026#34;1\u0026#34;, 1), (\u0026#34;2\u0026#34;, 3)), 2) val sortRDD: RDD[(String, Int)] = rdd.sortBy(t =\u0026gt; t._1.toInt) sortRDD.collect().foreach(println) //(1,1) //(2,3) //(11,2) é›†åˆç±»å‹ç®—å­æ“ä½œ intersection def intersection(other: RDD[T]): RDD[T]\nå¯¹æºRDD å’Œå‚æ•°RDD æ±‚äº¤é›†åè¿”å›ä¸€ä¸ªæ–°çš„RDD\n1 2 3 4 5 6 val rdd1 = sc.makeRDD(List(1, 2, 3, 4, 5,6),3) val rdd2 = sc.makeRDD(List(1, 2, 3),1) val rdd3 = rdd1.intersection(rdd2) rdd3.collect().foreach(println) //3 1 2 union def union(other: RDD[T]): RDD[T]\nå¯¹æºRDD å’Œå‚æ•°RDD æ±‚å¹¶é›†åè¿”å›ä¸€ä¸ªæ–°çš„RDD\n1 2 3 4 5 6 val rdd1 = sc.makeRDD(List(1, 2, 3)) val rdd2 = sc.makeRDD(List(4, 5, 6)) val rdd3 = rdd1.union(rdd2) rdd3.collect().foreach(println) //1 2 3 4 5 6 subtract def subtract(other: RDD[T]): RDD[T]\nä»¥ä¸€ä¸ª RDD å…ƒç´ ä¸ºä¸»ï¼Œå»é™¤ä¸¤ä¸ª RDD ä¸­é‡å¤å…ƒç´ ï¼Œå°†å…¶ä»–å…ƒç´ ä¿ç•™ä¸‹æ¥ã€‚æ±‚å·®é›†\n1 2 3 4 5 6 val rdd1 = sc.makeRDD(List(1, 2, 3, 4, 5, 6)) val rdd2 = sc.makeRDD(List(4, 5, 6)) val rdd3 = rdd1.subtract(rdd2) rdd3.collect().foreach(println) //1 2 3 zip def zip[U: ClassTag](other: RDD[U]): RDD[(T, U)]\nå°†ä¸¤ä¸ª RDD ä¸­çš„å…ƒç´ ï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼è¿›è¡Œåˆå¹¶ã€‚å…¶ä¸­ï¼Œé”®å€¼å¯¹ä¸­çš„Key ä¸ºç¬¬ 1 ä¸ª RDDä¸­çš„å…ƒç´ ï¼ŒValue ä¸ºç¬¬ 2 ä¸ª RDD ä¸­çš„ç›¸åŒä½ç½®çš„å…ƒç´ ã€‚\n1 2 3 4 5 val rdd1 = sc.makeRDD(List(1, 2, 3, 4), 2) val rdd2 = sc.makeRDD(List(3, 4, 5, 6), 2) val zipRDD: RDD[(Int, Int)] = rdd1.zip(rdd2) println(zipRDD.collect().mkString(\u0026#34;,\u0026#34;)) //(1,3),(2,4),(3,5),(4,6) å¦‚æœä¸¤ä¸ªRDD æ•°æ®ç±»å‹ä¸ä¸€è‡´ ï¼Œå¯¹äºäº¤é›†ï¼Œå¹¶é›†ï¼Œå·®é›†ï¼Œä¸¤ä¸ªRDDçš„æ•°æ®ç±»å‹å¿…é¡»ç›¸åŒã€‚å¯¹äºæ‹‰é“¾æ“ä½œï¼Œä¸¤ä¸ªRDDçš„æ•°æ®ç±»å‹å¯ä»¥ä¸åŒã€‚ å¦‚æœä¸¤ä¸ªRDDçš„åˆ†åŒºä¸­æ•°æ®é‡ä¸ä¸€è‡´ï¼Œå¯¹äºäº¤é›†ï¼Œå¹¶é›†ï¼Œå·®é›†ï¼Œä¸¤ä¸ªRDDçš„åˆ†åŒºä¸­æ•°æ®é‡ä¸éœ€è¦ç›¸åŒï¼›å¯¹äºæ‹‰é“¾æ“ä½œåˆ†åŒºä¸­æ•°æ®é‡å¿…é¡»ç›¸åŒã€‚ Key-Valueç±»å‹ç®—å­ reduceByKey def reduceByKey(func: (V, V) =\u0026gt; V): RDD[(K, V)]\nå¯ä»¥å°†æ•°æ®æŒ‰ç…§ç›¸åŒçš„Key å¯¹Value è¿›è¡Œèšåˆï¼Œèšåˆæ“ä½œæ˜¯ä¸¤ä¸¤è¿›è¡Œèšåˆçš„ã€‚reduceByKeyä¸­å¦‚æœkeyçš„æ•°æ®åªæœ‰ä¸€ä¸ªï¼Œæ˜¯ä¸ä¼šå‚ä¸è¿ç®—çš„ã€‚\n1 2 3 4 5 val rdd: RDD[(String)] = sc.makeRDD(List(\u0026#34;Hello Scala\u0026#34;, \u0026#34;Hello Spark\u0026#34;, \u0026#34;Hello Spark\u0026#34;, \u0026#34;Hello 123\u0026#34;),2) val wordRDD: RDD[String] = rdd.flatMap(_.split(\u0026#34; \u0026#34;)) val wordOneRDD: RDD[(String, Int)] = wordRDD.map((_, 1)) val result: RDD[(String, Int)] = wordOneRDD.reduceByKey(_ + _) result.collect().foreach(println) ç»“æœï¼š\n1 2 3 4 (Hello,4) (123,1) (Scala,1) (Spark,2) åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæ ¹æ®å‚æ•°_+_ï¼Œå³è¡¨ç¤ºå°†ä¸¤ä¸ªvalueè¿›è¡Œç›¸åŠ ã€‚\ngroupByKey def groupByKey(): RDD[(K, Iterable[V])]\nå°†æ•°æ®æºçš„æ•°æ®æ ¹æ® keyï¼Œ å¯¹ value è¿›è¡Œåˆ†ç»„ï¼Œå°†æ•°æ®æºä¸­ç›¸åŒkeyçš„æ•°æ®åˆ†åœ¨ä¸€ä¸ªç»„ä¸­ï¼Œè¡Œæˆä¸€ä¸ªå¯¹å¶å…ƒç¥–ï¼Œå…ƒç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯keyï¼Œå…ƒç»„ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ å°±è¡Œç›¸åŒkeyçš„valueçš„é›†åˆã€‚\n1 2 3 4 5 6 val rdd = sc.makeRDD(List((\u0026#34;a\u0026#34;, 1), (\u0026#34;a\u0026#34;, 1), (\u0026#34;a\u0026#34;, 1), (\u0026#34;b\u0026#34;, 1), (\u0026#34;b\u0026#34;, 1), (\u0026#34;b\u0026#34;, 1), (\u0026#34;b\u0026#34;, 1), (\u0026#34;a\u0026#34;, 1)), 2) val groupRDD: RDD[(String, Iterable[Int])] = rdd.groupByKey() groupRDD.collect().foreach(println) //(b,CompactBuffer(1, 1, 1, 1)) //(a,CompactBuffer(1, 1, 1, 1)) aggregateByKey def aggregateByKey[U: ClassTag](zeroValue: U)(seqOp: (U, V) =\u0026gt; U, combOp: (U, U) =\u0026gt; U): RDD[(K, U)]\nå°†æ•°æ®æ ¹æ®ä¸åŒçš„è§„åˆ™è¿›è¡Œåˆ†åŒºå†…è®¡ç®—å’Œåˆ†åŒºé—´è®¡ç®—ã€‚\naggregateByKeyå­˜åœ¨å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°åˆ—è¡¨ã€‚\nç¬¬ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºåˆå§‹å€¼ã€‚ä¸»è¦ç”¨äºå½“ç¢°è§ç¬¬ä¸€ä¸ªkeyçš„æ—¶å€™ï¼Œå’Œvalueè¿›è¡Œåˆ†åŒºå†…è®¡ç®—ã€‚\nç¬¬äºŒä¸ªå‚æ•°åˆ—è¡¨éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°\nå‚æ•°2.1ï¼šåˆ†åŒºå†…çš„è®¡ç®—è§„åˆ™ å‚æ•°2.2ï¼šåˆ†åŒºé—´çš„è®¡ç®—è§„åˆ™ 1 2 3 4 5 6 7 8 9 10 11 val rdd = sc.makeRDD(List((\u0026#34;a\u0026#34;, 1), (\u0026#34;a\u0026#34;, 2), (\u0026#34;b\u0026#34;, 3), (\u0026#34;b\u0026#34;, 4), (\u0026#34;b\u0026#34;, 5), (\u0026#34;a\u0026#34;, 6)), 2) //åŒåˆ†åŒºè·å–æœ€å¤§å€¼ï¼Œä¸åŒåˆ†åŒºç›¸åŠ æ±‚å’Œ val rdd2: RDD[(String, Int)] = rdd.aggregateByKey(0)( (x, y) =\u0026gt; math.max(x, y), (x, y) =\u0026gt; x + y ) rdd2.collect().foreach(println) //(b,8) //(a,8) foldByKey def foldByKey(zeroValue: V)(func: (V, V) =\u0026gt; V): RDD[(K, V)]\nå½“åˆ†åŒºå†…è®¡ç®—è§„åˆ™å’Œåˆ†åŒºé—´è®¡ç®—è§„åˆ™ç›¸åŒæ—¶ï¼ŒaggregateByKey å°±å¯ä»¥ç®€åŒ–ä¸ºfoldByKey\n1 2 3 4 5 6 7 8 val rdd = sc.makeRDD(List((\u0026#34;a\u0026#34;, 1), (\u0026#34;a\u0026#34;, 2), (\u0026#34;b\u0026#34;, 3), (\u0026#34;b\u0026#34;, 4), (\u0026#34;b\u0026#34;, 5), (\u0026#34;a\u0026#34;, 6)), 2) //åŒåˆ†åŒºç›¸åŠ æ±‚å’Œï¼Œä¸åŒåˆ†åŒºç›¸åŠ æ±‚å’Œ val rdd2: RDD[(String, Int)] = rdd.foldByKey(0)(_ + _) rdd2.collect().foreach(println) //(b,12) //(a,9) combineByKey def combineByKey[C]( createCombiner: V =\u0026gt; C, mergeValue: (C, V) =\u0026gt; C, mergeCombiners: (C, C) =\u0026gt; C): RDD[(K, C)]\nå¯¹key-value å‹ rdd è¿›è¡Œèšé›†æ“ä½œçš„èšé›†å‡½æ•°ï¼ˆaggregation functionï¼‰ã€‚ç±»ä¼¼äºaggregate()ï¼ŒcombineByKey()å…è®¸ç”¨æˆ·è¿”å›å€¼çš„ç±»å‹ä¸è¾“å…¥ä¸ä¸€è‡´ã€‚\ncombineByKeyæ–¹æ³•éœ€è¦ä¸‰ä¸ªå‚æ•°\nç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨ç¤ºå°†ç›¸åŒkeyçš„ç¬¬ä¸€ä¸ªæ•°æ®è¿›è¡Œç»“æ„çš„è½¬æ¢ï¼Œå®ç°æ“ä½œ ç¬¬äºŒä¸ªå‚æ•°ï¼šè¡¨ç¤ºåˆ†åŒºå†…çš„è®¡ç®—è§„åˆ™ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šè¡¨ç¤ºåˆ†åŒºé—´çš„è®¡ç®—è§„åˆ™ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 val rdd = sc.makeRDD(List((\u0026#34;a\u0026#34;, 1), (\u0026#34;a\u0026#34;, 2), (\u0026#34;b\u0026#34;, 3), (\u0026#34;b\u0026#34;, 4), (\u0026#34;b\u0026#34;, 5), (\u0026#34;a\u0026#34;, 6)), 2) val rdd2: RDD[(String, (Int, Int))] = rdd.combineByKey( (t) =\u0026gt; (t, 1), (t: (Int, Int), v) =\u0026gt; { (t._1 + v, t._2 + 1) }, (t1: (Int, Int), t2: (Int, Int)) =\u0026gt; { (t1._1 + t2._1, t1._2 + t2._2) } ) val rdd3: RDD[(String, Int)] = rdd2.map { case (str, (t1, t2)) =\u0026gt; { (str, t1 / t2) } } rdd3.collect().foreach(println) //(b,4) //(a,3) åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé¦–å…ˆå°†ç›¸åŒkeyçš„æ ¼å¼è½¬ä¸º(t,1)ï¼Œåˆ†åŒºå†…è®¡ç®—å¯¹äºç¬¬ä¸€ä¸ªæ•°æ®è¿›è¡Œç›¸åŠ ï¼Œç¬¬äºŒä¸ªæ•°æ®+1ï¼Œåˆ†åŒºé—´å°†ç¬¬ä¸€å’Œç¬¬äºŒä¸ªæ•°æ®å¯¹åº”ç›¸åŠ ã€‚\njoin def join[W](other: RDD[(K, W)]): RDD[(K, (V, W))]\nåœ¨ç±»å‹ä¸º(K,V)å’Œ(K,W)çš„RDD ä¸Šè°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ªç›¸åŒ key å¯¹åº”çš„æ‰€æœ‰å…ƒç´ è¿æ¥åœ¨ä¸€èµ·çš„(K,(V,W))çš„RDD\nä¸¤ä¸ªRDDä¸­çš„å…ƒç´ å¯¹è¿›è¡Œç¬›å¡å°”ä¹˜ç§¯æ€§è´¨çš„åŒ¹é…ï¼Œä½†åªä¼šæ‰“å°å‡ºåŒ¹é…æˆåŠŸçš„ã€‚\n1 2 3 4 5 6 7 8 val rdd1 = sc.makeRDD(List((\u0026#34;a\u0026#34;, 1), (\u0026#34;b\u0026#34;, 2), (\u0026#34;c\u0026#34;, 3)), 2) val rdd2 = sc.makeRDD(List((\u0026#34;b\u0026#34;, 5), (\u0026#34;a\u0026#34;, 4), (\u0026#34;c\u0026#34;, 6)), 2) var joinRDD: RDD[(String, (Int, Int))] = rdd1.join(rdd2) joinRDD.collect().foreach(println) //(b,(2,5)) //(a,(1,4)) //(c,(3,6)) åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼ŒæˆåŠŸå°†a,b,cåé¢çš„å€¼åˆåœ¨ä¸€èµ·äº†\nå¦‚æœä¸¤ä¸ªæ•°æ®æºä¸­æœ‰å¤šä¸ªç›¸åŒçš„keyï¼Œé‚£ä¹ˆæ•°æ®æºaä¸­çš„keyä¼šä¸æ•°æ®æºbä¸­ç›¸åŒçš„keyå¤šæ¬¡åŒ¹é…æˆåŠŸï¼Œå› æ­¤ä¼šæ•°æ®é‡ä¼šå‡ ä½•æ€§è´¨å¢é•¿\n1 2 3 4 5 6 7 val rdd1 = sc.makeRDD(List((\u0026#34;a\u0026#34;,1), (\u0026#34;b\u0026#34;, 2),(\u0026#34;c\u0026#34;, 3)),2) val rdd2 = sc.makeRDD(List((\u0026#34;b\u0026#34;, 5), (\u0026#34;d\u0026#34;,4), (\u0026#34;b\u0026#34;, 6)),2) var joinRDD: RDD[(String, (Int, Int))] = rdd1.join(rdd2) joinRDD.collect().foreach(println) //(b,(2,5)) //(b,(2,6)) leftOuterJoin def leftOuterJoin[W](other: RDD[(K, W)]): RDD[(K, (V, Option[W]))]\nç±»ä¼¼äº SQL è¯­å¥çš„å·¦å¤–è¿æ¥ï¼Œæ ¹æ®å·¦è¾¹ç¬¬ä¸€ä¸ªå…ƒç´ å°†ä¸¤ä¸ªRDDè¿æ¥èµ·æ¥ï¼Œå’Œjoinç®—å­ç±»ä¼¼ï¼Œä½†è¿™ä¸ªå¯ä»¥æ”¯æŒkeyä¸åŒ¹é…çš„æƒ…å†µã€‚\n1 2 3 4 5 6 7 8 9 val rdd1 = sc.makeRDD(List((\u0026#34;a\u0026#34;, 1), (\u0026#34;b\u0026#34;, 2), (\u0026#34;c\u0026#34;, 3)), 2) val rdd2 = sc.makeRDD(List((\u0026#34;a\u0026#34;, 5), (\u0026#34;b\u0026#34;, 4)), 2) val leftJoinRDD: RDD[(String, (Int, Option[Int]))] = rdd1.leftOuterJoin(rdd2) leftJoinRDD.collect().foreach(println) //(b,(2,Some(4))) //(a,(1,Some(5))) //(c,(3,None)) 1 2 3 4 5 6 7 8 9 10 11 val rdd1 = sc.makeRDD(List((\u0026#34;a\u0026#34;, 1), (\u0026#34;b\u0026#34;, 2), (\u0026#34;c\u0026#34;, 3)), 2) val rdd2 = sc.makeRDD(List((\u0026#34;a\u0026#34;, 5), (\u0026#34;b\u0026#34;, 4), (\u0026#34;b\u0026#34;, 5), (\u0026#34;b\u0026#34;, 6)), 2) val leftJoinRDD: RDD[(String, (Int, Option[Int]))] = rdd1.leftOuterJoin(rdd2) leftJoinRDD.collect().foreach(println) //(b,(2,Some(4))) //(b,(2,Some(5))) //(b,(2,Some(6))) //(a,(1,Some(5))) //(c,(3,None)) rightOuterJoin ç±»ä¼¼äºå·¦å¤–è¿æ¥ï¼Œä¸¤è€…åŒºåˆ«åœ¨äºå·¦è¿æ¥æ˜¯ä»¥å·¦è¾¹çš„RDDä¸ºä¸»ï¼Œå³è¿æ¥ä»¥å³è¾¹çš„RDDä¸ºä¸»ã€‚\n1 2 3 4 5 6 7 8 9 val rdd1 = sc.makeRDD(List((\u0026#34;a\u0026#34;,1), (\u0026#34;b\u0026#34;, 2)),2) val rdd2 = sc.makeRDD(List((\u0026#34;a\u0026#34;, 5), (\u0026#34;b\u0026#34;,4),(\u0026#34;c\u0026#34;, 3)),2) val rightJoinRDD: RDD[(String, (Option[Int], Int))] = rdd1.rightOuterJoin(rdd2) rightJoinRDD.collect().foreach(println) //(b,(Some(2),4)) //(a,(Some(1),5)) //(c,(None,3)) è¡ŒåŠ¨ç®—å­ reduce def reduce(f: (T, T) =\u0026gt; T): T\nèšé›†RDD ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå…ˆèšåˆåˆ†åŒºå†…æ•°æ®ï¼Œå†èšåˆåˆ†åŒºé—´æ•°æ®\n1 2 3 4 5 val rdd: RDD[Int] = sc.makeRDD(List(1,2,3,4)) // èšåˆæ•°æ® val reduceResult: Int = rdd.reduce(_+_) println(reduceResult) //10 åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ10=1+2+3+4\ncollect def collect(): Array[T]\nåœ¨é©±åŠ¨ç¨‹åºä¸­ï¼Œæ–¹æ³•ä¼šå°†ä¸åŒåˆ†åŒºçš„æ•°æ®æŒ‰ç…§åˆ†åŒºé¡ºåºé‡‡é›†åˆ°Driverç«¯å†…å­˜ä¸­ï¼Œå½¢æˆæ•°ç»„ã€‚\n1 2 3 4 5 val rdd: RDD[Int] = sc.makeRDD(List(1, 2, 3, 4), 2) //æ”¶é›†æ•°æ®åˆ°Driver rdd.collect().foreach(println) //1 2 3 4 first def first(): T\nè¿”å›RDD ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n1 2 3 4 val rdd: RDD[Int] = sc.makeRDD(List(1,2,3,4)) val firstResult: Int = rdd.first() println(firstResult) //1 take def take(num: Int): Array[T]\nè¿”å›ä¸€ä¸ªç”±RDD çš„å‰ n ä¸ªå…ƒç´ ç»„æˆçš„æ•°ç»„\n1 2 3 4 5 val rdd: RDD[Int] = sc.makeRDD(List(1, 2, 3, 4)) val takeResult: Array[Int] = rdd.take(2) println(takeResult.mkString(\u0026#34;,\u0026#34;)) //1,2 takeOrdered def takeOrdered(num: Int)(implicit ord: Ordering[T]): Array[T]\nè¿”å›è¯¥ RDD æ’åºåçš„å‰ n ä¸ªå…ƒç´ ç»„æˆçš„æ•°ç»„\n1 2 3 4 val rdd: RDD[Int] = sc.makeRDD(List(1, 3, 2, 4)) val result: Array[Int] = rdd.takeOrdered(2) result.foreach(println) //1 2 aggregate def aggregate[U: ClassTag](zeroValue: U)(seqOp: (U, T) =\u0026gt; U, combOp: (U, U) =\u0026gt; U): U\nåˆ†åŒºçš„æ•°æ®é€šè¿‡åˆå§‹å€¼å’Œåˆ†åŒºå†…çš„æ•°æ®è¿›è¡Œèšåˆï¼Œç„¶åå†å’Œåˆå§‹å€¼è¿›è¡Œåˆ†åŒºé—´çš„æ•°æ®èšåˆï¼›å³ï¼Œåˆå§‹å€¼ä¸ä»…å‚ä¸åˆ†åŒºå†…è®¡ç®—ï¼ŒåŒæ—¶ä¹Ÿå‚ä¸åˆ†åŒºé—´è®¡ç®—ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 val rdd: RDD[Int] = sc.makeRDD(List(1, 2, 3, 4), 8) /* * ç»„å†…ï¼š * åˆå€¼10,åˆ†åŒº1(1)ï¼Œç»„å†…ç»“æœ11 * åˆå€¼10,åˆ†åŒº2(2)ï¼Œç»„å†…ç»“æœ12 * åˆå€¼10,åˆ†åŒº3(3)ï¼Œç»„å†…ç»“æœ13 * åˆå€¼10,åˆ†åŒº4(4)ï¼Œç»„å†…ç»“æœ14 * åˆå€¼10,åˆ†åŒº5(0)ï¼Œç»„å†…ç»“æœ10 * åˆå€¼10,åˆ†åŒº6(0)ï¼Œç»„å†…ç»“æœ10 * åˆå€¼10,åˆ†åŒº7(0)ï¼Œç»„å†…ç»“æœ10 * åˆå€¼10,åˆ†åŒº8(0)ï¼Œç»„å†…ç»“æœ10 * * ç»„é—´ï¼š * åˆå€¼10,åˆ†åŒº(11,12,13,14,10,10,10,10)ï¼Œç»“æœ100 */ val result: Int = rdd.aggregate(10)(_ + _, _ + _) println(result) //100 fold def fold(zeroValue: T)(op: (T, T) =\u0026gt; T): T\næŠ˜å æ“ä½œï¼Œaggregateçš„ç®€åŒ–ç‰ˆæ“ä½œ\n1 2 3 4 val rdd: RDD[Int] = sc.makeRDD(List(1, 2, 3, 4)) val foldResult: Int = rdd.fold(0)(_ + _) println(foldResult) //10 countByKey def countByKey(): Map[K, Long]\nç»Ÿè®¡æ¯ç§ key çš„ä¸ªæ•°\n1 2 3 4 5 val rdd: RDD[(Int, String)] = sc.makeRDD(List((1, \u0026#34;a\u0026#34;), (1, \u0026#34;a\u0026#34;), (1, \u0026#34;a\u0026#34;), (2, \u0026#34;b\u0026#34;), (3, \u0026#34;c\u0026#34;), (3, \u0026#34;c\u0026#34;))) // ç»Ÿè®¡æ¯ç§ key çš„ä¸ªæ•° val result: collection.Map[Int, Long] = rdd.countByKey() println(result) //Map(1 -\u0026gt; 3, 2 -\u0026gt; 1, 3 -\u0026gt; 2) RDD ä¾èµ–å…³ç³» çª„ä¾èµ– çª„ä¾èµ–è¡¨ç¤ºæ¯ä¸€ä¸ªçˆ¶(ä¸Šæ¸¸)RDD çš„ Partition æœ€å¤šè¢«å­ï¼ˆä¸‹æ¸¸ï¼‰RDD çš„ä¸€ä¸ª Partition ä½¿ç”¨ï¼Œ çª„ä¾èµ–æˆ‘ä»¬å½¢è±¡çš„æ¯”å–»ä¸ºç‹¬ç”Ÿå­å¥³ã€‚\nå®½ä¾èµ– å®½ä¾èµ–è¡¨ç¤ºåŒä¸€ä¸ªçˆ¶ï¼ˆä¸Šæ¸¸ï¼‰RDD çš„ Partition è¢«å¤šä¸ªå­ï¼ˆä¸‹æ¸¸ï¼‰RDD çš„ Partition ä¾èµ–ï¼Œä¼šå¼•èµ· Shuffleï¼Œæ€»ç»“ï¼šå®½ä¾èµ–æˆ‘ä»¬å½¢è±¡çš„æ¯”å–»ä¸ºå¤šç”Ÿã€‚\nWordCount å…¸ä¸­å…¸ç¨‹åºï¼Œå¿…è€ƒ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 import org.apache.spark.rdd.RDD import org.apache.spark.{SparkConf, SparkContext} object WordCount { def main(args: Array[String]): Unit = { val sparkConf = new SparkConf().setMaster(\u0026#34;local\u0026#34;).setAppName(\u0026#34;WordCount\u0026#34;); val sc = new SparkContext(sparkConf) val rdd: RDD[String] = sc.textFile(\u0026#34;spark-core/src/main/resources/words\u0026#34;) val wordRDD: RDD[String] = rdd.flatMap(_.split(\u0026#34; \u0026#34;)) val wordOneRDD: RDD[(String, Int)] = wordRDD.map((_, 1)) val result: RDD[(String, Int)] = wordOneRDD.reduceByKey(_ + _) result.collect().foreach(println) //å…³é—­è¿æ¥ sc.stop(); } } æœ‰å‘æ— ç¯å›¾ DAG(Directed Acyclic Graph)å«åšæœ‰å‘æ— ç¯å›¾ï¼ŒåŸå§‹çš„RDDé€šè¿‡ä¸€ç³»åˆ—çš„è½¬æ¢å°±å½¢æˆäº†DAGã€‚\nstageçš„åˆ’åˆ† ä¸€ä¸ªJobä¼šè¢«æ‹†åˆ†ä¸ºå¤šç»„Taskï¼Œæ¯ç»„ä»»åŠ¡è¢«ç§°ä¸ºä¸€ä¸ªstageã€‚stageè¡¨ç¤ºä¸åŒçš„è°ƒåº¦é˜¶æ®µï¼Œä¸€ä¸ªspark jobä¼šå¯¹åº”äº§ç”Ÿå¾ˆå¤šä¸ªstageã€‚\næ ¹æ®RDDä¹‹é—´ä¾èµ–å…³ç³»çš„ä¸åŒå°†DAGåˆ’åˆ†æˆä¸åŒçš„Stage(è°ƒåº¦é˜¶æ®µ)\nå¯¹äºçª„ä¾èµ–ï¼Œpartitionçš„è½¬æ¢å¤„ç†åœ¨ä¸€ä¸ªStageä¸­å®Œæˆè®¡ç®— å¯¹äºå®½ä¾èµ–ï¼Œç”±äºæœ‰Shuffleçš„å­˜åœ¨ï¼Œåªèƒ½åœ¨parent RDDå¤„ç†å®Œæˆåï¼Œæ‰èƒ½å¼€å§‹æ¥ä¸‹æ¥çš„è®¡ç®— åˆ’åˆ†stageçš„ä¾æ®å°±æ˜¯å®½ä¾èµ–\né¦–å…ˆæ ¹æ®rddçš„ç®—å­æ“ä½œé¡ºåºç”ŸæˆDAGæœ‰å‘æ— ç¯å›¾ï¼Œæ¥ä¸‹é‡Œä»æœ€åä¸€ä¸ªrddå¾€å‰æ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„stageï¼ŒæŠŠè¯¥rddåŠ å…¥åˆ°è¯¥stageä¸­ï¼Œå®ƒæ˜¯æœ€åä¸€ä¸ªstageã€‚ åœ¨å¾€å‰æ¨çš„è¿‡ç¨‹ä¸­è¿è¡Œé‡åˆ°äº†çª„ä¾èµ–å°±æŠŠè¯¥rddåŠ å…¥åˆ°æœ¬stageä¸­ï¼Œå¦‚æœé‡åˆ°äº†å®½ä¾èµ–ï¼Œå°±ä»å®½ä¾èµ–åˆ‡å¼€ï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªstageä¹Ÿå°±ç»“æŸäº†ã€‚ é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„stageï¼ŒæŒ‰ç…§ç¬¬äºŒä¸ªæ­¥éª¤ç»§ç»­å¾€å‰æ¨ï¼Œä¸€ç›´åˆ°æœ€å¼€å§‹çš„rddï¼Œæ•´ä¸ªåˆ’åˆ†stageä¹Ÿå°±ç»“æŸäº† åˆ’åˆ†å®Œstageä¹‹åï¼Œæ¯ä¸€ä¸ªstageä¸­æœ‰å¾ˆå¤šå¯ä»¥å¹¶è¡Œè¿è¡Œçš„taskï¼ŒåæœŸæŠŠæ¯ä¸€ä¸ªstageä¸­çš„taskå°è£…åœ¨ä¸€ä¸ªtaskSeté›†åˆä¸­ï¼Œæœ€åæŠŠä¸€ä¸ªä¸€ä¸ªçš„taskSeté›†åˆæäº¤åˆ°workerèŠ‚ç‚¹ä¸Šçš„executorè¿›ç¨‹ä¸­è¿è¡Œã€‚\nrddä¸rddä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œstageä¸stageä¹‹å‰ä¹Ÿå­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå‰é¢stageä¸­çš„taskå…ˆè¿è¡Œï¼Œè¿è¡Œå®Œæˆäº†å†è¿è¡Œåé¢stageä¸­çš„taskï¼Œä¹Ÿå°±æ˜¯è¯´åé¢stageä¸­çš„taskè¾“å…¥æ•°æ®æ˜¯å‰é¢stageä¸­taskçš„è¾“å‡ºç»“æœæ•°æ®ã€‚\nç¼“å­˜å’Œæ£€æŸ¥ç‚¹åŒºåˆ« å¿…è€ƒï¼Œä¹Ÿæ˜¯éå¸¸é‡è¦\nCache ç¼“å­˜åªæ˜¯å°†æ•°æ®ä¸´æ—¶ä¿å­˜èµ·æ¥ã€‚Cache ç¼“å­˜çš„æ•°æ®é€šå¸¸å­˜å‚¨åœ¨å†…å­˜ï¼Œå¯é æ€§ä½ã€‚ä¸åˆ‡æ–­è¡€ç¼˜ä¾èµ–ï¼Œåªä¼šåœ¨è¡€ç¼˜å…³ç³»ä¸­æ·»åŠ æ–°çš„ä¾èµ–ï¼Œä¸€æ—¦å‡ºç°é—®é¢˜ï¼Œå¯ä»¥é‡å¤´è¯»å–æ•°æ®ã€‚ persisitï¼šå°†æ•°æ®ä¸´æ—¶å­˜å‚¨åœ¨ç£ç›˜æ–‡ä»¶ä¸­è¿›è¡Œæ•°æ®é‡ç”¨ï¼Œæ¶‰åŠåˆ°ç£ç›˜IOï¼Œæ€§èƒ½è¾ƒä½ï¼Œä½†æ˜¯æ•°æ®å®‰å…¨ã€‚å¦‚æœä½œä¸šæ‰§è¡Œå®Œæ¯•ï¼Œä¸´æ—¶ä¿å­˜çš„æ•°æ®æ–‡ä»¶å°±ä¼šä¸¢å¤±ã€‚ CheckPointï¼šå°†æ•°æ®é•¿ä¹…åœ°ä¿å­˜åœ¨ç£ç›˜æ–‡ä»¶ä¸­è¿›è¡Œæ•°æ®é‡ç”¨ï¼Œæ¶‰åŠåˆ°ç£ç›˜IOï¼Œæ€§èƒ½è¾ƒä½ï¼Œä½†æ˜¯æ•°æ®å®‰å…¨ã€‚ä¸ºäº†åŒ…è£…æ•°æ®å®‰å…¨ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šç‹¬ç«‹æ‰§è¡Œä½œä¸šï¼Œå°±æ˜¯æŠŠå½“å‰éœ€è¦æŒä¹…åŒ–çš„RDDé‡æ–°åˆ›å»ºå¹¶ä¿å­˜ã€‚ä¸ºäº†èƒ½å¤Ÿæé«˜æ•ˆç‡ï¼Œé€šå¸¸å’Œcacheè”åˆä½¿ç”¨ã€‚ Checkpoint æ£€æŸ¥ç‚¹ä¼šåˆ‡æ–­è¡€ç¼˜ä¾èµ–ï¼Œé‡æ–°å»ºç«‹æ–°çš„è¡€ç¼˜å…³ç³»ã€‚ cache æœºåˆ¶æ˜¯æ¯è®¡ç®—å‡ºä¸€ä¸ªè¦ cache çš„ partition å°±ç›´æ¥å°†å…¶ cache åˆ°å†…å­˜äº†ã€‚ä½† checkpoint æ²¡æœ‰ä½¿ç”¨è¿™ç§ç¬¬ä¸€æ¬¡è®¡ç®—å¾—åˆ°å°±å­˜å‚¨çš„æ–¹æ³•ï¼Œè€Œæ˜¯ç­‰åˆ° job ç»“æŸåå¦å¤–å¯åŠ¨ä¸“é—¨çš„ job å»å®Œæˆ checkpoint ã€‚ ä¹Ÿå°±æ˜¯è¯´éœ€è¦ checkpoint çš„ RDD ä¼šè¢«è®¡ç®—ä¸¤æ¬¡ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨checkpoint() çš„æ—¶å€™ï¼Œå»ºè®®åŠ ä¸Š rdd.cache()ï¼Œ è¿™æ ·ç¬¬äºŒæ¬¡è¿è¡Œçš„ job å°±ä¸ç”¨å†å»è®¡ç®—è¯¥ rdd äº†ï¼Œç›´æ¥è¯»å– cache å†™ç£ç›˜ã€‚å»ºè®®å¯¹checkpoint()çš„RDD ä½¿ç”¨Cache ç¼“å­˜ï¼Œè¿™æ · checkpoint çš„ job åªéœ€ä» Cache ç¼“å­˜ä¸­è¯»å–æ•°æ®å³å¯ï¼Œå¦åˆ™éœ€è¦å†ä»å¤´è®¡ç®—ä¸€æ¬¡RDDã€‚Checkpoint æ£€æŸ¥ç‚¹åˆ‡æ–­è¡€ç¼˜ä¾èµ–ã€‚ combineByKeyå’ŒaggregateByKeyçš„å¼‚åŒ ç›¸åŒç‚¹ éƒ½æœ‰ä¸‰ä¸ªå‚æ•° ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯åˆ†åŒºå†…æ“ä½œå’Œåˆ†åŒºé—´æ“ä½œ éƒ½å±äºèšåˆæ“ä½œï¼Œä½¿æ•°æ®é‡å‡å°‘ éƒ½æ˜¯è½¬æ¢ç®—å­ï¼Œä¸è§¦å‘ç¨‹åºæ‰§è¡Œ ä¸åŒç‚¹ å¯¹äºç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒaggregateByKeyæ˜¯è®¾ç½®åˆå§‹å€¼ï¼ŒcombineByKeyæ˜¯è¿›è¡Œè½¬æ¢ combineByKeyç»„å†…è®¡ç®—å’Œç»„é—´è®¡ç®—æ•°æ®æ ¼å¼ä¸ä¸€æ ·ï¼› aggregateByKeyç»„å†…è®¡ç®—å’Œç»„é—´è®¡ç®—æ•°æ®æ ¼å¼ä¸€æ · aggregateå’ŒaggregateByKeyçš„å¼‚åŒ ç›¸åŒç‚¹ éƒ½æ˜¯å…·æœ‰åˆ†åŒºå†…æ“ä½œå’Œåˆ†åŒºé—´æ“ä½œ éƒ½æ˜¯èšåˆç±»å‹çš„ç®—å­ ä¸åŒç‚¹ aggregateByKeyçš„åˆå§‹å€¼ä¸ä¼šå‚ä¸åˆ†åŒºé—´è®¡ç®—ï¼›å¯¹keyè¿›è¡Œæ“ä½œï¼Œéœ€è¦é”®å€¼å¯¹ aggregateçš„åˆå§‹å€¼ä¼šå‚ä¸åˆ†åŒºé—´è®¡ç®—ï¼Œä¼šè§¦å‘ç¨‹åºè¿è¡Œï¼Œè¿›è¡Œè¯»æ•°æ® æ±‚å¹³å‡å€¼ å…¸ä¸­å…¸ç¨‹åºï¼Œè¿™ä¹Ÿæ˜¯å¿…è€ƒ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 import org.apache.spark.rdd.RDD import org.apache.spark.{SparkConf, SparkContext} object exam { def main(args: Array[String]): Unit = { val sparkConf = new SparkConf().setMaster(\u0026#34;local\u0026#34;).setAppName(\u0026#34;exam\u0026#34;); val sc = new SparkContext(sparkConf) val lineRdd: RDD[(String, Int)] = sc.makeRDD(List((\u0026#34;Spark\u0026#34;, 5), (\u0026#34;Hadoop\u0026#34;, 3), (\u0026#34;Scala\u0026#34;, 4), (\u0026#34;Spark\u0026#34;, 3), (\u0026#34;Hadoop\u0026#34;, 1))) val rdd1: RDD[(String, (Int, Int))] = lineRdd.map(t =\u0026gt; (t._1, (t._2, 1))) val rdd2: RDD[(String, (Int, Int))] = rdd1.reduceByKey((t, k) =\u0026gt; ((t._1 + k._1), (t._2 + k._2))) val rdd3: RDD[(String, Int)] = rdd2.map( t =\u0026gt; (t._1, t._2._1 / t._2._2) ) rdd3.collect().foreach(println) sc.stop() } } ç®—å­è¡¥å…… glom def glom(): RDD[Array[T]]\nå°†åŒä¸€ä¸ªåˆ†åŒºçš„æ•°æ®ç›´æ¥è½¬æ¢ä¸ºä¸€ä¸ªç›¸åŒç±»å‹çš„å†…å­˜æ•°ç»„è¿›è¡Œå¤„ç†ï¼Œåˆ†åŒºä¸å˜\n1 2 3 4 5 val lineRdd = sc.makeRDD(List(1, 2, 3, 4),2) val glomRDD: RDD[Array[Int]] = lineRdd.glom() glomRDD.collect().foreach(data =\u0026gt; println(data.mkString(\u0026#34;,\u0026#34;))) //1,2 //3,4 sample def sample( withReplacement: Boolean, fraction: Double, seed: Long = Utils.random.nextLong): RDD[T]\næ ¹æ®æŒ‡å®šçš„è§„åˆ™ä»æ•°æ®é›†ä¸­æŠ½å–æ•°æ®\nç¬¬1ä¸ªå‚æ•°withReplacementè¡¨ç¤ºï¼šæŠ½å–åæ˜¯å¦å°†æ•°æ®è¿”å›ï¼Œtrueï¼ˆæ”¾å›ï¼‰ï¼Œfalseï¼ˆä¸¢å¼ƒï¼‰ ç¬¬2ä¸ªå‚æ•°fractionè¡¨ç¤ºï¼š å½“ç¬¬ä¸€å‚æ•°ä¸ºtrueï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºï¼šæŠ½å–ä¸æ”¾å›çš„æ¦‚ç‡ï¼›åŸºå‡†å€¼çš„æ¦‚å¿µï¼ˆæ¯ä¸ªæ•°æœ‰ä¸€ä¸ª0~1éšæœºå€¼ï¼Œç”¨éšå³å€¼ä¸åŸºå‡†å€¼è¿›è¡Œæ¯”è¾ƒï¼‰ï¼› å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºfalseï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºï¼Œå¯èƒ½æŠ½å–çš„æ¬¡æ•°ã€‚ ç¬¬3ä¸ªå‚æ•°seedè¡¨ç¤ºï¼šæŠ½å–æ•°æ®æ—¶ï¼Œéšæœºç®—æ³•çš„ç§å­ï¼›å¦‚æœä¸ä¼ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆä½¿ç”¨çš„å½“å‰ç³»ç»Ÿæ—¶é—´ 1 2 3 4 5 6 7 8 9 10 11 12 13 val dataRDD = sparkContext.makeRDD(List( 1,2,3,4),1) // æŠ½å–æ•°æ®ä¸æ”¾å›ï¼ˆä¼¯åŠªåˆ©ç®—æ³•ï¼‰ // ä¼¯åŠªåˆ©ç®—æ³•ï¼šåˆå« 0ã€1 åˆ†å¸ƒã€‚ä¾‹å¦‚æ‰”ç¡¬å¸ï¼Œè¦ä¹ˆæ­£é¢ï¼Œè¦ä¹ˆåé¢ã€‚ // å…·ä½“å®ç°ï¼šæ ¹æ®ç§å­å’Œéšæœºç®—æ³•ç®—å‡ºä¸€ä¸ªæ•°å’Œç¬¬äºŒä¸ªå‚æ•°è®¾ç½®å‡ ç‡æ¯”è¾ƒï¼Œå°äºç¬¬äºŒä¸ªå‚æ•°è¦ï¼Œå¤§äºä¸è¦ // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæŠ½å–çš„æ•°æ®æ˜¯å¦æ”¾å›ï¼Œfalseï¼šä¸æ”¾å› // ç¬¬äºŒä¸ªå‚æ•°ï¼šæŠ½å–çš„å‡ ç‡ï¼ŒèŒƒå›´åœ¨[0,1]ä¹‹é—´,0ï¼šå…¨ä¸å–ï¼›1ï¼šå…¨å–ï¼› // ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šéšæœºæ•°ç§å­ val dataRDD1 = dataRDD.sample(false, 0.5) // æŠ½å–æ•°æ®æ”¾å›ï¼ˆæ³Šæ¾ç®—æ³•ï¼‰ // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæŠ½å–çš„æ•°æ®æ˜¯å¦æ”¾å›ï¼Œtrueï¼šæ”¾å›ï¼›falseï¼šä¸æ”¾å› // ç¬¬äºŒä¸ªå‚æ•°ï¼šé‡å¤æ•°æ®çš„å‡ ç‡ï¼ŒèŒƒå›´å¤§äºç­‰äº 0.è¡¨ç¤ºæ¯ä¸€ä¸ªå…ƒç´ è¢«æœŸæœ›æŠ½å–åˆ°çš„æ¬¡æ•° // ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šéšæœºæ•°ç§å­ val dataRDD2 = dataRDD.sample(true, 2) partitionBy def partitionBy(partitioner: Partitioner): RDD[(K, V)]\nå°†æ•°æ®æŒ‰ç…§æŒ‡å®šçš„Partitionerè§„åˆ™ é‡æ–°è¿›è¡Œé‡æ–°åˆ†åŒºã€‚Spark é»˜è®¤çš„åˆ†åŒºå™¨æ˜¯HashPartitioner\nå¤ªå†·é—¨äº†ï¼Œåº”è¯¥ä¸è€ƒï¼Œå°±ä¸æ”¾ä»£ç äº†\ncogroup def cogroup[W](other: RDD[(K, W)]): RDD[(K, (Iterable[V], Iterable[W]))]\nåœ¨ç±»å‹ä¸º(K,V)å’Œ(K,W)çš„RDD ä¸Šè°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ª(K,(Iterable\u0026lt;V\u0026gt;,Iterable\u0026lt;W\u0026gt;))ç±»å‹çš„ RDD\n1 2 3 4 5 6 7 8 9 10 val rdd1 = sc.makeRDD(List((\u0026#34;a\u0026#34;,1), (\u0026#34;b\u0026#34;, 2), (\u0026#34;x\u0026#34;, 44)),2) val rdd2 = sc.makeRDD(List((\u0026#34;a\u0026#34;, 5), (\u0026#34;b\u0026#34;,4),(\u0026#34;c\u0026#34;, 3), (\u0026#34;c\u0026#34;, 99)),2) val cgRDD: RDD[(String, (Iterable[Int], Iterable[Int]))] = rdd1.cogroup(rdd2) cgRDD.collect().foreach(println) //(x,(CompactBuffer(44),CompactBuffer())) //(b,(CompactBuffer(2),CompactBuffer(4))) //(a,(CompactBuffer(1),CompactBuffer(5))) //(c,(CompactBuffer(),CompactBuffer(3, 99))) ä¸‹é¢éƒ½æ˜¯è¡ŒåŠ¨ç®—å­\ncount def count(): Long\nè¿”å›RDD ä¸­å…ƒç´ çš„ä¸ªæ•°\nsaveAsTextFile def saveAsTextFile(path: String): Unit\nä¿å­˜æˆ Text æ–‡ä»¶\n1 rdd.saveAsTextFile(\u0026#34;output\u0026#34;) ","date":"2022-06-08T09:33:43+08:00","image":"https://lbqaq.top/p/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/97475626.webp","permalink":"https://lbqaq.top/p/%E4%BA%91%E8%AE%A1%E7%AE%97%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","title":"äº‘è®¡ç®—å­¦ä¹ ç¬”è®°"},{"content":"å·ç§¯ç¥ç»ç½‘ç»œ(CNN) CNNçš„åŸºæœ¬æ¶æ„ ä¸€ä¸ªå…¸å‹çš„å·ç§¯ç½‘ç»œæ˜¯ç”±å·ç§¯å±‚ã€ æ±‡èšå±‚ã€ å…¨è¿æ¥å±‚äº¤å‰å †å è€Œæˆã€‚\nä¸€ä¸ªå·ç§¯å—ä¸ºè¿ç»­ ğ‘€ ä¸ªå·ç§¯å±‚å’Œ ğ‘ ä¸ªæ±‡èšå±‚ï¼ˆ ğ‘€ é€šå¸¸è®¾ç½®ä¸º2 âˆ¼ 5ï¼Œğ‘ä¸º0æˆ–1ï¼‰ã€‚ ä¸€ä¸ªå·ç§¯ç½‘ç»œä¸­å¯ä»¥å †å ğ‘ ä¸ªè¿ç»­çš„å·ç§¯å—ï¼Œ ç„¶ååœ¨åé¢æ¥ç€ ğ¾ ä¸ªå…¨è¿æ¥å±‚ï¼ˆ ğ‘ çš„å–å€¼åŒºé—´æ¯”è¾ƒå¤§ï¼Œ æ¯”å¦‚ 1 âˆ¼ 100 æˆ–è€…æ›´å¤§ï¼›ğ¾ ä¸€èˆ¬ä¸º0 âˆ¼ 2ï¼‰ã€‚\nä¸Šé¢è¿™å¼ å›¾é‡Œçš„æ±‡èšå±‚ä¹Ÿå°±æ˜¯ä¸‹é¢å›¾ä¸­çš„æ± åŒ–å±‚\nè¾“å…¥å±‚ã€‚åœ¨ä¸Šå›¾ä¸­å°±æ˜¯æœ€å·¦è¾¹çš„èˆ¹çš„å›¾åƒï¼Œè®¡ç®—æœºç†è§£ä¸ºè¾“å…¥è‹¥å¹²ä¸ªçŸ©é˜µã€‚ å·ç§¯å±‚(Convolution Layer)ã€‚å·ç§¯å±‚çš„æ¿€æ´»å‡½æ•°ä½¿ç”¨çš„æ˜¯ReLUï¼Œ$ReLU(x) = max(0,x)$ã€‚ æ± åŒ–å±‚(Pooling layer)ã€‚æ± åŒ–å±‚æ²¡æœ‰æ¿€æ´»å‡½æ•°ã€‚ å·ç§¯å±‚+æ± åŒ–å±‚çš„ç»„åˆå¯ä»¥åœ¨éšè—å±‚å‡ºç°å¾ˆå¤šæ¬¡ï¼Œä¸Šå›¾ä¸­å‡ºç°ä¸¤æ¬¡ã€‚è¿™é‡Œå·ç§¯å±‚+æ± åŒ–å±‚å¯éšæ„ç»„åˆï¼Œå¦‚å·ç§¯å±‚+å·ç§¯å±‚ï¼Œæˆ–è€…å·ç§¯å±‚+å·ç§¯å±‚+æ± åŒ–å±‚ã€‚ä¸è¿‡æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯è‹¥å¹²å·ç§¯å±‚+æ± åŒ–å±‚çš„ç»„åˆã€‚\nå…¨è¿æ¥å±‚(Fully Connected Layer, ç®€ç§°FC)ï¼Œè¾“å‡ºå±‚ä½¿ç”¨äº†Softmaxæ¿€æ´»å‡½æ•°æ¥åšå›¾åƒè¯†åˆ«çš„åˆ† ä¸ºäº†ç»Ÿä¸€èµ·è§ï¼Œæˆ‘ä»¬ä¸‹é¢å¯¹äºPooling layerçš„ä¸­æ–‡ç¿»è¯‘éƒ½ä¸ºæ±‡èšå±‚ã€‚\nå·ç§¯ å¯¹äºä¸€ç»´å·ç§¯ï¼Œæˆ‘ä»¬å‡è®¾æ»¤æ³¢å™¨é•¿åº¦ä¸º$K$ï¼Œ å®ƒå’Œä¸€ä¸ªä¿¡å·åºåˆ—$x_1,x_2,\u0026hellip;$çš„å·ç§¯ä¸ºï¼š\n$$ y_t=\\sum_{k=1}^{K}w_kx_{t-k+1} $$ä¸ºäº†ç®€å•èµ·è§ï¼Œ è¿™é‡Œå‡è®¾å·ç§¯çš„è¾“å‡º$y_t$ çš„ä¸‹æ ‡$t$ä»$k$å¼€å§‹\nä¿¡å·åºåˆ—$x$å’Œæ»¤æ³¢å™¨$w$ï¼ˆä¹Ÿå«å·ç§¯æ ¸ï¼‰çš„å·ç§¯å®šä¹‰ä¸ºï¼š\n$$ y=w*x $$å…¶ä¸­$*$è¡¨ç¤ºå·ç§¯è¿ç®—ã€‚\nå¯¹äºäºŒç»´çŸ©é˜µï¼Œç»™å®šå›¾åƒ$X(M\\times N)$ï¼Œæ»¤æ³¢å™¨$W(U \\times V)$æˆ‘ä»¬å®šä¹‰ï¼š\n$$ y_{ij}=\\sum_{u=1}^{U}\\sum_{v=1}^{V} w_{uv}x_{i-u+1,j-v+1} $$å…‰çœ‹å…¬å¼è¿˜æ˜¯æ¯”è¾ƒæŠ½è±¡çš„ï¼Œè¿˜æ˜¯è¦ä¸¾ä¸ªä¾‹å­ï¼š\nå›¾ä¸­çš„è¾“å…¥æ˜¯ä¸€ä¸ªäºŒç»´çš„3x4çš„çŸ©é˜µï¼Œè€Œå·ç§¯æ ¸æ˜¯ä¸€ä¸ª2x2çš„çŸ©é˜µã€‚è¿™é‡Œæˆ‘ä»¬å‡è®¾å·ç§¯æ˜¯ä¸€æ¬¡ç§»åŠ¨ä¸€ä¸ªåƒç´ æ¥å·ç§¯çš„ï¼Œé‚£ä¹ˆé¦–å…ˆæˆ‘ä»¬å¯¹è¾“å…¥çš„å·¦ä¸Šè§’2x2å±€éƒ¨å’Œå·ç§¯æ ¸å·ç§¯ï¼Œå³å„ä¸ªä½ç½®çš„å…ƒç´ ç›¸ä¹˜å†ç›¸åŠ ï¼Œå¾—åˆ°çš„è¾“å‡ºçŸ©é˜µSçš„$S_{00}$çš„å…ƒç´ ï¼Œå€¼ä¸º$aw+bx+ey+fz$ã€‚æ¥ç€æˆ‘ä»¬å°†è¾“å…¥çš„å±€éƒ¨å‘å³å¹³ç§»ä¸€ä¸ªåƒç´ ï¼Œç°åœ¨æ˜¯(b,c,f,g)å››ä¸ªå…ƒç´ æ„æˆçš„çŸ©é˜µå’Œå·ç§¯æ ¸æ¥å·ç§¯ï¼Œè¿™æ ·æˆ‘ä»¬å¾—åˆ°äº†è¾“å‡ºçŸ©é˜µSçš„$S_{01}$çš„å…ƒç´ ï¼ŒåŒæ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¾“å‡ºçŸ©é˜µSçš„$S_{02}ï¼ŒS_{10}ï¼ŒS_{11}ï¼Œ S_{12}$çš„å…ƒç´ ã€‚\næœ€ç»ˆæˆ‘ä»¬å¾—åˆ°å·ç§¯è¾“å‡ºçš„çŸ©é˜µä¸ºä¸€ä¸ª2x3çš„çŸ©é˜µSã€‚\nå¦‚æœè¿™ä¸ªä¾‹å­è¿˜æ˜¯ä¸ç›´è§‚ï¼Œå¯ä»¥çœ‹ä¸‹é¢è¿™ä¸ªåŠ¨å›¾ï¼š\nå¯æ˜¯ï¼Œè€ƒè¯•æ—¶å¯ä¸ä»…ä»…ä¼šè€ƒäºŒç»´çš„çŸ©é˜µï¼Œè¿˜ä¼šè€ƒä¸‰ç»´çŸ©é˜µã€‚\nåœ¨ä»‹ç»ä¸‰ç»´çŸ©é˜µä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¼•å…¥ä¸¤ä¸ªæ¦‚å¿µï¼š\næ­¥é•¿(Stride)ï¼šæŒ‡å·ç§¯æ ¸åœ¨æ»‘åŠ¨æ—¶çš„æ—¶é—´é—´éš”ã€‚è¯´äººè¯å°±æ˜¯çŸ©é˜µæ¯æ¬¡å³ç§»çš„é•¿åº¦ï¼Œæ¯”å¦‚ä¸‹é¢è¦è¯´çš„ä¾‹å­ä¸­æ­¥é•¿ä¸º2å°±å³ç§»2ä¸ªåƒç´ ã€‚ é›¶å¡«å……(Zero Padding)ï¼šæ˜¯åœ¨è¾“å…¥å‘é‡ä¸¤ç«¯è¿›è¡Œè¡¥é›¶ã€‚æ¯”å¦‚ä¸‹é¢è¦è¯´çš„ä¾‹å­pad=1ï¼Œå°±åœ¨çŸ©é˜µå‘¨å›´å¡«ä¸€åœˆ0 åœ¨æ–¯å¦ç¦å¤§å­¦çš„cs231nçš„è¯¾ç¨‹ä¸Šï¼Œæœ‰ä¸€ä¸ªåŠ¨æ€çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°±çœ‹è¿™ä¸ªä¾‹å­ã€‚\nConvolution demo\nå¯ä»¥çœ‹å‡ºæ¥ï¼Œå¯¹äºä¸‰ç»´çš„çŸ©é˜µï¼Œæˆ‘ä»¬æ˜¯å°†å…¶æ‹†æˆ3ä¸ªäºŒç»´çš„çŸ©é˜µï¼Œç„¶åå¯¹åº”çš„å°†è¾“å…¥$X$å’Œå·ç§¯æ ¸$W$è¿›è¡Œå·ç§¯è¿ç®—ã€‚\næ±‡èšå±‚ å…¶ä½œç”¨æ˜¯è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œé™ä½ç‰¹å¾æ•°é‡ï¼Œ ä»è€Œå‡å°‘å‚æ•°æ•°é‡ã€‚è¯´äººè¯å°±æ˜¯è¾“å…¥å¼ é‡çš„å„ä¸ªå­çŸ©é˜µè¿›è¡Œå‹ç¼©ã€‚å‡å¦‚æ˜¯2x2çš„æ±‡èšï¼Œé‚£ä¹ˆå°±å°†å­çŸ©é˜µçš„æ¯2x2ä¸ªå…ƒç´ å˜æˆä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ˜¯3x3çš„æ±‡èšï¼Œé‚£ä¹ˆå°±å°†å­çŸ©é˜µçš„æ¯3x3ä¸ªå…ƒç´ å˜æˆä¸€ä¸ªå…ƒç´ ï¼Œè¿™æ ·è¾“å…¥çŸ©é˜µçš„ç»´åº¦å°±å˜å°äº†ã€‚\nè¦æƒ³å°†è¾“å…¥å­çŸ©é˜µçš„æ¯nxnä¸ªå…ƒç´ å˜æˆä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆéœ€è¦ä¸€ä¸ªæ±‡èšæ ‡å‡†ã€‚å¸¸è§çš„æ±‡èšæ ‡å‡†æœ‰2ä¸ªï¼ŒMAXæˆ–è€…æ˜¯MEANã€‚å³å–å¯¹åº”åŒºåŸŸçš„æœ€å¤§å€¼æˆ–è€…å¹³å‡å€¼ä½œä¸ºæ±‡èšåçš„å…ƒç´ å€¼ã€‚\nä¸‹é¢è¿™ä¸ªä¾‹å­é‡‡ç”¨å–æœ€å¤§å€¼çš„æ±‡èšæ–¹æ³•ã€‚åŒæ—¶é‡‡ç”¨çš„æ˜¯2x2çš„æ±‡èšã€‚æ­¥å¹…ä¸º2ã€‚\né¦–å…ˆå¯¹çº¢è‰²2x2åŒºåŸŸè¿›è¡Œæ±‡èšï¼Œç”±äºæ­¤2x2åŒºåŸŸçš„æœ€å¤§å€¼ä¸º6ã€‚é‚£ä¹ˆå¯¹åº”çš„æ±‡èšè¾“å‡ºä½ç½®çš„å€¼ä¸º6ï¼Œç”±äºæ­¥å¹…ä¸º2ï¼Œæ­¤æ—¶ç§»åŠ¨åˆ°ç»¿è‰²çš„ä½ç½®å»è¿›è¡Œæ±‡èšï¼Œè¾“å‡ºçš„æœ€å¤§å€¼ä¸º8ã€‚åŒæ ·çš„æ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ°é»„è‰²åŒºåŸŸå’Œè“è‰²åŒºåŸŸçš„è¾“å‡ºå€¼ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬çš„è¾“å…¥4x4çš„çŸ©é˜µåœ¨æ±‡èšåå˜æˆäº†2x2çš„çŸ©é˜µï¼Œè¿›è¡Œäº†å‹ç¼©ã€‚\nä¾‹é¢˜ æœ‰äº†ä¸Šé¢è¿™äº›å†…å®¹çš„é“ºå«ï¼Œæˆ‘ä»¬å°±ä¼šæƒŠå–œçš„å‘ç°ï¼Œä¸‹é¢è¿™é“é¢˜å¯ä»¥è½»æ¾çš„å®Œæˆäº†\nå¾ªç¯ç¥ç»ç½‘ç»œ(RNN) åœ¨å‰é¢è®²åˆ°çš„DNNå’ŒCNNä¸­ï¼Œè®­ç»ƒæ ·æœ¬çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯æ¯”è¾ƒçš„ç¡®å®šçš„ã€‚ä½†æ˜¯æœ‰ä¸€ç±»é—®é¢˜DNNå’ŒCNNä¸å¥½è§£å†³ï¼Œå°±æ˜¯è®­ç»ƒæ ·æœ¬è¾“å…¥æ˜¯è¿ç»­çš„åºåˆ—,ä¸”åºåˆ—çš„é•¿çŸ­ä¸ä¸€ï¼Œæ¯”å¦‚åŸºäºæ—¶é—´çš„åºåˆ—ï¼šä¸€æ®µæ®µè¿ç»­çš„è¯­éŸ³ï¼Œä¸€æ®µæ®µè¿ç»­çš„æ‰‹å†™æ–‡å­—ã€‚è¿™äº›åºåˆ—æ¯”è¾ƒé•¿ï¼Œä¸”é•¿åº¦ä¸ä¸€ï¼Œæ¯”è¾ƒéš¾ç›´æ¥çš„æ‹†åˆ†æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„æ ·æœ¬æ¥é€šè¿‡DNN/CNNè¿›è¡Œè®­ç»ƒã€‚\nè¿™æ—¶å°±éœ€è¦RNNäº†ã€‚RNNæ˜¯ä¸€ç±»å…·æœ‰çŸ­æœŸè®°å¿†èƒ½åŠ›çš„ç¥ç»ç½‘ç»œï¼ŒRNNçš„æ¨¡å‹å¦‚ä¸‹ï¼š\nå•ä¸€ç¥ç»å…ƒçš„RNN 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 class SingleLayerRNN(nn.Module): def __init__(self, inputSize, hiddenSize): super(SingleLayerRNN, self).__init__() # inputSize x hiddenSize : 4 x 1 self.Wx = torch.randn(inputSize, hiddenSize) # hiddenSize x hiddenSize : 1 x 1 self.Wy = torch.randn(hiddenSize, hiddenSize) self.b = torch.zeros(1, hiddenSize) # 1 xhiddenSize : 1 x 4 def forward(self, X0, X1): # batchSize x hiddenSize : 1 x 4 self.Y0 = torch.tanh(torch.mm(X0, self.Wx) + self.b) # batchSize x hiddenSize : 1 X 4 self.Y1 = torch.tanh(torch.mm(X1, self.Wx) + self.b + torch.mm(self.Y0, self.Wy)) return self.Y0, self.Y1 INPUT_SIZE = 4 HIDDEN_SIZE = 1 # t=0 =\u0026gt; batchSize x inputSize : 4 x 4 X0_batch = torch.tensor([[0, 1, 2, 0], [3, 4, 5, 0], [6, 7, 8, 0], [9, 0, 1, 0]], dtype=torch.float) # t=1 =\u0026gt; batchSize x inputSize : 4 x 4 X1_batch = torch.tensor([[9, 8, 7, 0], [0, 0, 0, 0], [6, 5, 4, 0], [3, 2, 1, 0]], dtype=torch.float) model = SingleLayerRNN(INPUT_SIZE, HIDDEN_SIZE) Y0_batch, Y1_batch = model(X0_batch, X1_batch) print(Y0_batch) print(Y1_batch) ä½¿ç”¨RNNè¿›è¡ŒMNISTè®­ç»ƒ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 import torch import torch.nn as nn import torchvision import torchvision.transforms as transforms import matplotlib.pyplot as plt import numpy as np import torch.optim as optim import os os.environ[\u0026#34;KMP_DUPLICATE_LIB_OK\u0026#34;]=\u0026#34;TRUE\u0026#34; BATCH_SIZE = 64 DOWNLOAD_DATASET = False # list all transformations transform = transforms.Compose([ transforms.Resize((28, 28)), transforms.ToTensor(), ]) # download and load training dataset trainDataset = torchvision.datasets.MNIST(root=\u0026#39;./MNIST/\u0026#39;, train=True, download=DOWNLOAD_DATASET, transform=transform) trainLoader = torch.utils.data.DataLoader(trainDataset, batch_size=BATCH_SIZE, shuffle=True) # download and load testing dataset testDataset = torchvision.datasets.MNIST(root=\u0026#39;./MNIST/\u0026#39;, train=False, download=DOWNLOAD_DATASET, transform=transform) testLoader = torch.utils.data.DataLoader(testDataset, batch_size=BATCH_SIZE, shuffle=False) # functions to show an image def imshow(img): # img = img / 2 + 0.5 # unnormalize npimg = img.numpy() plt.imshow(np.transpose(npimg, (1, 2, 0))) # get some random training images dataIter = iter(trainLoader) images, labels = dataIter.next() # show images imshow(torchvision.utils.make_grid(images)) # parameters INPUT_SIZE = 28 HIDDEN_SIZE = 150 OUTPUT_SIZE = 10 TIME_STEP = 28 MAX_EPOCH = 10 class ImageRNN(nn.Module): def __init__(self, batchSize, timeStep, inputSize, hiddenSize, outputSize): super(ImageRNN, self).__init__() self.hiddenSize = hiddenSize self.batchSize = batchSize self.timeStep = timeStep self.inputSize = inputSize self.outputSize = outputSize self.RNN = nn.RNN(self.inputSize, self.hiddenSize) self.fc = nn.Linear(self.hiddenSize, self.outputSize) def initializeHidden(self, ): # (num_layers, batch_size, hidden_size) return torch.zeros(1, self.batchSize, self.hiddenSize) def forward(self, X): # transforms X to dimensions: timeStep x batchSize x inputSize X = X.permute(1, 0, 2) self.batchSize = X.size(1) self.hidden = self.initializeHidden() # rnnOutput =\u0026gt; timeStep, batchSize, hiddenSize (hidden states for each time step) # self.hidden =\u0026gt; 1, batchSize, hiddenSize (final state from each rnnOutput) rnnOutput, self.hidden = self.RNN(X, self.hidden) out = self.fc(self.hidden) return out.view(-1, self.outputSize) # batchSize x outputSize dataIter = iter(trainLoader) images, labels = dataIter.next() model = ImageRNN(BATCH_SIZE, TIME_STEP, INPUT_SIZE, HIDDEN_SIZE, OUTPUT_SIZE) ypred = model(images.view(-1, 28, 28)) print(ypred[0:10]) # Device device = torch.device(\u0026#34;cuda:0\u0026#34; if torch.cuda.is_available() else \u0026#34;cpu\u0026#34;) # Model instance model = ImageRNN(BATCH_SIZE, TIME_STEP, INPUT_SIZE, HIDDEN_SIZE, OUTPUT_SIZE) criterion = nn.CrossEntropyLoss() optimizer = optim.Adam(model.parameters(), lr=0.001) def computeAccuracy(output, target): \u0026#39;\u0026#39;\u0026#39; Obtain accuracy for training round \u0026#39;\u0026#39;\u0026#39; corrects = (torch.max(output, 1)[1].view(target.size()).data == target.data).sum() accuracy = 100.0 * corrects / torch.numel(target) return accuracy.item() for epoch in range(MAX_EPOCH): # loop over the dataset multiple times trainLoss = 0.0 trainAccuracy = 0.0 model.train() # TRAINING ROUND for i, data in enumerate(trainLoader): # reset hidden states model.hidden = model.initializeHidden() # get the inputs inputs, labels = data inputs = inputs.view(-1, 28, 28) # forward ypred = model(inputs) loss = criterion(ypred, labels) # backward + optimize optimizer.zero_grad() loss.backward() optimizer.step() trainLoss += loss.detach().item() trainAccuracy += computeAccuracy(ypred, labels) model.eval() print(\u0026#39;Epoch: {:2d} | Loss: {:8.4f} | Train Accuracy: {:5.2f}\u0026#39;.format(epoch, trainLoss / i, trainAccuracy / i)) model.eval() testAccuracy = 0.0 for i, (images, labels) in enumerate(testLoader, 0): images = images.to(device) labels = labels.to(device) outputs = model(images.view(-1, 28, 28)) testAccuracy += computeAccuracy(outputs, labels) print(\u0026#39;Test Accuracy: {:6.2f}\u0026#39;.format(testAccuracy / len(testLoader))) å‚è€ƒèµ„æ–™ å·ç§¯ç¥ç»ç½‘ç»œ(CNN)æ¨¡å‹ç»“æ„ - åˆ˜å»ºå¹³Pinard - åšå®¢å›­ ç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹  ","date":"2022-05-20T13:18:58+08:00","image":"https://lbqaq.top/p/%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/98259515.webp","permalink":"https://lbqaq.top/p/%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","title":"ç‰¹å¾å·¥ç¨‹å­¦ä¹ ç¬”è®°"},{"content":"çº¿æ€§å›å½’ çº¿æ€§å›å½’é‡åˆ°çš„é—®é¢˜ä¸€èˆ¬æ˜¯è¿™æ ·çš„ã€‚æˆ‘ä»¬æœ‰mä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬å¯¹åº”äºnç»´ç‰¹å¾å’Œä¸€ä¸ªç»“æœè¾“å‡ºï¼Œå¦‚ä¸‹ï¼š\n$$ (x_1^{(0)}, x_2^{(0)}, ...x_n^{(0)}, y_0), (x_1^{(1)}, x_2^{(1)}, ...x_n^{(1)},y_1), ... (x_1^{(m)}, x_2^{(m)}, ...x_n^{(m)}, y_m) $$æˆ‘ä»¬çš„é—®é¢˜æ˜¯ï¼Œå¯¹äºä¸€ä¸ªæ–°çš„$(x_1^{(x)}, x_2^{(x)}, \u0026hellip;x_n^{(x)})$, ä»–æ‰€å¯¹åº”çš„$y_x$æ˜¯å¤šå°‘å‘¢ï¼Ÿ å¦‚æœè¿™ä¸ªé—®é¢˜é‡Œé¢çš„yæ˜¯è¿ç»­çš„ï¼Œåˆ™æ˜¯ä¸€ä¸ªå›å½’é—®é¢˜ï¼Œå¦åˆ™æ˜¯ä¸€ä¸ªåˆ†ç±»é—®é¢˜ã€‚\nå¯¹äºnç»´ç‰¹å¾çš„æ ·æœ¬æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬å†³å®šä½¿ç”¨çº¿æ€§å›å½’ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ¨¡å‹æ˜¯è¿™æ ·çš„ï¼š\n$h_\\theta(x_1, x_2, \u0026hellip;x_n) = \\theta_0 + \\theta_{1}x_1 + \u0026hellip; + \\theta_{n}x_{n}$, å…¶ä¸­$\\theta_i$ (i = 0,1,2\u0026hellip; n)ä¸ºæ¨¡å‹å‚æ•°ï¼Œ$x_i$ (i = 0,1,2\u0026hellip; n)ä¸ºæ¯ä¸ªæ ·æœ¬çš„nä¸ªç‰¹å¾å€¼ã€‚è¿™ä¸ªè¡¨ç¤ºå¯ä»¥ç®€åŒ–ï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ªç‰¹å¾$x_0 = 1$ï¼Œè¿™æ ·$h_\\theta(x_0, x_1, \u0026hellip;x_n) = \\sum\\limits_{i=0}^{n}\\theta_{i}x_{i}$ã€‚\nğŸ’¡ å‡æ–¹è¯¯å·®(MSE)\n$$ \u003e MSE=\\frac{1}{n}\\sum_{i=1}^{m}w_i(y_i-\\widehat{y_i})^2 \u003e $$ å…¶ä¸­$y_i$æ˜¯çœŸå®æ•°æ®ï¼Œ$\\widehat{y_i}$æ˜¯æ‹Ÿåˆçš„æ•°æ®ï¼Œ$w_i\u0026gt;0$\nå¾—åˆ°äº†æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦æ±‚å‡ºéœ€è¦çš„æŸå¤±å‡½æ•°ï¼Œä¸€èˆ¬çº¿æ€§å›å½’æˆ‘ä»¬ç”¨ å‡æ–¹è¯¯å·®(MSE) ä½œä¸ºæŸå¤±å‡½æ•°ã€‚æŸå¤±å‡½æ•°çš„ä»£æ•°æ³•è¡¨ç¤ºå¦‚ä¸‹ï¼š\n$$ J(\\theta_0, \\theta_1..., \\theta_n) = \\sum\\limits_{i=1}^{m}(h_\\theta(x_0^{(i)}, x_1^{(i)}, ...x_n^{(i)}) - y_i)^2 $$ç”±äºçŸ©é˜µå½¢å¼ä¸å¥½ç†è§£ï¼Œè¿™é‡Œå°±ä¸åˆ—å‡ºäº†ã€‚\nå¦‚ä½•æ±‚æŸå¤±å‡½æ•°æœ€å°åŒ–æ—¶å€™çš„$\\mathbf{\\theta}$å‚æ•°ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•äº†ã€‚\næ¢¯åº¦ä¸‹é™æ³• æ¢¯åº¦ åœ¨å¾®ç§¯åˆ†é‡Œé¢ï¼Œå¯¹å¤šå…ƒå‡½æ•°çš„å‚æ•°æ±‚âˆ‚åå¯¼æ•°ï¼ŒæŠŠæ±‚å¾—çš„å„ä¸ªå‚æ•°çš„åå¯¼æ•°ä»¥å‘é‡çš„å½¢å¼å†™å‡ºæ¥ï¼Œå°±æ˜¯æ¢¯åº¦ã€‚é‚£ä¹ˆè¿™ä¸ªæ¢¯åº¦å‘é‡æ±‚å‡ºæ¥æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿä»–çš„æ„ä¹‰ä»å‡ ä½•æ„ä¹‰ä¸Šè®²ï¼Œå°±æ˜¯å‡½æ•°å˜åŒ–å¢åŠ æœ€å¿«çš„åœ°æ–¹ã€‚\næ¢¯åº¦ä¸‹é™çš„ç›´è§‚è§£é‡Š é¦–å…ˆæ¥çœ‹çœ‹æ¢¯åº¦ä¸‹é™çš„ä¸€ä¸ªç›´è§‚çš„è§£é‡Šã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸€åº§å¤§å±±ä¸Šçš„æŸå¤„ä½ç½®ï¼Œç”±äºæˆ‘ä»¬ä¸çŸ¥é“æ€ä¹ˆä¸‹å±±ï¼Œäºæ˜¯å†³å®šèµ°ä¸€æ­¥ç®—ä¸€æ­¥ï¼Œä¹Ÿå°±æ˜¯åœ¨æ¯èµ°åˆ°ä¸€ä¸ªä½ç½®çš„æ—¶å€™ï¼Œæ±‚è§£å½“å‰ä½ç½®çš„æ¢¯åº¦ï¼Œæ²¿ç€æ¢¯åº¦çš„è´Ÿæ–¹å‘ï¼Œä¹Ÿå°±æ˜¯å½“å‰æœ€é™¡å³­çš„ä½ç½®å‘ä¸‹èµ°ä¸€æ­¥ï¼Œç„¶åç»§ç»­æ±‚è§£å½“å‰ä½ç½®æ¢¯åº¦ï¼Œå‘è¿™ä¸€æ­¥æ‰€åœ¨ä½ç½®æ²¿ç€æœ€é™¡å³­æœ€æ˜“ä¸‹å±±çš„ä½ç½®èµ°ä¸€æ­¥ã€‚è¿™æ ·ä¸€æ­¥æ­¥çš„èµ°ä¸‹å»ï¼Œä¸€ç›´èµ°åˆ°è§‰å¾—æˆ‘ä»¬å·²ç»åˆ°äº†å±±è„šã€‚å½“ç„¶è¿™æ ·èµ°ä¸‹å»ï¼Œæœ‰å¯èƒ½æˆ‘ä»¬ä¸èƒ½èµ°åˆ°å±±è„šï¼Œè€Œæ˜¯åˆ°äº†æŸä¸€ä¸ªå±€éƒ¨çš„å±±å³°ä½å¤„ã€‚\nä»ä¸Šé¢çš„è§£é‡Šå¯ä»¥çœ‹å‡ºï¼Œæ¢¯åº¦ä¸‹é™ä¸ä¸€å®šèƒ½å¤Ÿæ‰¾åˆ°å…¨å±€çš„æœ€ä¼˜è§£ï¼Œæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªå±€éƒ¨æœ€ä¼˜è§£ã€‚å½“ç„¶ï¼Œå¦‚æœæŸå¤±å‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼Œæ¢¯åº¦ä¸‹é™æ³•å¾—åˆ°çš„è§£å°±ä¸€å®šæ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚\næ¢¯åº¦ä¸‹é™æ³•çš„ä»£æ•°æ–¹å¼æè¿° åœ¨ä¸Šé¢çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“äº†çº¿æ€§å›å½’çš„å‡½æ•°ä¸ºï¼š\n$$ h_\\theta(x_0, x_1, ...x_n) = \\sum\\limits_{i=0}^{n}\\theta_{i}x_{i} $$æŸå¤±å‡½æ•°ä¸ºï¼š\n$$ J(\\theta_0, \\theta_1..., \\theta_n) = \\sum\\limits_{i=1}^{m}(h_\\theta(x_0^{(i)}, x_1^{(i)}, ...x_n^{(i)}) - y_i)^2 $$ç®—æ³•ç›¸å…³å‚æ•°åˆå§‹åŒ–ï¼šä¸»è¦æ˜¯åˆå§‹åŒ–$\\theta_0, \\theta_1\u0026hellip;, \\theta_n$ ,ç®—æ³•ç»ˆæ­¢è·ç¦»$\\varepsilon$ ä»¥åŠæ­¥é•¿$\\alpha$ ã€‚åœ¨æ²¡æœ‰ä»»ä½•å…ˆéªŒçŸ¥è¯†çš„æ—¶å€™ï¼Œæˆ‘å–œæ¬¢å°†æ‰€æœ‰çš„$\\theta$ åˆå§‹åŒ–ä¸º0ï¼Œ å°†æ­¥é•¿åˆå§‹åŒ–ä¸º1ï¼Œåœ¨è°ƒä¼˜çš„æ—¶å€™å†ä¼˜åŒ–ã€‚\nç®—æ³•è¿‡ç¨‹ï¼š\nç¡®å®šå½“å‰ä½ç½®çš„æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œå¯¹äº$\\theta_i$ ,å…¶æ¢¯åº¦è¡¨è¾¾å¼å¦‚ä¸‹ï¼š\n$$ \\frac{\\partial}{\\partial\\theta_i}J(\\theta_0, \\theta_1..., \\theta_n)= \\frac{1}{m}\\sum\\limits_{j=0}^{m}(h_\\theta(x_0^{(j)}, x_1^{(j)}, ...x_n^{(j)}) - y_j)x_i^{(j)} $$ ç”¨æ­¥é•¿ä¹˜ä»¥æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œå¾—åˆ°å½“å‰ä½ç½®ä¸‹é™çš„è·ç¦»ï¼Œå³ $\\alpha\\frac{\\partial}{\\partial\\theta_i}J(\\theta_0, \\theta_1\u0026hellip;, \\theta_n)$ å¯¹åº”äºå‰é¢ç™»å±±ä¾‹å­ä¸­çš„æŸä¸€æ­¥ã€‚\nç¡®å®šæ˜¯å¦æ‰€æœ‰çš„ $\\theta_i$ ,æ¢¯åº¦ä¸‹é™çš„è·ç¦»éƒ½å°äº $\\varepsilon$ ï¼Œå¦‚æœå°äº $\\varepsilon$ åˆ™ç®—æ³•ç»ˆæ­¢ï¼Œå½“å‰æ‰€æœ‰çš„ $\\theta_i$ (i=0,1,\u0026hellip;n)å³ä¸ºæœ€ç»ˆç»“æœã€‚å¦åˆ™è¿›å…¥æ­¥éª¤4.\næ›´æ–°æ‰€æœ‰çš„$\\theta$ ï¼Œå¯¹äº $\\theta_i$ ï¼Œå…¶æ›´æ–°è¡¨è¾¾å¼å¦‚ä¸‹ã€‚æ›´æ–°å®Œæ¯•åç»§ç»­è½¬å…¥æ­¥éª¤1.\n$$ \\theta_i = \\theta_i - \\alpha\\frac{\\partial}{\\partial\\theta_i}J(\\theta_0, \\theta_1..., \\theta_n) = \\theta_i - \\alpha (h_\\theta(x_0^{(j)}, x_1^{(j)}, ...x_n^{(j)}) - y_j)x_i^{(j)} $$ ä»è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºå½“å‰ç‚¹çš„æ¢¯åº¦æ–¹å‘æ˜¯ç”±æ‰€æœ‰çš„æ ·æœ¬å†³å®šçš„ï¼ŒåŠ  $\\frac{1}{m}$ æ˜¯ä¸ºäº†å¥½ç†è§£ã€‚ç”±äºæ­¥é•¿ä¹Ÿä¸ºå¸¸æ•°ï¼Œä»–ä»¬çš„ä¹˜æœºä¹Ÿä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥è¿™é‡Œ $\\alpha\\frac{1}{m}$ å¯ä»¥ç”¨ä¸€ä¸ªå¸¸æ•°è¡¨ç¤ºã€‚\nåœ¨ä¸‹é¢ç¬¬4èŠ‚ä¼šè¯¦ç»†è®²åˆ°çš„æ¢¯åº¦ä¸‹é™æ³•çš„å˜ç§ï¼Œä»–ä»¬ä¸»è¦çš„åŒºåˆ«å°±æ˜¯å¯¹æ ·æœ¬çš„é‡‡ç”¨æ–¹æ³•ä¸åŒã€‚è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ç”¨æ‰€æœ‰æ ·æœ¬ã€‚\néšæœºæ¢¯åº¦ä¸‹é™æ³•(SGD) éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼Œå…¶å®å’Œæ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•åŸç†ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨ä¸æ±‚æ¢¯åº¦æ—¶æ²¡æœ‰ç”¨æ‰€æœ‰çš„mä¸ªæ ·æœ¬çš„æ•°æ®ï¼Œè€Œæ˜¯ä»…ä»…é€‰å–ä¸€ä¸ªæ ·æœ¬jæ¥æ±‚æ¢¯åº¦ã€‚å¯¹åº”çš„æ›´æ–°å…¬å¼æ˜¯\n$$ \\theta_i = \\theta_i - \\alpha (h_\\theta(x_0^{(j)}, x_1^{(j)}, ...x_n^{(j)}) - y_j)x_i^{(j)} $$éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼Œå’Œæ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•æ˜¯ä¸¤ä¸ªæç«¯ï¼Œä¸€ä¸ªé‡‡ç”¨æ‰€æœ‰æ•°æ®æ¥æ¢¯åº¦ä¸‹é™ï¼Œä¸€ä¸ªç”¨ä¸€ä¸ªæ ·æœ¬æ¥æ¢¯åº¦ä¸‹é™ã€‚è‡ªç„¶å„è‡ªçš„ä¼˜ç¼ºç‚¹éƒ½éå¸¸çªå‡ºã€‚å¯¹äºè®­ç»ƒé€Ÿåº¦æ¥è¯´ï¼Œéšæœºæ¢¯åº¦ä¸‹é™æ³•ç”±äºæ¯æ¬¡ä»…ä»…é‡‡ç”¨ä¸€ä¸ªæ ·æœ¬æ¥è¿­ä»£ï¼Œè®­ç»ƒé€Ÿåº¦å¾ˆå¿«ï¼Œè€Œæ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•åœ¨æ ·æœ¬é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œè®­ç»ƒé€Ÿåº¦ä¸èƒ½è®©äººæ»¡æ„ã€‚å¯¹äºå‡†ç¡®åº¦æ¥è¯´ï¼Œéšæœºæ¢¯åº¦ä¸‹é™æ³•ç”¨äºä»…ä»…ç”¨ä¸€ä¸ªæ ·æœ¬å†³å®šæ¢¯åº¦æ–¹å‘ï¼Œå¯¼è‡´è§£å¾ˆæœ‰å¯èƒ½ä¸æ˜¯æœ€ä¼˜ã€‚å¯¹äºæ”¶æ•›é€Ÿåº¦æ¥è¯´ï¼Œç”±äºéšæœºæ¢¯åº¦ä¸‹é™æ³•ä¸€æ¬¡è¿­ä»£ä¸€ä¸ªæ ·æœ¬ï¼Œå¯¼è‡´è¿­ä»£æ–¹å‘å˜åŒ–å¾ˆå¤§ï¼Œä¸èƒ½å¾ˆå¿«çš„æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£ã€‚\nç¼–ç¨‹å®ç° ç½‘ä¸Šæ‰¾çš„ä»£ç ï¼Œæ²¡éªŒè¯ï¼Œçœ‹ä¸ªæ€è·¯å°±è¡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 function [ theta,J_history ] = StochasticGD( X, y, theta, alpha, num_iter ) m = length(y); J_history = zeros(20, 1); temp = 0; n = 0; for iter = 1:num_iter temp = temp + 1; index = randi(m); theta = theta -alpha * (X(index, :) * theta - y(index)) * X(index, :)\u0026#39;; if temp\u0026gt;=100 temp = 0; n = n + 1; J_history(n) = ComputeCost(X, y, theta); end end end å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•(Mini-Batch SGD) ä¹Ÿå°±æ˜¯å¯¹äºmä¸ªæ ·æœ¬ï¼Œæˆ‘ä»¬é‡‡ç”¨xä¸ªæ ·å­æ¥è¿­ä»£ï¼Œ1\u0026lt;x\u0026lt;mã€‚ä¸€èˆ¬å¯ä»¥å–x=10ï¼Œå½“ç„¶æ ¹æ®æ ·æœ¬çš„æ•°æ®ï¼Œå¯ä»¥è°ƒæ•´è¿™ä¸ªxçš„å€¼ã€‚\nå²­å›å½’ åŠ©æ•™å¦¹è¯´å°±æ˜¯ä¸è€ƒ åè½¬äº†ï¼Œå±…ç„¶è¦è€ƒ\nåœ¨åŸå…ˆçš„çº¿æ€§å›å½’çš„ä»£ä»·å‡½æ•°ä¸ŠåŠ å…¥äº†ä¸€ä¸ªL2æ­£åˆ™é¡¹ï¼Œå°±æ˜¯å²­å›å½’\n$$ J(\\theta_0, \\theta_1..., \\theta_n) = \\sum\\limits_{i=1}^{m}(h_\\theta(x_0^{(i)}, x_1^{(i)}, ...x_n^{(i)}) - y_i)^2+\\lambda \\sum_{i=1}^m\\theta_i^2 $$éçº¿æ€§å½¢å¼ åŠ©æ•™å¦¹è¯´å°±æ˜¯ä¸è€ƒ\nå‚è€ƒé“¾æ¥ æ¢¯åº¦ä¸‹é™ï¼ˆGradient Descentï¼‰å°ç»“ - åˆ˜å»ºå¹³Pinard - åšå®¢å›­ çº¿æ€§å›å½’åŸç†å°ç»“ - åˆ˜å»ºå¹³Pinard - åšå®¢å›­ ","date":"2022-05-20T12:50:16+08:00","image":"https://lbqaq.top/p/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/95446530.webp","permalink":"https://lbqaq.top/p/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","title":"å›å½’åˆ†æå­¦ä¹ ç¬”è®°"},{"content":"ä¸»æˆåˆ†åˆ†æ(PCA) åŸºæœ¬æ€æƒ³ PCAé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ‰¾å‡ºæ•°æ®é‡Œæœ€ä¸»è¦çš„æ–¹é¢ï¼Œç”¨æ•°æ®é‡Œæœ€ä¸»è¦çš„æ–¹é¢æ¥ä»£æ›¿åŸå§‹æ•°æ®ã€‚å…·ä½“çš„ï¼Œå‡å¦‚æˆ‘ä»¬çš„æ•°æ®é›†æ˜¯nç»´çš„ï¼Œå…±æœ‰mä¸ªæ•°æ®$(x^{(1)},x^{(2)},\u0026hellip;,x^{(m)})$ã€‚æˆ‘ä»¬å¸Œæœ›å°†è¿™mä¸ªæ•°æ®çš„ç»´åº¦ä»nç»´é™åˆ°n\u0026rsquo;ç»´ï¼Œå¸Œæœ›è¿™mä¸ªn\u0026rsquo;ç»´çš„æ•°æ®é›†å°½å¯èƒ½çš„ä»£è¡¨åŸå§‹æ•°æ®é›†ã€‚\né€šè¿‡è®¡ç®—æ•°æ®çŸ©é˜µçš„åæ–¹å·®çŸ©é˜µï¼Œç„¶åå¾—åˆ°åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å€¼ç‰¹å¾å‘é‡ï¼Œé€‰æ‹©ç‰¹å¾å€¼æœ€å¤§(å³æ–¹å·®æœ€å¤§)çš„kä¸ªç‰¹å¾æ‰€å¯¹åº”çš„ç‰¹å¾å‘é‡ç»„æˆçš„çŸ©é˜µã€‚è¿™æ ·å°±å¯ä»¥å°†æ•°æ®çŸ©é˜µè½¬æ¢åˆ°æ–°çš„ç©ºé—´å½“ä¸­ï¼Œå®ç°æ•°æ®ç‰¹å¾çš„é™ç»´ã€‚\nç”±äºå¾—åˆ°åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å€¼ç‰¹å¾å‘é‡æœ‰ä¸¤ç§æ–¹æ³•ï¼šç‰¹å¾å€¼åˆ†è§£åæ–¹å·®çŸ©é˜µã€å¥‡å¼‚å€¼åˆ†è§£åæ–¹å·®çŸ©é˜µï¼Œæ‰€ä»¥PCAç®—æ³•æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼šåŸºäºç‰¹å¾å€¼åˆ†è§£åæ–¹å·®çŸ©é˜µå®ç°PCAç®—æ³•ã€åŸºäºSVDåˆ†è§£åæ–¹å·®çŸ©é˜µå®ç°PCAç®—æ³•ã€‚\nç‰¹å¾å€¼åˆ†è§£(EVD) ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡çš„å®šä¹‰å¦‚ä¸‹ï¼š\n$$ Ax=\\lambda x $$å…¶ä¸­Aæ˜¯ä¸€ä¸ª$n \\times n$çš„å®å¯¹ç§°çŸ©é˜µï¼Œ$x$æ˜¯ä¸€ä¸ª$n$ç»´å‘é‡ï¼Œåˆ™æˆ‘ä»¬è¯´$\\lambda$æ˜¯çŸ©é˜µAçš„ä¸€ä¸ªç‰¹å¾å€¼ï¼Œè€Œ$x$æ˜¯çŸ©é˜µAçš„ç‰¹å¾å€¼$\\lambda$æ‰€å¯¹åº”çš„ç‰¹å¾å‘é‡ã€‚\næ±‚å‡ºç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ å°±æ˜¯æˆ‘ä»¬å¯ä»¥å°†çŸ©é˜µAç‰¹å¾åˆ†è§£ã€‚å¦‚æœæˆ‘ä»¬æ±‚å‡ºäº†çŸ©é˜µAçš„$n$ä¸ªç‰¹å¾å€¼$\\lambda_1 \\leq \\lambda_2 \\leq \u0026hellip; \\leq \\lambda_n$,ä»¥åŠè¿™$n$ä¸ªç‰¹å¾å€¼æ‰€å¯¹åº”çš„ç‰¹å¾å‘é‡${q_1,q_2,\u0026hellip;q_n}$ï¼Œå¦‚æœè¿™$n$ä¸ªç‰¹å¾å‘é‡çº¿æ€§æ— å…³ï¼Œé‚£ä¹ˆçŸ©é˜µAå°±å¯ä»¥ç”¨ä¸‹å¼çš„ç‰¹å¾åˆ†è§£è¡¨ç¤ºï¼š$A=Q\\Sigma Q^{-1}$ ã€‚\nå…¶ä¸­ï¼ŒQæ˜¯è¿™ä¸ªçŸ©é˜µAçš„ç‰¹å¾å‘é‡ç»„æˆçš„çŸ©é˜µï¼ŒÎ£æ˜¯ä¸€ä¸ªå¯¹è§’çŸ©é˜µï¼Œæ¯ä¸€ä¸ªå¯¹è§’çº¿å…ƒç´ å°±æ˜¯ä¸€ä¸ªç‰¹å¾å€¼ï¼Œé‡Œé¢çš„ç‰¹å¾å€¼æ˜¯ç”±å¤§åˆ°å°æ’åˆ—çš„ï¼Œè¿™äº›ç‰¹å¾å€¼æ‰€å¯¹åº”çš„ç‰¹å¾å‘é‡å°±æ˜¯æè¿°è¿™ä¸ªçŸ©é˜µå˜åŒ–æ–¹å‘ï¼ˆä»ä¸»è¦çš„å˜åŒ–åˆ°æ¬¡è¦çš„å˜åŒ–æ’åˆ—ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´çŸ©é˜µAçš„ä¿¡æ¯å¯ä»¥ç”±å…¶ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡è¡¨ç¤ºã€‚\næ³¨æ„åˆ°è¦è¿›è¡Œç‰¹å¾åˆ†è§£ï¼ŒçŸ©é˜µAå¿…é¡»ä¸ºæ–¹é˜µã€‚é‚£ä¹ˆå¦‚æœAä¸æ˜¯æ–¹é˜µï¼Œå³è¡Œå’Œåˆ—ä¸ç›¸åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹çŸ©é˜µè¿›è¡Œåˆ†è§£å—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„SVDç™»åœºäº†ã€‚\nå¥‡å¼‚å€¼åˆ†è§£(SVD) SVDä¹Ÿæ˜¯å¯¹çŸ©é˜µè¿›è¡Œåˆ†è§£ï¼Œä½†æ˜¯å’Œç‰¹å¾åˆ†è§£ä¸åŒï¼ŒSVDå¹¶ä¸è¦æ±‚è¦åˆ†è§£çš„çŸ©é˜µä¸ºæ–¹é˜µã€‚å‡è®¾æˆ‘ä»¬çš„çŸ©é˜µAæ˜¯ä¸€ä¸ª$m \\times n$çš„çŸ©é˜µï¼Œé‚£ä¹ˆæˆ‘ä»¬å®šä¹‰çŸ©é˜µAçš„SVDä¸ºï¼š\n$$ A = U\\Sigma V^T $$å…¶ä¸­Uæ˜¯ä¸€ä¸ª$m \\times m$çš„çŸ©é˜µï¼Œ$\\Sigma$æ˜¯ä¸€ä¸ª$m \\times n$çš„çŸ©é˜µï¼Œé™¤äº†ä¸»å¯¹è§’çº¿ä¸Šçš„å…ƒç´ ä»¥å¤–å…¨ä¸º0ï¼Œä¸»å¯¹è§’çº¿ä¸Šçš„æ¯ä¸ªå…ƒç´ éƒ½ç§°ä¸ºå¥‡å¼‚å€¼ï¼ŒVæ˜¯ä¸€ä¸ª$n \\times n$çš„çŸ©é˜µã€‚\nè®¡ç®—æ–¹æ³•ï¼š\næˆ‘ä»¬å°†Açš„è½¬ç½®å’ŒAåšçŸ©é˜µä¹˜æ³•ï¼Œé‚£ä¹ˆä¼šå¾—åˆ°$n \\times n$çš„ä¸€ä¸ªæ–¹é˜µ$A^TA$ã€‚å¯¹å…¶è¿›è¡Œç‰¹å¾å€¼åˆ†è§£ï¼Œå¾—åˆ°nä¸ªç‰¹å¾å€¼å’Œå¯¹åº”çš„nä¸ªç‰¹å¾å‘é‡$v$äº†ã€‚å°†$A^TA$çš„æ‰€æœ‰ç‰¹å¾å‘é‡å¼ æˆä¸€ä¸ª$n \\times n$çš„çŸ©é˜µVï¼Œå°±æ˜¯æˆ‘ä»¬SVDå…¬å¼é‡Œé¢çš„VçŸ©é˜µäº†ã€‚ å¯¹$AA^T$è¿›è¡Œç‰¹å¾å€¼åˆ†è§£ï¼Œå¾—åˆ°mä¸ªç‰¹å¾å€¼å’Œå¯¹åº”çš„mä¸ªç‰¹å¾å‘é‡$u$äº†ã€‚å°†$AA^T$çš„æ‰€æœ‰ç‰¹å¾å‘é‡å¼ æˆä¸€ä¸ª$m \\times m$çš„çŸ©é˜µUï¼Œå°±æ˜¯æˆ‘ä»¬SVDå…¬å¼é‡Œé¢çš„UçŸ©é˜µäº†ã€‚ä¸€èˆ¬æˆ‘ä»¬å°†Uä¸­çš„æ¯ä¸ªç‰¹å¾å‘é‡å«åšAçš„å·¦å¥‡å¼‚å‘é‡ã€‚ ç”±äºå¥‡å¼‚å€¼çŸ©é˜µ$\\Sigma$é™¤äº†å¯¹è§’çº¿ä¸Šæ˜¯å¥‡å¼‚å€¼å…¶ä»–ä½ç½®éƒ½æ˜¯0ï¼Œé‚£æˆ‘ä»¬åªéœ€è¦æ±‚å‡ºæ¯ä¸ªå¥‡å¼‚å€¼$\\sigma$å°±å¯ä»¥äº†ã€‚æ±‚è§£å¥‡å¼‚å€¼å¯ä»¥ç”¨$\\sigma_i = Av_i / u_i$æˆ–$\\sigma_i = \\sqrt{\\lambda_i}$ ç®—æ³•è¿‡ç¨‹ è¾“å…¥ï¼šnç»´æ ·æœ¬é›†$D=(x^{(1)}, x^{(2)},\u0026hellip;,x^{(m)})$ï¼Œè¦é™ç»´åˆ°çš„ç»´æ•°n'.\nè¾“å‡ºï¼šé™ç»´åçš„æ ·æœ¬é›†$D'$\nå¯¹æ‰€æœ‰çš„æ ·æœ¬è¿›è¡Œä¸­å¿ƒåŒ–ï¼š $x^{(i)} = x^{(i)} - \\frac{1}{m}\\sum\\limits_{j=1}^{m} x^{(j)}$ è®¡ç®—æ ·æœ¬çš„åæ–¹å·®çŸ©é˜µ$XX^T$ å¯¹çŸ©é˜µ$XX^T$è¿›è¡Œç‰¹å¾å€¼åˆ†è§£ å–å‡ºæœ€å¤§çš„n\u0026rsquo;ä¸ªç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡$(w_1,w_2,\u0026hellip;,w_{n\u0026rsquo;})$, å°†æ‰€æœ‰çš„ç‰¹å¾å‘é‡æ ‡å‡†åŒ–åï¼Œç»„æˆç‰¹å¾å‘é‡çŸ©é˜µWã€‚ å¯¹æ ·æœ¬é›†ä¸­çš„æ¯ä¸€ä¸ªæ ·æœ¬$x^{(i)}$,è½¬åŒ–ä¸ºæ–°çš„æ ·æœ¬$z^{(i)}=W^Tx^{(i)}$ å¾—åˆ°è¾“å‡ºæ ·æœ¬é›†$D\u0026rsquo; =(z^{(1)}, z^{(2)},\u0026hellip;,z^{(m)})$ ä¸Šé¢æ˜¯é‡‡ç”¨EVDï¼Œå¦‚æœé‡‡ç”¨SVDï¼Œåœ¨ç¬¬äºŒç¬¬ä¸‰æ­¥æ—¶å°±ç”¨SVDè¿›è¡Œè§£å†³ã€‚\nç¼–ç¨‹å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 load fisheriris; X = meas; %% ä¸­å¿ƒåŒ– meanX = ones(size(X,1), 1) * mean(X); centredX = X - meanX; % ç›´æ¥è°ƒç”¨covç›´æ¥è®¡ç®—åæ–¹å·®çŸ©é˜µå³å¯ C = cov(centredX); %% ç‰¹å¾å€¼åˆ†è§£ [W, Lambda] = eig(C); % æå–ç‰¹å¾å€¼ ev = (diag(Lambda))\u0026#39;; % eigè®¡ç®—å‡ºçš„ç‰¹å¾å€¼æ˜¯å‡åºçš„ï¼Œè¿™é‡Œæ‰‹åŠ¨å€’åºï¼ˆWåŒç†ï¼‰ ev = ev(:, end:-1:1); W = W(:, end:-1:1); % æå–å‰ä¸¤ä¸ªä¸»æˆåˆ†çš„ç‰¹å¾å‘é‡ Wr = W(:, 1:2); % æ–°åæ ‡ç©ºé—´çš„æ•°æ®ç‚¹ Tr = centredX * Wr; %% ä½œå›¾ figure(1); scatter(Tr(:,1), Tr(:,2), 130, categorical(species), \u0026#39;.\u0026#39;); colormap(winter); xlabel(\u0026#39;Principal Component 1\u0026#39;); ylabel(\u0026#39;Principal Component 2\u0026#39;); %% SVDåˆ†è§£ % å¯ä»¥æ£€éªŒï¼ŒWå’ŒVå®Œå…¨ç›¸åŒï¼ˆå‘é‡çš„æ­£è´Ÿå·ä¸å½±å“ï¼‰ [U, Sigma, V] = svd(X); % æå–å‰ä¸¤ä¸ªä¸»æˆåˆ†çš„ç‰¹å¾å‘é‡ Vr = V(:, 1:2); % æ–°åæ ‡ç©ºé—´çš„æ•°æ®ç‚¹ Tr = X * Vr; %% ä½œå›¾ figure(2); scatter(Tr(:,1), Tr(:,2), 130, categorical(species), \u0026#39;.\u0026#39;); colormap(winter); xlabel(\u0026#39;Principal Component 1\u0026#39;); ylabel(\u0026#39;Principal Component 2\u0026#39;); MATLABä¸‰ç»´æ•°æ®ç»˜å›¾ ä¸‰ç»´çº¿ ä½¿ç”¨plot3()å‡½æ•°å³å¯ç»˜åˆ¶ä¸‰ç»´çº¿,è¾“å…¥åº”ä¸ºä¸‰ä¸ªå‘é‡\n1 2 3 4 5 6 7 8 turns = 40*pi; t = linspace(0,turns,4000); x = cos(t).*(turns-t)./turns; y = sin(t).*(turns-t)./turns; z = t./turns; plot3(x,y,z); grid on; axis square; ä¸‰ç»´å›¾å½¢ç»˜åˆ¶åŠç­‰é«˜çº¿ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨mesh()å‘½ä»¤ç»˜åˆ¶ä¸‰ç»´é¢ï¼Œä½¿ç”¨contour()å‘½ä»¤å¯ä»¥ç»˜åˆ¶ä¸‰ç»´å›¾å½¢çš„ç­‰é«˜çº¿ã€‚ ä¸ä¹‹å‰çš„å‘½ä»¤ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å‘å…¶ä¼ é€’ä¸åŒçš„å‚æ•°æ¥æ”¹å˜å›¾å½¢çš„ç»†èŠ‚ã€‚\n1 2 3 4 5 6 7 8 9 10 x = -3.5:0.2:3.5; y = -3.5:0.2:3.5; [X,Y] = meshgrid(x,y); Z = 10.*X.*exp(-X.^2-Y.^2); grid on; axis square; subplot(1,2,1); mesh(X,Y,Z); subplot(1,2,2); contour(X,Y,Z,\u0026#39;ShowText\u0026#39;, \u0026#39;on\u0026#39;, \u0026#39;LevelStep\u0026#39;, 1); ä¸‰ç»´å›¾å½¢ç»˜åˆ¶åŠç­‰é«˜çº¿\nå‚è€ƒèµ„æ–™ ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰åŸç†è¯¦è§£ - çŸ¥ä¹ å¥‡å¼‚å€¼åˆ†è§£(SVD)åŸç†ä¸åœ¨é™ç»´ä¸­çš„åº”ç”¨ - åˆ˜å»ºå¹³Pinard - åšå®¢å›­ ","date":"2022-05-17T22:45:18+08:00","image":"https://lbqaq.top/p/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AC%94%E8%AE%B0/94861285.webp","permalink":"https://lbqaq.top/p/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AC%94%E8%AE%B0/","title":"æ•°æ®å¯è§†åŒ–ç¬”è®°"},{"content":"åˆ†ç±»ç®—æ³•çš„ä½œç”¨ åˆ†ç±»æ˜¯åœ¨ä¸€ç¾¤å·²ç»çŸ¥é“ç±»åˆ«æ ‡å·çš„æ ·æœ¬ä¸­ï¼Œè®­ç»ƒä¸€ç§åˆ†ç±»å™¨ï¼Œè®©å…¶èƒ½å¤Ÿå¯¹æŸç§æœªçŸ¥çš„æ ·æœ¬è¿›è¡Œåˆ†ç±»ã€‚åˆ†ç±»ç®—æ³•å±äºä¸€ç§æœ‰ç›‘ç£çš„å­¦ä¹ ã€‚åˆ†ç±»ç®—æ³•çš„åˆ†ç±»è¿‡ç¨‹å°±æ˜¯å»ºç«‹ä¸€ç§åˆ†ç±»æ¨¡å‹æ¥æè¿°é¢„å®šçš„æ•°æ®é›†æˆ–æ¦‚å¿µé›†ï¼Œé€šè¿‡åˆ†æç”±å±æ€§æè¿°çš„æ•°æ®åº“å…ƒç»„æ¥æ„é€ æ¨¡å‹ã€‚åˆ†ç±»çš„ç›®çš„å°±æ˜¯ä½¿ç”¨åˆ†ç±»å¯¹æ–°çš„æ•°æ®é›†è¿›è¡Œåˆ’åˆ†ï¼Œå…¶ä¸»è¦æ¶‰åŠåˆ†ç±»è§„åˆ™çš„å‡†ç¡®æ€§ã€è¿‡æ‹Ÿåˆã€çŸ›ç›¾åˆ’åˆ†çš„å–èˆç­‰ã€‚\næœ‰ç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ çš„åŒºåˆ« æœ‰ç›‘ç£å­¦ä¹ æ˜¯æŒ‡æ•°æ®é›†çš„æ­£ç¡®è¾“å‡ºå·²çŸ¥æƒ…å†µä¸‹çš„ä¸€ç±»å­¦ä¹ ç®—æ³•ã€‚å› ä¸ºè¾“å…¥å’Œè¾“å‡ºå·²çŸ¥ï¼Œæ„å‘³ç€è¾“å…¥å’Œè¾“å‡ºä¹‹é—´æœ‰ä¸€ä¸ªå…³ç³»ï¼Œç›‘ç£å­¦ä¹ ç®—æ³•å°±æ˜¯è¦å‘ç°å’Œæ€»ç»“è¿™ç§â€œå…³ç³»â€ã€‚ æ— ç›‘ç£å­¦ä¹ æ˜¯æŒ‡å¯¹æ— æ ‡ç­¾æ•°æ®çš„ä¸€ç±»å­¦ä¹ ç®—æ³•ã€‚å› ä¸ºæ²¡æœ‰æ ‡ç­¾ä¿¡æ¯ï¼Œæ„å‘³ç€éœ€è¦ä»æ•°æ®é›†ä¸­å‘ç°å’Œæ€»ç»“æ¨¡å¼æˆ–è€…ç»“æ„ã€‚ ç®€å•æ¥è¯´ï¼Œæ˜¯å¦æœ‰ç›‘ç£ï¼ˆsupervisedï¼‰ï¼Œå°±çœ‹è¾“å…¥æ•°æ®æ˜¯å¦æœ‰æ ‡ç­¾ï¼ˆlabelï¼‰ äº¤å‰éªŒè¯ åŸºæœ¬æ€æƒ³ äº¤å‰éªŒè¯çš„åŸºæœ¬æ€æƒ³æ˜¯æŠŠåœ¨æŸç§æ„ä¹‰ä¸‹å°†åŸå§‹æ•°æ®(dataset)è¿›è¡Œåˆ†ç»„ï¼Œä¸€éƒ¨åˆ†åšä¸ºè®­ç»ƒé›†(train set)ï¼Œå¦ä¸€éƒ¨åˆ†åšä¸ºéªŒè¯é›†(validation set or test set)ï¼Œé¦–å…ˆç”¨è®­ç»ƒé›†å¯¹åˆ†ç±»å™¨è¿›è¡Œè®­ç»ƒï¼Œå†åˆ©ç”¨éªŒè¯é›†æ¥æµ‹è¯•è®­ç»ƒå¾—åˆ°çš„æ¨¡å‹(model)ï¼Œä»¥æ­¤æ¥åšä¸ºè¯„ä»·åˆ†ç±»å™¨çš„æ€§èƒ½æŒ‡æ ‡ã€‚ç”¨äº¤å‰éªŒè¯çš„ç›®çš„æ˜¯ä¸ºäº†å¾—åˆ°å¯é ç¨³å®šçš„æ¨¡å‹ã€‚\nKæŠ˜äº¤å‰éªŒè¯(K-fold cross-validation) KæŠ˜äº¤å‰éªŒè¯å°±æ˜¯è¿›è¡Œå¤šæ¬¡train_test_splitåˆ’åˆ†ï¼›æ¯æ¬¡åˆ’åˆ†æ—¶ï¼Œåœ¨ä¸åŒçš„æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒã€æµ‹è¯•è¯„ä¼°ï¼Œä»è€Œå¾—å‡ºä¸€ä¸ªè¯„ä»·ç»“æœï¼›å¦‚æœæ˜¯10æŠ˜äº¤å‰éªŒè¯ï¼Œæ„æ€å°±æ˜¯åœ¨åŸå§‹æ•°æ®é›†ä¸Šï¼Œè¿›è¡Œ10æ¬¡åˆ’åˆ†ï¼Œæ¯æ¬¡åˆ’åˆ†è¿›è¡Œä¸€æ¬¡è®­ç»ƒã€è¯„ä¼°ï¼Œæœ€åå¾—åˆ°10æ¬¡åˆ’åˆ†åçš„è¯„ä¼°ç»“æœï¼Œä¸€èˆ¬åœ¨è¿™å‡ æ¬¡è¯„ä¼°ç»“æœä¸Šå–å¹³å‡å¾—åˆ°æœ€åçš„è¯„åˆ†ã€‚å…¶ä¸­ï¼Œkä¸€èˆ¬å–5æˆ–10ã€‚\nKæŠ˜äº¤å‰éªŒè¯çš„æ­¥éª¤ï¼š\nå°†åŸå§‹æ•°æ®é›†åˆ’åˆ†ä¸ºç›¸ç­‰çš„Kéƒ¨åˆ†ï¼ˆâ€œæŠ˜â€ï¼‰ å°†ç¬¬1éƒ¨åˆ†ä½œä¸ºæµ‹è¯•é›†ï¼Œå…¶ä½™ä½œä¸ºè®­ç»ƒé›† è®­ç»ƒæ¨¡å‹ï¼Œè®¡ç®—æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„å‡†ç¡®ç‡ æ¯æ¬¡ç”¨ä¸åŒçš„éƒ¨åˆ†ä½œä¸ºæµ‹è¯•é›†ï¼Œé‡å¤æ­¥éª¤2å’Œ3 Kæ¬¡ å°†å¹³å‡å‡†ç¡®ç‡ä½œä¸ºæœ€ç»ˆçš„æ¨¡å‹å‡†ç¡®ç‡ ğŸ’¡ è¦ä¼šç»™å®šæ•°æ®é›†è¿›è¡ŒKæŠ˜äº¤å‰éªŒè¯ è¦ä¼šè®¡ç®—æ¨¡å‹å‡†ç¡®ç‡ï¼ˆæ¯æ¬¡çš„å‡†ç¡®ç‡ã€æœ€ç»ˆçš„å‡†ç¡®ç‡ï¼‰\næ”¯æŒå‘é‡æœº(SVM) åŸºæœ¬æ€æƒ³ SVMå­¦ä¹ çš„åŸºæœ¬æ€æƒ³æ˜¯æ±‚è§£èƒ½å¤Ÿæ­£ç¡®åˆ’åˆ†è®­ç»ƒæ•°æ®é›†å¹¶ä¸”å‡ ä½•é—´éš”æœ€å¤§çš„åˆ†ç¦»è¶…å¹³é¢ã€‚å¯¹äºçº¿æ€§å¯åˆ†çš„æ•°æ®é›†æ¥è¯´ï¼Œè¿™æ ·çš„è¶…å¹³é¢æœ‰æ— ç©·å¤šä¸ªï¼ˆå³æ„ŸçŸ¥æœºï¼‰ï¼Œä½†æ˜¯å‡ ä½•é—´éš”æœ€å¤§çš„åˆ†ç¦»è¶…å¹³é¢å´æ˜¯å”¯ä¸€çš„ã€‚\nç”¨æˆ‘è‡ªå·±çš„ç†è§£ï¼Œå°±æ˜¯æ‰¾ä¸€æ¡çº¿å°†ä¸¤ä¸ªæ•°æ®é›†åˆ†å¼€ï¼Œè¦ä¿è¯è¿™æ¡çº¿åˆ°ä¸¤è¾¹çš„æ•°æ®é›†è·ç¦»æœ€å¤§ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•æ‰èƒ½ä¿è¯è·ç¦»æœ€å¤§å‘¢ï¼Œè¿™å°±æ˜¯ä¸‹é¢è¦è®¨è®ºçš„éš¾ç‚¹äº†ã€‚\næ”¯æŒå‘é‡ åœ¨æ”¯æŒå‘é‡æœºä¸­ï¼Œè·ç¦»è¶…å¹³é¢æœ€è¿‘çš„ä¸”æ»¡è¶³ä¸€å®šæ¡ä»¶çš„å‡ ä¸ªè®­ç»ƒæ ·æœ¬ç‚¹è¢«ç§°ä¸ºæ”¯æŒå‘é‡ã€‚\nåœ¨ä¸Šå›¾ä¸­ï¼Œå¤„äºè™šçº¿ä¸Šçš„ç‚¹ï¼ˆå³çº¢è‰²çš„ç‚¹ï¼‰æˆ‘ä»¬å°±å°†å…¶å®šä¹‰ä¸ºæ”¯æŒå‘é‡ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•å¾—åˆ°æ”¯æŒå‘é‡åˆ°è¶…å¹³é¢çš„è·ç¦»å‘¢ï¼Ÿæˆ‘ä»¬å¼•å…¥å‡ ä½•é—´éš”çš„æ¦‚å¿µï¼š\n$$ \\gamma = \\frac{y(w^Tx + b)}{||w||_2} = \\frac{\\gamma^{'}}{||w||_2} $$ä¸€èˆ¬æˆ‘ä»¬éƒ½å–å‡½æ•°é—´éš”$\\gamma^{\u0026rsquo;}$ä¸º1ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æ”¯æŒå‘é‡åˆ°è¶…å¹³é¢çš„è·ç¦»ä¸º$\\frac{1}{||w||_2}$ï¼Œä¸¤ä¸ªæ”¯æŒå‘é‡ä¹‹é—´çš„è·ç¦»ä¸º$\\frac{2}{||w||_2}$\nSVMæ¨¡å‹ç›®æ ‡å‡½æ•° SVMçš„æ¨¡å‹æ˜¯è®©æ‰€æœ‰ç‚¹åˆ°è¶…å¹³é¢çš„è·ç¦»å¤§äºä¸€å®šçš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„åˆ†ç±»ç‚¹è¦åœ¨å„è‡ªç±»åˆ«çš„æ”¯æŒå‘é‡ä¸¤è¾¹ã€‚ç”¨æ•°å­¦å¼å­è¡¨ç¤ºä¸ºï¼š\n$$ max \\\\;\\\\; \\frac{1}{||w||_2} \\\\;\\\\; s.t \\\\;\\\\; y_i(w^Tx_i + b) \\geq 1 (i =1,2,...m) $$å…¶ä¸­ï¼Œ$||w||_2$ä¸ºå‘é‡$w$çš„L2èŒƒæ•°ï¼Œå³ï¼š\n$$ ||w||_2=\\sqrt{w_1^2+w_2^2} $$ä¸ºäº†å»é™¤æ ¹å·æ–¹ä¾¿è®¡ç®—ï¼Œæˆ‘ä»¬å°†åŸå¼è½¬åŒ–ä¸ºï¼š\n$$ min \\\\;\\\\; \\frac{1}{2}||w||_2^2 \\\\;\\\\; s.t \\\\;\\\\; y_i(w^Tx_i + b) \\geq 1 (i =1,2,...m) $$ç”±äºç›®æ ‡å‡½æ•°$\\frac{1}{2}||w||_2^2$æ˜¯å‡¸å‡½æ•°ï¼ŒåŒæ—¶çº¦æŸæ¡ä»¶ä¸ç­‰å¼æ˜¯ä»¿å°„çš„ï¼Œæ ¹æ®å‡¸ä¼˜åŒ–ç†è®ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹‰æ ¼æœ—æ—¥å‡½æ•°å°†æˆ‘ä»¬çš„ä¼˜åŒ–ç›®æ ‡è½¬åŒ–ä¸ºæ— çº¦æŸçš„ä¼˜åŒ–å‡½æ•°ã€‚äºæ˜¯æ ¹æ®æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š\n$$ L(w,b,\\alpha) = \\frac{1}{2}||w||_2^2 - \\sum \\limits _{i=1}^{m} \\alpha_i [y_i(w^Tx_i + b) - 1] \\\\; æ»¡è¶³\\alpha_i \\geq 0 $$å…¶ä¸­$\\alpha_i$ä¸ºæ‹‰æ ¼æœ—æ—¥ä¹˜å­ã€‚\nKKTæ¡ä»¶ æˆ‘ä»¬å¯¹ä¸Šé¢çš„å¼å­æ±‚åå¯¼ï¼Œå¯ä»¥å¾—åˆ°\n$$ \\frac{\\partial L }{\\partial w}=0,\\frac{\\partial L }{\\partial b}=0 $$è§£å¾—\n$$ \\boldsymbol{w}=\\sum_{i=1}^N{\\alpha_iy_i\\boldsymbol{x}_{\\boldsymbol{i}}} $$$$ \\sum_{i=1}^N{\\alpha_iy_i}=0 $$è§£æ–¹ç¨‹å¯å¾—\n$$ \\begin{cases} \\alpha_i\\geq 0 \\\\\\\\ y_i(\\overrightarrow{w_i}\\cdot \\overrightarrow{x_i}+b)-1\\geq 0 \\\\\\\\ \\alpha_i(y_i(\\overrightarrow{w_i}\\cdot\\overrightarrow{x_i}+b)-1)=0 \\end{cases} $$ä¸Šé¢çš„å¼å­å³ä¸ºKKTæ¡ä»¶\nSVMå¯¹å¶æ€§ ç°åœ¨æˆ‘ä»¬ä»¤\n$$ \\theta \\left( \\boldsymbol{w} \\right) =\\underset{\\alpha _{_i}\\ge 0}{\\max}\\ L\\left( \\boldsymbol{w,}b,\\boldsymbol{\\alpha } \\right) $$å½“æ ·æœ¬ç‚¹ä¸æ»¡è¶³çº¦æŸæ¡ä»¶æ—¶ï¼Œå³åœ¨å¯è¡Œè§£åŒºåŸŸå¤–$y_i\\left(\\boldsymbol{w}\\cdot \\boldsymbol{x}_{\\boldsymbol{i}}+b\\right)\u0026lt;1$ã€‚æ­¤æ—¶ï¼Œå°†$\\alpha_i$è®¾ç½®ä¸ºæ— ç©·å¤§ï¼Œåˆ™$\\theta \\left( \\boldsymbol{w} \\right)$ä¹Ÿä¸ºæ— ç©·å¤§ã€‚\nå½“æ ·æœ¬ç‚¹ä¸æ»¡è¶³çº¦æŸæ¡ä»¶æ—¶ï¼Œå³åœ¨å¯è¡Œè§£åŒºåŸŸå†…$y_i\\left(\\boldsymbol{w}\\cdot \\boldsymbol{x}_{\\boldsymbol{i}}+b\\right)\\ge1$ã€‚æ­¤æ—¶ï¼Œ$\\theta \\left( \\boldsymbol{w} \\right)$ä¸ºåŸå‡½æ•°æœ¬èº«ã€‚\näºæ˜¯ï¼Œå°†ä¸¤ç§æƒ…å†µåˆå¹¶èµ·æ¥å°±å¯ä»¥å¾—åˆ°æˆ‘ä»¬æ–°çš„ç›®æ ‡å‡½æ•°ï¼š\n$$ \\theta \\left( \\boldsymbol{w} \\right) =\\begin{cases} \\frac{1}{2}\\lVert \\boldsymbol{w} \\rVert ^2\\ ,\\boldsymbol{x}\\in \\text{å¯è¡ŒåŒºåŸŸ}\\\\\\\\ +\\infty \\ \\ \\ \\ \\ ,\\boldsymbol{x}\\in \\text{ä¸å¯è¡ŒåŒºåŸŸ}\\\\\\\\ \\end{cases} $$äºæ˜¯åŸçº¦æŸé—®é¢˜å°±ç­‰ä»·äºï¼š\n$$ \\underset{\\boldsymbol{w,}b}{\\min}\\ \\theta \\left( \\boldsymbol{w} \\right) =\\underset{\\boldsymbol{w,}b}{\\min}\\underset{\\alpha _i\\ge 0}{\\max}\\ L\\left( \\boldsymbol{w,}b,\\boldsymbol{\\alpha } \\right) $$ç”±ä¸Šå°èŠ‚ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“è¯¥å‡½æ•°æ»¡è¶³æ‹‰æ ¼æœ—æ—¥å‡½æ•°å¯¹å¶æ€§ï¼š\nä¼˜åŒ–é—®é¢˜æ˜¯å‡¸ä¼˜åŒ–é—®é¢˜ æ»¡è¶³KKTæ¡ä»¶ äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æœ€å°å’Œæœ€å¤§çš„ä½ç½®äº¤æ¢ä¸€ä¸‹ï¼Œè¿™æ ·å°±å˜æˆäº†ï¼š\n$$ \\underset{\\alpha _i\\ge 0}{\\max}\\underset{\\boldsymbol{w,}b}{\\min}\\ L\\left( \\boldsymbol{w,}b,\\boldsymbol{\\alpha } \\right) $$ä»ä¸Šå¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ±‚ä¼˜åŒ–å‡½æ•°å¯¹äº$w$å’Œ$b$çš„æå°å€¼ã€‚æ¥ç€å†æ±‚æ‹‰æ ¼æœ—æ—¥ä¹˜å­$\\alpha$çš„æå¤§å€¼ã€‚\né€šè¿‡åœ¨ä¸ŠèŠ‚ä¸­ç”±åå¯¼æ¨å‡ºçš„ä¸¤ä¸ªå¼å­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†$w$å’Œ$\\alpha$çš„å…³ç³»ï¼Œå°±å¯ä»¥å¸¦å…¥ä¼˜åŒ–å‡½æ•°$L(w,b,\\alpha)$æ¶ˆå»$w$äº†\næ­¤æ—¶åŸå¼ä¸º\næˆ‘ä»¬å¯¹ç›®æ ‡å¼å­åŠ ä¸€ä¸ªè´Ÿå·ï¼Œå°†æ±‚è§£æå¤§è½¬æ¢ä¸ºæ±‚è§£æå°\nSVMæ ¸ï¼ˆKernelï¼‰æ–¹æ³• åŸºæœ¬æ¦‚å¿µ åœ¨ä¸ŠèŠ‚æˆ‘ä»¬æ¨å¯¼å‡ºçš„å¼å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šå¼ä½ç»´ç‰¹å¾ä»…ä»…ä»¥å†…ç§¯$x_i \\bullet x_j$ çš„å½¢å¼å‡ºç°ï¼Œå¦‚æœæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªä½ç»´ç‰¹å¾ç©ºé—´åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´çš„æ˜ å°„$T$ï¼Œå°†æ‰€æœ‰ç‰¹å¾æ˜ å°„åˆ°ä¸€ä¸ªæ›´é«˜çš„ç»´åº¦ï¼Œè®©æ•°æ®çº¿æ€§å¯åˆ†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ±‚å‡ºåˆ†ç¦»è¶…å¹³é¢å’Œåˆ†ç±»å†³ç­–å‡½æ•°äº†ã€‚\nä½†æ˜¯ï¼Œå°†æ•°æ®ä»ä½ç»´æ˜ å°„åˆ°é«˜ç»´ï¼Œå°†ä¼šå¤§å¤§å¢åŠ è®¡ç®—çš„å¤æ‚åº¦ï¼Œå¦‚æœé‡åˆ°æ— ç©·ç»´çš„æƒ…å†µï¼Œå°±æ ¹æœ¬æ— ä»è®¡ç®—äº†ã€‚è¿™æ—¶ï¼Œå°±éœ€è¦å¼•å…¥æ ¸å‡½æ•°äº†ã€‚\næˆ‘ä»¬å®šä¹‰æœå­˜åœ¨å‡½æ•°$K(x,z)$ï¼Œå¯¹äºä»»æ„$x, z$ ï¼Œéƒ½æœ‰ï¼š\n$$ K(x, z) = T(x) \\bullet T(z) $$é‚£ä¹ˆæˆ‘ä»¬å°±ç§°$K(x, z)$ä¸ºæ ¸å‡½æ•°ã€‚\né€šè¿‡æ ¸å‡½æ•°ï¼Œå°±é¿å…äº†åœ¨åˆšæ‰æˆ‘ä»¬æåˆ°äº†åœ¨é«˜ç»´ç»´åº¦ç©ºé—´è®¡ç®—å†…ç§¯çš„ææ€–è®¡ç®—é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å¥½å¥½äº«å—åœ¨é«˜ç»´ç‰¹å¾ç©ºé—´çº¿æ€§å¯åˆ†çš„çº¢åˆ©ï¼Œå´é¿å…äº†é«˜ç»´ç‰¹å¾ç©ºé—´ææ€–çš„å†…ç§¯è®¡ç®—é‡ã€‚\nä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¸¸è§çš„æ ¸å‡½æ•°, é€‰æ‹©è¿™å‡ ä¸ªæ ¸å‡½æ•°ä»‹ç»æ˜¯å› ä¸ºscikit-learnä¸­é»˜è®¤å¯é€‰çš„å°±æ˜¯ä¸‹é¢å‡ ä¸ªæ ¸å‡½æ•°ã€‚\nçº¿æ€§æ ¸å‡½æ•°ï¼ˆLinear Kernelï¼‰ å…¶å®å°±æ˜¯çº¿æ€§å¯åˆ†SVMï¼Œè¡¨è¾¾å¼ä¸ºï¼š\n$$ K(x, z) = x \\bullet z $$ä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿æ€§å¯åˆ†SVMæˆ‘ä»¬å¯ä»¥å’Œçº¿æ€§ä¸å¯åˆ†SVMå½’ä¸ºä¸€ç±»ï¼ŒåŒºåˆ«ä»…ä»…åœ¨äºçº¿æ€§å¯åˆ†SVMç”¨çš„æ˜¯çº¿æ€§æ ¸å‡½æ•°ã€‚\nå¤šé¡¹å¼æ ¸å‡½æ•°ï¼ˆPolynomial Kernelï¼‰ å¤šé¡¹å¼æ ¸å‡½æ•°æ˜¯çº¿æ€§ä¸å¯åˆ†SVMå¸¸ç”¨çš„æ ¸å‡½æ•°ä¹‹ä¸€ï¼Œè¡¨è¾¾å¼ä¸ºï¼š\n$$ K(x, z) = ï¼ˆ\\gamma x \\bullet z + r)^d $$å…¶ä¸­ï¼Œ$\\gamma, r,d$éƒ½éœ€è¦è‡ªå·±è°ƒå‚å®šä¹‰ã€‚\né«˜æ–¯æ ¸å‡½æ•°ï¼ˆGaussian Kernelï¼‰ åœ¨SVMä¸­ä¹Ÿç§°ä¸ºå¾„å‘åŸºæ ¸å‡½æ•°ï¼ˆRadial Basis Function,RBFï¼‰ï¼Œå®ƒæ˜¯éçº¿æ€§åˆ†ç±»SVMæœ€ä¸»æµçš„æ ¸å‡½æ•°ã€‚libsvmé»˜è®¤çš„æ ¸å‡½æ•°å°±æ˜¯å®ƒã€‚è¡¨è¾¾å¼ä¸ºï¼š\n$$ K(x, z) = exp(-\\gamma||x-z||^2) $$å…¶ä¸­ï¼Œ$\\gamma$å¤§äº0ï¼Œéœ€è¦è‡ªå·±è°ƒå‚å®šä¹‰ã€‚\nğŸ’¡ é«˜æ–¯æ ¸å‡½æ•°å¾ˆé‡è¦ï¼Œä¸€å®šè¦è®°ä½\nSigmoidæ ¸å‡½æ•° ä¹Ÿæ˜¯çº¿æ€§ä¸å¯åˆ†SVMå¸¸ç”¨çš„æ ¸å‡½æ•°ä¹‹ä¸€ï¼Œè¡¨è¾¾å¼ä¸ºï¼š\n$$ K(x, z) = tanhï¼ˆ\\gamma x \\bullet z + r) $$å…¶ä¸­ï¼Œ$\\gamma, r$éƒ½éœ€è¦è‡ªå·±è°ƒå‚å®šä¹‰ã€‚\nSVMè½¯é—´éš” æœ‰æ—¶å€™æœ¬æ¥æ•°æ®çš„ç¡®æ˜¯å¯åˆ†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ç”¨ çº¿æ€§åˆ†ç±»SVMçš„å­¦ä¹ æ–¹æ³•æ¥æ±‚è§£ï¼Œä½†æ˜¯å´å› ä¸ºæ··å…¥äº†å¼‚å¸¸ç‚¹ï¼Œå¯¼è‡´ä¸èƒ½çº¿æ€§å¯åˆ†ï¼Œæ¯”å¦‚ä¸‹å›¾\nè¿™ç§æƒ…å†µä¸‹ï¼ŒSVMå¼•å…¥äº†è½¯é—´éš”æœ€å¤§åŒ–çš„æ–¹æ³•æ¥è§£å†³ã€‚\nSVMå¯¹è®­ç»ƒé›†é‡Œé¢çš„æ¯ä¸ªæ ·æœ¬$(x_i,y_i)$å¼•å…¥äº†ä¸€ä¸ªæ¾å¼›å˜é‡$\\xi_i \\geq 0$,ä½¿å‡½æ•°é—´éš”åŠ ä¸Šæ¾å¼›å˜é‡å¤§äºç­‰äº1ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š\n$$ y_i(w\\bullet x_i +b) \\geq 1- \\xi_i $$å¯¹æ¯”ç¡¬é—´éš”æœ€å¤§åŒ–ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¯¹æ ·æœ¬åˆ°è¶…å¹³é¢çš„å‡½æ•°è·ç¦»çš„è¦æ±‚æ”¾æ¾äº†ï¼Œä¹‹å‰æ˜¯ä¸€å®šè¦å¤§äºç­‰äº1ï¼Œç°åœ¨åªéœ€è¦åŠ ä¸Šä¸€ä¸ªå¤§äºç­‰äº0çš„æ¾å¼›å˜é‡èƒ½å¤§äºç­‰äº1å°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œæ¾å¼›å˜é‡ä¸èƒ½ç™½åŠ ï¼Œè¿™æ˜¯æœ‰æˆæœ¬çš„ï¼Œæ¯ä¸€ä¸ªæ¾å¼›å˜é‡$\\xi_i$, å¯¹åº”äº†ä¸€ä¸ªä»£ä»·$\\xi_i$ï¼Œè¿™ä¸ªå°±å¾—åˆ°äº†æˆ‘ä»¬çš„è½¯é—´éš”æœ€å¤§åŒ–çš„SVMå­¦ä¹ æ¡ä»¶å¦‚ä¸‹ï¼š\n$$ min\\\\;\\\\; \\frac{1}{2}||w||_2^2 +C\\sum\\limits{i=1}^{m}\\xi_i $$$$ s.t. \\\\;\\\\; y_i(w^Tx_i + b) \\geq 1 - \\xi_i \\\\;\\\\;(i =1,2,...m) $$$$ \\xi_i \\geq 0 \\\\;\\\\;(i =1,2,...m) $$è¿™é‡Œï¼Œ$C\u0026gt;0$ä¸ºæƒ©ç½šå‚æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬ä¸€èˆ¬å›å½’å’Œåˆ†ç±»é—®é¢˜æ­£åˆ™åŒ–æ—¶å€™çš„å‚æ•°ã€‚$C$è¶Šå¤§ï¼Œå¯¹è¯¯åˆ†ç±»çš„æƒ©ç½šè¶Šå¤§ï¼Œ$C$è¶Šå°ï¼Œå¯¹è¯¯åˆ†ç±»çš„æƒ©ç½šè¶Šå°ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›$\\frac{1}{2}||w||_2^2$å°½é‡å°ï¼Œè¯¯åˆ†ç±»çš„ç‚¹å°½å¯èƒ½çš„å°‘ã€‚Cæ˜¯åè°ƒä¸¤è€…å…³ç³»çš„æ­£åˆ™åŒ–æƒ©ç½šç³»æ•°ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦è°ƒå‚æ¥é€‰æ‹©ã€‚\nSVMç¼–ç¨‹å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 %% ç”Ÿæˆæµ‹è¯•æ•°æ® classCount= 2; p= 100; bound =[0 10]; data =[... [2,2]+ randn(p,2),-1*ones(p,1);... [6,6]+ randn(p,2),+1*ones(p,1);... ]; X= data(:,1:end-1); Y = data(:,end); %% æ˜¾ç¤ºç”Ÿæˆçš„æµ‹è¯•æ•°æ® figure(1) clf; gscatter(X(:,1), X(:,2), Y, \u0026#39;rb\u0026#39;, \u0026#39;X+\u0026#39;); legend({\u0026#39;åˆ†ç±»-1\u0026#39;, \u0026#39;åˆ†ç±»+1\u0026#39;}); title(\u0026#34;åŸå§‹æ•°æ®æ•£ç‚¹å›¾\u0026#34;); xlim(bound); ylim(bound); %% æ‹†åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›† trainIndex = (mod(1:size(X,1),3)==1); testIndex = ~trainIndex; Xtrain=X(trainIndex,:); Ytrain=Y(trainIndex,:); Xtest=X(testIndex,:); Ytest=Y(testIndex,:); %% å°†æ‹†åˆ†çš„ç»“æœå±•ç¤º figure(2) clf; hold on; gscatter(Xtrain(:,1),Xtrain(:,2),Ytrain,\u0026#39;rb\u0026#39;,\u0026#39;X+\u0026#39;); scatter(Xtest(:,1),Xtest(:,2),\u0026#39;k.\u0026#39;); hold off; legend({\u0026#39;åˆ†ç±»-1\u0026#39;,\u0026#39;åˆ†ç±»+1\u0026#39;,\u0026#39;æµ‹è¯•æ•°æ®\u0026#39;}); title(\u0026#34;åˆ’åˆ†æµ‹è¯•æ•°æ®åçš„æ•£ç‚¹å›¾\u0026#34;); xlim(bound); ylim(bound); %% ä½¿ç”¨SVMè¿›è¡Œè®­ç»ƒ svm=fitcsvm(Xtrain,Ytrain); %% å±•ç¤ºSVMè®­ç»ƒçš„ç»“æœ figure(3) clf; gscatter(Xtrain(:,1), Xtrain(:, 2), Ytrain, \u0026#39;rb\u0026#39;, \u0026#39;X+\u0026#39;); hold on; gscatter(svm.SupportVectors(:,1), svm.SupportVectors(:,2),svm.SupportVectorLabels,\u0026#39;rb\u0026#39;,\u0026#39;oo\u0026#39;,13); xg = bound; yg = [-svm.Bias/svm.Beta(2) -svm.Beta(1)/svm.Beta(2) * bound(2)-svm.Bias/svm.Beta(2)]; plot(xg, yg, \u0026#39;g\u0026#39;, \u0026#39;Linewidth\u0026#39;, 2); delta = -svm.Beta(1)/svm.Beta(2)*svm.SupportVectors(1,1)-svm.SupportVectors(1,2)-svm.Bias/svm.Beta(2); plot(xg, yg-delta, \u0026#39;--g\u0026#39;, \u0026#39;LineWidth\u0026#39;, 2); plot(xg, yg+delta, \u0026#39;--g\u0026#39;, \u0026#39;LineWidth\u0026#39;, 2); hold off; xlim(bound); ylim(bound); legend({\u0026#39;åˆ†ç±»-1\u0026#39;, \u0026#39;åˆ†ç±»+1\u0026#39;, \u0026#39;æ”¯æŒå‘é‡-1\u0026#39;, \u0026#39;æ”¯æŒå‘é‡+1\u0026#39;, \u0026#39;è¶…å¹³é¢\u0026#39;, \u0026#39;è¶…å¹³é¢-1\u0026#39;, \u0026#39;è¶…å¹³é¢+1\u0026#39;}); title(\u0026#34;SVMè®­ç»ƒåçš„æ•£ç‚¹å›¾\u0026#34;); %% ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œé¢„æµ‹ Ypred = predict(svm, Xtest); %% ç»˜åˆ¶é¢„æµ‹åçš„ç»“æœ figure(4) clf; gscatter(Xtest(:,1), Xtest(:, 2), Ypred, \u0026#39;rb\u0026#39;, \u0026#39;X+\u0026#39;); hold on; g = gscatter(svm.SupportVectors(:,1), svm.SupportVectors(:,2), svm.SupportVectorLabels, \u0026#39;rb\u0026#39;,\u0026#39;oo\u0026#39;,13); plot(xg, yg, \u0026#39;g\u0026#39;, \u0026#39;Linewidth\u0026#39;, 2); plot(xg, yg-delta, \u0026#39;--g\u0026#39;, \u0026#39;Linewidth\u0026#39;, 2); plot(xg, yg+delta, \u0026#39;--g\u0026#39;, \u0026#39;Linewidth\u0026#39;, 2); hold off; xlim(bound); ylim(bound); legend({\u0026#39;åˆ†ç±»-1\u0026#39;, \u0026#39;åˆ†ç±»+1\u0026#39;, \u0026#39;æ”¯æŒå‘é‡-1\u0026#39;, \u0026#39;æ”¯æŒå‘é‡+1\u0026#39;, \u0026#39;è¶…å¹³é¢\u0026#39;, \u0026#39;è¶…å¹³é¢-1\u0026#39;, \u0026#39;è¶…å¹³é¢+1\u0026#39;}); title(\u0026#34;SVMé¢„æµ‹åçš„æ•£ç‚¹å›¾\u0026#34;); %% è®¡ç®—è¯¯å·® fprintf(\u0026#39;æ­£ç¡®ç‡ä¸ºï¼š%.2f%%\\n\u0026#39;,(sum(Ypred==Ytest)/numel(Ytest)).*100); SVMå®ç°å¤šåˆ†ç±» SVMç®—æ³•æœ€åˆæ˜¯ä¸ºäºŒå€¼åˆ†ç±»é—®é¢˜è®¾è®¡çš„ï¼Œå½“å¤„ç†å¤šç±»é—®é¢˜æ—¶ï¼Œå°±éœ€è¦æ„é€ åˆé€‚çš„å¤šç±»åˆ†ç±»å™¨ã€‚\nç›®å‰ï¼Œæ„é€ SVMå¤šç±»åˆ†ç±»å™¨çš„æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç±»ï¼š\nï¼ˆ1ï¼‰ç›´æ¥æ³•ï¼Œç›´æ¥åœ¨ç›®æ ‡å‡½æ•°ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œå°†å¤šä¸ªåˆ†ç±»é¢çš„å‚æ•°æ±‚è§£åˆå¹¶åˆ°ä¸€ä¸ªæœ€ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œé€šè¿‡æ±‚è§£è¯¥æœ€ä¼˜åŒ–é—®é¢˜â€œä¸€æ¬¡æ€§â€å®ç°å¤šç±»åˆ†ç±»ã€‚è¿™ç§æ–¹æ³•çœ‹ä¼¼ç®€å•ï¼Œä½†å…¶è®¡ç®—å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒå›°éš¾ï¼Œåªé€‚åˆç”¨äºå°å‹é—®é¢˜ä¸­ï¼›\nï¼ˆ2ï¼‰é—´æ¥æ³•ï¼Œä¸»è¦æ˜¯é€šè¿‡ç»„åˆå¤šä¸ªäºŒåˆ†ç±»å™¨æ¥å®ç°å¤šåˆ†ç±»å™¨çš„æ„é€ ï¼Œå¸¸è§çš„æ–¹æ³•æœ‰one-against-oneå’Œone-against-allä¸¤ç§ã€‚\nä¸€å¯¹å¤šæ³•ï¼ˆOVRï¼‰ è®­ç»ƒæ—¶ä¾æ¬¡æŠŠæŸä¸ªç±»åˆ«çš„æ ·æœ¬å½’ä¸ºä¸€ç±»,å…¶ä»–å‰©ä½™çš„æ ·æœ¬å½’ä¸ºå¦ä¸€ç±»ï¼Œè¿™æ ·kä¸ªç±»åˆ«çš„æ ·æœ¬å°±æ„é€ å‡ºäº†kä¸ªSVMã€‚åˆ†ç±»æ—¶å°†æœªçŸ¥æ ·æœ¬åˆ†ç±»ä¸ºå…·æœ‰æœ€å¤§åˆ†ç±»å‡½æ•°å€¼çš„é‚£ç±»ã€‚\nå‡å¦‚æˆ‘æœ‰å››ç±»è¦åˆ’åˆ†ï¼ˆä¹Ÿå°±æ˜¯4ä¸ªLabelï¼‰ï¼Œä»–ä»¬æ˜¯Aã€Bã€Cã€Dã€‚\näºæ˜¯æˆ‘åœ¨æŠ½å–è®­ç»ƒé›†çš„æ—¶å€™ï¼Œåˆ†åˆ«æŠ½å–\nAæ‰€å¯¹åº”çš„å‘é‡ä½œä¸ºæ­£é›†ï¼ŒBï¼ŒCï¼ŒDæ‰€å¯¹åº”çš„å‘é‡ä½œä¸ºè´Ÿé›†ï¼› Bæ‰€å¯¹åº”çš„å‘é‡ä½œä¸ºæ­£é›†ï¼ŒAï¼ŒCï¼ŒDæ‰€å¯¹åº”çš„å‘é‡ä½œä¸ºè´Ÿé›†ï¼› Cæ‰€å¯¹åº”çš„å‘é‡ä½œä¸ºæ­£é›†ï¼ŒAï¼ŒBï¼ŒDæ‰€å¯¹åº”çš„å‘é‡ä½œä¸ºè´Ÿé›†ï¼› Dæ‰€å¯¹åº”çš„å‘é‡ä½œä¸ºæ­£é›†ï¼ŒAï¼ŒBï¼ŒCæ‰€å¯¹åº”çš„å‘é‡ä½œä¸ºè´Ÿé›†ï¼› ä½¿ç”¨è¿™å››ä¸ªè®­ç»ƒé›†åˆ†åˆ«è¿›è¡Œè®­ç»ƒï¼Œç„¶åçš„å¾—åˆ°å››ä¸ªè®­ç»ƒç»“æœæ–‡ä»¶ã€‚åœ¨æµ‹è¯•çš„æ—¶å€™ï¼ŒæŠŠå¯¹åº”çš„æµ‹è¯•å‘é‡åˆ†åˆ«åˆ©ç”¨è¿™å››ä¸ªè®­ç»ƒç»“æœæ–‡ä»¶è¿›è¡Œæµ‹è¯•ã€‚æœ€åæ¯ä¸ªæµ‹è¯•éƒ½æœ‰ä¸€ä¸ªç»“æœf1(x),f2(x),f3(x),f4(x)ã€‚\näºæ˜¯æœ€ç»ˆçš„ç»“æœä¾¿æ˜¯è¿™å››ä¸ªå€¼ä¸­æœ€å¤§çš„ä¸€ä¸ªä½œä¸ºåˆ†ç±»ç»“æœã€‚\nä¸€å¯¹ä¸€æ³•ï¼ˆOVOï¼‰ ä¸€èˆ¬éƒ½æ˜¯ç”¨ä¸€å¯¹å¤šæ³•ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼ŒçŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿å°±è¡Œã€‚\nå‚è€ƒèµ„æ–™ æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰â€”â€”åŸç†ç¯‡ - çŸ¥ä¹ æ”¯æŒå‘é‡æœºåŸç†(ä¸€) çº¿æ€§æ”¯æŒå‘é‡æœº - åˆ˜å»ºå¹³Pinard - åšå®¢å›­ ç­‰åŒç³»åˆ—æ–‡ç«  ã€æ•°ä¹‹é“25ã€‘æœºå™¨å­¦ä¹ å¿…ç»ä¹‹è·¯-SVMæ”¯æŒå‘é‡æœºçš„æ•°å­¦ç²¾å_å“”å“©å“”å“©_bilibili ç­‰åŒç³»åˆ—è§†é¢‘ ","date":"2022-05-10T14:00:16+08:00","image":"https://lbqaq.top/p/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/86368113.webp","permalink":"https://lbqaq.top/p/%E5%88%86%E7%B1%BB%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","title":"åˆ†ç±»ç®—æ³•å­¦ä¹ ç¬”è®°"},{"content":"Kmeans ç®—æ³•æ­¥éª¤ ä»æ ·æœ¬ä¸­é€‰æ‹© K ä¸ªç‚¹ä½œä¸ºåˆå§‹è´¨å¿ƒï¼ˆå®Œå…¨éšæœºï¼‰ è®¡ç®—æ¯ä¸ªæ ·æœ¬åˆ°å„ä¸ªè´¨å¿ƒçš„è·ç¦»ï¼Œå°†æ ·æœ¬åˆ’åˆ†åˆ°è·ç¦»æœ€è¿‘çš„è´¨å¿ƒæ‰€å¯¹åº”çš„ç°‡ä¸­ è®¡ç®—æ¯ä¸ªç°‡å†…æ‰€æœ‰æ ·æœ¬çš„å‡å€¼ï¼Œå¹¶ä½¿ç”¨è¯¥å‡å€¼æ›´æ–°ç°‡çš„è´¨å¿ƒ é‡å¤æ­¥éª¤ 2 ä¸ 3 ï¼Œç›´åˆ°è¾¾åˆ°ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼š è´¨å¿ƒçš„ä½ç½®å˜åŒ–å°äºæŒ‡å®šçš„é˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 0.0001ï¼‰ è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•° æ¬§æ°è·ç¦» è¡¡é‡çš„æ˜¯å¤šç»´ç©ºé—´ä¸­ä¸¤ä¸ªç‚¹ä¹‹é—´çš„ç»å¯¹è·ç¦»\nåœ¨äºŒç»´å’Œä¸‰ç»´ç©ºé—´ä¸­çš„æ¬§æ°è·ç¦»å°±æ˜¯ä¸¤ç‚¹ä¹‹é—´çš„å®é™…è·ç¦»\nè®¡ç®—æ–¹æ³•ï¼šå¯¹åº”åæ ‡å€¼ç›¸å‡çš„å¹³æ–¹å’Œå†å¼€æ–¹\n$$ dist(X,Y)=\\sqrt{\\sum_{i=1}^{n}(x_i-y_i)^2} $$å¯¹äºäºŒç»´æ¥è¯´ï¼Œå°±æ˜¯\n$$ dist(X,Y)=\\sqrt{(x_1-y_1)^2+(x_2-y_2)^2} $$æ³¨æ„ç†è§£è¾“å…¥ï¼Ÿè¾“å‡ºï¼Ÿç±»åˆ«ä¸­å¿ƒï¼Ÿè¿­ä»£è¿‡ç¨‹ä¸­åšä»€ä¹ˆï¼Ÿ\nç¼–ç¨‹å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 %% ç”Ÿæˆæµ‹è¯•æ•°æ® clear p=100; % æ¯ç°‡çš„æ ·æœ¬æ•° sigma = [0.1 0;0 0.1]; % åæ–¹å·®çŸ©é˜µ R = chol(sigma); % ç”Ÿæˆæµ‹è¯•æ•°æ®é›† data=[... [0 0] + randn(p,2)*R,1*ones(p,1);... [0 2] + randn(p,2)*R,2*ones(p,1);... [2 0] + randn(p,2)*R,3*ones(p,1);... [2 2] + randn(p,2)*R,4*ones(p,1);... ]; %% ç»˜åˆ¶æ ·æœ¬æ•£ç‚¹å›¾ figure(1) scatter(data(:,1),data(:,2),\u0026#39;r.\u0026#39;) title(\u0026#34;æ— æ ·å¼æ ·æœ¬æ•£ç‚¹å›¾\u0026#34;) X=data(:,1:end-1); g=data(:,end); n=size(X,1); %% K-meanså®ç° k=4; % æŒ‡å®šåˆ†æˆçš„ç°‡æ•° %ä»nä¸ªæ•°æ®æ ·æœ¬ä¸­ä¸é‡å¤åœ°éšæœºé€‰æ‹©kä¸ªæ ·æœ¬ä½œä¸ºè´¨ centerIndex = randperm(n, k); C = X(centerIndex, :); result = struct(\u0026#39;y\u0026#39;,[],\u0026#39;C\u0026#39;,[],\u0026#39;objectives\u0026#39;,[]); iter = 0; maxIter = 10; % æŒ‡å®šæœ€å¤§è¿­ä»£çš„æ¬¡æ•° while (iter \u0026lt; maxIter) iter = iter + 1; % æ±‚å‡ºæ¯ä¸ªæ ·æœ¬åˆ°ä¸­å¿ƒç‚¹çš„è·ç¦»ï¼ŒæŒ‰ç…§è·ç¦»è‡ªèº«æœ€è¿‘çš„ä¸­å¿ƒç‚¹è¿›è¡Œèšç±» D = pdist2(X, C); [d, ypred] = min(D, [], 2); % ä¿å­˜ç»“æœ result(iter).y = ypred; result(iter).C = C; result(iter).objectives = sum(d.*d); % å½“è·ç¦»æ²¡å˜æ—¶ç»“æŸè¿­ä»£ if(iter \u0026gt; 1 \u0026amp;\u0026amp; result(iter).objectives == result(iter-1).objectives) break; end % ä¾æ®ä¸Šæ¬¡èšç±»ç»“æœï¼Œæ±‚å‡ºæ–°çš„ä¸­å¿ƒç‚¹ for cid = 1: size(C,1) C(cid, :) = mean (X(ypred == cid, :)); end end %% ç»˜åˆ¶ç»“æœæ•£ç‚¹å›¾ figure(2); for t = 1: numel(result) figure(2); clf % ç»˜åˆ¶èšç±»ç»“æœ gscatter(X(:,1), X(:,2), result(t).y,\u0026#39;rgbm\u0026#39;); hold on; Ct = result(t).C; % ç»˜åˆ¶èšç±»ä¸­å¿ƒ h=gscatter(Ct(:,1), Ct(:,2), (1: size(Ct,1)), \u0026#39;kkkk\u0026#39;, \u0026#39;x+od\u0026#39;, 10); title(\u0026#34;ç¬¬\u0026#34;+t+\u0026#34;æ¬¡è¿­ä»£åæ•£ç‚¹å›¾\u0026#34;) set(h,\u0026#39;LineWidth\u0026#39;, 2.0); waitforbuttonpress; %pause(1); end %% è®¡ç®—è¯¯å·® % è¾“å‡ºæ··æ·†çŸ©é˜µ confusionmat(g,ypred) ç¼ºç‚¹ å®¹æ˜“å—åˆå§‹è´¨å¿ƒçš„å½±å“ï¼›ç®—æ³•èšç±»æ—¶ï¼Œå®¹æ˜“äº§ç”Ÿç©ºç°‡ï¼›ç®—æ³•å¯èƒ½æ”¶æ•›åˆ°å±€éƒ¨æœ€å°å€¼ã€‚\nè§£å†³åŠæ³•ï¼šé‡æ–°æ‰§è¡ŒK-meansç®—æ³•ï¼Œé‡æ–°åˆ†é…è´¨å¿ƒ\nè°±èšç±»(Spectral Clustering) ç®—æ³•æ€æƒ³ æŠŠæ‰€æœ‰çš„æ•°æ®çœ‹åšç©ºé—´ä¸­çš„ç‚¹ï¼Œè¿™äº›ç‚¹ä¹‹é—´å¯ä»¥ç”¨è¾¹è¿æ¥èµ·æ¥ã€‚è·ç¦»è¾ƒè¿œçš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹æƒé‡å€¼è¾ƒä½ï¼Œè€Œè·ç¦»è¾ƒè¿‘çš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹æƒé‡å€¼è¾ƒé«˜ï¼Œé€šè¿‡å¯¹æ‰€æœ‰æ•°æ®ç‚¹ç»„æˆçš„å›¾è¿›è¡Œåˆ‡å›¾ï¼Œè®©åˆ‡å›¾åä¸åŒçš„å­å›¾é—´è¾¹æƒé‡å’Œå°½å¯èƒ½çš„ä½ï¼Œè€Œå­å›¾å†…çš„è¾¹æƒé‡å’Œå°½å¯èƒ½çš„é«˜ï¼Œä»è€Œè¾¾åˆ°èšç±»çš„ç›®çš„ã€‚\nåº¦çŸ©é˜µD å¯¹äºä¸€ä¸ªå›¾$G$ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨ç‚¹çš„é›†åˆ$V$å’Œè¾¹çš„é›†åˆ$E$æ¥æè¿°ã€‚å³ä¸º$G(V,E)$ã€‚å…¶ä¸­$V$å³ä¸ºæˆ‘ä»¬æ•°æ®é›†é‡Œé¢æ‰€æœ‰çš„ç‚¹$(v_1, v_2,\u0026hellip;v_n)$ã€‚å¯¹äº$V$ä¸­çš„ä»»æ„ä¸¤ä¸ªç‚¹ï¼Œå¯ä»¥æœ‰è¾¹è¿æ¥ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰è¾¹è¿æ¥ã€‚æˆ‘ä»¬å®šä¹‰æƒé‡$w_{ij}$ä¸ºç‚¹$v_i$å’Œç‚¹$v_j$ä¹‹é—´çš„æƒé‡ã€‚ç”±äºæˆ‘ä»¬æ˜¯æ— å‘å›¾ï¼Œæ‰€ä»¥$w_{ij} = w_{ji}$ã€‚\nå¯¹äºæœ‰è¾¹è¿æ¥çš„ä¸¤ä¸ªç‚¹$v_i$å’Œ$v_j$ï¼Œ$w_{ij} \u0026gt; 0$,å¯¹äºæ²¡æœ‰è¾¹è¿æ¥çš„ä¸¤ä¸ªç‚¹$v_i$å’Œ$v_j$ï¼Œ$w_{ij} = 0$ã€‚å¯¹äºå›¾ä¸­çš„ä»»æ„ä¸€ä¸ªç‚¹$v_i$ï¼Œå®ƒçš„åº¦$d_i$å®šä¹‰ä¸ºå’Œå®ƒç›¸è¿çš„æ‰€æœ‰è¾¹çš„æƒé‡ä¹‹å’Œï¼Œå³\n$$ d_i = \\sum\\limits_{j=1}^{n}w_{ij} $$åˆ©ç”¨æ¯ä¸ªç‚¹åº¦çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªnxnçš„åº¦çŸ©é˜µ$D$,å®ƒæ˜¯ä¸€ä¸ªå¯¹è§’çŸ©é˜µï¼Œåªæœ‰ä¸»å¯¹è§’çº¿æœ‰å€¼ï¼Œå¯¹åº”ç¬¬iè¡Œçš„ç¬¬iä¸ªç‚¹çš„åº¦æ•°ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š\n$$ \\mathbf{D} = \\left( \\begin{array}{ccc} d_1 \u0026 \\ldots \u0026 \\ldots \\\\\\\\ \\ldots \u0026 d_2 \u0026 \\ldots \\\\\\\\ \\vdots \u0026 \\vdots \u0026 \\ddots \\\\\\\\ \\ldots \u0026 \\ldots \u0026 d_n \\end{array} \\right) $$åˆ©ç”¨æ‰€æœ‰ç‚¹ä¹‹é—´çš„æƒé‡å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å›¾çš„é‚»æ¥çŸ©é˜µ$W$ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªnxnçš„çŸ©é˜µï¼Œç¬¬iè¡Œçš„ç¬¬jä¸ªå€¼å¯¹åº”æˆ‘ä»¬çš„æƒé‡$w_{ij}$ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œå¯¹äºç‚¹é›†$V$çš„çš„ä¸€ä¸ªå­é›†$A \\subset V$ï¼Œæˆ‘ä»¬å®šä¹‰ï¼š\n$$ |A|: = å­é›†Aä¸­ç‚¹çš„ä¸ªæ•° $$$$ vol(A): = \\sum\\limits_{i \\in A}d_i $$ç›¸ä¼¼çŸ©é˜µ æ„å»ºé‚»æ¥çŸ©é˜µ$W$çš„æ–¹æ³•æœ‰ä¸‰ç±»ï¼š\n$\\epsilon$-é‚»è¿‘æ³•\nå®ƒè®¾ç½®äº†ä¸€ä¸ªè·ç¦»é˜ˆå€¼$\\epsilon$ï¼Œç„¶åç”¨æ¬§å¼è·ç¦»$s_{ij}$åº¦é‡ä»»æ„ä¸¤ç‚¹$x_i$å’Œ$x_j$çš„è·ç¦»ã€‚ ç„¶åæ ¹æ®$s_{ij}$å’Œ$\\epsilon$çš„å¤§å°å…³ç³»ï¼Œæ¥å®šä¹‰é‚»æ¥çŸ©é˜µ$W$ã€‚è·ç¦»å°äº$\\epsilon$ä¸º$\\epsilon$ï¼Œè·ç¦»å¤§äº$\\epsilon$ä¸º0\nKé‚»è¿‘æ³•\nåˆ©ç”¨KNNç®—æ³•éå†æ‰€æœ‰çš„æ ·æœ¬ç‚¹ï¼Œå–æ¯ä¸ªæ ·æœ¬æœ€è¿‘çš„kä¸ªç‚¹ä½œä¸ºè¿‘é‚»ï¼Œåªæœ‰å’Œæ ·æœ¬è·ç¦»æœ€è¿‘çš„kä¸ªç‚¹ä¹‹é—´çš„$w_{ij} \u0026gt; 0$ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šé€ æˆé‡æ„ä¹‹åçš„é‚»æ¥çŸ©é˜µWéå¯¹ç§°ã€‚\nå…¨è¿æ¥æ³•ï¼ˆæœ€å¸¸ç”¨ï¼‰\nç›¸æ¯”å‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸‰ç§æ–¹æ³•æ‰€æœ‰çš„ç‚¹ä¹‹é—´çš„æƒé‡å€¼éƒ½å¤§äº0ï¼Œå› æ­¤ç§°ä¹‹ä¸ºå…¨è¿æ¥æ³•ã€‚å¯ä»¥é€‰æ‹©ä¸åŒçš„æ ¸å‡½æ•°æ¥å®šä¹‰è¾¹æƒé‡ï¼Œå¸¸ç”¨çš„æœ‰å¤šé¡¹å¼æ ¸å‡½æ•°ï¼Œé«˜æ–¯æ ¸å‡½æ•°å’ŒSigmoidæ ¸å‡½æ•°ï¼Œæœ€å¸¸ç”¨çš„æ˜¯é«˜æ–¯æ ¸å‡½æ•°RBFã€‚\n$$ w_{ij}=s_{ij}=exp(-\\frac{||x_i-x_j||_2^2}{2\\sigma^2}) $$ ğŸ’¡ exp(x)è¡¨ç¤º$e^x$\næ‹‰æ™®æ‹‰æ–¯çŸ©é˜µ æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µ$L= D-W$\n$D$å³ä¸ºåº¦çŸ©é˜µï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è§’çŸ©é˜µã€‚$W$ä¸ºé‚»æ¥çŸ©é˜µã€‚\næ— å‘å›¾åˆ‡å›¾ å¯¹äºæ— å‘å›¾$G$çš„åˆ‡å›¾ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†å›¾$G(V,E)$åˆ‡æˆç›¸äº’æ²¡æœ‰è¿æ¥çš„kä¸ªå­å›¾ï¼Œæ¯ä¸ªå­å›¾ç‚¹çš„é›†åˆä¸ºï¼š$A_1,A_2,..A_k$ï¼Œå®ƒä»¬æ»¡è¶³$A_i \\cap A_j = \\emptyset$,ä¸”$A_1 \\cup A_2 \\cup \u0026hellip; \\cup A_k = V$.\nå¯¹äºä»»æ„ä¸¤ä¸ªå­å›¾ç‚¹çš„é›†åˆ$A, B \\subset V$, $A \\cap B = \\emptyset$, æˆ‘ä»¬å®šä¹‰Aå’ŒBä¹‹é—´çš„åˆ‡å›¾æƒé‡ä¸ºï¼š\n$$ W(A, B) = \\sum\\limits_{i \\in A, j \\in B}w_{ij} $$ æœ€å°åŒ–åˆ‡å›¾\n$$ \\min cut(A,B)=\\sum\\limits_{i \\in A, j \\in B}w_{ij} $$ RatioCutåˆ‡å›¾\n$$ RatioCut(A,B)=cut(A,B)(\\frac{1}{|A|}+\\frac{1}{|B|}) $$ Ncutåˆ‡å›¾\n$$ Ncut(A,B)=cut(A,B)(\\frac{1}{vol(A)}+\\frac{1}{vol(B)}) $$ ç®—æ³•æµç¨‹ æœ€å¸¸ç”¨çš„ç›¸ä¼¼çŸ©é˜µçš„ç”Ÿæˆæ–¹å¼æ˜¯åŸºäºé«˜æ–¯æ ¸è·ç¦»çš„å…¨è¿æ¥æ–¹å¼ï¼Œæœ€å¸¸ç”¨çš„åˆ‡å›¾æ–¹å¼æ˜¯Ncutã€‚è€Œåˆ°æœ€åå¸¸ç”¨çš„èšç±»æ–¹æ³•ä¸ºK-Meansã€‚\nè¾“å…¥ï¼šæ ·æœ¬é›†D=$(x_1,x_2,\u0026hellip;,x_n)$ï¼Œç›¸ä¼¼çŸ©é˜µçš„ç”Ÿæˆæ–¹å¼, é™ç»´åçš„ç»´åº¦$k_1$, èšç±»æ–¹æ³•ï¼Œèšç±»åçš„ç»´åº¦$k_2$\nè¾“å‡ºï¼š ç°‡åˆ’åˆ†$C(c_1,c_2,\u0026hellip;c_{k_2})$.\næ ¹æ®è¾“å…¥çš„ç›¸ä¼¼çŸ©é˜µçš„ç”Ÿæˆæ–¹å¼æ„å»ºæ ·æœ¬çš„ç›¸ä¼¼çŸ©é˜µS æ ¹æ®ç›¸ä¼¼çŸ©é˜µSæ„å»ºé‚»æ¥çŸ©é˜µWï¼Œæ„å»ºåº¦çŸ©é˜µD è®¡ç®—å‡ºæ‹‰æ™®æ‹‰æ–¯çŸ©é˜µL æ„å»ºæ ‡å‡†åŒ–åçš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µ$D^{-1/2}LD^{-1/2}$ è®¡ç®—$D^{-1/2}LD^{-1/2}$æœ€å°çš„$k_1$ä¸ªç‰¹å¾å€¼æ‰€å„è‡ªå¯¹åº”çš„ç‰¹å¾å‘é‡$f$ å°†å„è‡ªå¯¹åº”çš„ç‰¹å¾å‘é‡$f$ç»„æˆçš„çŸ©é˜µæŒ‰è¡Œæ ‡å‡†åŒ–ï¼Œæœ€ç»ˆç»„æˆ$n \\times k_1$ç»´çš„ç‰¹å¾çŸ©é˜µF å¯¹Fä¸­çš„æ¯ä¸€è¡Œä½œä¸ºä¸€ä¸ª$k_1$ç»´çš„æ ·æœ¬ï¼Œå…±nä¸ªæ ·æœ¬ï¼Œç”¨è¾“å…¥çš„èšç±»æ–¹æ³•è¿›è¡Œèšç±»ï¼Œèšç±»ç»´æ•°ä¸º$k_2$ å¾—åˆ°ç°‡åˆ’åˆ†$C(c_1,c_2,\u0026hellip;c_{k_2})$ ç¼–ç¨‹å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 rng(\u0026#39;default\u0026#39;) %% ç”Ÿæˆæµ‹è¯•æ•°æ® p= 200; theta = linspace(0,2*pi,p)\u0026#39;; data =[... 2*[cos(theta) sin(theta)]+ rand(p,1),1*ones(p,1); 4*[cos(theta) sin(theta)]+ rand(p,1),2*ones(p,1); ]; X = data(:,1:end-1); y = data(:,end); gscatter(X(:,1),X(:,2),y,\u0026#39;rg\u0026#39;); %% è·ç¦»çŸ©é˜µ Q = pdist2(X, X); imagesc(Q); colorbar; %% æ„é€ å›¾çš„ç›¸ä¼¼åº¦çŸ©é˜µA sigma = 0.1; A = exp(-Q.*Q / (2*sigma*sigma)); imagesc(A); colorbar; %% æ„é€ å›¾çš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µL D = diag(sum(A,2)); L = D - A; imagesc(L); colorbar; %% å¯¹æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µè¿›è¡Œç‰¹å¾å€¼åˆ†è§£ [V,S] = eig(L); s = diag(S); plot(s); %% å–æœ€å°çš„kä¸ªç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ k = 2; Vr = V(:,1:k); Vr([1:2, end-1:end],:) %% å¯¹æ˜ å°„åçš„ç‰¹å¾çŸ©é˜µVrè¿›è¡Œkmeansèšç±» idx = kmeans(Vr,k); gscatter(X(:,1),X(:,2),idx,\u0026#39;rg\u0026#39;); title([\u0026#39;è°±èšç±» \\sigma = \u0026#39;,num2str(sigma)]) ç®€åŒ–è€ƒè¯•ä¸“ç”¨ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 % æ•°æ®ä¸ºX,y %% è·ç¦»çŸ©é˜µ Q = pdist2(X, X); %% æ„é€ å›¾çš„ç›¸ä¼¼åº¦çŸ©é˜µA sigma = 0.1; A = exp(-Q.*Q / (2*sigma*sigma)); %% æ„é€ å›¾çš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µL D = diag(sum(A,2)); L = D - A; %% å¯¹æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µè¿›è¡Œç‰¹å¾å€¼åˆ†è§£ [V,S] = eig(L); %% å–æœ€å°çš„kä¸ªç‰¹å¾å€¼å¯¹åº”çš„ç‰¹å¾å‘é‡ k = 2; Vr = V(:,1:k); %% å¯¹æ˜ å°„åçš„ç‰¹å¾çŸ©é˜µVrè¿›è¡Œkmeansèšç±» idx = kmeans(Vr,k); gscatter(X(:,1),X(:,2),idx,\u0026#39;rg\u0026#39;); title([\u0026#39;è°±èšç±» \\sigma = \u0026#39;,num2str(sigma)]) å‚è€ƒæ–‡æ¡£ K-Means(Kå‡å€¼èšç±»ç®—æ³•) - çŸ¥ä¹ è°±èšç±»ï¼ˆspectral clusteringï¼‰åŸç†æ€»ç»“ - åˆ˜å»ºå¹³Pinard - åšå®¢å›­ ","date":"2022-05-10T08:23:41+08:00","image":"https://lbqaq.top/p/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/97701948.webp","permalink":"https://lbqaq.top/p/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","title":"èšç±»ç®—æ³•å­¦ä¹ ç¬”è®°"},{"content":"æ‰“äº†ä¸¤æ¬¡åŠ›æ‰£çš„å‘¨èµ›ï¼Œéƒ½è´¥åœ¨äº†ç¬¬ä¸‰é¢˜ä¸Šï¼Œè€Œä¸”éƒ½æ˜¯äºŒåˆ†æŸ¥æ‰¾çš„é¢˜ç›®ã€‚è¿™ä¸‹ä¸èƒ½å¿äº†ï¼Œå¿…é¡»æ¥æ€»ç»“ä¸€æ³¢ã€‚\nç¬¬ä¸€æ¬¡äºŒåˆ†æŸ¥æ‰¾ äºŒåˆ†æŸ¥æ‰¾æ˜¯ç”¨æ¥åœ¨ä¸€ä¸ªæœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾æŸä¸€å…ƒç´ çš„ç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š\nå®ƒæ¯æ¬¡è€ƒå¯Ÿæ•°ç»„å½“å‰éƒ¨åˆ†çš„ä¸­é—´å…ƒç´ ï¼Œå¦‚æœä¸­é—´å…ƒç´ åˆšå¥½æ˜¯è¦æ‰¾çš„ï¼Œå°±ç»“æŸæœç´¢è¿‡ç¨‹ï¼›å¦‚æœä¸­é—´å…ƒç´ å°äºæ‰€æŸ¥æ‰¾çš„å€¼ï¼Œé‚£ä¹ˆå·¦ä¾§çš„åªä¼šæ›´å°ï¼Œä¸ä¼šæœ‰æ‰€æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåªéœ€åˆ°å³ä¾§æŸ¥æ‰¾ï¼›å¦‚æœä¸­é—´å…ƒç´ å¤§äºæ‰€æŸ¥æ‰¾çš„å€¼åŒç†ï¼Œåªéœ€åˆ°å·¦ä¾§æŸ¥æ‰¾ã€‚\nä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾å°±èƒ½å°†åŸå…ˆ$\\Omicron(n)$æ—¶é—´å¤æ‚åº¦çš„çº¿æ€§æŸ¥æ‰¾é™ä½ä¸º$\\Omicron(\\log(n))$ã€‚ä½†æ˜¯ä¸€å®šè¦æ³¨æ„ï¼ŒäºŒåˆ†æŸ¥æ‰¾ä¸€å®šè¦åœ¨æœ‰åºçš„æ•°ç»„ä¸Šè¿›è¡Œã€‚\nä¸‹é¢æ”¾ä¸Šæ¨¡æ¿ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 int binary_search(vector\u0026lt;int\u0026gt;\u0026amp; nums, int target) { int left = 0, right = nums.size() - 1; int ret = -1; // æœªæœç´¢åˆ°æ•°æ®è¿”å›-1ä¸‹æ ‡ int mid; while (left \u0026lt;= right) { mid = left + ((right - left) \u0026gt;\u0026gt; 1); // ç›´æ¥å¹³å‡å¯èƒ½ä¼šæº¢å‡ºï¼Œæ‰€ä»¥ç”¨è¿™ä¸ªç®—æ³• if (nums[mid] \u0026lt; target) left = mid + 1; else if (nums[mid] \u0026gt; target) right = mid - 1; else { // æœ€åæ£€æµ‹ç›¸ç­‰æ˜¯å› ä¸ºå¤šæ•°æœç´¢æƒ…å†µä¸æ˜¯å¤§äºå°±æ˜¯å°äº ret = mid; break; } } return ret; // å•ä¸€å‡ºå£ } åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡æœç´¢çš„æ˜¯[left,right]è¿™ä¸ªé—­åŒºé—´ï¼Œæ‰€ä»¥åœ¨whileä¸­è¦ä½¿ç”¨\u0026lt;=ã€‚\nä½†æ˜¯ï¼Œè¿™æ ·çš„ç®—æ³•è¿˜æ˜¯å­˜åœ¨ä¸€äº›ç¼ºé™·ã€‚æ¯”å¦‚å¯¹äºæ¡ä»¶nums = [1,2,2,2,3],target=2ï¼Œä½¿ç”¨ä¸Šé¢çš„ç®—æ³•è¿”å›çš„ä¸‹æ ‡æ˜¯2ã€‚è™½ç„¶ç­”æ¡ˆæ˜¯æ­£ç¡®çš„ï¼Œä½†æˆ‘ä»¬æƒ³è¦å¾—åˆ°targetçš„å·¦ä¾§è¾¹ç•Œæˆ–å³ä¾§è¾¹ç•Œå°±ä¸èƒ½ä½¿ç”¨ä¸Šé¢çš„ç®—æ³•äº†ã€‚è™½ç„¶å¯ä»¥å…ˆæŸ¥å‡ºç»“æœå†å‘å·¦æˆ–å³çº¿æ€§æœç´¢ï¼Œä½†è¿™æ ·æ—¶é—´å¤æ‚åº¦å°±è¢«æé«˜äº†ã€‚\nå¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 int left_bound(vector\u0026lt;int\u0026gt;\u0026amp; nums, int target) { if (nums.size() == 0) return -1; int left = 0; int right = nums.size(); // æ³¨æ„ while (left \u0026lt; right) { // æ³¨æ„ int mid = (left + right) / 2; if (nums[mid] == target) { right = mid; } else if (nums[mid] \u0026lt; target) { left = mid + 1; } else if (nums[mid] \u0026gt; target) { right = mid; // æ³¨æ„ } } // target æ¯”æ‰€æœ‰æ•°éƒ½å¤§ if (left == nums.size()) return -1; // æœªæŸ¥åˆ°ç›®æ ‡å€¼ return nums[left] == target ? left : -1; } åœ¨è¿™é‡Œæˆ‘ä»¬æœç´¢çš„åŒºé—´å˜æˆäº†å·¦é—­å³å¼€[left,right)ï¼Œæ‰€ä»¥åœ¨whileä¸­ä½¿ç”¨\u0026lt;ã€‚\nç”±äºæœç´¢åŒºé—´å˜ä¸º[left,right)ï¼Œæ‰€ä»¥å½“ nums[mid]è¢«æ£€æµ‹ä¹‹åï¼Œä¸‹ä¸€æ­¥çš„æœç´¢åŒºé—´åº”è¯¥å»æ‰ midåˆ†å‰²æˆä¸¤ä¸ªåŒºé—´ï¼Œå³ [left, mid)æˆ– [mid + 1, right)ã€‚åœ¨ä»£ç ä¸­ä½“ç°ä¸ºleft = mid + 1;å’Œright = mid;\né‚£ä¹ˆï¼Œè¿™ä¸ªæ¨¡æ¿ä¸ºä»€ä¹ˆèƒ½æ‰¾åˆ°å·¦è¾¹ç•Œå‘¢ï¼Ÿå…³é”®åœ¨äºnums[mid] == targetè¿™ç§æƒ…å†µçš„å¤„ç†ï¼š\nright = mid;\næˆ‘ä»¬æ‰¾åˆ° target æ—¶æ²¡æœ‰ç«‹å³è¿”å›ï¼Œè€Œæ˜¯ç¼©å°ã€Œæœç´¢åŒºé—´ã€çš„ä¸Šç•Œ rightï¼Œåœ¨åŒºé—´ [left, mid)ä¸­ç»§ç»­æœç´¢ï¼Œå³ä¸æ–­å‘å·¦æ”¶ç¼©ï¼Œè¾¾åˆ°é”å®šå·¦ä¾§è¾¹ç•Œçš„ç›®çš„ã€‚\nå¯»æ‰¾å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 int right_bound(vector\u0026lt;int\u0026gt;\u0026amp; nums, int target) { if (nums.size() == 0) return -1; int left = 0, right = nums.size(); while (left \u0026lt; right) { int mid = (left + right) / 2; if (nums[mid] == target) { left = mid + 1; // æ³¨æ„ } else if (nums[mid] \u0026lt; target) { left = mid + 1; } else if (nums[mid] \u0026gt; target) { right = mid; } } if (left == 0) return -1; return nums[left - 1] == target ? (left - 1) : -1; // æ³¨æ„è¦-1 } ç”±äºæˆ‘ä»¬å¯¹ leftçš„æ›´æ–°å¿…é¡»æ˜¯ left = mid + 1ï¼Œè¿™å°±å¯¼è‡´äº† while å¾ªç¯ç»“æŸæ—¶ï¼Œnums[left]ä¸€å®šä¸ç­‰äº targetäº†ï¼Œè€Œ nums[left-1]å¯èƒ½æ˜¯ targeã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è¿”å›ç»“æœæ—¶è¦è¿›è¡Œ-1æ“ä½œã€‚\nç¬¬äºŒæ¬¡äºŒåˆ†æŸ¥æ‰¾ è™½è¯´ä¸Šé¢çš„æ¨¡æ¿å·²ç»å¤Ÿå¥½äº†ï¼Œä½†æ˜¯æœ‰äº›é¢˜ç›®å¹¶ä¸æ˜¯åªè€ƒä¸€ä¸ªäºŒåˆ†ï¼Œå¦‚æœç…§ç€æ•²ä¸€éæ¨¡æ¿è¿˜æ˜¯æ¯”è¾ƒè´¹æ—¶çš„ã€‚è¿™æ˜¯å°±ä¸å¾—ä¸ç¥­å‡º\u0026lt;algorithm\u0026gt;é‡Œçš„ä¸¤ä¸ªå†…ç½®å‡½æ•°äº†ï¼š\nlower_bound è¿”å›æŒ‡å‘èŒƒå›´ [first, last) ä¸­é¦–ä¸ªä¸å°äºï¼ˆå³å¤§äºæˆ–ç­‰äºï¼‰ value çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼Œæˆ–è‹¥æ‰¾ä¸åˆ°è¿™ç§å…ƒç´ åˆ™è¿”å› last ã€‚\nä»”ç»†è€ƒè™‘ä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°è¿™å°±æ˜¯ä¸Šé¢æåˆ°çš„å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾ï¼Œä¸€ä¸‹å°±æŠŠåŸæ¥é‚£ä¹ˆé•¿çš„ä»£ç å˜æˆäº†ä¸€è¡Œï¼Œå¤ªé¦™äº†ã€‚ï¼ˆä½†æ˜¯ä¸Šé¢çš„æ¨¡æ¿è¿˜æ˜¯è¦æŒæ¡ï¼Œæœ‰äº›é¢˜ç›®æ˜¯æ— æ³•è°ƒåº“ï¼‰\nä½¿ç”¨ä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 int main() { vector\u0026lt;int\u0026gt; nums = {1, 1, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 6}; auto lower = lower_bound(nums.begin(), nums.end(), 3); cout \u0026lt;\u0026lt; lower - nums.begin() \u0026lt;\u0026lt; endl; //3 return 0; } ä¸€ä¸ªå°ç»†èŠ‚ï¼Œlower_boundè¿”å›çš„æ˜¯è¿­ä»£å™¨ï¼Œæ‰€ä»¥lowerçš„çœŸå®ç±»å‹æ˜¯vector\u0026lt;int\u0026gt;::iteratorï¼Œå¤ªé•¿äº†æ‰€ä»¥æˆ‘ä»¬ç”¨çš„æ—¶å€™è¿˜æ˜¯ä½¿ç”¨autoè®©ç¼–è¯‘å™¨æ¥è¡¥å…¨QuQã€‚\nupper_bound è¿”å›æŒ‡å‘èŒƒå›´ [first, last) ä¸­é¦–ä¸ªå¤§äº value çš„å…ƒç´ çš„è¿­ä»£å™¨ï¼Œæˆ–è‹¥æ‰¾ä¸åˆ°è¿™ç§å…ƒç´ åˆ™è¿”å› last ã€‚\nå…¶å®å°±æ˜¯ä¸Šé¢å¯»æ‰¾å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾ï¼Œåªä¸è¿‡æˆ‘ä»¬è¿›è¡Œäº†-1æ“ä½œè€Œè¯¥å‡½æ•°æ²¡æœ‰è€Œå·²ã€‚\nä½¿ç”¨ä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 int main() { vector\u0026lt;int\u0026gt; nums = {1, 1, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 6}; auto upper = upper_bound(nums.begin(), nums.end(), 3); cout \u0026lt;\u0026lt; upper - nums.begin() \u0026lt;\u0026lt; endl; //7 return 0; } ç»ˆæäºŒåˆ†æŸ¥æ‰¾ ä¸Šé¢çš„éƒ½æ˜¯å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠæ€è·¯æ”¾å¼€ä¸€ç‚¹ï¼Œå¯¹ç­”æ¡ˆè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚æˆ‘ä»¬éƒ½çŸ¥é“æš´åŠ›æ³•å°±æ˜¯æšä¸¾ç­”æ¡ˆç„¶åæ£€éªŒæšä¸¾çš„å€¼æ˜¯å¦æ­£ç¡®ï¼Œå½“ç­”æ¡ˆæ»¡è¶³å•è°ƒæ€§æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†æšä¸¾æ¢ä¸ºäºŒåˆ†ï¼Œè¿™æ ·èƒ½å¤§å¤§é™ä½æ—¶é—´å¤æ‚åº¦ã€‚\næ”¾ä¸¤é“ä¾‹é¢˜ï¼Œå°±æ˜¯å¼•è¨€é‡Œæˆ‘è¯´çš„å‘¨èµ›é¢˜\n2187. å®Œæˆæ—…é€”çš„æœ€å°‘æ—¶é—´ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ 5219. æ¯ä¸ªå°å­©æœ€å¤šèƒ½åˆ†åˆ°å¤šå°‘ç³–æœ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ å‚è€ƒèµ„æ–™ äºŒåˆ† - OI Wiki äºŒåˆ†æŸ¥æ‰¾ç»†èŠ‚è¯¦è§£ï¼Œé¡ºä¾¿èµ‹è¯—ä¸€é¦– - äºŒåˆ†æŸ¥æ‰¾ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ ","date":"2022-04-04T22:54:54+08:00","image":"https://lbqaq.top/p/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%98%AF%E4%B8%AA%E5%95%A5%E5%95%8A/89247070.webp","permalink":"https://lbqaq.top/p/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%98%AF%E4%B8%AA%E5%95%A5%E5%95%8A/","title":"äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸ªå•¥å•Š"},{"content":"è¿›åˆ¶è½¬æ¢ åœ¨æ•°å­¦ä¸­ï¼Œä¸æ­¢åªæœ‰æˆ‘ä»¬å¸¸è§çš„10è¿›åˆ¶ï¼Œæœ€è¿‘åˆ·äº†å‡ é“å…³äºè¿›åˆ¶è½¬æ¢çš„é¢˜ç›®ï¼Œåœ¨è¿™é‡Œåšä¸ªæ€»ç»“å’Œè®°å½•å§ã€‚\nåŸºæœ¬æ¦‚å¿µ é¦–å…ˆæˆ‘ä»¬è¦å…ˆäº†è§£è¿›åˆ¶çš„åŸºæœ¬æ¦‚å¿µï¼Œè¿™é‡Œæˆ‘ç›´æ¥ä»LeetCodeå®˜æ–¹è¿™é‡Œå¼•ç”¨äº†ã€‚\nä»»ä½•ä¸€ç§è¿›ä½è®¡æ•°åˆ¶éƒ½æœ‰ä¸€ä¸ªåŸºæ•°ï¼ŒåŸºæ•°ä¸º X çš„è¿›ä½è®¡æ•°åˆ¶ç§°ä¸º X è¿›åˆ¶ï¼Œè¡¨ç¤ºæ¯ä¸€ä¸ªæ•°ä½ä¸Šçš„æ•°è¿ç®—æ—¶éƒ½æ˜¯é€¢ X è¿›ä¸€ã€‚\nå¯¹äºä¸€ä¸ª X è¿›åˆ¶çš„æ•°ï¼Œå…¶å…·ä½“æ•°å€¼ç”±å…¶ä¸­çš„æ¯ä¸ªæ•°ç å’Œæ•°ç æ‰€åœ¨çš„æ•°ä½å†³å®šã€‚æ•´æ•°éƒ¨åˆ†ä»å³å¾€å·¦çš„ç¬¬ m ä¸ªæ•°ä½è¡¨ç¤ºçš„æƒé‡æ˜¯ $X^m$ï¼Œå…¶ä¸­ m æœ€å°ä¸º 0ï¼›å°æ•°éƒ¨åˆ†ä»å·¦å¾€å³çš„ç¬¬ n ä¸ªæ•°ä½è¡¨ç¤ºçš„æƒé‡æ˜¯$X^{-n}$ï¼Œå…¶ä¸­ n æœ€å°ä¸º 1ã€‚\nå…«è¿›åˆ¶çš„ $720.5$ å¯ä»¥å†™æˆå¦‚ä¸‹å½¢å¼ï¼š\n$720.5_{(8)} = 7 \\times 8^2 + 2 \\times 8^1 + 0 \\times 8^0 + 5 \\times 8^{-1}$\nç”¨æˆ‘è‡ªå·±çš„è¯æ¥è¯´ï¼Œå°±æ˜¯æ•°å€¼*æƒé‡\nè¿›åˆ¶è½¬æ¢çš„ä¸€èˆ¬æ€è·¯ ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†è¿›åˆ¶è½¬æ¢æˆåè¿›åˆ¶ï¼Œè¿™æ ·ä¾¿äºç†è§£å’Œæ‰‹ç®—ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸é€šè¿‡åè¿›åˆ¶ä½œä¸ºä¸­é—´æ€è¿‡åº¦ï¼Œæ¯”å¦‚æˆ‘ä»¬ç†Ÿæ‚‰çš„äºŒè¿›åˆ¶å’Œåå…­è¿›åˆ¶çš„è½¬æ¢ã€‚\néåè¿›åˆ¶è½¬åè¿›åˆ¶ å°†éåè¿›åˆ¶æ•°è½¬æˆåè¿›åˆ¶æ•°ï¼Œåªè¦å°†æ¯ä¸ªæ•°ä½çš„åŠ æƒå’Œå³å¯ã€‚\nä¾‹å¦‚ï¼Œå°†å…«è¿›åˆ¶æ•° $720.5_{(8)}$ è½¬æˆåè¿›åˆ¶ï¼š\n$720.5_{(8)} = 7 \\times 8^2 + 2 \\times 8^1 + 0 \\times 8^0 + 5 \\times 8^{-1} = 464.625$\nä¸‹é¢æ˜¯ç¨‹åºçš„å®ç°(åªè€ƒè™‘æ•´æ•°)ï¼Œæˆ‘ä»¬å¯ä»¥ä»é«˜ä½åˆ°ä½ä½è¿›è¡Œè¯»å–ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ–¹å¼è¯»å…¥,å…¶ä¸­nè¡¨ç¤ºæ˜¯å‡ è¿›åˆ¶æ•°\n1 2 3 4 5 6 7 8 9 10 11 int read() { char c = getchar(); int k = 0; while (isint(c) == -1) c = getchar(); while (isint(c) != -1) { k *= n; k += isint(c); c = getchar(); } return k; } åè¿›åˆ¶è½¬éåè¿›åˆ¶ é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹æ‰‹ç®—ï¼Œå°†åè¿›åˆ¶æ•°è½¬æˆ X è¿›åˆ¶æ•°ï¼Œéœ€è¦å¯¹æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†åˆ†åˆ«è½¬æ¢ã€‚\nå¯¹äºæ•´æ•°éƒ¨åˆ†ï¼Œè½¬æ¢æ–¹å¼æ˜¯å°†åè¿›åˆ¶æ•°çš„æ•´æ•°éƒ¨åˆ†æ¯æ¬¡é™¤ä»¥ X ç›´åˆ°å˜æˆ 0ï¼Œå¹¶è®°å½•æ¯æ¬¡çš„ä½™æ•°ï¼Œåå‘éå†æ¯æ¬¡çš„ä½™æ•°å³å¯å¾—åˆ° X è¿›åˆ¶è¡¨ç¤ºã€‚\nå¯¹äºå°æ•°éƒ¨åˆ†ï¼Œè½¬æ¢æ–¹å¼æ˜¯å°†åè¿›åˆ¶æ•°çš„å°æ•°éƒ¨åˆ†æ¯æ¬¡ä¹˜ä»¥ X ç›´åˆ°å˜æˆ 0ï¼Œå¹¶è®°å½•æ¯æ¬¡çš„æ•´æ•°éƒ¨åˆ†ï¼Œæ­£åºéå†æ¯æ¬¡çš„æ•´æ•°éƒ¨åˆ†å³å¯å¾—åˆ° X è¿›åˆ¶è¡¨ç¤ºã€‚\nä¸‹é¢æ˜¯æ•´æ•°è½¬æ¢çš„è¿‡ç¨‹ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯è½¬æ¢æ—¶æ˜¯ä»ä½ä½åˆ°é«˜ä½ï¼Œå¦‚æœè¦è¾“å‡ºçš„è¯è¦è¿›è¡Œå€’åºï¼Œä½“ç°åœ¨ç¨‹åºä¸­å°±æ˜¯å…ˆé€’å½’å†è¾“å‡ºã€‚\n1 2 3 4 5 6 void print(int a) { if (!a) return; print(a / m); putchar(itc(a % m)); } è´Ÿè¿›åˆ¶ [NOIP2000 æé«˜ç»„] è¿›åˆ¶è½¬æ¢\nåœ¨æ´›è°·çš„è¿™é“é¢˜ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šè´Ÿè¿›åˆ¶\nåœ¨è´Ÿè¿›åˆ¶æ•°ä¸­æ˜¯ç”¨ $-R$ ä½œä¸ºåŸºæ•°ï¼Œä¾‹å¦‚ $âˆ’15$ï¼ˆåè¿›åˆ¶ï¼‰ç›¸å½“äº $110001$ ï¼ˆ$-2$è¿›åˆ¶ï¼‰ï¼Œå¹¶ä¸”å®ƒå¯ä»¥è¢«è¡¨ç¤ºä¸º $2$ çš„å¹‚çº§æ•°çš„å’Œæ•°ï¼š\n$110001=1\\times (-2)^5+1\\times (-2)^4+0\\times (-2)^3+0\\times (-2)^2+0\\times (-2)^1 +1\\times (-2)^0$\nå¦‚æœæŒ‰ç…§ä¸Šé¢æ‰€å†™çš„è½¬æ¢è¿‡ç¨‹ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚åœ¨C++é‡Œå¯¹$-15$è¿›è¡Œå–æ¨¡å’Œç›¸é™¤çš„ç»“æœæ˜¯ï¼š\n$-15%-2=-1$ ï¼› $-15\\div-2=7$ ï¼› $7\\times-2+(-1)=-15$\nè™½ç„¶å¼å­æ˜¯æˆç«‹çš„ï¼Œä½†æˆ‘ä»¬å¾—åˆ°çš„ä½™æ•°æ˜¯è´Ÿæ•°ï¼Œè¿™è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•è¿›è¡Œè½¬æ¢ã€‚\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ä½™æ•°å‡å»ä¸€ä¸ªé™¤æ•°ï¼ŒåŒæ—¶å°†å•†+1ã€‚ç”±äºé™¤æ•°ï¼ˆç»å¯¹å€¼ï¼‰è‚¯å®šæ˜¯å¤§äºä½™æ•°çš„ï¼Œæ­¤æ—¶ä½™æ•°å°±ä¼šè½¬æ¢æˆæ­£æ•°ã€‚\nä¸‹é¢æ˜¯å…·ä½“å®ç°çš„ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 void slove(int n, int r) { if (n == 0) return; int m = n % r; // mä¸ºä½™æ•° if (m \u0026lt; 0) // å¦‚æœä½™æ•°å°äº0ï¼Œè½¬åŒ–ä¸ºæ­£æ•° m -= r, n += r; //å•†+1 =\u0026gt; è¢«é™¤æ•°+é™¤æ•° if (m \u0026gt;= 10) m = \u0026#39;A\u0026#39; + m - 10; else m += \u0026#39;0\u0026#39;; slove(n / r, r); putchar(m); } ä½è¿ç®— ä½è¿ç®—çš„åŸºæœ¬æ¦‚å¿µåœ¨ç»„æˆåŸç†è¿™äº›è¯¾ä¸Šå·²ç»è®²è¿‡ä¸çŸ¥é“å¤šå°‘éäº†ï¼Œè¿™é‡Œå°±åªæä¸€ä¸‹æˆ‘è§‰å¾—é‡è¦çš„ç‚¹ã€‚\nä½è¿ç®—å…±æœ‰6ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šä¸(\u0026amp;)ã€æˆ–(|)ã€å¼‚æˆ–(^)ã€å–å(~)ã€å·¦ç§»(\u0026lt;\u0026lt;)å’Œå³ç§»(\u0026gt;\u0026gt;)ã€‚\nè¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹å³ç§»è¿ç®—ï¼Œå®ƒåˆ†ä¸ºé€»è¾‘å³ç§»å’Œç®—æœ¯å³ç§»ï¼š\nç®—æœ¯å³ç§»æ—¶ï¼Œé«˜ä½è¡¥æœ€é«˜ä½ é€»è¾‘å³ç§»æ—¶ï¼Œé«˜ä½è¡¥0 åœ¨C++ä¸­ï¼Œæ•°æ®ç±»å‹åŒ…å«æœ‰ç¬¦å·ç±»å‹å’Œæ— ç¬¦å·ç±»å‹ï¼Œå…¶ä¸­æœ‰ç¬¦å·ç±»å‹ä½¿ç”¨å…³é”®å­— signed å£°æ˜ï¼Œæ— ç¬¦å·ç±»å‹ä½¿ç”¨å…³é”®å­— unsigned å£°æ˜ï¼Œä¸¤ä¸ªå…³é”®å­—éƒ½ä¸ä½¿ç”¨æ—¶ï¼Œé»˜è®¤æ˜¯æœ‰ç¬¦å·ç±»å‹ã€‚å¯¹äºæœ‰ç¬¦å·ç±»å‹ï¼Œå³ç§»è¿ç®—ä¸ºç®—æœ¯å³ç§»ï¼›å¯¹äºæ— ç¬¦å·ç±»å‹ï¼Œå³ç§»è¿ç®—ä¸ºé€»è¾‘å³ç§»ã€‚\nåœ¨å­¦ä¹ å’Œåˆ·é¢˜æ—¶ï¼Œæˆ‘ä»¬å®¹æ˜“å‘ç°ï¼Œå·¦ç§»è¿ç®—å¯¹åº”ä¹˜æ³•è¿ç®—ã€‚å°†ä¸€ä¸ªæ•°å·¦ç§» $k$ ä½ï¼Œç­‰ä»·äºå°†è¿™ä¸ªæ•°ä¹˜ä»¥ $2^k$ã€‚ä¾‹å¦‚ï¼Œ$29$ å·¦ç§» $2$ ä½çš„ç»“æœæ˜¯ $116$ï¼Œç­‰ä»·äº $29 \\times 4$ã€‚\nç®—æœ¯å³ç§»è¿ç®—å¯¹åº”é™¤æ³•è¿ç®—ã€‚å°†ä¸€ä¸ªæ•°å³ç§» $k$ ä½ï¼Œç›¸å½“äºå°†è¿™ä¸ªæ•°é™¤ä»¥ $2^k$ã€‚ä¾‹å¦‚ï¼Œ$50$ å³ç§» $2$ ä½çš„ç»“æœæ˜¯ $12$ï¼Œç­‰ä»·äº $50 / 4$ï¼Œç»“æœå‘ä¸‹å–æ•´ã€‚\nè¿™é‡Œè¦æ³¨æ„ï¼Œå¯¹äºè´Ÿæ•°ï¼Œæ•´æ•°é™¤æ³•æ˜¯å‘ $0$ å–æ•´ï¼Œå³ç§»è¿ç®—æ˜¯å‘ä¸‹å–æ•´ï¼Œä¸¤è€…å°±ä¸ç›¸åŒäº†ã€‚ä¾‹å¦‚ï¼Œ$(-50)\u0026raquo;2$çš„ç»“æœæ˜¯ $âˆ’13$ï¼Œè€Œ $(-50) / 4$ çš„ç»“æœæ˜¯$-12$ï¼Œä¸¤è€…æ˜¯ä¸ç›¸ç­‰çš„ã€‚\nå‚è€ƒèµ„æ–™ ä½è¿ç®—å’Œæ•°å­¦ - LeetBook ","date":"2022-04-03T09:45:04+08:00","image":"https://lbqaq.top/p/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E5%92%8C%E4%BD%8D%E8%BF%90%E7%AE%97/95490521.webp","permalink":"https://lbqaq.top/p/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E5%92%8C%E4%BD%8D%E8%BF%90%E7%AE%97/","title":"è¿›åˆ¶è½¬æ¢å’Œä½è¿ç®—"},{"content":"æœ€è¿‘çœ‹äº†å¾ˆå¤šç¯‡å…³äºå¦‚ä½•åˆ·é¢˜çš„æ–‡ç« ï¼Œå…¶ä¸­éƒ½ä¸çº¦è€ŒåŒçš„æåˆ°äº†\u0026quot;æ€»ç»“\u0026quot;è¿™ä¸ªå…³é”®è¯ã€‚ä»”ç»†æƒ³æƒ³è‡ªå·±ç¡®å®æ˜¯ä»æ¥æ²¡æœ‰åšè¿‡ä¸€ç¯‡æ€»ç»“ï¼Œåˆ·è¿‡çš„é¢˜ç›®å°±è¿‡å»äº†ï¼Œå¯¼è‡´åŒæ ·çš„é¢˜ç›®å†åšä¸€æ¬¡åˆä¸ä¼šäº†ã€‚\næˆ‘çš„ç¬¬ä¸€ç¯‡æ€»ç»“å°±ä»¥æœ€è¿‘åˆ·åˆ°çš„ã€ŒåŒºé—´æ±‚å’Œã€é—®é¢˜å±•å¼€å§ã€‚é¦–å…ˆï¼Œå…ˆä¸Šä¸€èˆ¬é—®é¢˜çš„æ¨¡æ¿ï¼ˆå…¶ä¸­åŠ ç²—çš„ä¸ºæœ€ä½³æ–¹æ¡ˆï¼‰ï¼š\næ•°ç»„ä¸å˜ï¼ŒåŒºé—´æŸ¥è¯¢ï¼šå‰ç¼€å’Œã€æ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘ï¼› æ•°ç»„å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢ï¼šæ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘ï¼› æ•°ç»„åŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢ï¼šå·®åˆ†ã€çº¿æ®µæ ‘ï¼› æ•°ç»„åŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢ï¼šçº¿æ®µæ ‘ã€‚ å‰ç¼€å’Œ å‰ç¼€å’Œçš„ä½œç”¨å°±æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ±‚æŸä¸€æ®µçš„å’Œï¼Œæ˜¯ã€Œå·®åˆ†ã€çš„é€†è¿ç®—ã€‚\nå‰ç¼€å’Œæ•°ç»„çš„æ¯ä¸€ä½è®°å½•çš„æ˜¯å½“å‰ä½ç½®è·ç¦»èµ·ç‚¹ä½ç½®ï¼Œè¿™è¿ç»­ä¸€æ®µçš„å’ŒåŒºé—´å’Œã€‚\nä¸€ç»´å‰ç¼€å’Œ å‡è®¾æœ‰ä¸€ä¸ªä¸€ç»´æ•°ç»„$x$å’Œè¯¥æ•°ç»„çš„ä¸€ç»´å‰ç¼€å’Œæ•°ç»„$y$ï¼Œåˆ™$x$å’Œ$y$æ»¡è¶³ä»¥ä¸‹å…³ç³»ï¼š\n$$y_0=x_0ã€y_1=x_0+x_1ã€y_2=x_0+x_1+x_2ã€......ã€y_n=x_0+x_1+...+x_n$$æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ $y_n=y_{n-1}+x_n$ è¿™ä¸ªå…¬å¼è®¡ç®—å‡ºå‰ç¼€å’Œï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š\n1 2 3 4 for (int i = 0; i \u0026lt; n; i++) { if (i == 0) y[i] = x[i]; else y[i] = y[i - 1] + x[i]; } ä½†æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¸¸å¸¸ä¼šé‡åˆ°å·¦è¾¹ç•Œæº¢å‡ºçš„æƒ…å†µï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å°†å‰ç¼€å’Œæ•°ç»„æ•´ä½“å‘åç§»åŠ¨ä¸€ä½ï¼Œä¸‹é¢ç»™å‡ºå‰ç¼€ç»™è®¡ç®—ä»£ç ï¼š\n1 2 3 4 int n = x.size(); vector\u0026lt;int\u0026gt; y(n + 1); for (int i = 1; i \u0026lt;= n; i++) y[i] = y[i - 1] + x[i - 1]; è¿™æ ·å½“æˆ‘ä»¬æƒ³æ±‚åŒºé—´$[a,b]$ä¹‹å’Œæ—¶åªéœ€è¦è®¡ç®—$y[b+1]-y[a]$å³å¯ã€‚\näºŒç»´å‰ç¼€å’Œ æœ‰ä¸€ä¸ªäºŒç»´æ•°ç»„$a$å’Œè¯¥æ•°ç»„çš„äºŒç»´å‰ç¼€å’Œæ•°ç»„$b$ï¼ˆå…¶åŒæ ·æ˜¯ä¸ªäºŒç»´æ•°ç»„)\nå³ä¾§æ ‡æ³¨æ©™è‰²çš„äºŒç»´å‰ç¼€å’Œå…ƒç´ ï¼Œå…¶å€¼æ˜¯å·¦ä¾§çš„åŸäºŒç»´æ•°ç»„ä¸­æ ‡æ³¨æ©™è‰²çš„æ‰€æœ‰å…ƒç´ çš„å’Œã€‚\näºŒç»´å‰ç¼€å’Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªçŸ©é˜µå†…å€¼çš„å’Œï¼Œè€ŒçŸ©é˜µåˆå¯ä»¥ç”±ä¸¤ä¸ªè¡Œæ•°æˆ–åˆ—æ•°å°‘ä¸€çš„å­çŸ©é˜µç»„åˆåï¼Œåˆ å»é‡åˆéƒ¨åˆ†å†åŠ ä¸Šå³ä¸‹è§’çš„å€¼æ¥æ„æˆï¼Œä¹Ÿå°±æ˜¯ä»¥ä¸‹å¼å­ï¼š\n$$b_{x,y}=b_{x-1,y}+b_{x,y-1}-b_{x-1,y-1}+a_{x,y}$$è¯¦ç»†çš„ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 for (int y = 0; y \u0026lt; n; y++) // nè¡Œ for (int x = 0; x \u0026lt; m; x++) // måˆ— { if (x == 0 \u0026amp;\u0026amp; y == 0) b[y][x] = a[y][x]; //å·¦ä¸Šè§’çš„å€¼ else if (x == 0) b[y][x] = b[y - 1][x] + a[y][x]; //ç¬¬ä¸€åˆ— else if (y == 0) b[y][x] = b[y][x - 1] + a[y][x]; //ç¬¬ä¸€è¡Œ else b[y][x] = b[y - 1][x] + b[y][x - 1] - b[y - 1][x - 1] + a[y][x]; } é€šè¿‡äºŒç»´å‰ç¼€å’Œï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¡ç®—å‡ºç»™å®šçŸ©é˜µçš„å’Œï¼Œå³ä¸Šé¢æ±‚å‰ç¼€å’Œçš„é€†è¿ç®—ã€‚å‡è®¾æ‰€æ±‚çŸ©é˜µçš„å·¦ä¸Šè§’ç‚¹ä¸º$(x1,y1)$ï¼Œå³ä¸‹è§’ç‚¹ä¸º$(x2,y2)$ï¼Œåˆ™æœ‰å…¬å¼ï¼š\n$sum=B[y2][x2]+B[y1-1][x1-1]-B[y1-1][x2]-B[y2][x1-1]$\nè¿™é‡Œç»“åˆå›¾å½¢ä¼šæ›´å¥½ç†è§£ä¸€ç‚¹ã€‚\nä¾‹é¢˜ åŠ›æ‰£303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜\nå°±æ˜¯ä¸€ç»´å‰ç¼€å’Œçš„æ¨¡æ¿é¢˜ï¼Œç›´æ¥ä¸Šæ¨¡æ¿å³å¯åšå‡ºã€‚\nå·®åˆ† å·®åˆ†æ˜¯ä¸€ç§å¤„ç†æ•°æ®çš„å·§å¦™è€Œç®€å•çš„æ–¹æ³•ï¼Œå®ƒåº”ç”¨äºåŒºé—´çš„ä¿®æ”¹å’Œè¯¢é—®é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬è¦ç»å¸¸å¯¹æ•°ç»„AæŸä¸ªåŒºé—´å†…çš„æ‰€æœ‰å…ƒç´ åšç›¸åŒçš„åŠ å‡æ“ä½œï¼Œå¦‚æœä¸€ä¸ªä¸€ä¸ªä¿®æ”¹æ•ˆç‡å¾ˆå·®ï¼Œä½†æ˜¯ä½¿ç”¨å·®åˆ†æ•°ç»„åï¼Œè¿™ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦å°±èƒ½é™åˆ°$\\Omicron(1)$,å½“æ‰€æœ‰çš„ä¿®æ”¹æ“ä½œç»“æŸåï¼Œå†åˆ©ç”¨å·®åˆ†æ•°ç»„ï¼Œè®¡ç®—å‡ºæ–°çš„Aã€‚\nä¸€ç»´å·®åˆ† æˆ‘ä»¬å®šä¹‰åŸæ•°ç»„ä¸º$a[]$ã€å·®åˆ†æ•°ç»„ä¸º$D[]$ï¼Œåˆ™æœ‰è®¡ç®—å…¬å¼ï¼š$D[k]=a[k]-a[k-1]$,å³åŸæ•°ç»„$a[]$çš„ç›¸é‚»å…ƒç´ çš„å·®ã€‚ä»å®šä¹‰æˆ‘ä»¬å¯ä»¥æ¨å‡º$a[k]=D[0]+D[1]+\u0026hellip;+D[k]$ã€‚ä¹Ÿå°±æ˜¯è¯´$a[]$æ˜¯$D[]$çš„å‰ç¼€å’Œï¼Œæ‰€ä»¥ã€Œå·®åˆ†ã€å’Œã€Œå‰ç¼€å’Œã€å°±æ˜¯ä¸€ç»„é€†è¿ç®—ã€‚\nå½“æˆ‘ä»¬æƒ³è¦å¯¹åŒºé—´$[L,R]$æ¯ä¸ªå…ƒç´ åŠ ä¸Š$d$ï¼Œåˆ™åªè¦è¿›è¡Œä¸‹é¢çš„ä¸¤æ­¥æ“ä½œï¼š\n1 2 D[L] += d; D[R+1] -= d; å½“æ‰€æœ‰ä¿®æ”¹éƒ½å®Œæˆæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¤æ‚åº¦ä¸º$\\Omicron(n)$çš„æ“ä½œè®¡ç®—å‡ºæ–°çš„$a[]$\nå½“ç„¶ï¼Œå·®åˆ†ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒåªèƒ½è§£å†³ åŒºé—´ä¿®æ”¹+å•ç‚¹æŸ¥è¯¢ è¿™ç±»é—®é¢˜ã€‚å½“é‡åˆ°éœ€è¦å¤šæ¬¡æŸ¥è¯¢çš„é—®é¢˜ï¼Œæ¯”å¦‚æœ‰$m$æ¬¡ä¿®æ”¹ï¼Œ$k$æ¬¡æŸ¥è¯¢ï¼Œæ­¤æ—¶ä¿®æ”¹çš„å¤æ‚åº¦ä¸º$\\Omicron(m)$,æŸ¥è¯¢çš„å¤æ‚åº¦ä¸º$\\Omicron(kn)$ï¼Œæ€»å¤æ‚åº¦ä¸º$\\Omicron(m+kn)$ï¼Œå’Œæš´åŠ›æ³•$\\Omicron(mn+k)$çš„å¤æ‚åº¦ä¸€è‡´äº†ã€‚\näºŒç»´å·®åˆ† ä»ä¸€ç»´å·®åˆ†å¯ä»¥å¾ˆå®¹æ˜“çš„æ¨å¹¿åˆ°äºŒç»´å·®åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å…¬å¼è®¡ç®—$D[][]$ï¼š\n$$D[i][j]=a[i][j]-a[i-1][j]-a[i][j-1]+a[i-1][j-1]$$æˆ‘ä»¬æƒ³ä¿®æ”¹åæ ‡ç‚¹$(x1,y1)$~$(x2,y2)$å®šä¹‰çš„åŒºé—´ï¼Œåˆ™éœ€è¦ä¿®æ”¹çŸ©é˜µçš„å››ä¸ªç‚¹ï¼š\n1 2 3 4 D[y1][x1] += d; //äºŒç»´åŒºé—´çš„èµ·ç‚¹ D[y1][x2+1] -= d; //æŠŠyçœ‹æˆå¸¸æ•°ï¼Œxä»x1åˆ°x2+1 D[y2+1][x1] -= d; //æŠŠxçœ‹æˆå¸¸æ•°ï¼Œyä»y1åˆ°y2+1 D[y2+1][x2+1] += d; //ç”±äºå‰ä¸¤å¼æŠŠdå‡äº†2æ¬¡ï¼Œå¤šå‡äº†1æ¬¡ï¼Œè¿™é‡ŒåŠ 1æ¬¡å›æ¥ å‰ç¼€å’Œ$a[][]$çš„è®¡ç®—å¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼ï¼š\n$$a[i][j]=D[i][j]+a[i-1][j]+a[i][j-1]-a[i-1][j-1]$$åœ¨è®¡ç®—$a[][]$æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸æ–°å¼€ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä»¥ç”¨è¿‡çš„$D[][]$ä½œä¸º$a[][]$ï¼Œä»¥æ­¤æ¥èŠ‚çº¦ç©ºé—´ã€‚ä½¿ç”¨çš„è¯åªéœ€è¦å°†ä¸Šé¢å¼å­ä¸­çš„$a$å…¨éƒ¨æ¢ä¸º$D$\næ ‘çŠ¶æ•°ç»„ æ ‘çŠ¶æ•°ç»„çš„ä¼˜ç‚¹åœ¨äºæŸ¥è¯¢å’Œä¿®æ”¹çš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸º$\\Omicron(logn)$ï¼Œä¸”æ¯”çº¿æ®µæ ‘å¥½å†™ã€‚\nå•ç‚¹ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢ æ ‘çŠ¶æ•°ç»„çš„åŸç†ç”±äºæ—¶é—´æœ‰é™ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è¯´äº†ï¼ˆä¹‹åæœ‰ç©ºå†è¡¥ä¸ŠğŸ˜‡ï¼‰ï¼Œå…ˆä¸Šæ¨¡æ¿ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 int c[MAXN];\t//æ ‘çŠ¶æ•°ç»„(ä¸‹æ ‡ä»1å¼€å§‹) int n;\t//æ•°ç»„çš„é•¿åº¦ inline int lowbit(int i) { return i \u0026amp; (-i); } //åœ¨ä½ç½®iåŠ ä¸Šk void update(int i, int k) { while (i \u0026lt;= n) { c[i] += k; i += lowbit(i); } } //æ±‚A[1]~A[i]çš„å’Œ int getsum(int i) { int res = 0; while (i \u0026gt; 0) { res += c[i]; i -= lowbit(i); } return res; } è¿™é‡Œä¸€å®šè¦æ³¨æ„ï¼Œæ ‘çŠ¶æ•°ç»„å’ŒåŸæ•°ç»„ä¸‹æ ‡éƒ½æ˜¯ä»1å¼€å§‹çš„ã€‚\nç”±æ­¤å°±è§£å†³äº†å•ç‚¹ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬æƒ³è¦å¾—åˆ°åŒºé—´$(a,b)$çš„å’Œï¼Œåªéœ€ä½¿ç”¨getsum(b) - getsum(a - 1)ã€‚\nä¾‹é¢˜ï¼šP3374ã€æ¨¡æ¿ã€‘æ ‘çŠ¶æ•°ç»„ 1\nåŒºé—´ä¿®æ”¹ã€å•ç‚¹æŸ¥è¯¢ åœ¨ä¸Šé¢çš„å·®åˆ†ä¸­æˆ‘ä»¬åˆ†æäº†ï¼Œå¦‚æœæœ‰å¤šæ¬¡æŸ¥è¯¢ï¼Œä»…ä»…ä½¿ç”¨å·®åˆ†çš„æ—¶é—´å¤æ‚åº¦å°±å’Œæš´åŠ›å·®ä¸å¤šäº†ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ ‘çŠ¶æ•°ç»„+å·®åˆ†çš„æ–¹æ³•ã€‚\næˆ‘ä»¬å°†ä¸Šé¢æ¨¡æ¿ä¸­çš„åŸå§‹æ•°ç»„æ”¹ä¸ºå·®åˆ†æ•°ç»„ã€‚ç”±å·®åˆ†çš„æ€§è´¨å¯çŸ¥ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªåŒºé—´æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹åŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹å³å¯ï¼Œæ­¤æ—¶åŒºé—´ä¿®æ”¹çš„é—®é¢˜ä¾¿è¢«è½¬åŒ–æˆäº†å•ç‚¹ä¿®æ”¹çš„é—®é¢˜ã€‚åŒæ—¶ï¼Œæ ‘çŠ¶æ•°ç»„å‰né¡¹å’Œä¹Ÿå°±å˜æˆäº†åŸæ•°ç»„ç¬¬né¡¹çš„å€¼ã€‚\nä¾‹é¢˜ï¼šP3368ã€æ¨¡æ¿ã€‘æ ‘çŠ¶æ•°ç»„ 2\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 //å‰é¢è¿˜æ˜¯æ ‘çŠ¶æ•°ç»„çš„æ¨¡æ¿ï¼Œè¿™é‡Œå°±ä¸æ”¾äº† int main() { cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; m; int pre = 0, now; for (int i = 1; i \u0026lt;= n; i++) { cin \u0026gt;\u0026gt; now; //è¿™é‡Œæ¯æ¬¡æ±‚å·®åˆ†æ¥ç”Ÿæˆæ ‘çŠ¶æ•°ç»„ update(i, now - pre); pre = now; } while (m--) { int a, x, y, k; cin \u0026gt;\u0026gt; a \u0026gt;\u0026gt; x; if (a == 1) { cin \u0026gt;\u0026gt; y \u0026gt;\u0026gt; k; //æ›´æ–°å³ä¸ºå¯¹D[X]ã€D[y+1]è¿›è¡Œä¿®æ”¹ update(x, k); update(y + 1, -k); } else if (a == 2) { //æ±‚D[1]~D[i]çš„å’Œ,å³A[i]çš„å€¼ cout \u0026lt;\u0026lt; getsum(x) \u0026lt;\u0026lt; endl; } } system(\u0026#34;pause\u0026#34;); return 0; } å‚è€ƒèµ„æ–™ ã€æœå¤•çš„ACMç¬”è®°ã€‘ç®—æ³•åŸºç¡€-å‰ç¼€å’Œ å·®åˆ† \u0026ndash;ç®—æ³•ç«èµ›ä¸“é¢˜è§£æï¼ˆ32ï¼‰ å…³äºå„ç±»ã€ŒåŒºé—´å’Œã€é—®é¢˜å¦‚ä½•é€‰æ‹©è§£å†³æ–¹æ¡ˆï¼ˆå«æ¨¡æ¿ï¼‰ æ ‘çŠ¶æ•°ç»„è¯¦è§£ ","date":"2022-03-14T20:46:19+08:00","image":"https://lbqaq.top/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/95680357.webp","permalink":"https://lbqaq.top/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/","title":"åˆæ¢åŒºé—´æ±‚å’Œé—®é¢˜"},{"content":"é¢˜ç›®ç±»å‹ é€‰æ‹©ï¼ˆ10åˆ†ï¼‰ 10é¢˜ å¡«ç©ºï¼ˆ10åˆ†ï¼‰ 10é¢˜ é—®ç­”ï¼ˆ30åˆ†ï¼‰ 4é¢˜ ç¼–ç¨‹é¢˜ï¼ˆ30åˆ†ï¼‰ 3-4é¢˜ ç»¼åˆé¢˜ï¼ˆ20åˆ†ï¼‰ ä¸Šæœºé¢˜æ•´ç† è¿™é‡Œåªå­˜æ”¾æ ¸å¿ƒçš„ä»£ç ï¼Œå®Œæ•´çš„ç¨‹åºè§Giteeä»“åº“\nä½¿ç”¨Maven é€šè¿‡ä½¿ç”¨Mavenå¯ä»¥è®©ç¨‹åºè‡ªåŠ¨é…ç½®å’Œå¯¼å…¥åŒ…ï¼Œä¸å¿…è‡ªå·±æ‰‹åŠ¨é…ç½®å’Œå¯¼å…¥ï¼Œéå¸¸æ–¹ä¾¿ï¼Œæ¨èå¤§å®¶ä½¿ç”¨ã€‚\næˆ‘çš„é…ç½®æ–‡ä»¶å·²ç»æŠŠè€ƒè¯•ä¼šç”¨çš„åŒ…éƒ½å¯¼å…¥äº†ï¼ŒåŒ…æ‹¬Servletã€JSPã€JSTLã€MySQlé©±åŠ¨ï¼Œç‰ˆæœ¬éƒ½å·²ç»è°ƒæ•´ä¸ºæœ€ä½³ï¼Œä¿è¯å¼€ç®±å³ç”¨ã€‚\næ–°å»ºé¡¹ç›®ï¼Œé€‰æ‹©Mavenï¼Œç›´æ¥ä¸‹ä¸€æ­¥\nå¡«å†™é¡¹ç›®åç§°å’Œç›®å½•ä½ç½®ï¼Œå…¶ä»–çš„å¯å¡«å¯ä¸å¡«\nåœ¨pom.xmlæ–‡ä»¶å¢åŠ è¿™æ ·ä¸€å¥\u0026lt;packaging\u0026gt;war\u0026lt;/packaging\u0026gt;\næ¥ç€ç²˜è´´ä¸‹é¢çš„ä»£ç ï¼Œå¹¶ç‚¹å‡»å³ä¸Šè§’çš„å›¾æ ‡åº”ç”¨ï¼ˆæˆ–è€…ä½¿ç”¨å¿«æ·é”®Ctrl+Shift+Oï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 \u0026lt;dependencies\u0026gt; \u0026lt;!-- servlet ä¾èµ– --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;javax.servlet\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;javax.servlet-api\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.1.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- jsp ä¾èµ– --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;javax.servlet.jsp\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;javax.servlet.jsp-api\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.3.3\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- jstl --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;javax.servlet.jsp.jstl\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jstl-api\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.2\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- standardæ ‡ç­¾åº“ --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;taglibs\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;standard\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.1.2\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- mysqlé©±åŠ¨ --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;8.0.25\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; åœ¨å·¦è¾¹srcçš„mainè¿™ä¸ªç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªåå«webappçš„ç›®å½•ï¼Œå†è¿™ä¸‹é¢å»ºç«‹ä¸€ä¸ªåå«WEB-INFçš„ç›®å½•ï¼Œå†åœ¨å…¶ä¸­å»ºç«‹web.xmlè¿™ä¸ªæ–‡ä»¶\nåœ¨é‡Œé¢å¡«å…¥ä¸‹é¢çš„å†…å®¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;web-app xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xmlns=\u0026#34;http://xmlns.jcp.org/xml/ns/javaee\u0026#34; xsi:schemaLocation=\u0026#34;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd\u0026#34; version=\u0026#34;4.0\u0026#34;\u0026gt; \u0026lt;!--é»˜è®¤å¯ç”¨ELè¡¨è¾¾å¼--\u0026gt; \u0026lt;jsp-config\u0026gt; \u0026lt;jsp-property-group\u0026gt; \u0026lt;url-pattern\u0026gt;*.jsp\u0026lt;/url-pattern\u0026gt; \u0026lt;el-ignored\u0026gt;false\u0026lt;/el-ignored\u0026gt; \u0026lt;/jsp-property-group\u0026gt; \u0026lt;/jsp-config\u0026gt; \u0026lt;/web-app\u0026gt; è¿™æ ·å°±é…ç½®å¥½äº†ï¼Œå¦‚æœä½ è¿˜æ˜¯è§‰å¾—éº»çƒ¦ï¼Œå¯ä»¥ä¸‹è½½æˆ‘è¿™ä¸ªé…ç½®å¥½çš„æ‡’äººåŒ…ï¼Œè§£å‹å³å¯ä½¿ç”¨ï¼Œæ³¨æ„åœ¨IDEAæ‰“å¼€æ—¶è¦é€‰æ‹©â€œä¿¡ä»»MAVENé¡¹ç›®â€ï¼Œå¦åˆ™æ— æ³•ç”Ÿæ•ˆã€‚\nServletç”Ÿæˆä¸‰è§’å½¢ æ­£ä¸‰è§’\n1 2 3 4 5 6 7 8 9 for (int i = 0; i \u0026lt; num; i++) { for (int j = 0; j \u0026lt; num - i; j++) { out.print(\u0026#34;\u0026amp;nbsp;\u0026#34;); } for (int k = 0; k \u0026lt;= i * 2; k++) { out.print(\u0026#34;*\u0026#34;); } out.println(\u0026#34;\u0026lt;/br\u0026gt;\u0026#34;); } å€’ä¸‰è§’\n1 2 3 4 5 6 7 8 9 for (int i = num; i \u0026gt; 0; i--) { for (int j = num - i; j \u0026gt; 0; j--) { out.print(\u0026#34;\u0026amp;nbsp;\u0026#34;); } for (int k = (i * 2) - 1; k \u0026gt; 0; --k) { out.print(\u0026#34;*\u0026#34;); } out.println(\u0026#34;\u0026lt;/br\u0026gt;\u0026#34;); } JSPç”Ÿæˆä¹˜æ³•è¡¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \u0026lt;table\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;% String s = request.getParameter(\u0026#34;num\u0026#34;); int num = Integer.parseInt(\u0026#34;\u0026#34;.equals(s) ? \u0026#34;0\u0026#34; : s); for (int i = 1; i \u0026lt;= num; i++) { out.println(\u0026#34;\u0026lt;tr\u0026gt;\u0026#34;); for (int j = 1; j \u0026lt;= num; j++) { if (j \u0026lt;= i) { out.println(\u0026#34;\u0026lt;td\u0026gt;\u0026#34; + i + \u0026#34;*\u0026#34; + j + \u0026#34;=\u0026#34; + i * j + \u0026#34;\u0026lt;/td\u0026gt;\u0026#34;); }else{ out.println(\u0026#34;\u0026lt;td\u0026gt;\u0026lt;/td\u0026gt;\u0026#34;); } } out.println(\u0026#34;\u0026lt;/tr\u0026gt;\u0026#34;); } %\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; ç™»å½•ç•Œé¢ï¼Œä¸‰æ¬¡ç¦ç”¨ æ•°æ®ç”¨æ•°ç»„å­˜å‚¨applicationï¼Œä½†æˆ‘æ²¡ä½¿ç”¨ï¼Œå¦‚æœè¦ä½¿ç”¨å¯ä»¥è°ƒç”¨request.getServletContext()\nç”¨æˆ·ä¿¡æ¯å­˜åœ¨session\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 @WebServlet(name = \u0026#34;Servlet3\u0026#34;, value = \u0026#34;/Servlet3\u0026#34;) public class Servlet3 extends HttpServlet { private static final String[] USER_NAME = {\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34;}; private static final String[] PASSWORD = {\u0026#34;1\u0026#34;, \u0026#34;2\u0026#34;, \u0026#34;3\u0026#34;}; @Override protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { String username = req.getParameter(\u0026#34;username\u0026#34;); String password = req.getParameter(\u0026#34;password\u0026#34;); if (username == null || password == null || \u0026#34;\u0026#34;.equals(username) || \u0026#34;\u0026#34;.equals(password)) { req.setAttribute(\u0026#34;msg\u0026#34;, \u0026#34;ç”¨æˆ·åæˆ–å¯†ç ä¸èƒ½ä¸ºç©ºï¼\u0026#34;); req.getRequestDispatcher(\u0026#34;/3.jsp\u0026#34;).forward(req, resp); return; } HttpSession mySession = req.getSession(); int errTime = (int) (mySession.getAttribute(\u0026#34;errTime\u0026#34;) == null ? 0 : mySession.getAttribute(\u0026#34;errTime\u0026#34;)); Date dbDate = (Date) mySession.getAttribute(\u0026#34;dbDate\u0026#34;); Date nowDate = new Date(); if (errTime \u0026gt;= 3) { if (dbDate.after(nowDate)) { req.setAttribute(\u0026#34;msg\u0026#34;, \u0026#34;æ‚¨è¢«ç¦æ­¢ç™»å½•ï¼\u0026#34;); req.getRequestDispatcher(\u0026#34;/3.jsp\u0026#34;).forward(req, resp); return; } else { errTime = 0; } } int i; for (i = 0; i \u0026lt; USER_NAME.length; i++) { if (username.equals(USER_NAME[i]) \u0026amp;\u0026amp; password.equals(PASSWORD[i])) { errTime = 0; req.setAttribute(\u0026#34;msg\u0026#34;, \u0026#34;ç™»é™†æˆåŠŸï¼\u0026#34;); break; } } if(i\u0026gt;=USER_NAME.length) { errTime += 1; if (errTime \u0026gt;= 3) { //å•ä½ä¸ºæ¯«ç§’ nowDate.setTime(nowDate.getTime() + 1 * 60 * 1000); } req.setAttribute(\u0026#34;msg\u0026#34;, \u0026#34;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼\u0026#34;); } mySession.setAttribute(\u0026#34;errTime\u0026#34;, errTime); mySession.setAttribute(\u0026#34;dbDate\u0026#34;,nowDate); req.getRequestDispatcher(\u0026#34;/3.jsp\u0026#34;).forward(req, resp); } @Override protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { doGet(request, response); } } ç”¨æˆ·è®¤è¯ ä¸ä½¿ç”¨Filter\n1 2 3 4 5 6 7 \u0026lt;% Object username = session.getAttribute(\u0026#34;username\u0026#34;); if(username==null){ request.setAttribute(\u0026#34;msg\u0026#34;,\u0026#34;æ‚¨æ²¡æœ‰ç™»é™†\u0026#34;); request.getRequestDispatcher(\u0026#34;/4-1.jsp\u0026#34;).forward(request,response); } %\u0026gt; ä½¿ç”¨Filter\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 //filterNameï¼šè¿‡æ»¤å™¨åç§° urlPatternsï¼šè¿‡æ»¤çš„èŒƒå›´ è¿‡æ»¤å…¨éƒ¨ä¸º\u0026#34;/*\u0026#34; @WebFilter(filterName = \u0026#34;Filter4\u0026#34;, urlPatterns = \u0026#34;/4-3.jsp\u0026#34;) public class Filter4 implements Filter { public void init(FilterConfig config) throws ServletException {} public void destroy() {} @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException { HttpServletRequest req = (HttpServletRequest) request; HttpServletResponse resp = (HttpServletResponse) response; Object username = req.getSession().getAttribute(\u0026#34;username\u0026#34;); if (username == null) { req.setAttribute(\u0026#34;msg\u0026#34;, \u0026#34;æ‚¨æ²¡æœ‰ç™»é™†\u0026#34;); req.getRequestDispatcher(\u0026#34;/4-1.jsp\u0026#34;).forward(req, resp); } else { chain.doFilter(request, response); } } } å½•å…¥ç”¨æˆ·ä¿¡æ¯å¹¶å›æ˜¾ å¦‚å§“åçˆ±å¥½ï¼ˆcheckboxæ•°ç»„ï¼‰æäº¤åï¼Œåœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºæäº¤çš„ä¿¡æ¯\nä¿®æ”¹æ•°æ®æ—¶ï¼Œå¦‚ä½•å°†åŸæ•°æ®æ˜¾ç¤ºåœ¨è¡¨å•ä¸­ä¹Ÿåœ¨æ­¤æ®µä¸­ã€‚ç‰¹åˆ«æ˜¯select radio\nä½¿ç”¨ELè¡¨è¾¾å¼å³å¯\næ³¨æ„ç‚¹ï¼š\ncheckboxä¼ é€’çš„å€¼ä¸ºæ•°ç»„ï¼Œéœ€ä½¿ç”¨request.getParameterValues(\u0026quot;b\u0026quot;);è·å– å¯ä»¥å°†æ•°ç»„è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œæ–¹ä¾¿ä½¿ç”¨ç›¸å…³æ–¹æ³• List\u0026lt;String\u0026gt; list = Arrays.asList(strArray); åªèƒ½æŸ¥çœ‹ï¼Œä¸æ”¯æŒä¿®æ”¹å’Œåˆ é™¤ ArrayList\u0026lt;String\u0026gt; list = new ArrayList\u0026lt;String\u0026gt;(Arrays.asList(strArray)); å¯ä»¥ä¿®æ”¹å’Œåˆ é™¤ checkboxå’Œradioé€‰ä¸­ä¸ºcheckedï¼›selectä¸­çš„optionä¸ºselected 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \u0026lt;form method=\u0026#34;post\u0026#34; action=\u0026#34;${pageContext.request.contextPath}/Servlet5\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;a\u0026#34;\u0026gt;æ–‡æœ¬æ¡†\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; id=\u0026#34;a\u0026#34; name=\u0026#34;a\u0026#34; value=\u0026#34;${A}\u0026#34;/\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;label for=\u0026#34;b\u0026#34;\u0026gt;å¤šé€‰æ¡†\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;checkbox\u0026#34; id=\u0026#34;b\u0026#34; name=\u0026#34;b\u0026#34; value=\u0026#34;1\u0026#34; ${BL.contains(\u0026#34;1\u0026#34;)?\u0026#34;checked\u0026#34;:\u0026#34;\u0026#34;}/\u0026gt; \u0026lt;input type=\u0026#34;checkbox\u0026#34; name=\u0026#34;b\u0026#34; value=\u0026#34;2\u0026#34; ${BL.contains(\u0026#34;2\u0026#34;)?\u0026#34;checked\u0026#34;:\u0026#34;\u0026#34;}/\u0026gt; \u0026lt;input type=\u0026#34;checkbox\u0026#34; name=\u0026#34;b\u0026#34; value=\u0026#34;3\u0026#34; ${BL.contains(\u0026#34;3\u0026#34;)?\u0026#34;checked\u0026#34;:\u0026#34;\u0026#34;}/\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;label for=\u0026#34;c1\u0026#34;\u0026gt;å•é€‰æ¡† 4\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;radio\u0026#34; id=\u0026#34;c1\u0026#34; name=\u0026#34;c\u0026#34; value=\u0026#34;4\u0026#34; ${\u0026#34;4\u0026#34;.equals(C)?\u0026#34;checked\u0026#34;:\u0026#34;\u0026#34;}/\u0026gt; \u0026lt;label for=\u0026#34;c2\u0026#34;\u0026gt;å•é€‰æ¡† 5\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;radio\u0026#34; id=\u0026#34;c2\u0026#34; name=\u0026#34;c\u0026#34; value=\u0026#34;5\u0026#34; ${\u0026#34;5\u0026#34;.equals(C)?\u0026#34;checked\u0026#34;:\u0026#34;\u0026#34;}/\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;label for=\u0026#34;d\u0026#34;\u0026gt;ä¸‹æ‹‰æ¡†\u0026lt;/label\u0026gt; \u0026lt;select name=\u0026#34;d\u0026#34; id=\u0026#34;d\u0026#34;\u0026gt; \u0026lt;option value=\u0026#34;6\u0026#34; ${\u0026#34;6\u0026#34;.equals(D)?\u0026#34;selected\u0026#34;:\u0026#34;\u0026#34;}\u0026gt;6\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;7\u0026#34; ${\u0026#34;7\u0026#34;.equals(D)?\u0026#34;selected\u0026#34;:\u0026#34;\u0026#34;}\u0026gt;7\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;8\u0026#34; ${\u0026#34;8\u0026#34;.equals(D)?\u0026#34;selected\u0026#34;:\u0026#34;\u0026#34;}\u0026gt;8\u0026lt;/option\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;br/\u0026gt; \u0026lt;input type=\u0026#34;submit\u0026#34; value=\u0026#34;æäº¤\u0026#34;\u0026gt; \u0026lt;/form\u0026gt; è¯·æ±‚è½¬å‘ã€é‡å®šå‘ï¼Œå®ç°ä¼ å€¼ è¯·æ±‚è½¬å‘ï¼š\nrequest.setAttribute(\u0026quot;D\u0026quot;, d); æˆ–è€…å­˜æ”¾åˆ°Sessioné‡Œrequest.getSession().setAttribute(\u0026quot;D\u0026quot;, d); é‡å®šå‘ï¼š\nåªèƒ½æ”¾åœ¨Sessioné‡Œ æˆ–è€…é€šè¿‡æ„é€ URLå‚æ•°ä¼ é€’ï¼Œå¦‚response.sendRedirect(\u0026quot;/1.jsp?a=\u0026quot;+a+\u0026quot;\u0026amp;b=\u0026quot;+b); åœ¨servletå¦‚ä½•ä½¿ç”¨jsp:usebean jspæ¥æ¥æ”¶formå†…çš„å€¼ jspä¸­ä½¿ç”¨ä¸‹é¢çš„ä»£ç \n1 2 \u0026lt;jsp:useBean id=\u0026#34;s\u0026#34; class=\u0026#34;yzu.calc\u0026#34; scope=\u0026#34;request\u0026#34; /\u0026gt; \u0026lt;jsp:setProperty name=\u0026#34;s\u0026#34; property=\u0026#34;*\u0026#34; /\u0026gt; servletä¸­ä½¿ç”¨\n1 2 request.getRequestDispatcher(\u0026#34;getForm.jsp\u0026#34;).include(request,response); calc mybean=(calc)request.getAttribute(\u0026#34;s\u0026#34;); ä»webè¡¨å•æ¥æ”¶æ•°æ® request.getParameter request.getParameterValues æ•°æ®åº“å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 private static final String DRIVER = \u0026#34;com.mysql.cj.jdbc.Driver\u0026#34;; private static final String URL = \u0026#34;jdbc:mysql://localhost:3306/web?serverTimezone=Asia/Shanghai\u0026amp;characterEncoding=utf-8\u0026#34;; private static final String USERNAME = \u0026#34;root\u0026#34;; private static final String PASSWORD = \u0026#34;root\u0026#34;; //åŠ è½½é©±åŠ¨ try { Class.forName(DRIVER); connection = DriverManager.getConnection(URL, USERNAME, PASSWORD); } catch (Exception e) { e.printStackTrace(); } if (connection != null) { String sql = \u0026#34;select * from user where name=?\u0026#34;; PreparedStatement pstm = null; ResultSet rs = null; try { //åŠ è½½SQLè¯­å¥ pstm = connection.prepareStatement(sql); //å¡«å…¥å˜é‡ pstm.setObject(1, username); //æ‰§è¡ŒSQLï¼ˆæŸ¥è¯¢ï¼‰ rs = pstm.executeQuery(); //æ‰§è¡ŒSQLï¼ˆå¢åˆ æ”¹ï¼‰ updateRows = pstm.executeUpdate(); //è¯»å–æ•°æ®ï¼ˆå¤šè¡Œä½¿ç”¨whileï¼‰ if (rs.next()) { dbPassword = rs.getString(\u0026#34;password\u0026#34;); dbDate = new Date(rs.getTimestamp(\u0026#34;time\u0026#34;).getTime()); dbErrorTime = rs.getInt(\u0026#34;error_count\u0026#34;); } //é‡Šæ”¾èµ„æº rs.close(); pstm.close(); connection.close(); }SQLException (e) { e.printStackTrace(); } æ³¨å†Œç”¨æˆ· å¤šä¸ªä¿¡æ¯ ä¸æ‡‚ä»€ä¹ˆæ„æ€ï¼Œæœ‰æ‡‚å“¥å¯ä»¥è¯„è®ºåŒºç•™è¨€\nDB CRUDæŸ¥è¯¢ç»„åˆæŸ¥è¯¢ä¸éœ€è¦åˆ†é¡µ è§ä¸Šé¢\nç”¨ä¼šè¯å¯¹è±¡å®ç°è´­ç‰©è½¦çš„CRUDå•†å“åç§°ï¼Œå•ä»·ï¼Œæ•°é‡è´­ç‰©è½¦åˆ—è¡¨ï¼Œæ€»ä»· å…·ä½“ä»£ç è§ä»“åº“Servlet6\né—®ç­”é¢˜ C/S B/Sä¼˜ç¼ºç‚¹ C/Sæ¶æ„\nå…¨ç§°æ˜¯Client/Serverï¼Œå³å®¢æˆ·ç«¯æœåŠ¡å™¨ç«¯æ¶æ„\nä¼˜ç‚¹ï¼š\nC/Sæ¶æ„çš„ç•Œé¢å’Œæ“ä½œå¯ä»¥å¾ˆä¸°å¯Œã€‚ å®‰å…¨æ€§èƒ½å¯ä»¥å¾ˆå®¹æ˜“ä¿è¯ï¼Œå®ç°å¤šå±‚è®¤è¯ä¹Ÿä¸éš¾ã€‚ ç”±äºåªæœ‰ä¸€å±‚äº¤äº’ï¼Œå› æ­¤å“åº”é€Ÿåº¦è¾ƒå¿«ã€‚ ç¼ºç‚¹ï¼š\né€‚ç”¨é¢çª„ï¼Œé€šå¸¸ç”¨äºå±€åŸŸç½‘ä¸­ã€‚ ç”¨æˆ·ç¾¤å›ºå®šã€‚ç”±äºç¨‹åºéœ€è¦å®‰è£…æ‰å¯ä½¿ç”¨ï¼Œå› æ­¤ä¸é€‚åˆé¢å‘ä¸€äº›ä¸å¯çŸ¥çš„ç”¨æˆ·ã€‚ ç»´æŠ¤æˆæœ¬é«˜ï¼Œå‘ç”Ÿä¸€æ¬¡å‡çº§ï¼Œåˆ™æ‰€æœ‰å®¢æˆ·ç«¯çš„ç¨‹åºéƒ½éœ€è¦æ”¹å˜ã€‚ B/Sæ¶æ„\nå…¨ç§°ä¸ºBrowser/Serverï¼Œå³æµè§ˆå™¨/æœåŠ¡å™¨ç»“æ„ã€‚\nä¼˜ç‚¹ï¼š\nå®¢æˆ·ç«¯æ— éœ€å®‰è£…ï¼Œæœ‰Webæµè§ˆå™¨å³å¯ã€‚ BSæ¶æ„å¯ä»¥ç›´æ¥æ”¾åœ¨å¹¿åŸŸç½‘ä¸Šï¼Œé€šè¿‡ä¸€å®šçš„æƒé™æ§åˆ¶å®ç°å¤šå®¢æˆ·è®¿é—®çš„ç›®çš„ï¼Œäº¤äº’æ€§è¾ƒå¼ºã€‚ BSæ¶æ„æ— éœ€å‡çº§å¤šä¸ªå®¢æˆ·ç«¯ï¼Œå‡çº§æœåŠ¡å™¨å³å¯ã€‚ ç¼ºç‚¹ï¼š\nåœ¨è·¨æµè§ˆå™¨ä¸Šï¼ŒBSæ¶æ„ä¸å°½å¦‚äººæ„ã€‚ è¡¨ç°è¦è¾¾åˆ°CSç¨‹åºçš„ç¨‹åº¦éœ€è¦èŠ±è´¹ä¸å°‘ç²¾åŠ›ã€‚ åœ¨é€Ÿåº¦å’Œå®‰å…¨æ€§ä¸Šéœ€è¦èŠ±è´¹å·¨å¤§çš„è®¾è®¡æˆæœ¬ï¼Œè¿™æ˜¯BSæ¶æ„çš„æœ€å¤§é—®é¢˜ã€‚ JSTL EL JDBC VO DAO MVC JSPä¸­è‹±æ–‡å…¨ç§° JSTL:Java server pages standarded tag libraryï¼ŒJSPæ ‡å‡†æ ‡ç­¾åº“ EL:Expression Language,ELè¡¨è¾¾å¼ JDBC:Java Database Connectivity,Javaæ•°æ®åº“è¿æ¥ VO:Value Object,å€¼å¯¹è±¡ DAO:Data Access Object,æ•°æ®åº“è®¿é—®å¯¹è±¡ MVC:Model View Controller,æ¨¡å‹ è§†å›¾ æ§åˆ¶å™¨ JSP:Java Server Pages,JAVAæœåŠ¡å™¨é¡µé¢ å¤šå±‚æ¶æ„çš„ä¼˜ç‚¹ é«˜å†…èšä½è€¦åˆï¼Œä¾¿äºå›¢é˜Ÿå¼€å‘\nå†…èšï¼šä¸€ä¸ªæ¨¡å—å†…å„ä¸ªå…ƒç´ å½¼æ­¤ç»“åˆçš„ç´§å¯†ç¨‹åº¦ï¼›\nè€¦åˆï¼šä¸€ä¸ªè½¯ä»¶ç»“æ„å†…ä¸åŒæ¨¡å—ä¹‹é—´å…³è”ç¨‹åº¦çš„åº¦é‡ã€‚\nåœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œåˆ†å±‚å¯ä»¥è®©è½¯ä»¶å¼€å‘äººå‘˜ä¸“æ³¨äºè‡ªå·±è´Ÿè´£çš„å±‚ï¼Œè€Œä¸å¿…å…³å¿ƒå…¶ä»–å±‚çš„è®¾è®¡ï¼Œä¹Ÿä¸å¿…æ‹…å¿ƒè‡ªå·±çš„è®¾è®¡ä¼šå½±å“å…¶å®ƒå±‚ã€‚å¦‚æœä¸åˆ†å±‚ï¼Œæ ¹æœ¬ä¸å¯èƒ½è¿›è¡Œå›¢é˜Ÿå¼€å‘ï¼Œåªä¼šä¸€å›¢ç³Ÿã€‚\nä½¿è½¯ä»¶å‡çº§å’Œç»´æŠ¤æ›´ä¸ºå®¹æ˜“\nåˆ†å±‚è®¾è®¡ä½¿å¾—ç¨‹åºç»“æ„æ¸…æ™°ï¼Œå‡çº§å’Œç»´æŠ¤éƒ½å˜å¾—ååˆ†å®¹æ˜“ï¼Œæ›´æ”¹å±‚çš„å…·ä½“å®ç°ä»£ç ï¼Œåªè¦å±‚æ¥å£ä¿æŒç¨³å®šï¼Œå…¶ä»–å±‚å¯ä»¥ä¸å¿…ä¿®æ”¹ã€‚å³ä½¿å±‚çš„æ¥å£å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿåªå½±å“ä¸Šå±‚å’Œä¸‹å±‚ï¼Œä¿®æ”¹å·¥ä½œé‡å°è€Œä¸”é”™è¯¯å¯ä»¥æ§åˆ¶ï¼Œä¸ä¼šå¸¦æ¥æ„å¤–çš„é£é™©ã€‚\nMVCçš„ç‰¹ç‚¹å’Œä¼˜ç‚¹ MVCä¸»è¦åˆ†æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨ä¸‰å±‚ã€‚\næ¨¡å‹(model)\nå®ƒæ˜¯åº”ç”¨ç¨‹åºçš„ä¸»ä½“éƒ¨åˆ†ï¼Œä¸»è¦åŒ…æ‹¬ä¸šåŠ¡é€»è¾‘æ¨¡å—å’Œæ•°æ®æ¨¡å—ã€‚æ¨¡å‹ä¸æ•°æ®æ ¼å¼æ— å…³ï¼Œè¿™æ ·ä¸€ä¸ªæ¨¡å‹èƒ½ä¸ºå¤šä¸ªè§†å›¾æä¾›æ•°æ®ã€‚ç”±äºåº”ç”¨äºæ¨¡å‹çš„ä»£ç åªéœ€å†™ä¸€æ¬¡å°±å¯ä»¥è¢«å¤šä¸ªè§†å›¾é‡ç”¨ï¼Œæ‰€ä»¥å‡å°‘äº†ä»£ç çš„é‡å¤æ€§\nè§†å›¾(view)\nç”¨æˆ·ä¸ä¹‹äº¤äº’çš„ç•Œé¢ã€åœ¨ web ä¸­è§†å›¾ä¸€èˆ¬ç”± jsp,html ç»„æˆ\næ§åˆ¶å™¨(controller)\næ¥æ”¶æ¥è‡ªç•Œé¢çš„è¯·æ±‚ å¹¶äº¤ç»™æ¨¡å‹è¿›è¡Œå¤„ç† åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ§åˆ¶å™¨ä¸åšä»»ä½•å¤„ç†åªæ˜¯èµ·åˆ°äº†ä¸€ä¸ªè¿æ¥çš„ä½œç”¨\nä¼˜ç‚¹ï¼š\né™ä½ä»£ç è€¦åˆæ€§ã€‚åœ¨ MVC æ¨¡å¼ä¸­ï¼Œä¸‰ä¸ªå±‚å„æ–½å…¶èŒï¼Œæ‰€ä»¥å¦‚æœä¸€æ—¦å“ªä¸€å±‚çš„éœ€æ±‚å‘ç”Ÿäº†å˜åŒ–ï¼Œå°±åªéœ€è¦æ›´æ”¹ç›¸åº”çš„å±‚ä¸­çš„ä»£ç è€Œä¸ä¼šå½±å“åˆ°å…¶ä»–å±‚ä¸­çš„ä»£ç ã€‚ æœ‰åˆ©äºåˆ†å·¥åˆä½œã€‚åœ¨ MVC æ¨¡å¼ä¸­ï¼Œç”±äºæŒ‰å±‚æŠŠç³»ç»Ÿåˆ†å¼€ï¼Œé‚£ä¹ˆå°±èƒ½æ›´å¥½çš„å®ç°å¼€å‘ä¸­çš„åˆ†å·¥ã€‚ç½‘é¡µè®¾è®¡äººå‘˜å¯è¿›è¡Œå¼€å‘è§†å›¾å±‚ä¸­çš„ JSPï¼Œè€Œå¯¹ä¸šåŠ¡ç†Ÿæ‚‰çš„äººå‘˜å¯å¼€å‘ä¸šåŠ¡å±‚ï¼Œè€Œå…¶ä»–å¼€å‘äººå‘˜å¯å¼€å‘æ§åˆ¶å±‚ã€‚ æœ‰åˆ©äºç»„ä»¶çš„é‡ç”¨ã€‚å¦‚æ§åˆ¶å±‚å¯ç‹¬ç«‹æˆä¸€ä¸ªèƒ½ç”¨çš„ç»„ä»¶ï¼Œè¡¨ç¤ºå±‚ä¹Ÿå¯åšæˆé€šç”¨çš„æ“ä½œç•Œé¢ã€‚å¯ä»¥ä¸ºä¸€ä¸ªæ¨¡å‹åœ¨è¿è¡Œæ—¶åŒæ—¶å»ºç«‹å’Œä½¿ç”¨å¤šä¸ªè§†å›¾ã€‚ GETã€POSTç‰¹ç‚¹å’Œä¼˜ç¼ºç‚¹ GET\næŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆåç§°/å€¼å¯¹ï¼‰æ˜¯åœ¨GETè¯·æ±‚çš„URLä¸­å‘é€çš„\nä¼˜ç‚¹ï¼š\nGETè¯·æ±‚å¯è¢«ç¼“å­˜ GETè¯·æ±‚é€Ÿåº¦å¿« GETè¯·æ±‚å¯è¢«æ”¶è—ä¸ºä¹¦ç­¾ GETè¯·æ±‚ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­ ç¼ºç‚¹ï¼š\nGETè¯·æ±‚ä¸å®‰å…¨ GETè¯·æ±‚æœ‰urlé•¿åº¦é™åˆ¶ POST\næŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆåç§°/å€¼å¯¹ï¼‰æ˜¯åœ¨POSTè¯·æ±‚çš„HTTPæ¶ˆæ¯ä¸»ä½“ä¸­å‘é€çš„\nä¼˜ç‚¹ï¼š\nPOSTè¯·æ±‚å¯¹æ•°æ®é•¿åº¦æ²¡æœ‰è¦æ±‚ POSTè¯·æ±‚ç›¸å¯¹GETè¯·æ±‚æ›´å®‰å…¨ ç¼ºç‚¹ï¼š\nPOSTè¯·æ±‚ä¸ä¼šè¢«ç¼“å­˜ POSTè¯·æ±‚é€Ÿåº¦æ…¢ é‡å®šå‘ä¸è¯·æ±‚è½¬å‘çš„ä¼˜ç¼ºç‚¹ å®ç°çš„æ ¸å¿ƒä»£ç  é‡å®šå‘\nä¼˜ç‚¹ï¼š\nä¸é™åˆ¶åº”ç”¨èŒƒå›´ï¼Œå¯ä»¥é‡å®šå‘åˆ°æœåŠ¡å™¨å†…éƒ¨å…¶ä»–èµ„æºï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–éƒ¨çš„åº”ç”¨ ç¼ºç‚¹ï¼š\né‡å®šå‘è§£å†³æ–¹æ¡ˆéœ€è¦åœ¨æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå¤šæ¬¡å¾€è¿”ï¼Œå¤§é‡æ—¶é—´æ¶ˆè€—åœ¨å¾€è¿”æ¬¡æ•°ä¸Šï¼Œå¢åŠ ç”¨æˆ·ç­‰å¾…æœåŠ¡æ—¶é—´ æ ¸å¿ƒä»£ç ï¼šresponse.sendRedirect(\u0026quot;è¯·æ±‚åœ°å€\u0026quot;)\nè¯·æ±‚è½¬å‘\nä¼˜ç‚¹ï¼š\nå®‰å…¨æ€§é«˜ï¼Œåœ¨å†…éƒ¨å‘ç”Ÿè·³è½¬ï¼Œæµè§ˆå™¨åœ°å€ä¸å˜ è½¬å‘åªéœ€è¦ä¸€æ¬¡è¯·æ±‚ï¼Œå°±å¯ä»¥è®¿é—®è‡³å°‘ä¸¤ä¸ªservletæˆ–jspé¡µé¢ã€‚ ç¼ºç‚¹ï¼š\nåªèƒ½åœ¨åŒä¸€webåº”ç”¨å†…ä½¿ç”¨ï¼Œä¸èƒ½è½¬å‘åˆ°å¤–éƒ¨çš„urlåœ°å€ã€‚ æ ¸å¿ƒä»£ç ï¼šrequest.getRequestDispatcher(\u0026quot;URLåœ°å€\u0026quot;).forward(request, response)\nJSP Servlet åŒºåˆ«ä¸è”ç³» åŒºåˆ«ï¼š\njspæ›´æ“…é•¿è¡¨ç°äºé¡µé¢æ˜¾ç¤º,servletæ›´æ“…é•¿äºé€»è¾‘æ§åˆ¶ã€‚ Servletä¸­æ²¡æœ‰å†…ç½®å¯¹è±¡ï¼ŒJspä¸­æœ‰å†…ç½®å¯¹è±¡ã€‚ Servletåœ¨Javaä»£ç ä¸­é€šè¿‡HttpServletResponseå¯¹è±¡åŠ¨æ€è¾“å‡ºHTMLå†…å®¹ï¼›JSPåœ¨é™æ€HTMLå†…å®¹ä¸­åµŒå…¥Javaä»£ç ï¼ŒJavaä»£ç è¢«åŠ¨æ€æ‰§è¡Œåç”ŸæˆHTMLå†…å®¹ è”ç³»ï¼š\njspæ˜¯å¯¹servletçš„ä¸€ç§é«˜çº§å°è£…ã€‚æœ¬è´¨è¿˜æ˜¯servletã€‚ jspä¼šç”±TomCatè‡ªåŠ¨ç¼–è¯‘æˆâ€œç±»servletâ€ã€‚ JSPå†…ç½®å¯¹è±¡ å¯¹è±¡ æè¿° request HttpServletRequest æ¥å£çš„å®ä¾‹ response HttpServletResponse æ¥å£çš„å®ä¾‹ out JspWriterç±»çš„å®ä¾‹ï¼Œç”¨äºæŠŠç»“æœè¾“å‡ºè‡³ç½‘é¡µä¸Š session HttpSessionç±»çš„å®ä¾‹ application ServletContextç±»çš„å®ä¾‹ï¼Œä¸åº”ç”¨ä¸Šä¸‹æ–‡æœ‰å…³ config ServletConfigç±»çš„å®ä¾‹ pageContext PageContextç±»çš„å®ä¾‹ï¼Œæä¾›å¯¹JSPé¡µé¢æ‰€æœ‰å¯¹è±¡ä»¥åŠå‘½åç©ºé—´çš„è®¿é—® page ç±»ä¼¼äºJavaç±»ä¸­çš„thiså…³é”®å­— Exception Exceptionç±»çš„å¯¹è±¡ï¼Œä»£è¡¨å‘ç”Ÿé”™è¯¯çš„JSPé¡µé¢ä¸­å¯¹åº”çš„å¼‚å¸¸å¯¹è±¡ JavaBeanç›¸å…³åŠ¨ä½œæ ‡è®°æœ‰å“ªäº›ï¼Œç”¨ä»£ç è¯´æ˜ä¹‹ è¯­æ³• æè¿° jsp:useBean å¯»æ‰¾æˆ–è€…å®ä¾‹åŒ–ä¸€ä¸ªJavaBeanã€‚ jsp:setProperty è®¾ç½®JavaBeançš„å±æ€§ã€‚ jsp:getProperty è¾“å‡ºæŸä¸ªJavaBeançš„å±æ€§ã€‚ \u0026lt;jsp:useBean id = \u0026quot;name\u0026quot; class = \u0026quot;package.class\u0026quot; scope= \u0026quot;page | request | session | application\u0026quot; /\u0026gt;\nå…¶ä¸­ï¼š\n1ï¼‰id\nè¡¨ç¤º Bean å®ä¾‹åŒ–å¯¹è±¡çš„å˜é‡åï¼Œå¯ä»¥åœ¨æŒ‡å®šèŒƒå›´å†…ä½¿ç”¨è¯¥å˜é‡åã€‚\n2ï¼‰class\nè¡¨ç¤ºéœ€è¦å®ä¾‹åŒ– Bean çš„ç±»è·¯å¾„ï¼ŒæŒ‡å®šçš„ç±»å¿…é¡»åŒ…å« public ä¸”æ— å‚æ•°çš„æ„é€ æ–¹æ³•ã€‚\n3ï¼‰scope\næŒ‡å®š Bean çš„ä½œç”¨åŸŸï¼Œå–å€¼ä¸ºï¼š\npageï¼šåªèƒ½åœ¨å½“å‰é¡µé¢ä½¿ç”¨è¯¥ Bean å¯¹è±¡ï¼› requestï¼šåªèƒ½åœ¨ä¸€æ¬¡è¯·æ±‚èŒƒå›´å†…ä½¿ç”¨è¯¥ Bean å¯¹è±¡ï¼› sessionï¼šåªèƒ½åœ¨ä¸€æ¬¡ä¼šè¯èŒƒå›´å†…ä½¿ç”¨è¯¥ Bean å¯¹è±¡ï¼› applicationï¼šå¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨èŒƒå›´å†…ä½¿ç”¨è¯¥ Bean å¯¹è±¡ã€‚ \u0026lt;jsp:setProperty name = \u0026quot;beanName\u0026quot; property = \u0026quot;attributeName\u0026quot; value = \u0026quot;attributeValue\u0026quot;/\u0026gt;\n\u0026lt;jsp:setProperty\u0026gt; é€šå¸¸å’Œ \u0026lt;jsp:useBean\u0026gt; ä¸€èµ·ä½¿ç”¨ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µã€‚\nåœ¨ \u0026lt;jsp:useBean\u0026gt; æ ‡ç­¾å¤–ä½¿ç”¨\u0026lt;jsp:setProperty\u0026gt;\nä»¥ä¸Šæƒ…å†µï¼Œæ— è®º \u0026lt;jsp:useBean\u0026gt; æ˜¯å¦å®ä¾‹åŒ–äº† User å¯¹è±¡ï¼Œ\u0026lt;jsp:setProperty\u0026gt; éƒ½ä¼šæ‰§è¡Œã€‚\nåœ¨ \u0026lt;jsp:useBean\u0026gt; æ ‡ç­¾é‡Œä½¿ç”¨ \u0026lt;jsp:setProperty\u0026gt;\nåªæœ‰ \u0026lt;jsp:useBean\u0026gt; å®ä¾‹åŒ–äº† User å¯¹è±¡ï¼Œ\u0026lt;jsp:setProperty\u0026gt; æ‰ä¼šæ‰§è¡Œ\n\u0026lt;jsp:getProperty name = \u0026quot;beanName\u0026quot; property = \u0026quot;attributeName\u0026quot;\u0026gt;\nå…¶ä¸­ï¼Œname æŒ‡å®šéœ€è¦è·å–å±æ€§çš„ Bean çš„åç§°ï¼›property æŒ‡å®š Bean çš„å±æ€§ï¼Œå³ Bean ç±»ä¸­çš„å±æ€§ã€‚\nå½“ property çš„å–å€¼ä¸º * æ—¶ï¼Œè¦æ±‚ Bean å±æ€§çš„åç§°ä¸ç±»å‹è¦ä¸ request è¯·æ±‚ä¸­å‚æ•°çš„åç§°åŠç±»å‹ä¸€è‡´ï¼Œä»¥ä¾¿ç”¨ Bean ä¸­çš„å±æ€§æ¥æ¥æ”¶å®¢æˆ·è¾“å…¥çš„æ•°æ®ï¼Œç³»ç»Ÿä¼šæ ¹æ®åç§°æ¥è‡ªåŠ¨åŒ¹é…ã€‚\næ³¨æ„ï¼š\u0026lt;jsp:setProperty\u0026gt; å’Œ \u0026lt;jsp:getProperty\u0026gt; åŠ¨ä½œéƒ½ä¼šæŒ‰ç…§ pageã€requestã€session å’Œ application çš„é¡ºåºä¾æ¬¡æŸ¥æ‰¾æŒ‡å®š Bean çš„å®ä¾‹å¯¹è±¡ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªå®ä¾‹è¢«æ‰¾åˆ°ã€‚å¦‚æœä»»ä½•èŒƒå›´å†…éƒ½ä¸å­˜åœ¨è¿™ä¸ª Bean å®ä¾‹ï¼Œåˆ™ä¼šæ‹‹å‡ºå¼‚å¸¸ã€‚\nELä¸ä½œç”¨åŸç›¸å…³çš„éšå«å¯¹è±¡æœ‰å“ªäº› å†…ç½®å¯¹è±¡ è¯´æ˜ pageScope è·å– page èŒƒå›´çš„å˜é‡ requestScope è·å– request èŒƒå›´çš„å˜é‡ sessionScope è·å– session èŒƒå›´çš„å˜é‡ applicationScope è·å– application èŒƒå›´çš„å˜é‡ param ç›¸å½“äº request.getParameter(String name)ï¼Œè·å–å•ä¸ªå‚æ•°çš„å€¼ paramValues ç›¸å½“äº request.getParameterValues(String name)ï¼Œè·å–å‚æ•°é›†åˆä¸­çš„å˜é‡å€¼ header ç›¸å½“äº request.getHeader(String name)ï¼Œè·å– HTTP è¯·æ±‚å¤´ä¿¡æ¯ headerValues ç›¸å½“äº request.getHeaders(String name)ï¼Œè·å– HTTP è¯·æ±‚å¤´æ•°ç»„ä¿¡æ¯ initParam ç›¸å½“äº application.getInitParameter(String name)ï¼Œè·å– web.xml æ–‡ä»¶ä¸­çš„å‚æ•°å€¼ cookie ç›¸å½“äº request.getCookies()ï¼Œè·å– cookie ä¸­çš„å€¼ pageContext è¡¨ç¤ºå½“å‰ JSP é¡µé¢çš„ pageContext å¯¹è±¡ EL è¡¨è¾¾å¼å¯ä»¥è¾“å‡º 4 ç§å±æ€§èŒƒå›´çš„å†…å®¹ã€‚å¦‚æœåœ¨ä¸åŒçš„å±æ€§èŒƒå›´ä¸­è®¾ç½®äº†åŒä¸€ä¸ªå±æ€§åç§°ï¼Œåˆ™æŒ‰ç…§ pageã€requestã€sessionã€application çš„é¡ºåºä¾æ¬¡æŸ¥æ‰¾ã€‚\n${person.name} personå­˜æ”¾åœ¨requestå±æ€§ä¸­personå¯¹è±¡çš„ç±»yzu.Personï¼Œå¯¹è±¡çš„javaä»£ç æ˜¯ä»€ä¹ˆ(JavaBean) \u0026lt;%=((yzu.Person)request.getAttribute(\u0026quot;person\u0026quot;)).getName()%\u0026gt;\nè¿‡æ»¤å™¨ä¸ServletåŒºåˆ«ä¸è”ç³»ï¼Œä»–æœ‰ä»€ä¹ˆä½œç”¨ è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ï¼šå¯¹Requestè¯·æ±‚èµ·åˆ°è¿‡æ»¤çš„ä½œç”¨ï¼Œä½œç”¨åœ¨Servletä¹‹å‰\nServletï¼šå¤„ç†Requestè¯·æ±‚å’ŒResponseå“åº”\nJavaå’ŒJSPçš„åŒºåˆ« Javaæ˜¯ä¸€ç§é€šç”¨çš„è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ï¼Œå®ƒæ˜¯å¹¶å‘çš„ï¼ŒåŸºäºç±»çš„ï¼Œé¢å‘å¯¹è±¡çš„ï¼Œå¹¶ä¸”ä¸“é—¨è®¾è®¡ä¸ºå…·æœ‰å°½å¯èƒ½å°‘çš„å®ç°ä¾èµ–æ€§ã€‚è€ŒJSPæ˜¯ä¸€ç§æŠ€æœ¯ï¼Œå¯å¸®åŠ©è½¯ä»¶å¼€å‘äººå‘˜åŸºäºHTMLï¼ŒXMLæˆ–å…¶ä»–æ–‡æ¡£ç±»å‹åˆ›å»ºåŠ¨æ€ç”Ÿæˆçš„Webé¡µé¢ã€‚ Java appletæ˜¯ä½¿ç”¨Javaç¼–ç¨‹è¯­è¨€ç¼–å†™çš„ã€‚JSPä½¿ç”¨â€œscriptletå…ƒç´ â€ï¼ˆJavaä»£ç ï¼‰å’Œâ€œæ ‡è®°â€ï¼ˆé€šå¸¸æ˜¯HTMLæˆ–XMLï¼‰çš„æ··åˆç¼–ç¨‹ï¼Œä»¥æä¾›æ•°æ®é©±åŠ¨ï¼ˆâ€œåŠ¨æ€â€ï¼‰ç½‘é¡µã€‚ Javaä¸ºé¢å‘å¯¹è±¡è¯­è¨€ï¼ŒJSPå¯ä»¥ç†è§£ä¸ºä¸€ç§è„šæœ¬ Javaä¸»è¦è´Ÿè´£é€»è¾‘ï¼Œä¸šåŠ¡å¤„ç†ï¼Œè€ŒJSPä¸»è¦è´Ÿè´£é¡µé¢å±•ç° JSPçš„æœ¬è´¨æ˜¯servletï¼Œè€Œservletçš„æœ¬è´¨æ˜¯Javaç±» JSPå¼€å‘çš„ä¼˜ç‚¹ å°†å†…å®¹çš„ç”Ÿæˆå’Œæ˜¾ç¤ºåˆ†ç¦»\nå€ŸåŠ©jspæŠ€æœ¯ï¼Œwebé¡µé¢å‘å¼€äººå‘˜å¯ä»¥ä½¿ç”¨htmlæˆ–è€…xmlæ ‡ç­¾æ¥è®¾è®¡å’Œæ ¼å¼åŒ–æœ€ç»ˆé¡µé¢ï¼Œä½¿ç”¨jspæ ‡ç­¾æˆ–è€…è„šæœ¬ç¨‹åºæ¥ç”ŸæˆåŠ¨æ€webé¡µé¢çš„å†…å®¹ï¼ˆé¡µé¢çš„å†…å®¹æ˜¯æ ¹æ®è¯·æ±‚æ¥å˜åŒ–çš„ï¼Œä¾‹å¦‚ï¼Œè¯·æ±‚è´¦æˆ·ä¿¡æ¯æˆ–è€…ç‰¹å®šçš„ä¸€æœ¬ä¹¦çš„ä»·æ ¼ï¼‰ã€‚ç”Ÿæˆå†…å®¹çš„é€»è¾‘è¢«å°è£…åœ¨æ ‡ç­¾å’Œjavabeanç»„ä»¶ä¸­ï¼Œå¹¶ä¸”æ†ç»‘åœ¨è„šæœ¬ç¨‹åºä¸­ï¼Œæ‰€æœ‰çš„è„šæœ¬ç¨‹åºåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œã€‚å› æ­¤ï¼Œå…¶ä»–äººèƒ½å¤Ÿæ–¹ä¾¿åœ°ç¼–è¾‘å’Œä½¿ç”¨jspé¡µé¢ï¼Œè€Œä¸å½±å“å†…å®¹çš„ç”Ÿæˆã€‚\nå¼ºè°ƒå¯é‡ç”¨çš„ç»„ä»¶\njspé¡µé¢å¯å€ŸåŠ©å¯é‡ç”¨çš„ã€è·¨å¹³å°çš„ç»„ä»¶æ¥æ‰§è¡Œåº”ç”¨ç¨‹åºæ‰€è¦æ±‚çš„æä¸ºå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€‚å¼€å‘äººå‘˜èƒ½å¤Ÿå…±äº«å’Œäº¤æ¢æ‰§è¡Œæ™®é€šæ“ä½œçš„ç»„ä»¶ï¼Œæˆ–è€…è®©è¿™äº›ç»„ä»¶è¢«åˆ«çš„å¼€å‘äººå‘˜æˆ–å¼€å‘å›¢é˜Ÿæ‰€ä½¿ç”¨ã€‚åŸºäºç»„ä»¶çš„æ–¹æ³•åŠ é€Ÿäº†æ€»ä½“å¼€å‘è¿›ç¨‹ï¼Œå¹¶ä¸”ä½¿å¾—å„ç§ç»„ç»‡åœ¨ä»–ä»¬ç°æœ‰çš„æŠ€èƒ½å’Œä¼˜åŒ–ç»“æœçš„å¼€å‘åŠªåŠ›ä¸­å¾—åˆ°å¹³è¡¡ã€‚\né‡‡ç”¨æ ‡ç­¾ç®€åŒ–é¡µé¢å¼€å‘\né€šè¿‡ä½¿ç”¨jspæä¾›çš„æ ‡å‡†æ ‡ç­¾åº“ï¼Œwebé¡µé¢å¼€å‘äººå‘˜èƒ½å¤Ÿè®¿é—®å’Œå®ä¾‹åŒ–javabeanç»„ä»¶ã€è®¾ç½®æˆ–è€…æ£€ç´¢ç»„ä»¶å±æ€§ã€ä¸‹è½½appletä»¥åŠæ‰§è¡Œç”¨å…¶ä»–æ–¹æ³•æ›´éš¾äºç¼–ç å’Œè€—æ—¶çš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œwebé¡µé¢å¼€å‘äººå‘˜è¿˜å¯ä»¥ä¸ºå¸¸ç”¨åŠŸèƒ½åˆ›å»ºè‡ªå·±çš„æ ‡ç­¾åº“ï¼Œè¿™æ˜¯çš„webé¡µé¢å¼€å‘äººå‘˜èƒ½å¤Ÿä½¿ç”¨ç†Ÿæ‚‰çš„å·¥å…·ç›’å¦‚åŒæ ‡ç­¾ä¸€æ ·çš„æ‰§è¡Œç‰¹å®šåŠŸèƒ½çš„æ„ä»¶æ¥å·¥ä½œã€‚\nä¸€æ¬¡ç¼–å†™ã€å¤„å¤„è¿è¡Œ\nç”±äºjspé¡µé¢çš„å†…ç½®è„šæœ¬æ˜¯åŸºäºjavaè¯­è¨€çš„ï¼Œè€Œä¸”æ‰€æœ‰çš„jspé¡µé¢éƒ½è¢«ç¼–è¯‘ä¸ºjava servletï¼Œå› æ­¤jspé¡µé¢å°±å…·æœ‰javaæŠ€æœ¯çš„æ‰€æœ‰å¥½å¤„ï¼ŒåŒ…æ‹¬å¥å£®æ€§å’Œå®‰å…¨æ€§ç­‰ã€‚ä½œä¸ºjavaå¹³å°çš„ä¸€éƒ¨åˆ†ï¼Œjspæ‹¥æœ‰javaè¯­è¨€â€œä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„è¿è¡Œâ€çš„ç‰¹ç‚¹ã€‚jspå‡ ä¹å¯ä»¥è¿è¡Œäºæ‰€æœ‰çš„å¹³å°ï¼Œå¦‚windows ntã€linuxã€unixç­‰ã€‚\næ›´é«˜çš„æ•ˆç‡å’Œå®‰å…¨æ€§\njspç¨‹åºåœ¨æ‰§è¡Œä¹‹å‰å…ˆè¢«ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ï¼Œå­—èŠ‚ç æ–‡ä»¶æœ‰javaè™šæ‹Ÿæœºè§£é‡Šæ‰§è¡Œï¼Œæ¯”æºä»£ç è§£é‡Šçš„æ•ˆç‡é«˜ã€‚æ­¤å¤–ï¼ŒæœåŠ¡å™¨ç«¯è¿˜æœ‰å­—èŠ‚ç çš„cacheæœºæ„ï¼Œèƒ½æé«˜å­—èŠ‚ç çš„è®¿é—®æ•ˆç‡ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨jspç½‘é¡µå¯èƒ½ç¨æ…¢ï¼Œå› ä¸ºå®ƒè¢«ç¼–è¯‘æˆcacheï¼Œä»¥åå°±å¿«çš„å¤šäº†ã€‚åŒæ—¶ï¼Œjspæºç¨‹åºä¸å¤§å¯èƒ½è¢«ä¸‹è½½ï¼Œç‰¹åˆ«æ˜¯javabeanç¨‹åºï¼Œå®Œå…¨å¯èƒ½æ”¾åˆ°ä¸å¯¹å¤–çš„ç›®å½•ä¸­ã€‚\n","date":"2022-01-03T19:52:31+08:00","image":"https://lbqaq.top/p/javawebexam/92462192.webp","permalink":"https://lbqaq.top/p/javawebexam/","title":"JavaWebæœŸæœ«å¤ä¹ "},{"content":"æ–°ç•ªâ€œå…ˆå®¡åæ’­â€æ”¿ç­–å·²ç»å®è¡Œäº†å¿«åŠå¹´äº†ï¼Œç°åœ¨çœ‹æ¥åœ¨å“”å“©å“”å“©ä¸Šè¿½ç•ªçš„ä½“éªŒå·²ç»æ²¡æœ‰ä¹‹å‰é‚£æ ·èˆ’é€‚äº†ï¼Œæ›´ä¸ç”¨æè¿˜æœ‰å¥½å¤šç•ªå‰§è¿ä¸Šçº¿éƒ½æ²¡æœ‰ä¸Šçº¿ã€‚è¿™æ—¶æœ¬åœ°çœ‹ç•ªå°±æˆäº†ä¸€ä¸ªæ¯”è¾ƒä¸é”™çš„é€‰æ‹©äº†ã€‚è¿™ç¯‡æ–‡ç« å°±è®°å½•ä»¥ä¸‹è¿™æ®µæ—¶é—´æˆ‘æœ¬åœ°è¿½ç•ªä½¿ç”¨çš„å·¥å…·å’Œç½‘ç«™ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ä»¥æ­¤ä¸ºå‚ç…§ï¼Œæ‰“é€ å±äºè‡ªå·±çš„è¿½ç•ªä½“éªŒã€‚\næ‰¾ç•ª â€œå·§å¦‡éš¾ä¸ºæ— ç±³ä¹‹ç‚Šâ€ï¼Œæ²¡æœ‰ç‰‡æºçš„è¯ï¼Œæœ¬æ–‡ä½¿ç”¨çš„ä¸€åˆ‡å·¥å…·ä¹Ÿå°±æ— ä»è°ˆèµ·äº†ã€‚ä¸‹é¢æˆ‘å°±åˆ—ä¸¾å‡ ä¸ªæˆ‘çŸ¥é“çš„æ‰¾ç•ªç½‘å€ï¼š\nï¼ˆæ¨èï¼‰èŒç•ªç»„\nåªèƒ½è¯´æ˜¯è‰¯å¿ƒç½‘ç«™äº†ï¼Œå›½å†…å¯ä»¥ç›´è¿ï¼Œæ”¯æŒRSSè®¢é˜…å’Œç­›é€‰\nå‹•æ¼«èŠ±åœ’\nè€ç‰Œç½‘ç«™äº†ï¼Œå›½å†…æ— æ³•ç›´è¿ï¼Œä½†åˆ†äº«å†…å®¹ä¸æ­¢ç•ªå‰§ï¼Œè¿˜æœ‰éŸ³ä¹ç­‰å†…å®¹\nNyaa\nä¸€èˆ¬æ˜¯è‹±æ–‡èµ„æºï¼Œå¯åšä¸ºå¤‡ç”¨ç½‘ç«™\nä¸‹è½½ æ‰¾åˆ°äº†éœ€è¦çš„èµ„æºï¼ˆä¸€èˆ¬éƒ½æ˜¯BTé“¾æ¥ï¼‰ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ä¸‹è½½äº†ï¼Œè¿™é‡Œæˆ‘æ¨èqBittorrentï¼Œæˆ‘è®¤ä¸ºæ˜¯BTä¸‹è½½çš„æœ€ä¼˜è§£äº†ã€‚Windowså¹³å°æˆ‘å»ºè®®é€‰æ‹©å¢å¼ºç‰ˆqBittorrent-Enhanced-Edition\nå¯¹äºæ–°ç•ªæ¥è¯´ï¼Œé€Ÿåº¦åŸºæœ¬æ˜¯ä¸æ…¢çš„ã€‚ä½†å¦‚æœè¦ä¸‹è½½æ—§ç•ªçš„è¯ï¼Œå¦‚æœåˆ†äº«çš„äººä¸å¤šçš„è¯é€Ÿåº¦å°±ä¸å¤ªç†æƒ³äº†ã€‚\né¢å¯¹è¿™ç§æƒ…å†µæˆ‘çŸ¥é“çš„æœ‰è¿™æ ·å‡ ç§è§£å†³æ–¹æ³•ï¼š\nä½¿ç”¨115ç­‰æ”¯æŒç¦»çº¿çš„ç½‘ç›˜\nè¿™é‡Œæˆ‘æ¨èä¸€ä¸ªå®‰å“çš„APPï¼Œå«PikPakã€‚ç”±äºæ˜¯æ–°å‡ºçš„ï¼Œç°åœ¨æœ‰ä¼šå‘˜å…è´¹é¢†å–çš„æ´»åŠ¨ï¼Œå¯ä»¥æ— é™æ¬¡ç¦»çº¿+3Tç©ºé—´ã€‚æˆ‘ä¸ªäººæµ‹è¯•äº†ä¸€ä¸‹ç¦»çº¿æˆåŠŸç‡å’Œä¸‹è½½é€Ÿåº¦è¿˜æ˜¯ä¸é”™çš„ï¼Œä¹˜ç°åœ¨è¿˜èƒ½ç™½å«–å°±å¤šç”¨ç”¨å§_(:Ğ·)âˆ )_\nç§Ÿä¸€å°å›½å¤–çš„VPSï¼Œå…ˆåœ¨ä¸Šé¢ä¸‹è½½å¥½å†è½¬å­˜åˆ°å›½å†…ï¼ˆå› ä¸ºæœ‰äº›èµ„æºåˆ†äº«çš„äººåœ¨å›½å†…æ— æ³•è¿æ¥åˆ°ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æ‰æœ‰ç”¨ğŸ˜‚ï¼‰\nçœ‹çœ‹ç™¾åº¦äº‘ç­‰ç½‘ç›˜ä¸Šæœ‰æ²¡æœ‰äººåˆ†äº«\nä½¿ç”¨PTï¼Œå½“ç„¶è¿™ä¸ªéš¾åº¦è¿‡å¤§äº†ï¼Œå°±è¿æˆ‘ä¹Ÿæ²¡æ•´è¿‡ğŸ˜‡\næ’­æ”¾ è¯´åˆ°æœ¬åœ°æ’­æ”¾å™¨ï¼Œé‚£å°±ä¸å¾—ä¸æåˆ°PotPlayerçš„å¤§åäº†ï¼Œè¿™åŸºæœ¬æ˜¯æ’­æ”¾å™¨çš„æœ€ä¼˜è§£äº†ï¼Œåœ¨è¿™é‡Œæˆ‘å°±ä¸è¿‡å¤šé˜è¿°å®ƒçš„ä¼˜ç‚¹äº†ï¼Œæˆ‘ä¸»è¦æ˜¯æƒ³æä¸€æå¦å¤–çš„ä¸€æ¬¾æ’­æ”¾å™¨â€”â€”å¼¹å¼¹play\nç›¸æ¯”PotPlayerï¼Œå®ƒæœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯æ”¯æŒå¼¹å¹•çš„æ’­æ”¾ã€‚åœ¨çœ‹äº†è¿™ä¹ˆå¤šå¹´çš„Bç«™ä»¥åï¼Œç°åœ¨çœ‹ç•ªä¸å¸¦å¼¹å¹•å°±è§‰å¾—ç¼ºäº†äº›ä»€ä¹ˆï¼Œè¿™æ¬¾æ’­æ”¾å™¨å°±å¾ˆå¥½çš„è§£å†³äº†æˆ‘è¿™ä¸ªç—›ç‚¹ã€‚å½“ç„¶å®ƒçš„åŠŸèƒ½ä¸æ­¢è¿™äº›ï¼Œæ¯”å¦‚å¯ä»¥é…ç½®è‡ªåŠ¨ä¸‹è½½ã€å¼€å¯è¿œç¨‹è®¿é—®ç­‰ç­‰ã€‚ä½†æˆ‘ä¸€èˆ¬ä¸ä¼šè®©ä¸€ä¸ªæ’­æ”¾å™¨åå°å¸¸é©»+å¼€æœºè‡ªå¯çš„ï¼Œæ‰€ä»¥è¿™äº›åŠŸèƒ½å¯¹æˆ‘æ¥è¯´å¹¶æ²¡æœ‰å¤šå¤§çš„ä½œç”¨ã€‚\nå½“ç„¶è¿˜æ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œæ¯”å¦‚ä¸èƒ½åƒpakkué‚£æ ·å°†é‡å¤å¼¹å¹•åˆå¹¶æˆä¸€æ¡å¤§å¼¹å¹•ï¼Œä½¿ç”¨è‡ªå¸¦çš„é‡å¤å¼¹å¹•å±è”½ä¼šæœ‰è‚‰çœ¼å¯è§çš„å¼¹å¹•æ¶ˆå¤±ç­‰BUGã€‚ä¸è¿‡ç‘•ä¸æ©ç‘œï¼Œè¿™æ¬¾æ’­æ”¾å™¨æˆ‘è¿˜æ˜¯å¾ˆæ¨èçš„ã€‚\nè¡¥å¸§ ç»ˆäºåˆ°è¿™ä¸ªç¯èŠ‚äº†ï¼Œè¿™æ‰æ˜¯æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„ä¸»è¦åŠ¨åŠ›ã€‚\nå›½é™…æƒ¯ä¾‹ï¼Œå…ˆæ¥ä¸€æ®µåè¯è§£é‡Šï¼š\nå¸§æ•°(Frames)ï¼Œä¸ºå¸§ç”Ÿæˆæ•°é‡çš„ç®€ç§°ã€‚ç”±äºå£è¯­ä¹ æƒ¯ä¸Šçš„åŸå› ï¼Œæˆ‘ä»¬é€šå¸¸å°†å¸§æ•°ä¸å¸§ç‡æ··æ·†ã€‚æ¯ä¸€å¸§éƒ½æ˜¯é™æ­¢çš„å›¾è±¡ï¼Œå¿«é€Ÿè¿ç»­åœ°æ˜¾ç¤ºå¸§ä¾¿å½¢æˆäº†è¿åŠ¨çš„å‡è±¡ï¼Œå› æ­¤é«˜çš„å¸§ç‡å¯ä»¥å¾—åˆ°æ›´æµç•…ã€æ›´é€¼çœŸçš„åŠ¨ç”»ã€‚\nè€Œå¸§ç‡ï¼ˆFrame rateï¼‰æ˜¯ç”¨äºæµ‹é‡æ˜¾ç¤ºå¸§æ•°çš„é‡åº¦ã€‚æ‰€è°“çš„æµ‹é‡å•ä½ä¸ºæ¯ç§’æ˜¾ç¤ºå¸§æ•°(Frames per Secondï¼Œç®€ç§°ï¼šFPSï¼‰æˆ–â€œèµ«å…¹â€ï¼ˆHzï¼‰ã€‚æ­¤è¯å¤šç”¨äºå½±è§†åˆ¶ä½œå’Œç”µå­æ¸¸æˆã€‚\næ‰€ä»¥è¯´è¡¥å¸§å°±æ˜¯å°†ä½å¸§ç‡çš„è§†é¢‘é€šè¿‡ä¸€å®šçš„ç®—æ³•æå‡åˆ°é«˜å¸§ç‡ã€‚ç›´è§‚æ¥çœ‹ï¼Œå°±æ˜¯ç”»é¢å˜å¾—æ›´åŠ æµç•…ä¸æ»‘äº†ï¼Œè¿˜ä¸ç†è§£çš„è¯å¯ä»¥çœ‹ä¸‹é¢çš„åŠ¨å›¾æˆ–è€…çœ‹çœ‹æå®¢æ¹¾çš„è¿™æœŸè§†é¢‘ï¼Œé€šè¿‡ä¸åŒå¸§ç‡çš„å¯¹æ¯”èƒ½æœ‰ä¸ªæ›´æ¸…æ™°çš„è®¤è¯†ã€‚\nå½“ç„¶ï¼Œä¸Šé¢çš„è§†é¢‘ä¸­ä½¿ç”¨çš„æ˜¯AIè¡¥å¸§ï¼Œå¯¹æ˜¾å¡å’Œæ—¶é—´è¦æ±‚éƒ½ååˆ†é«˜ã€‚æˆ‘ä»¬æ­£å¸¸çœ‹ç•ªæ˜¯ç”¨ä¸åˆ°è¿™äº›çš„ã€‚è¿™é‡Œå°±åˆ—ä¸¾æœ¬åœ°å®æ—¶æ’å¸§çš„ä¸‰æ¬¾è½¯ä»¶ã€‚\nAMD Fluid Motion SVP dmitriRender ç¡¬ä»¶éœ€æ±‚ æ”¯æŒæ­¤åŠŸèƒ½çš„Aå¡ æ—  é«˜æ€§èƒ½çš„æ˜¾å¡ æ˜¯å¦æ”¶è´¹ å…è´¹ æ”¶è´¹ï¼ˆå¯è¯•ç”¨ï¼‰ æ”¶è´¹ï¼ˆå¯è¯•ç”¨ï¼‰ æ­£ç‰ˆä½“éªŒ / ä¼˜ç§€ è¾ƒå·® é…ç½®éš¾åº¦ ä¸çŸ¥é“ å¤æ‚ ç®€å• æ”¯æŒæ ¼å¼ å…¨éƒ¨ ä¸æ”¯æŒHEVC å…¨éƒ¨ è‡³äºè¡¥å¸§æ•ˆæœï¼Œæˆ‘æ„Ÿè§‰å¯¹äºåŠ¨æ¼«dmitriRenderè¦æ¯”SVPè¦å¥½ä¸€ç‚¹ã€‚å½“ç„¶ç”±äºåŠ¨æ¼«çš„ç”»é¢ä¸€èˆ¬ä¸å…·æœ‰é€»è¾‘è¿ç»­ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¼šæœ‰ä¸€ç‚¹è™šå½±çš„ï¼Œä¸è¿‡ä¸å½±å“è§‚çœ‹ã€‚\nä¸¤æ¬¾è½¯ä»¶çš„æ­£ç‰ˆæ¿€æ´»ä½“éªŒæ¥è¯´ï¼Œè¿˜æ˜¯SVPæ¯”è¾ƒå¥½ï¼Œä¸é™æ¬¡æ•°åæ¿€æ´»ï¼Œæ”¯æŒå®˜ç½‘åæ¿€æ´»ã€‚è€ŒdmitriRenderä¸ä½†ä¸æ”¯æŒå®˜ç½‘åæ¿€æ´»ï¼Œè€Œä¸”åªæœ‰20æ¬¡åæ¿€æ´»çš„é™åˆ¶ï¼Œæ›´è¦å‘½çš„æ˜¯å¦‚æœç³»ç»Ÿé‡è£…ã€ç¡¬ä»¶æ›´æ–°éƒ½å¯èƒ½ä¼šæ‰æ¿€æ´»ï¼Œè´´å§ä¸Šä¹Ÿæœ‰å¥½å¤šä¸¢å¤±æ¿€æ´»çš„æƒ…å†µã€‚\ndmitriRenderçš„å®˜ç½‘å”®ä»·æ˜¯$15.00ï¼ˆæˆ‘å½“æ—¶ä¹°çš„æ˜¯12åˆ€ï¼Œå±…ç„¶æ¶¨ä»·äº†ï¼‰\nSVPçš„å®˜ç½‘å”®ä»·æ˜¯$19.99ï¼ˆå¤ªè´µäº†ï¼Œç­‰é»‘äº”ä¿ƒé”€å†è¯´ï¼‰\nSVPæ˜¯æ”¯æŒæ”¯ä»˜å®ä»˜æ¬¾çš„ï¼Œè€ŒdmitriRenderéœ€è¦ä¸€å¼ ä¿¡ç”¨å¡\nä¸è¿‡ï¼Œä¸Šé¢ä¸¤å—è½¯ä»¶éƒ½æœ‰çˆ±å¿ƒåˆ†äº«ç‰ˆï¼Œè¿™é‡Œå°±ä¸ç›´æ¥å†™å‡ºæ¥äº†ï¼ˆé¿å…æŸ¥æ°´è¡¨ï¼‰ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥åœ¨è¯„è®ºé‡Œç•™è¨€ã€‚\nå°ç»“ è¿™ç¯‡æ–‡ç« è¿˜æ˜¯æ‹–æ›´äº†å¥½ä¹…ï¼Œæ¯æ¬¡åœ¨å¿ƒé‡Œåˆ—ä¸‹æƒ³å†™çš„å†…å®¹ï¼Œä¸€åˆ°ç”µè„‘å‰å°±æ‡’å¾—åŠ¨æ‰‹äº†ğŸ˜­ä¹‹åä¸€å®šä¼šè¡¥ä¸Šä¸¤æ¬¾è¡¥å¸§è½¯ä»¶çš„å®‰è£…å’Œé…ç½®æ–¹æ³•ã€‚\n","date":"2021-10-26T15:39:41+08:00","image":"https://lbqaq.top/p/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E7%9C%8B%E7%95%AA/90624322.webp","permalink":"https://lbqaq.top/p/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E7%9C%8B%E7%95%AA/","title":"å¦‚ä½•ä¼˜é›…çš„çœ‹ç•ª"},{"content":"æœ€è¿‘æŠŠæœåŠ¡å™¨é‡è£…æˆUbuntuäº†ï¼Œæ‰€ä»¥è¦é‡è£…MySQLï¼Œæ²¡æƒ³åˆ°åœ¨è¿™é‡Œè¸©äº†å¥½å‡ ä¸ªå‘ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸‹æ¥å¤‡å¿˜ã€‚\nå®‰è£… è¿™å…¶å®å¾ˆç®€å•ï¼Œç›´æ¥é€šè¿‡Ubuntuçš„åŒ…ç®¡ç†å™¨ç›´æ¥å®‰è£…å°±è¡Œäº†ï¼ˆæˆ‘æŠŠç³»ç»Ÿè½¬ä¸ºUbuntuä¹Ÿæœ‰è¿™æ–¹é¢çš„åŸå› ï¼‰ã€‚\n1 sudo apt-get install mysql-server é€šè¿‡è¿™æ¡å‘½ä»¤å®‰è£…çš„MySQLçš„rootè´¦å·æ˜¯æ²¡æœ‰å¯†ç çš„ï¼Œæ‰€ä»¥åªè¦è¾“å…¥mysqlå°±ç›´æ¥å¯ä»¥è¿›å…¥äº†\nå¼€å¯è¿œç¨‹è®¿é—® è¿™é‡Œå°±æ˜¯æœ¬æ–‡çš„é‡ç‚¹äº†ï¼Œæˆ‘åœ¨è¿™é‡ŒèŠ±äº†å¾ˆå¤šæ—¶é—´ğŸ˜‡\nè®¾å®šMySQLçš„ç›‘å¬ç«¯å£ é€šè¿‡aptå®‰è£…çš„MySQLé»˜è®¤æ˜¯åªç›‘å¬æœ¬åœ°çš„ç«¯å£çš„ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹ä½¿å…¶ç›‘å¬æ‰€æœ‰ipåœ°å€çš„è¯·æ±‚ã€‚\n1 2 3 4 vim /etc/mysql/mysql.conf.d/mysqld.cnf #æŠŠbind - addressåé¢çš„127.0.0.1æ”¹ä¸º0.0.0.0 #é‡å¯MySQLæœåŠ¡å™¨ systemctl restart mysql è®¾ç½®rootè´¦å·å¯†ç å¹¶å¼€å¯è¿œç¨‹è®¿é—® é»˜è®¤rootè´¦å·æ˜¯æ²¡æœ‰å¯†ç çš„ï¼Œè¿™å½“ç„¶æ˜¯ä¸è¡Œçš„ï¼Œæˆ‘ä»¬éœ€è¦ç»™ä¸€ä¸ªå¯†ç \n1 2 3 4 use mysql; ALTER USER \u0026#39;root\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED WITH mysql_native_password BY \u0026#39;æ–°çš„å¯†ç \u0026#39;; update user set host = \u0026#39;%\u0026#39; where user=\u0026#39;root\u0026#39;; flush privileges; è¿˜è¦æ³¨æ„æŠŠé˜²ç«å¢™çš„3306ç«¯å£æ”¾è¡Œï¼Œè¿™æ ·å°±å¯ä»¥å®ç°MySQLçš„è¿œç¨‹è®¿é—®äº†ã€‚\n","date":"2021-10-21T10:19:52+08:00","image":"https://lbqaq.top/p/mysql8%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/90561040.webp","permalink":"https://lbqaq.top/p/mysql8%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/","title":"MySQL8å¼€å¯è¿œç¨‹è®¿é—®"},{"content":"åœ¨æˆ‘ç°åœ¨åœ¨åšçš„é¡¹ç›®ä¸­éœ€è¦è¿›è¡Œèº«ä»½å’Œæƒé™è®¤è¯ï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†äº›æ•™ç¨‹ï¼Œæ¨èéƒ½æ˜¯ä½¿ç”¨JWTæ¥è¿›è¡Œèº«ä»½è®¤è¯ï¼Œäºæ˜¯ä¾¿å†³å®šä½¿ç”¨æ­¤æ–¹æ³•æ¥å®ç°ã€‚ï¼ˆç„¶è€Œç”¨å®Œäº†æ‰å‘ç°JWTä¹Ÿæœ‰ç¼ºç‚¹ï¼‰\nä½•ä¸ºJWT æ‰€è°“JWTï¼Œå…¨ç§°æ˜¯JSON Web Tokenã€‚ä¸‹é¢æ˜¯ä»å®˜ç½‘æ‘˜æŠ„çš„å®šä¹‰ï¼š\nJWTæ˜¯ä¸€ä¸ªå¼€æ”¾çš„æ ‡å‡†ï¼ˆRFC 7519ï¼‰ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ç´§å‡‘å’Œç‹¬ç«‹çš„æ–¹å¼ï¼Œä»¥JSONå¯¹è±¡çš„å½¢å¼åœ¨å„æ–¹ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ã€‚è¿™ç§ä¿¡æ¯å¯ä»¥è¢«éªŒè¯å’Œä¿¡ä»»ï¼Œå› ä¸ºå®ƒæ˜¯ç»è¿‡æ•°å­—ç­¾åçš„ã€‚JWTså¯ä»¥ä½¿ç”¨ç§˜å¯†ï¼ˆä½¿ç”¨HMACç®—æ³•ï¼‰æˆ–ä½¿ç”¨RSAæˆ–ECDSAçš„å…¬å…±/ç§äººå¯†é’¥å¯¹è¿›è¡Œç­¾åã€‚\næŒ‰æˆ‘çš„ç†è§£ï¼ŒJWTå…¶å®å°±æ˜¯å°†ä¼ ç»Ÿçš„sessionè®¤è¯ä¸­çš„tokenå­˜å‚¨ä½ç½®ä»æœåŠ¡å™¨ä¸Šä¸‹å‘ç»™ç”¨æˆ·ï¼ŒæœåŠ¡å™¨åªéœ€è¦åˆ¤æ–­ä¼ æ¥çš„tokenæ˜¯å¦åˆæ³•è€Œæ— éœ€å­˜å‚¨ã€‚è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¯ä»¥åšåˆ†å¸ƒå¼çš„æœåŠ¡å™¨ï¼Œæ— éœ€è€ƒè™‘ç”¨æˆ·æ˜¯åœ¨å“ªä¸€å°æœåŠ¡å™¨ä¸Šç™»å½•çš„ã€‚\nè¯¦ç»†çš„å®šä¹‰å’Œæ„æˆæˆ‘è¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œè¿™é‡Œä¸»è¦å…³æ³¨JWTä¸­Payloadï¼ˆè½½è·ï¼‰ã€‚è¿™æ˜¯æœ‰æ•ˆä¿¡æ¯å­˜æ”¾çš„åœ°æ–¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬å…³æ³¨è¿™é‡Œå°±è¡Œäº†ã€‚\nä¸‹é¢æ˜¯å®˜æ–¹æä¾›ä¸”å»ºè®®ï¼ˆå¹¶ä¸å¼ºåˆ¶ï¼‰ä½¿ç”¨çš„å£°æ˜ï¼š\niss: jwtç­¾å‘è€…\nsub: ä¸»é¢˜\naud: æ¥æ”¶jwtçš„ä¸€æ–¹\nexp: jwtçš„è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¿…é¡»è¦å¤§äºç­¾å‘æ—¶é—´\nnbf: ç”Ÿæ•ˆæ—¶é—´ï¼Œåœ¨æ­¤æ—¶é—´ä¹‹å‰è¯¥jwtéƒ½æ˜¯ä¸å¯ç”¨çš„.\niat: jwtçš„ç­¾å‘æ—¶é—´\njti: jwtçš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸»è¦ç”¨æ¥ä½œä¸ºä¸€æ¬¡æ€§token,ä»è€Œå›é¿é‡æ”¾æ”»å‡»ã€‚\nå½“ç„¶ï¼Œåœ¨è½½è·ä¸­è¿˜å¯ä»¥å­˜æ”¾è‡ªå®šä¹‰çš„ä¿¡æ¯ï¼Œåœ¨æœ¬é¡¹ç›®ä¸­ä½¿ç”¨å®˜æ–¹æä¾›çš„å°±è¶³ä»¥äº†ï¼Œæ•…ä¸å±•å¼€ã€‚\nè®¤è¯æµç¨‹ ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·åå¯†ç æ¥è¯·æ±‚æœåŠ¡å™¨ æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ç”¨æˆ·çš„ä¿¡æ¯ æœåŠ¡å™¨é€šè¿‡éªŒè¯å‘é€ç»™ç”¨æˆ·ä¸€ä¸ªtoken å®¢æˆ·ç«¯å­˜å‚¨tokenï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶é™„é€ä¸Šè¿™ä¸ªtokenå€¼ æœåŠ¡ç«¯éªŒè¯tokenå€¼ï¼Œå¹¶è¿”å›æ•°æ® å…·ä½“å®ç° å¯¼å…¥ä¾èµ–åŒ… ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯å¯¼å…¥ç›¸å…³ä¾èµ–äº†ï¼Œä½¿ç”¨Mavenè¿›è¡ŒåŒ…ç®¡ç†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!-- shiro --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.apache.shiro\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;shiro-spring\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.8.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- jwt --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.auth0\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;java-jwt\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.18.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; å°è£…JWTå·¥å…·ç±» è¿™é‡Œä¸»è¦å®ç°JWTçš„ç”Ÿæˆã€éªŒè¯ã€æå–ç”¨æˆ·åä¸‰ä¸ªåŠŸèƒ½\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 @Slf4j public class JwtUtil { /** * æœåŠ¡å™¨ç§é’¥ */ private static final Algorithm ALGORITHM = Algorithm.HMAC256(\u0026#34;test\u0026#34;); /** * ç”ŸæˆJSON Web Token * * @param username ç”¨æˆ·å * @param issuer ç­¾å‘è€… * @param subject é¢å‘ä¸»ä½“ * @param ttlMillis ç”Ÿæ•ˆæ—¶é•¿(å•ä½:æ¯«ç§’) */ public static String creatJwt(String username, String issuer, String subject, long ttlMillis) { long nowMillis = System.currentTimeMillis(); Date now = new Date(nowMillis); JWTCreator.Builder builder = JWT.create() .withAudience(username) .withIssuedAt(now) .withSubject(subject) .withIssuer(issuer); if (ttlMillis \u0026gt;= 0) { long expMillis = nowMillis + ttlMillis; Date exp = new Date(expMillis); builder.withExpiresAt(exp); } return builder.sign(ALGORITHM); } /** * ç”ŸæˆJSON Web Token * * @param username ç”¨æˆ·å * @param issuer ç­¾å‘è€… * @param subject é¢å‘ä¸»ä½“ * @param expDate å¤±æ•ˆæ—¥æœŸ */ public static String creatJwt(String username, String issuer, String subject, Date expDate) { Date now = new Date(); JWTCreator.Builder builder = JWT.create() .withAudience(username) .withIssuedAt(now) .withSubject(subject) .withIssuer(issuer); if (now.before(expDate)) { builder.withExpiresAt(expDate); } return builder.sign(ALGORITHM); } /** * è·å–ç­¾å‘å¯¹è±¡ * * @param token éœ€è¦è§£å¯†çš„token * @return è§£å¯†åè·å¾—çš„å¯¹è±¡ï¼Œå¤±è´¥è¿”å›null */ public static String getAudience(String token) { String audience; try { audience = JWT.decode(token).getAudience().get(0); } catch (JWTDecodeException exception) { log.error(\u0026#34;è¾“å…¥çš„tokenæ— æ³•è§£æ\u0026#34;); return null; } return audience; } /** * éªŒè¯tokenæ˜¯å¦æ­£ç¡® * * @param token éœ€è¦éªŒè¯çš„token * @return é€šè¿‡éªŒè¯è¿”å›trueï¼Œåä¹‹æŠ›å‡ºå¼‚å¸¸ */ public static Boolean verifyToken(String token) throws JWTVerificationException { JWTVerifier verifier = JWT.require(ALGORITHM).build(); verifier.verify(token); return true; } } é…ç½®Shiro è¿™é‡Œçš„ShiroConfig.javaä¸ä¸€èˆ¬Shiroé¡¹ç›®çš„é…ç½®æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒï¼š\nç¦ç”¨Session ä½¿ç”¨è‡ªå®šä¹‰çš„jwtFilterè¿‡æ»¤å™¨ï¼Œç”¨æ¥æ‹¦æˆªå¹¶å¤„ç†æºå¸¦JWT tokençš„è¯·æ±‚ ä½¿ç”¨è‡ªå®šä¹‰çš„Realmè®¤è¯å™¨ï¼Œç”¨äºéªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨åŠæŸ¥è¯¢ç”¨æˆ·æƒé™ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 @Configuration public class ShiroConfig { @Autowired private MyRealm myRealm; @Bean public DefaultWebSecurityManager getDefaultWebSecurityManager() { DefaultWebSecurityManager manger = new DefaultWebSecurityManager(); manger.setRealm(myRealm); // å…³é—­shiroè‡ªå¸¦çš„session DefaultSubjectDAO subjectDAO = new DefaultSubjectDAO(); subjectDAO.setSessionStorageEvaluator(sessionStorageEvaluator()); manger.setSubjectDAO(subjectDAO); return manger; } @Bean public ShiroFilterFactoryBean getShiroFilterFactoryBean(DefaultWebSecurityManager manger) { ShiroFilterFactoryBean bean = new CustomShiroFilterFactoryBean(); bean.setSecurityManager(manger); Map\u0026lt;String, Filter\u0026gt; filterMap = new HashMap\u0026lt;\u0026gt;(); filterMap.put(\u0026#34;jwt\u0026#34;, getJwtFilter()); bean.setFilters(filterMap); Map\u0026lt;String, String\u0026gt; map = new LinkedHashMap\u0026lt;\u0026gt;(); //è®¾ç½®è¿‡æ»¤è§„åˆ™ï¼Œanonè¡¨ç¤ºæ— éœ€è®¤è¯ï¼Œå…¶ä½™çš„è¯·æ±‚éƒ½é€šè¿‡è‡ªå®šä¹‰çš„jwtè®¤è¯å™¨ map.put(\u0026#34;/\u0026#34;, \u0026#34;anon\u0026#34;); map.put(\u0026#34;/swagger-ui/**\u0026#34;, \u0026#34;anon\u0026#34;); map.put(\u0026#34;/v3/api-docs\u0026#34;, \u0026#34;anon\u0026#34;); map.put(\u0026#34;/swagger-resources/**\u0026#34;, \u0026#34;anon\u0026#34;); map.put(\u0026#34;/unauthorized/**\u0026#34;, \u0026#34;anon\u0026#34;); map.put(\u0026#34;/**\u0026#34;, \u0026#34;jwt\u0026#34;); bean.setFilterChainDefinitionMap(map); bean.setLoginUrl(\u0026#34;/login\u0026#34;); // è®¾ç½®æ— æƒé™æ—¶è·³è½¬çš„ url bean.setUnauthorizedUrl(\u0026#34;/unauthorized/æ— æƒé™\u0026#34;); return bean; } public JwtFilter getJwtFilter() { return new JwtFilter(); } /** * å¼€å¯æ³¨è§£ä»£ç† */ @Bean public AuthorizationAttributeSourceAdvisor authorizationAttributeSourceAdvisor(SecurityManager securityManager) { AuthorizationAttributeSourceAdvisor authorizationAttributeSourceAdvisor = new AuthorizationAttributeSourceAdvisor(); authorizationAttributeSourceAdvisor.setSecurityManager(securityManager); return authorizationAttributeSourceAdvisor; } /** * ç¦ç”¨session, ä¸ä¿å­˜ç”¨æˆ·ç™»å½•çŠ¶æ€ã€‚ä¿è¯æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°è®¤è¯ */ @Bean protected SessionStorageEvaluator sessionStorageEvaluator() { DefaultSessionStorageEvaluator sessionStorageEvaluator = new DefaultSessionStorageEvaluator(); sessionStorageEvaluator.setSessionStorageEnabled(false); return sessionStorageEvaluator; } } è‡ªå®šä¹‰Token ç”±äºä½¿ç”¨äº†JWTå½“tokenï¼Œè‡ªç„¶è¦å†™è‡ªå®šä¹‰çš„Token\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 public class JwtToken implements AuthenticationToken { private String token; public JwtToken(String token) { this.token = token; } @Override public Object getPrincipal() { return token; } @Override public Object getCredentials() { return token; } } è‡ªå®šä¹‰è¿‡æ»¤å™¨ ç”±äºä½¿ç”¨äº†JWTï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨shiroä¸­è‡ªå¸¦çš„è¿‡æ»¤å™¨ï¼Œè€Œæ˜¯è‡ªå®šä¹‰è‡ªå·±çš„è¿‡æ»¤å™¨ JWTFilterï¼ŒJWTFilter ç»§æ‰¿äº† BasicHttpAuthenticationFilterï¼Œå¹¶éƒ¨åˆ†åŸæ–¹æ³•è¿›è¡Œäº†é‡å†™\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 @Slf4j public class JwtFilter extends BasicHttpAuthenticationFilter { @Override protected boolean isAccessAllowed(ServletRequest request, ServletResponse response, Object mappedValue) { //åˆ¤æ–­è¯·æ±‚çš„è¯·æ±‚å¤´æ˜¯å¦å¸¦ä¸Š \u0026#34;Token\u0026#34; if (isLoginAttempt(request, response)) { //å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿›å…¥ executeLogin æ–¹æ³•æ‰§è¡Œç™»å…¥ï¼Œæ£€æŸ¥ token æ˜¯å¦æ­£ç¡® try { executeLogin(request, response); return true; } catch (Exception e) { //token é”™è¯¯ responseError(response, e.getMessage()); } } //å¦‚æœè¯·æ±‚å¤´ä¸å­˜åœ¨ Tokenï¼Œåˆ™å¯èƒ½æ˜¯æ‰§è¡Œç™»é™†æ“ä½œæˆ–è€…æ˜¯æ¸¸å®¢çŠ¶æ€è®¿é—®ï¼Œæ— éœ€æ£€æŸ¥ tokenï¼Œç›´æ¥è¿”å› true return true; } /** * åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æƒ³è¦ç™»å…¥ã€‚ * æ£€æµ‹ header é‡Œé¢æ˜¯å¦åŒ…å« Token å­—æ®µ */ @Override protected boolean isLoginAttempt(ServletRequest request, ServletResponse response) { HttpServletRequest req = (HttpServletRequest) request; String token = req.getHeader(\u0026#34;Token\u0026#34;); return token != null; } @Override protected boolean executeLogin(ServletRequest request, ServletResponse response) throws Exception { HttpServletRequest httpServletRequest = (HttpServletRequest) request; String token = httpServletRequest.getHeader(\u0026#34;Token\u0026#34;); JwtToken jwtToken = new JwtToken(token); // æäº¤ç»™realmè¿›è¡Œç™»å…¥ï¼Œå¦‚æœé”™è¯¯ä»–ä¼šæŠ›å‡ºå¼‚å¸¸å¹¶è¢«æ•è· getSubject(request, response).login(jwtToken); // å¦‚æœæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸åˆ™ä»£è¡¨ç™»å…¥æˆåŠŸï¼Œè¿”å›true return true; } /** * å°†éæ³•è¯·æ±‚è·³è½¬åˆ° /unauthorized/** */ private void responseError(ServletResponse response, String message) { try { HttpServletResponse httpServletResponse = (HttpServletResponse) response; //è®¾ç½®ç¼–ç ï¼Œå¦åˆ™ä¸­æ–‡å­—ç¬¦åœ¨é‡å®šå‘æ—¶ä¼šå˜ä¸ºç©ºå­—ç¬¦ä¸² message = URLEncoder.encode(message, \u0026#34;UTF-8\u0026#34;); //å…è®¸è·¨åŸŸè¯·æ±‚ httpServletResponse.setHeader(\u0026#34;Access-Control-Allow-Credentials\u0026#34;, \u0026#34;true\u0026#34;); httpServletResponse.setHeader(\u0026#34;Access-Control-Allow-Methods\u0026#34;, \u0026#34;GET, POST\u0026#34;); httpServletResponse.setHeader(\u0026#34;Access-Control-Allow-Origin\u0026#34;, \u0026#34;*\u0026#34;); httpServletResponse.setHeader(\u0026#34;Access-Control-Max-Age\u0026#34;, \u0026#34;3600\u0026#34;); httpServletResponse.sendRedirect(\u0026#34;/unauthorized/\u0026#34; + message); } catch (IOException e) { log.error(e.getMessage()); } } } è¯¥è¿‡æ»¤å™¨æœ‰è¿™å‡ å¤§æ­¥éª¤ï¼š\næ£€éªŒè¯·æ±‚å¤´æ˜¯å¦å¸¦æœ‰Token å¦‚æœå¸¦æœ‰ tokenï¼Œæ‰§è¡Œ shiro çš„ login() æ–¹æ³•ï¼Œå°† token æäº¤åˆ° Realm ä¸­è¿›è¡Œæ£€éªŒï¼›å¦‚æœæ²¡æœ‰ tokenï¼Œè¯´æ˜å½“å‰çŠ¶æ€ä¸ºæ¸¸å®¢çŠ¶æ€ï¼ˆæˆ–è€…å…¶ä»–ä¸€äº›ä¸éœ€è¦è¿›è¡Œè®¤è¯çš„æ¥å£ï¼‰ å¦‚æœåœ¨ token æ ¡éªŒçš„è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œå¦‚ token æ ¡éªŒå¤±è´¥ï¼Œé‚£ä¹ˆæˆ‘ä¼šå°†è¯¥è¯·æ±‚è§†ä¸ºè®¤è¯ä¸é€šè¿‡ï¼Œåˆ™é‡å®šå‘åˆ° /unauthorized/** è‡ªå®šä¹‰Realm è¿™é‡Œä¸»è¦æ˜¯è¿›è¡Œèº«ä»½è®¤è¯å’Œæƒé™è®¤è¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 @Component public class MyRealm extends AuthorizingRealm { @Autowired UserService userService; @Autowired RoleService roleService; @Autowired PermissionService permissionService; @Override public boolean supports(AuthenticationToken token) { return token instanceof JwtToken; } /** * æƒé™è®¤è¯ * åªæœ‰å½“éœ€è¦æ£€æµ‹ç”¨æˆ·æƒé™çš„æ—¶å€™æ‰ä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œä¾‹å¦‚checkRole,checkPermissionä¹‹ç±»çš„ */ @Override protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) { String userName = (String) principals.iterator().next(); Set\u0026lt;String\u0026gt; roles = roleService.getAllRoleByUserName(userName); Set\u0026lt;String\u0026gt; permissions = permissionService.getAllPermissionByUserName(userName); SimpleAuthorizationInfo info = new SimpleAuthorizationInfo(); info.setRoles(roles); info.setStringPermissions(permissions); return info; } /** * èº«ä»½è®¤è¯ */ @Override protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException { JwtToken jwtToken = (JwtToken) token; String jwtTokenPrincipal = (String) jwtToken.getPrincipal(); String userName = JwtUtil.getAudience(jwtTokenPrincipal); if (userName == null) { throw new AuthenticationException(\u0026#34;tokenè®¤è¯å¤±è´¥ï¼\u0026#34;); } try { JwtUtil.verifyToken(jwtTokenPrincipal); } catch (JWTDecodeException e) { throw new AuthenticationException(\u0026#34;ä¸æ˜¯æœ‰æ•ˆçš„JWTæ ¼å¼\u0026#34;); } catch (SignatureVerificationException e) { throw new AuthenticationException(\u0026#34;æ— æ•ˆçš„ç­¾å\u0026#34;); } catch (TokenExpiredException e) { throw new AuthenticationException(\u0026#34;tokenå·²è¿‡æœŸ\u0026#34;); } User user = userService.getUserByUserName(userName); if (user == null) { throw new AuthenticationException(\u0026#34;è¯¥ç”¨æˆ·ä¸å­˜åœ¨ï¼\u0026#34;); } return new SimpleAuthenticationInfo(userName, jwtTokenPrincipal, user.getUserId()); } } è¿™é‡Œæœ‰ä¸ªç»†èŠ‚ï¼Œåœ¨Controllerä¸­è¦æ±‚è¿›è¡Œèº«ä»½è®¤è¯æ—¶ï¼ŒShiroä¼šè‡ªåŠ¨æŠŠä¸Šé¢doGetAuthenticationInfoæ–¹æ³•ä¸­è¿”å›çš„Infoå­˜èµ·æ¥ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨Controllerä¸­è°ƒç”¨è¿™é‡Œé¢çš„å€¼äº†ã€‚\nuserNameå¯ä»¥é€šè¿‡(String) SecurityUtils.getSubject().getPrincipal()å–å‡ºæ¥\nuserIdå¯ä»¥é€šè¿‡SecurityUtils.getSubject().getPrincipals().getRealmNames().iterator().next()å–å‡ºæ¥ã€‚å½“ç„¶ï¼Œè¿™é‡Œæ ¹æ®Shiroçš„è®¾è®¡ï¼ŒSimpleAuthenticationInfoçš„ç¬¬ä¸‰ä¸ªæ„é€ å‚æ•°åº”è¯¥å¡«å…¥RealmNameï¼Œç”¨æ¥åŒºåˆ†ç”¨æˆ·è¯¥ä½¿ç”¨å“ªä¸€ä¸ªRealmè¿›è¡ŒéªŒè¯çš„ã€‚ä½†æˆ‘è¿™ä¸ªé¡¹ç›®å°±åªæœ‰ä¸€ä¸ªRealmï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå°±å·äº†ä¸ªæ‡’ï¼Œå°±æ²¡æŒ‰å®˜æ–¹æ ‡å‡†æ¥äº†ã€‚\nå¼‚å¸¸å¤„ç† ç¬¬ä¸€ä¸ªæ˜¯ä¸“é—¨å¤„ç†èº«ä»½è®¤è¯æ—¶çš„å¼‚å¸¸\n1 2 3 4 5 @ApiOperation(value = \u0026#34;æ¥æ”¶æœªæˆæƒé”™è¯¯\u0026#34;, notes = \u0026#34;è¿”å›é”™è¯¯ä¿¡æ¯\u0026#34;) @GetMapping(\u0026#34;/unauthorized/{message}\u0026#34;) public Result unauthorized(@PathVariable String message) { return new Result().setCode(233).setMessage(message); } ç¬¬äºŒä¸ªåˆ™æ˜¯å…¨å±€æ¥ç®¡Shiroçš„å¼‚å¸¸ï¼Œåœ¨å…¶ä¸­è¿›è¡Œå¤„ç†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 @RestControllerAdvice public class ExceptionController { /** * æ•æ‰shiroçš„å¼‚å¸¸ */ @ExceptionHandler(ShiroException.class) public Result handle401(ShiroException e) { Result result = new Result(); result.setCode(666); if(e instanceof UnauthenticatedException){ result.setMessage(\u0026#34;æ‚¨æ²¡æœ‰ç™»å½•ï¼\u0026#34;); }else if(e instanceof UnauthorizedException){ result.setMessage(\u0026#34;æ‚¨æ²¡æœ‰æƒé™è®¿é—®ï¼\u0026#34;); } else { result.setMessage(e.toString()); } return result; } } è§£å†³ä¸­æ–‡æŠ¥é”™ åœ¨Shiro1.7ç‰ˆæœ¬ä¹‹åå¢åŠ äº†urlæ ¡éªŒï¼Œå¦‚æœæœ‰ä¸­æ–‡å­—ç¬¦å°±ä¸é€šè¿‡ã€‚ç„¶è€Œæˆ‘ä»¬é¡¹ç›®é‡Œè¿”å›é”™è¯¯ä¿¡æ¯å°±æ˜¯é€šè¿‡urlæ¥å®ç°çš„ã€‚å‚è€ƒè¿™ç¯‡æ–‡ç« çŸ¥é“ï¼Œéœ€è¦è‡ªå·±é‡å†™ShiroFilterFactoryBeanæ¥å®ç°å…³é—­urlæ ¡éªŒ\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class CustomShiroFilterFactoryBean extends ShiroFilterFactoryBean { @Override protected FilterChainManager createFilterChainManager() { FilterChainManager manager = super.createFilterChainManager(); // URLæºå¸¦ä¸­æ–‡400ï¼ŒservletPathä¸­æ–‡æ ¡éªŒbug Map\u0026lt;String, Filter\u0026gt; filterMap = manager.getFilters(); Filter invalidRequestFilter = filterMap.get(DefaultFilter.invalidRequest.name()); if (invalidRequestFilter instanceof InvalidRequestFilter) { ((InvalidRequestFilter) invalidRequestFilter).setBlockNonAscii(false); } return manager; } } å¼€å§‹ä½¿ç”¨ èº«ä»½è®¤è¯åœ¨Controllerä¸Šæ·»åŠ @RequiresAuthentication è§’è‰²è®¤è¯åœ¨Controllerä¸Šæ·»åŠ @RequiresRoles(\u0026quot;xxx\u0026quot;) æƒé™è®¤è¯åœ¨Controllerä¸Šæ·»åŠ @RequiresPermissions(\u0026quot;xxx\u0026quot;) æµ‹è¯• æµ‹è¯•æ¥å£çš„ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 @GetMapping(\u0026#34;/test\u0026#34;) @ResponseBody public Result test() { return new Result().setCode(200).setMessage(\u0026#34;å½“ä½ çœ‹åˆ°è¿™æ®µè¯æ—¶ï¼Œè¯´æ˜æœåŠ¡æˆåŠŸè¿è¡Œäº†\u0026#34;); } @GetMapping(\u0026#34;/test2\u0026#34;) @ResponseBody @RequiresPermissions(\u0026#34;user:insert\u0026#34;) public Result test2() { return new Result().setCode(200).setMessage(\u0026#34;å½“ä½ çœ‹åˆ°è¿™æ®µè¯æ—¶ï¼Œè¯´æ˜ä½ å·²ç»é€šè¿‡äº†éªŒè¯\u0026#34;); } @GetMapping(\u0026#34;/test3\u0026#34;) @ResponseBody @RequiresPermissions(\u0026#34;noBody\u0026#34;) public Result test3() { return new Result().setCode(200).setMessage(\u0026#34;å½“ä½ çœ‹åˆ°è¿™æ®µè¯æ—¶ï¼Œè¯´æ˜è®¤è¯ç³»ç»Ÿå‡ºç°äº†é—®é¢˜\u0026#34;); } å‚è€ƒæ–‡ç«  æ•™ä½  Shiro + SpringBoot æ•´åˆ JWT Shiroæ­¥æ­¥ä¸ºè¥\u0026ndash;å¦‚ä½•ä¼˜é›…åœ°ä¸JWTé›†æˆ æ›´æ–°æ—¥å¿— 2021.11.7ï¼š\nå¢åŠ è§£å†³è·³è½¬æ—¶çš„è·¨åŸŸè¯·æ±‚ æ›´ç»†ç²’åº¦çš„å±•ç¤ºJWTé”™è¯¯åŸå›  å¢åŠ SecurityUtilsçš„ä½¿ç”¨ å¢åŠ æµ‹è¯•æ¥å£çš„ä»£ç  ","date":"2021-10-08T15:19:44+08:00","image":"https://lbqaq.top/p/shiro%E6%95%B4%E5%90%88jwt/92388693.webp","permalink":"https://lbqaq.top/p/shiro%E6%95%B4%E5%90%88jwt/","title":"shiroæ•´åˆJWT"},{"content":"æœ€è¿‘çœ‹äº†å¾ˆä¹…çš„Vueæ•™ç¨‹ï¼Œä¸ºäº†é¿å…ä¹‹åçš„é—å¿˜ï¼Œè¿˜æ˜¯åœä¸‹è„šæ­¥ï¼ŒèŠ±ç‚¹æ—¶é—´è®²ç¬”è®°å†™å‡ºæ¥å§ã€‚\nè¿™ç¯‡ç¬”è®°æ˜¯åŸºäºBç«™ä¸Šçš„å°šç¡…è°·Vue2.0+Vue3.0å…¨å¥—æ•™ç¨‹è€Œæˆï¼Œåœ¨æ­¤æ„Ÿè°¢æä¾›è¿™ä¹ˆä¼˜ç§€çš„å­¦ä¹ æ•™ç¨‹ã€‚\nVue2åŸºç¡€ æƒ³è¦å­¦å¥½Vueï¼Œé‚£è‚¯å®šè¿˜æ˜¯ä»Vue2å¼€å§‹å­¦èµ·ã€‚é‚£ä¹ˆè¿™ä¸€ç« ä¸»è¦æ˜¯Vue2ä¸­çš„åŸºç¡€å†…å®¹ï¼Œæ²¡æœ‰ä½¿ç”¨åˆ°è„šæ‰‹æ¶ã€‚\nåˆè¯†Vue æ¯å­¦ä¸€ä¸ªæ–°çš„è¯­è¨€ï¼ŒHelloWordæ˜¯å¿…ä¸å¯å°‘çš„ã€‚è¯ä¸å¤šè¯´ï¼Œä¸Šä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \u0026lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨ --\u0026gt; \u0026lt;div id=\u0026#34;demo\u0026#34;\u0026gt; \u0026lt;h1\u0026gt;Helloï¼Œ{{name.toUpperCase()}}ï¼Œ{{address}}\u0026lt;/h1\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; \u0026gt; Vue.config.productionTip = false //é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚ //åˆ›å»ºVueå®ä¾‹ new Vue({ el:\u0026#39;#demo\u0026#39;, //elç”¨äºæŒ‡å®šå½“å‰Vueå®ä¾‹ä¸ºå“ªä¸ªå®¹å™¨æœåŠ¡ï¼Œå€¼é€šå¸¸ä¸ºcssé€‰æ‹©å™¨å­—ç¬¦ä¸²ã€‚ data:{ //dataä¸­ç”¨äºå­˜å‚¨æ•°æ®ï¼Œæ•°æ®ä¾›elæ‰€æŒ‡å®šçš„å®¹å™¨å»ä½¿ç”¨ï¼Œå€¼æˆ‘ä»¬æš‚æ—¶å…ˆå†™æˆä¸€ä¸ªå¯¹è±¡ã€‚ name:\u0026#39;vue\u0026#39;, address:\u0026#39;åŒ—äº¬\u0026#39; } }) \u0026lt;/script\u0026gt; è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªåŸºç¡€çš„Vueç¨‹åºã€‚\n1.æƒ³è®©Vueå·¥ä½œï¼Œå°±å¿…é¡»åˆ›å»ºä¸€ä¸ªVueå®ä¾‹ï¼Œä¸”è¦ä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼›\n2.rootå®¹å™¨é‡Œçš„ä»£ç ä¾ç„¶ç¬¦åˆhtmlè§„èŒƒï¼Œåªä¸è¿‡æ··å…¥äº†ä¸€äº›ç‰¹æ®Šçš„Vueè¯­æ³•ï¼›\n3.rootå®¹å™¨é‡Œçš„ä»£ç è¢«ç§°ä¸ºã€Vueæ¨¡æ¿ã€‘ï¼›\n4.Vueå®ä¾‹å’Œå®¹å™¨æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼›\n5.çœŸå®å¼€å‘ä¸­åªæœ‰ä¸€ä¸ªVueå®ä¾‹ï¼Œå¹¶ä¸”ä¼šé…åˆç€ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼›\n6.{{xxx}}ä¸­çš„xxxè¦å†™jsè¡¨è¾¾å¼ï¼Œä¸”xxxå¯ä»¥è‡ªåŠ¨è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ï¼›\n7.ä¸€æ—¦dataä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆé¡µé¢ä¸­ç”¨åˆ°è¯¥æ•°æ®çš„åœ°æ–¹ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ï¼›\nVueæ¨¡æ¿è¯­æ³• Vueæ¨¡æ¿è¯­æ³•æœ‰2å¤§ç±»ï¼š\n1.æ’å€¼è¯­æ³•ï¼š\nâ€‹ åŠŸèƒ½ï¼šç”¨äºè§£ææ ‡ç­¾ä½“å†…å®¹ã€‚\nâ€‹ å†™æ³•ï¼š{{xxx}}ï¼Œxxxæ˜¯jsè¡¨è¾¾å¼ï¼Œä¸”å¯ä»¥ç›´æ¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ã€‚\n2.æŒ‡ä»¤è¯­æ³•ï¼š\nâ€‹ åŠŸèƒ½ï¼šç”¨äºè§£ææ ‡ç­¾ï¼ˆåŒ…æ‹¬ï¼šæ ‡ç­¾å±æ€§ã€æ ‡ç­¾ä½“å†…å®¹ã€ç»‘å®šäº‹ä»¶\u0026hellip;..ï¼‰ã€‚\nâ€‹ ä¸¾ä¾‹ï¼šv-bind:href=\u0026ldquo;xxx\u0026rdquo; æˆ– ç®€å†™ä¸º :href=\u0026ldquo;xxx\u0026rdquo;ï¼ŒxxxåŒæ ·è¦å†™jsè¡¨è¾¾å¼ï¼Œ\nâ€‹ ä¸”å¯ä»¥ç›´æ¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ã€‚\nâ€‹ å¤‡æ³¨ï¼šVueä¸­æœ‰å¾ˆå¤šçš„æŒ‡ä»¤ï¼Œä¸”å½¢å¼éƒ½æ˜¯ï¼šv-????ï¼Œæ­¤å¤„æˆ‘ä»¬åªæ˜¯æ‹¿v-bindä¸¾ä¸ªä¾‹å­ã€‚\nå…¶å®å¾ˆå¥½ç†è§£ï¼Œæƒ³è¦æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šçš„å†…å®¹å°±ä½¿ç”¨{{value}}è¿™æ ·çš„å†™æ³•ï¼Œè€Œv-bind:åˆ™æ˜¯ç”¨äºhtmlæ ‡ç­¾ä¸­çš„å±æ€§ç»‘å®šã€‚\næ•°æ®ç»‘å®š Vueä¸­æœ‰2ç§æ•°æ®ç»‘å®šçš„æ–¹å¼ï¼š\nâ€‹ 1.å•å‘ç»‘å®š(v-bind)ï¼šæ•°æ®åªèƒ½ä»dataæµå‘é¡µé¢ã€‚\nâ€‹ 2.åŒå‘ç»‘å®š(v-model)ï¼šæ•°æ®ä¸ä»…èƒ½ä»dataæµå‘é¡µé¢ï¼Œè¿˜å¯ä»¥ä»é¡µé¢æµå‘dataã€‚\nâ€‹ å¤‡æ³¨ï¼š\nâ€‹ 1.åŒå‘ç»‘å®šä¸€èˆ¬éƒ½åº”ç”¨åœ¨è¡¨å•ç±»å…ƒç´ ä¸Šï¼ˆå¦‚ï¼šinputã€selectç­‰ï¼‰\nâ€‹ 2.v-model:value å¯ä»¥ç®€å†™ä¸º v-modelï¼Œå› ä¸ºv-modelé»˜è®¤æ”¶é›†çš„å°±æ˜¯valueå€¼ã€‚\n1 2 3 4 5 6 7 \u0026lt;!-- æ™®é€šå†™æ³• --\u0026gt; å•å‘æ•°æ®ç»‘å®šï¼š\u0026lt;input type=\u0026#34;text\u0026#34; v-bind:value=\u0026#34;name\u0026#34;\u0026gt;\u0026lt;br/\u0026gt; åŒå‘æ•°æ®ç»‘å®šï¼š\u0026lt;input type=\u0026#34;text\u0026#34; v-model:value=\u0026#34;name\u0026#34;\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;!-- ç®€å†™ --\u0026gt; å•å‘æ•°æ®ç»‘å®šï¼š\u0026lt;input type=\u0026#34;text\u0026#34; :value=\u0026#34;name\u0026#34;\u0026gt;\u0026lt;br/\u0026gt; åŒå‘æ•°æ®ç»‘å®šï¼š\u0026lt;input type=\u0026#34;text\u0026#34; v-model=\u0026#34;name\u0026#34;\u0026gt;\u0026lt;br/\u0026gt; elä¸dataçš„ä¸¤ç§å†™æ³• dataä¸elçš„2ç§å†™æ³•\nâ€‹ 1.elæœ‰2ç§å†™æ³•\nâ€‹ (1).new Vueæ—¶å€™é…ç½®elå±æ€§ã€‚\nâ€‹ (2).å…ˆåˆ›å»ºVueå®ä¾‹ï¼Œéšåå†é€šè¿‡vm.$mount(\u0026rsquo;#root\u0026rsquo;)æŒ‡å®šelçš„å€¼ã€‚\n1 2 3 4 5 6 7 const v = new Vue({ //el:\u0026#39;#root\u0026#39;, //ç¬¬ä¸€ç§å†™æ³• data:{ name:\u0026#39;Vue\u0026#39; } }) v.$mount(\u0026#39;#root\u0026#39;) //ç¬¬äºŒç§å†™æ³• â€‹ 2.dataæœ‰2ç§å†™æ³•\nâ€‹ (1).å¯¹è±¡å¼\nâ€‹ (2).å‡½æ•°å¼\nâ€‹ å¦‚ä½•é€‰æ‹©ï¼šç›®å‰å“ªç§å†™æ³•éƒ½å¯ä»¥ï¼Œä»¥åå­¦ä¹ åˆ°ç»„ä»¶æ—¶ï¼Œdataå¿…é¡»ä½¿ç”¨å‡½æ•°å¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 new Vue({ el:\u0026#39;#root\u0026#39;, //dataçš„ç¬¬ä¸€ç§å†™æ³•ï¼šå¯¹è±¡å¼ /* data:{ name:\u0026#39;Vue\u0026#39; } */ //dataçš„ç¬¬äºŒç§å†™æ³•ï¼šå‡½æ•°å¼ data(){ console.log(\u0026#39;@@@\u0026#39;,this) //æ­¤å¤„çš„thisæ˜¯Vueå®ä¾‹å¯¹è±¡ return{ name:\u0026#39;Vue\u0026#39; } } }) â€‹ 3.ä¸€ä¸ªé‡è¦çš„åŸåˆ™ï¼š\nâ€‹ ç”±Vueç®¡ç†çš„å‡½æ•°ï¼Œä¸€å®šä¸è¦å†™ç®­å¤´å‡½æ•°ï¼Œä¸€æ—¦å†™äº†ç®­å¤´å‡½æ•°ï¼Œthiså°±ä¸å†æ˜¯Vueå®ä¾‹äº†ã€‚\næ•°æ®ä»£ç† åœ¨è®²Vueä¸­çš„æ•°æ®ä»£ç†ä¹‹å‰ï¼Œå…ˆè®²ä¸€ä¸‹jsä¸­Object.definepropertyæ–¹æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 let number = 18 let person = { name:\u0026#39;å¼ ä¸‰\u0026#39;, sex:\u0026#39;ç”·\u0026#39;, } Object.defineProperty(person,\u0026#39;age\u0026#39;,{ // value:18, // enumerable:true, //æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥æšä¸¾ï¼Œé»˜è®¤å€¼æ˜¯false // writable:true, //æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ï¼Œé»˜è®¤å€¼æ˜¯false // configurable:true //æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼Œé»˜è®¤å€¼æ˜¯false //å½“æœ‰äººè¯»å–personçš„ageå±æ€§æ—¶ï¼Œgetå‡½æ•°(getter)å°±ä¼šè¢«è°ƒç”¨ï¼Œä¸”è¿”å›å€¼å°±æ˜¯ageçš„å€¼ get(){ console.log(\u0026#39;æœ‰äººè¯»å–ageå±æ€§äº†\u0026#39;) return number }, //å½“æœ‰äººä¿®æ”¹personçš„ageå±æ€§æ—¶ï¼Œsetå‡½æ•°(setter)å°±ä¼šè¢«è°ƒç”¨ï¼Œä¸”ä¼šæ”¶åˆ°ä¿®æ”¹çš„å…·ä½“å€¼ set(value){ console.log(\u0026#39;æœ‰äººä¿®æ”¹äº†ageå±æ€§ï¼Œä¸”å€¼æ˜¯\u0026#39;,value) number = value } }) // è¾“å‡ºpersonä¸­æ‰€æœ‰çš„key // console.log(Object.keys(person)) console.log(person) é€šè¿‡Object.definePropertyæ·»åŠ è¿›çš„å±æ€§ï¼Œé»˜è®¤æ˜¯ä¸å¯æšä¸¾ã€ä¸å¯ä¿®æ”¹ã€ä¸å¯åˆ é™¤çš„ï¼Œå¯ä»¥é€šè¿‡ä¸Šé¢çš„ä¸‰æ¡é…ç½®é¡¹ï¼Œè®©å…¶å’Œæ™®é€šçš„å±æ€§ä¸€æ ·ã€‚\næ‰€è°“æ•°æ®ä»£ç†ï¼Œå°±æ˜¯æŒ‡é€šè¿‡ä¸€ä¸ªå¯¹è±¡ä»£ç†å¯¹å¦ä¸€ä¸ªå¯¹è±¡ä¸­å±æ€§çš„æ“ä½œï¼ˆè¯»/å†™ï¼‰ã€‚\n1.Vueä¸­çš„æ•°æ®ä»£ç†ï¼š\nâ€‹ é€šè¿‡vmå¯¹è±¡æ¥ä»£ç†dataå¯¹è±¡ä¸­å±æ€§çš„æ“ä½œï¼ˆè¯»/å†™ï¼‰\n2.Vueä¸­æ•°æ®ä»£ç†çš„å¥½å¤„ï¼š\nâ€‹ æ›´åŠ æ–¹ä¾¿çš„æ“ä½œdataä¸­çš„æ•°æ®\n3.åŸºæœ¬åŸç†ï¼š\nâ€‹ é€šè¿‡Object.defineProperty()æŠŠdataå¯¹è±¡ä¸­æ‰€æœ‰å±æ€§æ·»åŠ åˆ°vmä¸Šã€‚\nâ€‹ ä¸ºæ¯ä¸€ä¸ªæ·»åŠ åˆ°vmä¸Šçš„å±æ€§ï¼Œéƒ½æŒ‡å®šä¸€ä¸ªgetter/setterã€‚\nâ€‹ åœ¨getter/setterå†…éƒ¨å»æ“ä½œï¼ˆè¯»/å†™ï¼‰dataä¸­å¯¹åº”çš„å±æ€§ã€‚\n1 2 3 4 5 6 7 const vm = new Vue({ el:\u0026#39;#root\u0026#39;, data:{ name:\u0026#39;Vue\u0026#39;, password:123 } }) é€šè¿‡åœ¨æ§åˆ¶å°æŸ¥çœ‹vmï¼Œå¯ä»¥å‘ç°dataä¸­çš„æ•°æ®éƒ½é€šè¿‡æ•°æ®ä»£ç†åœ¨vmèº«ä¸Šäº†\näº‹ä»¶å¤„ç† äº‹ä»¶çš„åŸºæœ¬ä½¿ç”¨ï¼š\nâ€‹ 1.ä½¿ç”¨v-on:xxx æˆ– @xxx ç»‘å®šäº‹ä»¶ï¼Œå…¶ä¸­xxxæ˜¯äº‹ä»¶åï¼›\nâ€‹ 2.äº‹ä»¶çš„å›è°ƒéœ€è¦é…ç½®åœ¨methodså¯¹è±¡ä¸­ï¼Œæœ€ç»ˆä¼šåœ¨vmä¸Šï¼›\nâ€‹ 3.methodsä¸­é…ç½®çš„å‡½æ•°ï¼Œä¸è¦ç”¨ç®­å¤´å‡½æ•°ï¼å¦åˆ™thiså°±ä¸æ˜¯vmäº†ï¼›\nâ€‹ 4.methodsä¸­é…ç½®çš„å‡½æ•°ï¼Œéƒ½æ˜¯è¢«Vueæ‰€ç®¡ç†çš„å‡½æ•°ï¼Œthisçš„æŒ‡å‘æ˜¯vm æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼›\nâ€‹ 5.@click=\u0026ldquo;demo\u0026rdquo; å’Œ @click=\u0026ldquo;demo($event)\u0026rdquo; æ•ˆæœä¸€è‡´ï¼Œä½†åè€…å¯ä»¥ä¼ å‚ï¼›\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 \u0026lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--\u0026gt; \u0026lt;div id=\u0026#34;root\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;Hello,{{name}}\u0026lt;/h2\u0026gt; \u0026lt;!-- \u0026lt;button v-on:click=\u0026#34;showInfo\u0026#34;\u0026gt;ç‚¹æˆ‘æç¤ºä¿¡æ¯\u0026lt;/button\u0026gt; --\u0026gt; \u0026lt;button @click=\u0026#34;showInfo1\u0026#34;\u0026gt;ç‚¹æˆ‘æç¤ºä¿¡æ¯1ï¼ˆä¸ä¼ å‚ï¼‰\u0026lt;/button\u0026gt; \u0026lt;button @click=\u0026#34;showInfo2($event,66)\u0026#34;\u0026gt;ç‚¹æˆ‘æç¤ºä¿¡æ¯2ï¼ˆä¼ å‚ï¼‰\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; const vm = new Vue({ el:\u0026#39;#root\u0026#39;, data:{ name:\u0026#39;Vue\u0026#39;, }, methods:{ showInfo1(event){ // console.log(event.target.innerText) // console.log(this) //æ­¤å¤„çš„thisæ˜¯vm alert(\u0026#39;åŒå­¦ä½ å¥½ï¼\u0026#39;) }, showInfo2(event,number){ console.log(event,number) // console.log(event.target.innerText) // console.log(this) //æ­¤å¤„çš„thisæ˜¯vm alert(\u0026#39;åŒå­¦ä½ å¥½ï¼ï¼\u0026#39;) } } }) \u0026lt;/script\u0026gt; Vueä¸­çš„äº‹ä»¶ä¿®é¥°ç¬¦ï¼š\nâ€‹ 1.preventï¼šé˜»æ­¢é»˜è®¤äº‹ä»¶ï¼ˆå¸¸ç”¨ï¼‰ï¼›\nâ€‹ 2.stopï¼šé˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ˆå¸¸ç”¨ï¼‰ï¼›\nâ€‹ 3.onceï¼šäº‹ä»¶åªè§¦å‘ä¸€æ¬¡ï¼ˆå¸¸ç”¨ï¼‰ï¼›\nâ€‹ 4.captureï¼šä½¿ç”¨äº‹ä»¶çš„æ•è·æ¨¡å¼ï¼›\nâ€‹ 5.selfï¼šåªæœ‰event.targetæ˜¯å½“å‰æ“ä½œçš„å…ƒç´ æ—¶æ‰è§¦å‘äº‹ä»¶ï¼›\nâ€‹ 6.passiveï¼šäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…äº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯•ï¼›\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!-- é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼ˆå¸¸ç”¨ï¼‰ --\u0026gt; \u0026lt;a href=\u0026#34;http://www.baidu.com\u0026#34; @click.prevent=\u0026#34;showInfo\u0026#34;\u0026gt;ç‚¹æˆ‘æç¤ºä¿¡æ¯\u0026lt;/a\u0026gt; \u0026lt;!-- é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ˆå¸¸ç”¨ï¼‰ --\u0026gt; \u0026lt;div class=\u0026#34;demo1\u0026#34; @click=\u0026#34;showInfo\u0026#34;\u0026gt; \u0026lt;button @click.stop=\u0026#34;showInfo\u0026#34;\u0026gt;ç‚¹æˆ‘æç¤ºä¿¡æ¯\u0026lt;/button\u0026gt; \u0026lt;!-- ä¿®é¥°ç¬¦å¯ä»¥è¿ç»­å†™ --\u0026gt; \u0026lt;!-- \u0026lt;a href=\u0026#34;http://www.baidu.com\u0026#34; @click.prevent.stop=\u0026#34;showInfo\u0026#34;\u0026gt;ç‚¹æˆ‘æç¤ºä¿¡æ¯\u0026lt;/a\u0026gt; --\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ï¼ˆå¸¸ç”¨ï¼‰ --\u0026gt; \u0026lt;button @click.once=\u0026#34;showInfo\u0026#34;\u0026gt;ç‚¹æˆ‘æç¤ºä¿¡æ¯\u0026lt;/button\u0026gt; 1.Vueä¸­å¸¸ç”¨çš„æŒ‰é”®åˆ«åï¼š\nâ€‹ å›è½¦ =\u0026gt; enter\nâ€‹ åˆ é™¤ =\u0026gt; delete (æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®)\nâ€‹ é€€å‡º =\u0026gt; esc\nâ€‹ ç©ºæ ¼ =\u0026gt; space\nâ€‹ æ¢è¡Œ =\u0026gt; tab (ç‰¹æ®Šï¼Œå¿…é¡»é…åˆkeydownå»ä½¿ç”¨)\nâ€‹ ä¸Š =\u0026gt; up\nâ€‹ ä¸‹ =\u0026gt; down\nâ€‹ å·¦ =\u0026gt; left\nâ€‹ å³ =\u0026gt; right\n2.Vueæœªæä¾›åˆ«åçš„æŒ‰é”®ï¼Œå¯ä»¥ä½¿ç”¨æŒ‰é”®åŸå§‹çš„keyå€¼å»ç»‘å®šï¼Œä½†æ³¨æ„è¦è½¬ä¸ºkebab-caseï¼ˆçŸ­æ¨ªçº¿å‘½åï¼‰\n3.ç³»ç»Ÿä¿®é¥°é”®ï¼ˆç”¨æ³•ç‰¹æ®Šï¼‰ï¼šctrlã€altã€shiftã€meta\nâ€‹ (1).é…åˆkeyupä½¿ç”¨ï¼šæŒ‰ä¸‹ä¿®é¥°é”®çš„åŒæ—¶ï¼Œå†æŒ‰ä¸‹å…¶ä»–é”®ï¼Œéšåé‡Šæ”¾å…¶ä»–é”®ï¼Œäº‹ä»¶æ‰è¢«è§¦å‘ã€‚\nâ€‹ (2).é…åˆkeydownä½¿ç”¨ï¼šæ­£å¸¸è§¦å‘äº‹ä»¶ã€‚\n4.ä¹Ÿå¯ä»¥ä½¿ç”¨keyCodeå»æŒ‡å®šå…·ä½“çš„æŒ‰é”®ï¼ˆä¸æ¨èï¼‰\n5.Vue.config.keyCodes.è‡ªå®šä¹‰é”®å = é”®ç ï¼Œå¯ä»¥å»å®šåˆ¶æŒ‰é”®åˆ«å\nä¸€èˆ¬éƒ½æ˜¯@keydown.xxxæˆ–è€…@keyup.xxxæ¥ç»‘å®šæŒ‰é”®\nè®¡ç®—å±æ€§ è®¡ç®—å±æ€§ï¼š\nâ€‹ 1.å®šä¹‰ï¼šè¦ç”¨çš„å±æ€§ä¸å­˜åœ¨ï¼Œè¦é€šè¿‡å·²æœ‰å±æ€§è®¡ç®—å¾—æ¥ã€‚\nâ€‹ 2.åŸç†ï¼šåº•å±‚å€ŸåŠ©äº†Objcet.definepropertyæ–¹æ³•æä¾›çš„getterå’Œsetterã€‚\nâ€‹ 3.getå‡½æ•°ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Ÿ\nâ€‹ (1).åˆæ¬¡è¯»å–æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚\nâ€‹ (2).å½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ä¼šè¢«å†æ¬¡è°ƒç”¨ã€‚\nâ€‹ 4.ä¼˜åŠ¿ï¼šä¸methodså®ç°ç›¸æ¯”ï¼Œå†…éƒ¨æœ‰ç¼“å­˜æœºåˆ¶ï¼ˆå¤ç”¨ï¼‰ï¼Œæ•ˆç‡æ›´é«˜ï¼Œè°ƒè¯•æ–¹ä¾¿ã€‚\nâ€‹ 5.å¤‡æ³¨ï¼š\nâ€‹ 1.è®¡ç®—å±æ€§æœ€ç»ˆä¼šå‡ºç°åœ¨vmä¸Šï¼Œç›´æ¥è¯»å–ä½¿ç”¨å³å¯ã€‚\nâ€‹ 2.å¦‚æœè®¡ç®—å±æ€§è¦è¢«ä¿®æ”¹ï¼Œé‚£å¿…é¡»å†™setå‡½æ•°å»å“åº”ä¿®æ”¹ï¼Œä¸”setä¸­è¦å¼•èµ·è®¡ç®—æ—¶ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 const vm = new Vue({ el:\u0026#39;#root\u0026#39;, data:{ firstName:\u0026#39;å¼ \u0026#39;, lastName:\u0026#39;ä¸‰\u0026#39;, x:\u0026#39;ä½ å¥½\u0026#39; }, computed:{ fullName:{ //getæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå½“æœ‰äººè¯»å–fullNameæ—¶ï¼Œgetå°±ä¼šè¢«è°ƒç”¨ï¼Œä¸”è¿”å›å€¼å°±ä½œä¸ºfullNameçš„å€¼ //getä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿ1.åˆæ¬¡è¯»å–fullNameæ—¶ã€‚2.æ‰€ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ã€‚ get(){ console.log(\u0026#39;getè¢«è°ƒç”¨äº†\u0026#39;) // console.log(this) //æ­¤å¤„çš„thisæ˜¯vm return this.firstName + \u0026#39;-\u0026#39; + this.lastName }, //setä»€ä¹ˆæ—¶å€™è°ƒç”¨? å½“fullNameè¢«ä¿®æ”¹æ—¶ã€‚ set(value){ console.log(\u0026#39;set\u0026#39;,value) const arr = value.split(\u0026#39;-\u0026#39;) this.firstName = arr[0] this.lastName = arr[1] } } } }) è®¡ç®—å±æ€§è°ƒç”¨å°±å’Œæ™®é€šå±æ€§çš„è°ƒç”¨ä¸€æ ·ï¼Œç”¨{{key}}å°±è¡Œäº†ã€‚\nå½“æˆ‘ä»¬ä¸éœ€è¦è®¡ç®—å±æ€§çš„setæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç®€å†™æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 const vm = new Vue({ el:\u0026#39;#root\u0026#39;, data:{ firstName:\u0026#39;å¼ \u0026#39;, lastName:\u0026#39;ä¸‰\u0026#39;, }, computed:{ //ç®€å†™ fullName(){ console.log(\u0026#39;getè¢«è°ƒç”¨äº†\u0026#39;) return this.firstName + \u0026#39;-\u0026#39; + this.lastName } } }) ç›‘è§†å±æ€§ ç›‘è§†å±æ€§watchï¼š\n1.å½“è¢«ç›‘è§†çš„å±æ€§å˜åŒ–æ—¶, å›è°ƒå‡½æ•°è‡ªåŠ¨è°ƒç”¨, è¿›è¡Œç›¸å…³æ“ä½œ\n2.ç›‘è§†çš„å±æ€§å¿…é¡»å­˜åœ¨ï¼Œæ‰èƒ½è¿›è¡Œç›‘è§†ï¼ï¼\n3.ç›‘è§†çš„ä¸¤ç§å†™æ³•ï¼š\nâ€‹ (1).new Vueæ—¶ä¼ å…¥watché…ç½®\nâ€‹ (2).é€šè¿‡vm.$watchç›‘è§†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 \u0026lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--\u0026gt; \u0026lt;div id=\u0026#34;root\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;ä»Šå¤©å¤©æ°”å¾ˆ{{info}}\u0026lt;/h2\u0026gt; \u0026lt;button @click=\u0026#34;changeWeather\u0026#34;\u0026gt;åˆ‡æ¢å¤©æ°”\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; const vm = new Vue({ el:\u0026#39;#root\u0026#39;, data:{ isHot:true, }, computed:{ info(){ return this.isHot ? \u0026#39;ç‚çƒ­\u0026#39; : \u0026#39;å‡‰çˆ½\u0026#39; } }, methods: { changeWeather(){ this.isHot = !this.isHot } }, /* watch:{ isHot:{ immediate:true, //åˆå§‹åŒ–æ—¶è®©handlerè°ƒç”¨ä¸€ä¸‹ //handlerä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿå½“isHotå‘ç”Ÿæ”¹å˜æ—¶ã€‚ handler(newValue,oldValue){ console.log(\u0026#39;isHotè¢«ä¿®æ”¹äº†\u0026#39;,newValue,oldValue) } } } */ }) vm.$watch(\u0026#39;isHot\u0026#39;,{ immediate:true, //åˆå§‹åŒ–æ—¶è®©handlerè°ƒç”¨ä¸€ä¸‹ //handlerä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿå½“isHotå‘ç”Ÿæ”¹å˜æ—¶ã€‚ handler(newValue,oldValue){ console.log(\u0026#39;isHotè¢«ä¿®æ”¹äº†\u0026#39;,newValue,oldValue) } }) \u0026lt;/script\u0026gt; æ·±åº¦ç›‘è§†ï¼š\nâ€‹ (1).Vueä¸­çš„watché»˜è®¤ä¸ç›‘æµ‹å¯¹è±¡å†…éƒ¨å€¼çš„æ”¹å˜ï¼ˆä¸€å±‚ï¼‰ã€‚\nâ€‹ (2).é…ç½®deep:trueå¯ä»¥ç›‘æµ‹å¯¹è±¡å†…éƒ¨å€¼æ”¹å˜ï¼ˆå¤šå±‚ï¼‰ã€‚\nå¤‡æ³¨ï¼š\nâ€‹ (1).Vueè‡ªèº«å¯ä»¥ç›‘æµ‹å¯¹è±¡å†…éƒ¨å€¼çš„æ”¹å˜ï¼Œä½†Vueæä¾›çš„watché»˜è®¤ä¸å¯ä»¥ï¼\nâ€‹ (2).ä½¿ç”¨watchæ—¶æ ¹æ®æ•°æ®çš„å…·ä½“ç»“æ„ï¼Œå†³å®šæ˜¯å¦é‡‡ç”¨æ·±åº¦ç›‘è§†ã€‚\nè®¡ç®—å±æ€§ä¹ŸåŒæ ·å¯ä»¥ç®€å†™ï¼š\n1 2 3 4 5 6 watch:{ //ç®€å†™ isHot(newValue,oldValue){ console.log(\u0026#39;isHotè¢«ä¿®æ”¹äº†\u0026#39;,newValue,oldValue,this) } } computedå’Œwatchä¹‹é—´çš„åŒºåˆ«ï¼š\nâ€‹ 1.computedèƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œwatchéƒ½å¯ä»¥å®Œæˆã€‚\nâ€‹ 2.watchèƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œcomputedä¸ä¸€å®šèƒ½å®Œæˆï¼Œä¾‹å¦‚ï¼šwatchå¯ä»¥è¿›è¡Œå¼‚æ­¥æ“ä½œã€‚\nä¸¤ä¸ªé‡è¦çš„å°åŸåˆ™ï¼š\nâ€‹ 1.æ‰€è¢«Vueç®¡ç†çš„å‡½æ•°ï¼Œæœ€å¥½å†™æˆæ™®é€šå‡½æ•°ï¼Œè¿™æ ·thisçš„æŒ‡å‘æ‰æ˜¯vm æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚\nâ€‹ 2.æ‰€æœ‰ä¸è¢«Vueæ‰€ç®¡ç†çš„å‡½æ•°ï¼ˆå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°ã€ajaxçš„å›è°ƒå‡½æ•°ç­‰ã€Promiseçš„å›è°ƒå‡½æ•°ï¼‰ï¼Œæœ€å¥½å†™æˆç®­å¤´å‡½æ•°ï¼Œ\nâ€‹ è¿™æ ·thisçš„æŒ‡å‘æ‰æ˜¯vm æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚\nç»‘å®šæ ·å¼ ç»‘å®šæ ·å¼ï¼š\nclassæ ·å¼\nå†™æ³•:class=\u0026ldquo;xxx\u0026rdquo; xxxå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ã€‚\nå­—ç¬¦ä¸²å†™æ³•é€‚ç”¨äºï¼šç±»åä¸ç¡®å®šï¼Œè¦åŠ¨æ€è·å–ã€‚\nå¯¹è±¡å†™æ³•é€‚ç”¨äºï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ä¸ç¡®å®šï¼Œåå­—ä¹Ÿä¸ç¡®å®šã€‚\næ•°ç»„å†™æ³•é€‚ç”¨äºï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ç¡®å®šï¼Œåå­—ä¹Ÿç¡®å®šï¼Œä½†ä¸ç¡®å®šç”¨ä¸ç”¨ã€‚\nstyleæ ·å¼\n:style=\u0026quot;{fontSize: xxx}\u0026ldquo;å…¶ä¸­xxxæ˜¯åŠ¨æ€å€¼ã€‚\n:style=\u0026quot;[a,b]\u0026ldquo;å…¶ä¸­aã€bæ˜¯æ ·å¼å¯¹è±¡ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 \u0026lt;div id=\u0026#34;root\u0026#34;\u0026gt; \u0026lt;!-- ç»‘å®šclassæ ·å¼--å­—ç¬¦ä¸²å†™æ³•ï¼Œé€‚ç”¨äºï¼šæ ·å¼çš„ç±»åä¸ç¡®å®šï¼Œéœ€è¦åŠ¨æ€æŒ‡å®š --\u0026gt; \u0026lt;div class=\u0026#34;basic\u0026#34; :class=\u0026#34;mood\u0026#34; @click=\u0026#34;changeMood\u0026#34;\u0026gt;{{name}}\u0026lt;/div\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;!-- ç»‘å®šclassæ ·å¼--æ•°ç»„å†™æ³•ï¼Œé€‚ç”¨äºï¼šè¦ç»‘å®šçš„æ ·å¼ä¸ªæ•°ä¸ç¡®å®šã€åå­—ä¹Ÿä¸ç¡®å®š --\u0026gt; \u0026lt;div class=\u0026#34;basic\u0026#34; :class=\u0026#34;classArr\u0026#34;\u0026gt;{{name}}\u0026lt;/div\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;!-- ç»‘å®šclassæ ·å¼--å¯¹è±¡å†™æ³•ï¼Œé€‚ç”¨äºï¼šè¦ç»‘å®šçš„æ ·å¼ä¸ªæ•°ç¡®å®šã€åå­—ä¹Ÿç¡®å®šï¼Œä½†è¦åŠ¨æ€å†³å®šç”¨ä¸ç”¨ --\u0026gt; \u0026lt;div class=\u0026#34;basic\u0026#34; :class=\u0026#34;classObj\u0026#34;\u0026gt;{{name}}\u0026lt;/div\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;!-- ç»‘å®šstyleæ ·å¼--å¯¹è±¡å†™æ³• --\u0026gt; \u0026lt;div class=\u0026#34;basic\u0026#34; :style=\u0026#34;styleObj\u0026#34;\u0026gt;{{name}}\u0026lt;/div\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;!-- ç»‘å®šstyleæ ·å¼--æ•°ç»„å†™æ³• --\u0026gt; \u0026lt;div class=\u0026#34;basic\u0026#34; :style=\u0026#34;styleArr\u0026#34;\u0026gt;{{name}}\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; Vue.config.productionTip = false const vm = new Vue({ el:\u0026#39;#root\u0026#39;, data:{ name:\u0026#39;å°šç¡…è°·\u0026#39;, mood:\u0026#39;normal\u0026#39;, classArr:[\u0026#39;atguigu1\u0026#39;,\u0026#39;atguigu2\u0026#39;,\u0026#39;atguigu3\u0026#39;], classObj:{ atguigu1:false, atguigu2:false, }, styleObj:{ fontSize: \u0026#39;40px\u0026#39;, color:\u0026#39;red\u0026#39;, }, styleObj2:{ backgroundColor:\u0026#39;orange\u0026#39; }, styleArr:[ { fontSize: \u0026#39;40px\u0026#39;, color:\u0026#39;blue\u0026#39;, }, { backgroundColor:\u0026#39;gray\u0026#39; } ] }, methods: { changeMood(){ const arr = [\u0026#39;happy\u0026#39;,\u0026#39;sad\u0026#39;,\u0026#39;normal\u0026#39;] const index = Math.floor(Math.random()*3) this.mood = arr[index] } }, }) \u0026lt;/script\u0026gt; æ¡ä»¶æ¸²æŸ“ æ¡ä»¶æ¸²æŸ“ï¼š\nâ€‹ 1.v-if\nâ€‹ å†™æ³•ï¼š\nâ€‹ (1).v-if=\u0026ldquo;è¡¨è¾¾å¼\u0026rdquo;\nâ€‹ (2).v-else-if=\u0026ldquo;è¡¨è¾¾å¼\u0026rdquo;\nâ€‹ (3).v-else=\u0026ldquo;è¡¨è¾¾å¼\u0026rdquo;\nâ€‹ é€‚ç”¨äºï¼šåˆ‡æ¢é¢‘ç‡è¾ƒä½çš„åœºæ™¯ã€‚\nâ€‹ ç‰¹ç‚¹ï¼šä¸å±•ç¤ºçš„DOMå…ƒç´ ç›´æ¥è¢«ç§»é™¤ã€‚\nâ€‹ æ³¨æ„ï¼šv-ifå¯ä»¥å’Œ:v-else-ifã€v-elseä¸€èµ·ä½¿ç”¨ï¼Œä½†è¦æ±‚ç»“æ„ä¸èƒ½è¢«â€œæ‰“æ–­â€ã€‚\nâ€‹ 2.v-show\nâ€‹ å†™æ³•ï¼šv-show=\u0026ldquo;è¡¨è¾¾å¼\u0026rdquo;\nâ€‹ é€‚ç”¨äºï¼šåˆ‡æ¢é¢‘ç‡è¾ƒé«˜çš„åœºæ™¯ã€‚\nâ€‹ ç‰¹ç‚¹ï¼šä¸å±•ç¤ºçš„DOMå…ƒç´ æœªè¢«ç§»é™¤ï¼Œä»…ä»…æ˜¯ä½¿ç”¨æ ·å¼éšè—æ‰\nâ€‹ 3.å¤‡æ³¨ï¼šä½¿ç”¨v-ifçš„æ—¶ï¼Œå…ƒç´ å¯èƒ½æ— æ³•è·å–åˆ°ï¼Œè€Œä½¿ç”¨v-showä¸€å®šå¯ä»¥è·å–åˆ°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 \u0026lt;!-- ä½¿ç”¨v-showåšæ¡ä»¶æ¸²æŸ“ --\u0026gt; \u0026lt;h2 v-show=\u0026#34;false\u0026#34;\u0026gt;æ¬¢è¿æ¥åˆ°{{name}}\u0026lt;/h2\u0026gt; \u0026lt;h2 v-show=\u0026#34;1 === 1\u0026#34;\u0026gt;æ¬¢è¿æ¥åˆ°{{name}}\u0026lt;/h2\u0026gt; \u0026lt;!-- ä½¿ç”¨v-ifåšæ¡ä»¶æ¸²æŸ“ --\u0026gt; \u0026lt;h2 v-if=\u0026#34;1 === 1\u0026#34;\u0026gt;æ¬¢è¿æ¥åˆ°{{name}}\u0026lt;/h2\u0026gt; \u0026lt;h2 v-if=\u0026#34;false\u0026#34;\u0026gt;æ¬¢è¿æ¥åˆ°{{name}}\u0026lt;/h2\u0026gt; \u0026lt;!-- v-elseå’Œv-else-if --\u0026gt; \u0026lt;div v-if=\u0026#34;n === 1\u0026#34;\u0026gt;Angular\u0026lt;/div\u0026gt; \u0026lt;div v-else-if=\u0026#34;n === 2\u0026#34;\u0026gt;React\u0026lt;/div\u0026gt; \u0026lt;div v-else-if=\u0026#34;n === 3\u0026#34;\u0026gt;Vue\u0026lt;/div\u0026gt; \u0026lt;div v-else\u0026gt;å“ˆå“ˆ\u0026lt;/div\u0026gt; \u0026lt;!-- v-ifä¸templateçš„é…åˆä½¿ç”¨ --\u0026gt; \u0026lt;template v-if=\u0026#34;n === 1\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;ä½ å¥½\u0026lt;/h2\u0026gt; \u0026lt;h2\u0026gt;å°šç¡…è°·\u0026lt;/h2\u0026gt; \u0026lt;h2\u0026gt;åŒ—äº¬\u0026lt;/h2\u0026gt; \u0026lt;/template\u0026gt; åˆ—è¡¨æ¸²æŸ“ åŸºæœ¬åˆ—è¡¨ v-foræŒ‡ä»¤:\nâ€‹ 1.ç”¨äºå±•ç¤ºåˆ—è¡¨æ•°æ®\nâ€‹ 2.è¯­æ³•ï¼šv-for=\u0026quot;(item, index) in xxx\u0026rdquo; :key=\u0026ldquo;yyy\u0026rdquo;\nâ€‹ 3.å¯éå†ï¼šæ•°ç»„ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ï¼ˆç”¨çš„å¾ˆå°‘ï¼‰ã€æŒ‡å®šæ¬¡æ•°ï¼ˆç”¨çš„å¾ˆå°‘ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 \u0026lt;!-- éå†æ•°ç»„ --\u0026gt; \u0026lt;h2\u0026gt;äººå‘˜åˆ—è¡¨ï¼ˆéå†æ•°ç»„ï¼‰\u0026lt;/h2\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li v-for=\u0026#34;(p,index) of persons\u0026#34; :key=\u0026#34;index\u0026#34;\u0026gt; {{p.name}}-{{p.age}} \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;!-- éå†å¯¹è±¡ --\u0026gt; \u0026lt;h2\u0026gt;æ±½è½¦ä¿¡æ¯ï¼ˆéå†å¯¹è±¡ï¼‰\u0026lt;/h2\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li v-for=\u0026#34;(value,k) of car\u0026#34; :key=\u0026#34;k\u0026#34;\u0026gt; {{k}}-{{value}} \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;!-- éå†å­—ç¬¦ä¸² --\u0026gt; \u0026lt;h2\u0026gt;æµ‹è¯•éå†å­—ç¬¦ä¸²ï¼ˆç”¨å¾—å°‘ï¼‰\u0026lt;/h2\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li v-for=\u0026#34;(char,index) of str\u0026#34; :key=\u0026#34;index\u0026#34;\u0026gt; {{char}}-{{index}} \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;!-- éå†æŒ‡å®šæ¬¡æ•° --\u0026gt; \u0026lt;h2\u0026gt;æµ‹è¯•éå†æŒ‡å®šæ¬¡æ•°ï¼ˆç”¨å¾—å°‘ï¼‰\u0026lt;/h2\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li v-for=\u0026#34;(number,index) of 5\u0026#34; :key=\u0026#34;index\u0026#34;\u0026gt; {{index}}-{{number}} \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;script\u0026gt; new Vue({ el:\u0026#39;#root\u0026#39;, data:{ persons:[ {id:\u0026#39;001\u0026#39;,name:\u0026#39;å¼ ä¸‰\u0026#39;,age:18}, {id:\u0026#39;002\u0026#39;,name:\u0026#39;æå››\u0026#39;,age:19}, {id:\u0026#39;003\u0026#39;,name:\u0026#39;ç‹äº”\u0026#39;,age:20} ], car:{ name:\u0026#39;å¥¥è¿ªA8\u0026#39;, price:\u0026#39;70ä¸‡\u0026#39;, color:\u0026#39;é»‘è‰²\u0026#39; }, str:\u0026#39;hello\u0026#39; } }) \u0026lt;/script\u0026gt; é¢è¯•é¢˜ï¼šreactã€vueä¸­çš„keyæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿï¼ˆkeyçš„å†…éƒ¨åŸç†ï¼‰\nè™šæ‹ŸDOMä¸­keyçš„ä½œç”¨ï¼š â€‹ keyæ˜¯è™šæ‹ŸDOMå¯¹è±¡çš„æ ‡è¯†ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVueä¼šæ ¹æ®ã€æ–°æ•°æ®ã€‘ç”Ÿæˆã€æ–°çš„è™šæ‹ŸDOMã€‘,\nâ€‹ éšåVueè¿›è¡Œã€æ–°è™šæ‹ŸDOMã€‘ä¸ã€æ—§è™šæ‹ŸDOMã€‘çš„å·®å¼‚æ¯”è¾ƒï¼Œæ¯”è¾ƒè§„åˆ™å¦‚ä¸‹ï¼š\nâ€‹ 2.å¯¹æ¯”è§„åˆ™ï¼š\nâ€‹ (1).æ—§è™šæ‹ŸDOMä¸­æ‰¾åˆ°äº†ä¸æ–°è™šæ‹ŸDOMç›¸åŒçš„keyï¼š\nâ€‹ â‘ .è‹¥è™šæ‹ŸDOMä¸­å†…å®¹æ²¡å˜, ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„çœŸå®DOMï¼\nâ€‹ â‘¡.è‹¥è™šæ‹ŸDOMä¸­å†…å®¹å˜äº†, åˆ™ç”Ÿæˆæ–°çš„çœŸå®DOMï¼Œéšåæ›¿æ¢æ‰é¡µé¢ä¸­ä¹‹å‰çš„çœŸå®DOMã€‚\nâ€‹ (2).æ—§è™šæ‹ŸDOMä¸­æœªæ‰¾åˆ°ä¸æ–°è™šæ‹ŸDOMç›¸åŒçš„key\nâ€‹ åˆ›å»ºæ–°çš„çœŸå®DOMï¼Œéšåæ¸²æŸ“åˆ°åˆ°é¡µé¢ã€‚\nâ€‹ 3. ç”¨indexä½œä¸ºkeyå¯èƒ½ä¼šå¼•å‘çš„é—®é¢˜ï¼š\nâ€‹ 1. è‹¥å¯¹æ•°æ®è¿›è¡Œï¼šé€†åºæ·»åŠ ã€é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºæ“ä½œ:\nâ€‹ ä¼šäº§ç”Ÿæ²¡æœ‰å¿…è¦çš„çœŸå®DOMæ›´æ–° ==\u0026gt; ç•Œé¢æ•ˆæœæ²¡é—®é¢˜, ä½†æ•ˆç‡ä½ã€‚\nâ€‹ 2. å¦‚æœç»“æ„ä¸­è¿˜åŒ…å«è¾“å…¥ç±»çš„DOMï¼š\nâ€‹ ä¼šäº§ç”Ÿé”™è¯¯DOMæ›´æ–° ==\u0026gt; ç•Œé¢æœ‰é—®é¢˜ã€‚\nâ€‹ 4. å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©key?:\nâ€‹ 1.æœ€å¥½ä½¿ç”¨æ¯æ¡æ•°æ®çš„å”¯ä¸€æ ‡è¯†ä½œä¸ºkey, æ¯”å¦‚idã€æ‰‹æœºå·ã€èº«ä»½è¯å·ã€å­¦å·ç­‰å”¯ä¸€å€¼ã€‚\nâ€‹ 2.å¦‚æœä¸å­˜åœ¨å¯¹æ•°æ®çš„é€†åºæ·»åŠ ã€é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºæ“ä½œï¼Œä»…ç”¨äºæ¸²æŸ“åˆ—è¡¨ç”¨äºå±•ç¤ºï¼Œ\nâ€‹ ä½¿ç”¨indexä½œä¸ºkeyæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚\nåˆ—è¡¨è¿‡æ»¤ å¯ä»¥é€šè¿‡watchæˆ–è€…computedå®ç°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 \u0026lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--\u0026gt; \u0026lt;div id=\u0026#34;root\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;äººå‘˜åˆ—è¡¨\u0026lt;/h2\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; placeholder=\u0026#34;è¯·è¾“å…¥åå­—\u0026#34; v-model=\u0026#34;keyWord\u0026#34;\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li v-for=\u0026#34;(p,index) of filPerons\u0026#34; :key=\u0026#34;index\u0026#34;\u0026gt; {{p.name}}-{{p.age}}-{{p.sex}} \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; Vue.config.productionTip = false //ç”¨watchå®ç° //#region new Vue({ el:\u0026#39;#root\u0026#39;, data:{ keyWord:\u0026#39;\u0026#39;, persons:[ {id:\u0026#39;001\u0026#39;,name:\u0026#39;é©¬å†¬æ¢…\u0026#39;,age:19,sex:\u0026#39;å¥³\u0026#39;}, {id:\u0026#39;002\u0026#39;,name:\u0026#39;å‘¨å†¬é›¨\u0026#39;,age:20,sex:\u0026#39;å¥³\u0026#39;}, {id:\u0026#39;003\u0026#39;,name:\u0026#39;å‘¨æ°ä¼¦\u0026#39;,age:21,sex:\u0026#39;ç”·\u0026#39;}, {id:\u0026#39;004\u0026#39;,name:\u0026#39;æ¸©å…†ä¼¦\u0026#39;,age:22,sex:\u0026#39;ç”·\u0026#39;} ], filPerons:[] }, watch:{ keyWord:{ immediate:true, handler(val){ this.filPerons = this.persons.filter((p)=\u0026gt;{ return p.name.indexOf(val) !== -1 }) } } } }) //#endregion //ç”¨computedå®ç° new Vue({ el:\u0026#39;#root\u0026#39;, data:{ keyWord:\u0026#39;\u0026#39;, persons:[ {id:\u0026#39;001\u0026#39;,name:\u0026#39;é©¬å†¬æ¢…\u0026#39;,age:19,sex:\u0026#39;å¥³\u0026#39;}, {id:\u0026#39;002\u0026#39;,name:\u0026#39;å‘¨å†¬é›¨\u0026#39;,age:20,sex:\u0026#39;å¥³\u0026#39;}, {id:\u0026#39;003\u0026#39;,name:\u0026#39;å‘¨æ°ä¼¦\u0026#39;,age:21,sex:\u0026#39;ç”·\u0026#39;}, {id:\u0026#39;004\u0026#39;,name:\u0026#39;æ¸©å…†ä¼¦\u0026#39;,age:22,sex:\u0026#39;ç”·\u0026#39;} ] }, computed:{ filPerons(){ return this.persons.filter((p)=\u0026gt;{ return p.name.indexOf(this.keyWord) !== -1 }) } } }) \u0026lt;/script\u0026gt; åˆ—è¡¨æ’åº 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 \u0026lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--\u0026gt; \u0026lt;div id=\u0026#34;root\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;äººå‘˜åˆ—è¡¨\u0026lt;/h2\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; placeholder=\u0026#34;è¯·è¾“å…¥åå­—\u0026#34; v-model=\u0026#34;keyWord\u0026#34;\u0026gt; \u0026lt;button @click=\u0026#34;sortType = 2\u0026#34;\u0026gt;å¹´é¾„å‡åº\u0026lt;/button\u0026gt; \u0026lt;button @click=\u0026#34;sortType = 1\u0026#34;\u0026gt;å¹´é¾„é™åº\u0026lt;/button\u0026gt; \u0026lt;button @click=\u0026#34;sortType = 0\u0026#34;\u0026gt;åŸé¡ºåº\u0026lt;/button\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li v-for=\u0026#34;(p,index) of filPerons\u0026#34; :key=\u0026#34;p.id\u0026#34;\u0026gt; {{p.name}}-{{p.age}}-{{p.sex}} \u0026lt;input type=\u0026#34;text\u0026#34;\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; Vue.config.productionTip = false new Vue({ el:\u0026#39;#root\u0026#39;, data:{ keyWord:\u0026#39;\u0026#39;, sortType:0, //0åŸé¡ºåº 1é™åº 2å‡åº persons:[ {id:\u0026#39;001\u0026#39;,name:\u0026#39;é©¬å†¬æ¢…\u0026#39;,age:30,sex:\u0026#39;å¥³\u0026#39;}, {id:\u0026#39;002\u0026#39;,name:\u0026#39;å‘¨å†¬é›¨\u0026#39;,age:31,sex:\u0026#39;å¥³\u0026#39;}, {id:\u0026#39;003\u0026#39;,name:\u0026#39;å‘¨æ°ä¼¦\u0026#39;,age:18,sex:\u0026#39;ç”·\u0026#39;}, {id:\u0026#39;004\u0026#39;,name:\u0026#39;æ¸©å…†ä¼¦\u0026#39;,age:19,sex:\u0026#39;ç”·\u0026#39;} ] }, computed:{ filPerons(){ const arr = this.persons.filter((p)=\u0026gt;{ return p.name.indexOf(this.keyWord) !== -1 }) //åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦éœ€è¦æ’åº if(this.sortType){ arr.sort((p1,p2)=\u0026gt;{ return this.sortType === 1 ? p2.age-p1.age : p1.age-p2.age }) } return arr } } }) \u0026lt;/script\u0026gt; Vueç›‘è§†æ•°æ®çš„åŸç†ï¼š\nvueä¼šç›‘è§†dataä¸­æ‰€æœ‰å±‚æ¬¡çš„æ•°æ®ã€‚\nå¦‚ä½•ç›‘æµ‹å¯¹è±¡ä¸­çš„æ•°æ®ï¼Ÿ\nâ€‹ é€šè¿‡setterå®ç°ç›‘è§†ï¼Œä¸”è¦åœ¨new Vueæ—¶å°±ä¼ å…¥è¦ç›‘æµ‹çš„æ•°æ®ã€‚\nâ€‹ (1).å¯¹è±¡ä¸­åè¿½åŠ çš„å±æ€§ï¼ŒVueé»˜è®¤ä¸åšå“åº”å¼å¤„ç†\nâ€‹ (2).å¦‚éœ€ç»™åæ·»åŠ çš„å±æ€§åšå“åº”å¼ï¼Œè¯·ä½¿ç”¨å¦‚ä¸‹APIï¼š\nâ€‹ Vue.set(targetï¼ŒpropertyName/indexï¼Œvalue) æˆ–\nâ€‹ vm.$set(targetï¼ŒpropertyName/indexï¼Œvalue)\nå¦‚ä½•ç›‘æµ‹æ•°ç»„ä¸­çš„æ•°æ®ï¼Ÿ â€‹ é€šè¿‡åŒ…è£¹æ•°ç»„æ›´æ–°å…ƒç´ çš„æ–¹æ³•å®ç°ï¼Œæœ¬è´¨å°±æ˜¯åšäº†ä¸¤ä»¶äº‹ï¼š\nâ€‹ (1).è°ƒç”¨åŸç”Ÿå¯¹åº”çš„æ–¹æ³•å¯¹æ•°ç»„è¿›è¡Œæ›´æ–°ã€‚\nâ€‹ (2).é‡æ–°è§£ææ¨¡æ¿ï¼Œè¿›è€Œæ›´æ–°é¡µé¢ã€‚\n4.åœ¨Vueä¿®æ”¹æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ ä¸€å®šè¦ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š\nâ€‹ 1.ä½¿ç”¨è¿™äº›API:push()ã€pop()ã€shift()ã€unshift()ã€splice()ã€sort()ã€reverse()\nâ€‹ 2.Vue.set() æˆ– vm.$set()\nç‰¹åˆ«æ³¨æ„ï¼šVue.set() å’Œ vm.$set() ä¸èƒ½ç»™vm æˆ– vmçš„æ ¹æ•°æ®å¯¹è±¡ æ·»åŠ å±æ€§ï¼ï¼ï¼\næ”¶é›†è¡¨å•æ•°æ® è‹¥ï¼š\u0026lt;input type=\u0026quot;text\u0026quot;/\u0026gt;ï¼Œåˆ™v-modelæ”¶é›†çš„æ˜¯valueå€¼ï¼Œç”¨æˆ·è¾“å…¥çš„å°±æ˜¯valueå€¼ã€‚\nè‹¥ï¼š\u0026lt;input type=\u0026quot;radio\u0026quot;/\u0026gt;ï¼Œåˆ™v-modelæ”¶é›†çš„æ˜¯valueå€¼ï¼Œä¸”è¦ç»™æ ‡ç­¾é…ç½®valueå€¼ã€‚\nè‹¥ï¼š\u0026lt;input type=\u0026quot;checkbox\u0026quot;/\u0026gt;\nâ€‹ 1.æ²¡æœ‰é…ç½®inputçš„valueå±æ€§ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯checkedï¼ˆå‹¾é€‰ or æœªå‹¾é€‰ï¼Œæ˜¯å¸ƒå°”å€¼ï¼‰\nâ€‹ 2.é…ç½®inputçš„valueå±æ€§:\nâ€‹ (1)v-modelçš„åˆå§‹å€¼æ˜¯éæ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯checkedï¼ˆå‹¾é€‰ or æœªå‹¾é€‰ï¼Œæ˜¯å¸ƒå°”å€¼ï¼‰\nâ€‹ (2)v-modelçš„åˆå§‹å€¼æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„çš„å°±æ˜¯valueç»„æˆçš„æ•°ç»„\nå¤‡æ³¨ï¼šv-modelçš„ä¸‰ä¸ªä¿®é¥°ç¬¦ï¼š\nâ€‹ lazyï¼šå¤±å»ç„¦ç‚¹å†æ”¶é›†æ•°æ®\nâ€‹ numberï¼šè¾“å…¥å­—ç¬¦ä¸²è½¬ä¸ºæœ‰æ•ˆçš„æ•°å­—\nâ€‹ trimï¼šè¾“å…¥é¦–å°¾ç©ºæ ¼è¿‡æ»¤\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 \u0026lt;form @submit.prevent=\u0026#34;demo\u0026#34;\u0026gt; è´¦å·ï¼š\u0026lt;input type=\u0026#34;text\u0026#34; v-model.trim=\u0026#34;userInfo.account\u0026#34;\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; å¯†ç ï¼š\u0026lt;input type=\u0026#34;password\u0026#34; v-model=\u0026#34;userInfo.password\u0026#34;\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; å¹´é¾„ï¼š\u0026lt;input type=\u0026#34;number\u0026#34; v-model.number=\u0026#34;userInfo.age\u0026#34;\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; æ€§åˆ«ï¼š ç”·\u0026lt;input type=\u0026#34;radio\u0026#34; name=\u0026#34;sex\u0026#34; v-model=\u0026#34;userInfo.sex\u0026#34; value=\u0026#34;male\u0026#34;\u0026gt; å¥³\u0026lt;input type=\u0026#34;radio\u0026#34; name=\u0026#34;sex\u0026#34; v-model=\u0026#34;userInfo.sex\u0026#34; value=\u0026#34;female\u0026#34;\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; çˆ±å¥½ï¼š å­¦ä¹ \u0026lt;input type=\u0026#34;checkbox\u0026#34; v-model=\u0026#34;userInfo.hobby\u0026#34; value=\u0026#34;study\u0026#34;\u0026gt; æ‰“æ¸¸æˆ\u0026lt;input type=\u0026#34;checkbox\u0026#34; v-model=\u0026#34;userInfo.hobby\u0026#34; value=\u0026#34;game\u0026#34;\u0026gt; åƒé¥­\u0026lt;input type=\u0026#34;checkbox\u0026#34; v-model=\u0026#34;userInfo.hobby\u0026#34; value=\u0026#34;eat\u0026#34;\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; æ‰€å±æ ¡åŒº \u0026lt;select v-model=\u0026#34;userInfo.city\u0026#34;\u0026gt; \u0026lt;option value=\u0026#34;\u0026#34;\u0026gt;è¯·é€‰æ‹©æ ¡åŒº\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;beijing\u0026#34;\u0026gt;åŒ—äº¬\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;shanghai\u0026#34;\u0026gt;ä¸Šæµ·\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;shenzhen\u0026#34;\u0026gt;æ·±åœ³\u0026lt;/option\u0026gt; \u0026lt;option value=\u0026#34;wuhan\u0026#34;\u0026gt;æ­¦æ±‰\u0026lt;/option\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; å…¶ä»–ä¿¡æ¯ï¼š \u0026lt;textarea v-model.lazy=\u0026#34;userInfo.other\u0026#34;\u0026gt;\u0026lt;/textarea\u0026gt; \u0026lt;br/\u0026gt;\u0026lt;br/\u0026gt; \u0026lt;input type=\u0026#34;checkbox\u0026#34; v-model=\u0026#34;userInfo.agree\u0026#34;\u0026gt;é˜…è¯»å¹¶æ¥å—\u0026lt;a href=\u0026#34;http://www.atguigu.com\u0026#34;\u0026gt;ã€Šç”¨æˆ·åè®®ã€‹\u0026lt;/a\u0026gt; \u0026lt;button\u0026gt;æäº¤\u0026lt;/button\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;script\u0026gt; new Vue({ el:\u0026#39;#root\u0026#39;, data:{ userInfo:{ account:\u0026#39;\u0026#39;, password:\u0026#39;\u0026#39;, age:18, sex:\u0026#39;female\u0026#39;, hobby:[], city:\u0026#39;beijing\u0026#39;, other:\u0026#39;\u0026#39;, agree:\u0026#39;\u0026#39; } }, methods: { demo(){ console.log(JSON.stringify(this.userInfo)) } } }) \u0026lt;/script\u0026gt; è¿‡æ»¤å™¨ è¿‡æ»¤å™¨ï¼š\nå®šä¹‰ï¼šå¯¹è¦æ˜¾ç¤ºçš„æ•°æ®è¿›è¡Œç‰¹å®šæ ¼å¼åŒ–åå†æ˜¾ç¤ºï¼ˆé€‚ç”¨äºä¸€äº›ç®€å•é€»è¾‘çš„å¤„ç†ï¼‰ã€‚\nè¯­æ³•ï¼š\nâ€‹ 1.æ³¨å†Œè¿‡æ»¤å™¨ï¼šVue.filter(name,callback) æˆ– new Vue{filters:{}}\nâ€‹ 2.ä½¿ç”¨è¿‡æ»¤å™¨ï¼š{{ xxx | è¿‡æ»¤å™¨å}} æˆ– v-bind:å±æ€§ = \u0026ldquo;xxx | è¿‡æ»¤å™¨å\u0026rdquo;\nå¤‡æ³¨ï¼š\nâ€‹ 1.è¿‡æ»¤å™¨ä¹Ÿå¯ä»¥æ¥æ”¶é¢å¤–å‚æ•°ã€å¤šä¸ªè¿‡æ»¤å™¨ä¹Ÿå¯ä»¥ä¸²è”\nâ€‹ 2.å¹¶æ²¡æœ‰æ”¹å˜åŸæœ¬çš„æ•°æ®, æ˜¯äº§ç”Ÿæ–°çš„å¯¹åº”çš„æ•°æ®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 \u0026lt;div id=\u0026#34;root\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;æ˜¾ç¤ºæ ¼å¼åŒ–åçš„æ—¶é—´\u0026lt;/h2\u0026gt; \u0026lt;!-- è®¡ç®—å±æ€§å®ç° --\u0026gt; \u0026lt;h3\u0026gt;ç°åœ¨æ˜¯ï¼š{{fmtTime}}\u0026lt;/h3\u0026gt; \u0026lt;!-- methodså®ç° --\u0026gt; \u0026lt;h3\u0026gt;ç°åœ¨æ˜¯ï¼š{{getFmtTime()}}\u0026lt;/h3\u0026gt; \u0026lt;!-- è¿‡æ»¤å™¨å®ç° --\u0026gt; \u0026lt;h3\u0026gt;ç°åœ¨æ˜¯ï¼š{{time | timeFormater}}\u0026lt;/h3\u0026gt; \u0026lt;!-- è¿‡æ»¤å™¨å®ç°ï¼ˆä¼ å‚ï¼‰ --\u0026gt; \u0026lt;h3\u0026gt;ç°åœ¨æ˜¯ï¼š{{time | timeFormater(\u0026#39;YYYY_MM_DD\u0026#39;) | mySlice}}\u0026lt;/h3\u0026gt; \u0026lt;h3 :x=\u0026#34;msg | mySlice\u0026#34;\u0026gt;å°šç¡…è°·\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;root2\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;{{msg | mySlice}}\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script\u0026gt; Vue.filter(\u0026#39;mySlice\u0026#39;,function(value){ return value.slice(0,4) }) new Vue({ el:\u0026#39;#root\u0026#39;, data:{ time:1621561377603, //æ—¶é—´æˆ³ msg:\u0026#39;ä½ å¥½ï¼Œå°šç¡…è°·\u0026#39; }, computed: { fmtTime(){ return dayjs(this.time).format(\u0026#39;YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss\u0026#39;) } }, methods: { getFmtTime(){ return dayjs(this.time).format(\u0026#39;YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss\u0026#39;) } }, //å±€éƒ¨è¿‡æ»¤å™¨ filters:{ timeFormater(value,str=\u0026#39;YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss\u0026#39;){ // console.log(\u0026#39;@\u0026#39;,value) return dayjs(value).format(str) } } }) new Vue({ el:\u0026#39;#root2\u0026#39;, data:{ msg:\u0026#39;hello,atguigu!\u0026#39; } }) \u0026lt;/script\u0026gt; å†…ç½®æŒ‡ä»¤ æˆ‘ä»¬å­¦è¿‡çš„æŒ‡ä»¤ï¼š\nâ€‹ v-bind : å•å‘ç»‘å®šè§£æè¡¨è¾¾å¼, å¯ç®€å†™ä¸º :xxx\nâ€‹ v-model : åŒå‘æ•°æ®ç»‘å®š\nâ€‹ v-for : éå†æ•°ç»„/å¯¹è±¡/å­—ç¬¦ä¸²\nâ€‹ v-on : ç»‘å®šäº‹ä»¶ç›‘å¬, å¯ç®€å†™ä¸º@\nâ€‹ v-if : æ¡ä»¶æ¸²æŸ“ï¼ˆåŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜å­˜åœ¨ï¼‰\nâ€‹ v-else : æ¡ä»¶æ¸²æŸ“ï¼ˆåŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜å­˜åœ¨ï¼‰\nâ€‹ v-show : æ¡ä»¶æ¸²æŸ“ (åŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å±•ç¤º)\nv-textæŒ‡ä»¤ï¼š\nâ€‹ 1.ä½œç”¨ï¼šå‘å…¶æ‰€åœ¨çš„èŠ‚ç‚¹ä¸­æ¸²æŸ“æ–‡æœ¬å†…å®¹ã€‚\nâ€‹ 2.ä¸æ’å€¼è¯­æ³•çš„åŒºåˆ«ï¼šv-textä¼šæ›¿æ¢æ‰èŠ‚ç‚¹ä¸­çš„å†…å®¹ï¼Œ{{xx}}åˆ™ä¸ä¼šã€‚\nv-htmlæŒ‡ä»¤ï¼š\nâ€‹ 1.ä½œç”¨ï¼šå‘æŒ‡å®šèŠ‚ç‚¹ä¸­æ¸²æŸ“åŒ…å«htmlç»“æ„çš„å†…å®¹ã€‚\nâ€‹ 2.ä¸æ’å€¼è¯­æ³•çš„åŒºåˆ«ï¼š\nâ€‹ (1).v-htmlä¼šæ›¿æ¢æ‰èŠ‚ç‚¹ä¸­æ‰€æœ‰çš„å†…å®¹ï¼Œ{{xx}}åˆ™ä¸ä¼šã€‚\nâ€‹ (2).v-htmlå¯ä»¥è¯†åˆ«htmlç»“æ„ã€‚\nâ€‹ 3.ä¸¥é‡æ³¨æ„ï¼šv-htmlæœ‰å®‰å…¨æ€§é—®é¢˜ï¼ï¼ï¼ï¼\nâ€‹ (1).åœ¨ç½‘ç«™ä¸ŠåŠ¨æ€æ¸²æŸ“ä»»æ„HTMLæ˜¯éå¸¸å±é™©çš„ï¼Œå®¹æ˜“å¯¼è‡´XSSæ”»å‡»ã€‚\nâ€‹ (2).ä¸€å®šè¦åœ¨å¯ä¿¡çš„å†…å®¹ä¸Šä½¿ç”¨v-htmlï¼Œæ°¸ä¸è¦ç”¨åœ¨ç”¨æˆ·æäº¤çš„å†…å®¹ä¸Šï¼\nv-cloakæŒ‡ä»¤ï¼ˆæ²¡æœ‰å€¼ï¼‰ï¼š\nâ€‹ 1.æœ¬è´¨æ˜¯ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼ŒVueå®ä¾‹åˆ›å»ºå®Œæ¯•å¹¶æ¥ç®¡å®¹å™¨åï¼Œä¼šåˆ æ‰v-cloakå±æ€§ã€‚\nâ€‹ 2.ä½¿ç”¨cssé…åˆv-cloakå¯ä»¥è§£å†³ç½‘é€Ÿæ…¢æ—¶é¡µé¢å±•ç¤ºå‡º{{xxx}}çš„é—®é¢˜ã€‚\nv-onceæŒ‡ä»¤ï¼š\nâ€‹ 1.v-onceæ‰€åœ¨èŠ‚ç‚¹åœ¨åˆæ¬¡åŠ¨æ€æ¸²æŸ“åï¼Œå°±è§†ä¸ºé™æ€å†…å®¹äº†ã€‚\nâ€‹ 2.ä»¥åæ•°æ®çš„æ”¹å˜ä¸ä¼šå¼•èµ·v-onceæ‰€åœ¨ç»“æ„çš„æ›´æ–°ï¼Œå¯ä»¥ç”¨äºä¼˜åŒ–æ€§èƒ½ã€‚\nv-preæŒ‡ä»¤ï¼š\nâ€‹ 1.è·³è¿‡å…¶æ‰€åœ¨èŠ‚ç‚¹çš„ç¼–è¯‘è¿‡ç¨‹ã€‚\nâ€‹ 2.å¯åˆ©ç”¨å®ƒè·³è¿‡ï¼šæ²¡æœ‰ä½¿ç”¨æŒ‡ä»¤è¯­æ³•ã€æ²¡æœ‰ä½¿ç”¨æ’å€¼è¯­æ³•çš„èŠ‚ç‚¹ï¼Œä¼šåŠ å¿«ç¼–è¯‘ã€‚\nç”Ÿå‘½å‘¨æœŸ è¯ä¸å¤šè¯´å…ˆä¸Šå›¾ï¼š\nç”Ÿå‘½å‘¨æœŸï¼š\nâ€‹ 1.åˆåï¼šç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°ã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚\nâ€‹ 2.æ˜¯ä»€ä¹ˆï¼šVueåœ¨å…³é”®æ—¶åˆ»å¸®æˆ‘ä»¬è°ƒç”¨çš„ä¸€äº›ç‰¹æ®Šåç§°çš„å‡½æ•°ã€‚\nâ€‹ 3.ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„åå­—ä¸å¯æ›´æ”¹ï¼Œä½†å‡½æ•°çš„å…·ä½“å†…å®¹æ˜¯ç¨‹åºå‘˜æ ¹æ®éœ€æ±‚ç¼–å†™çš„ã€‚\nâ€‹ 4.ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„thisæŒ‡å‘æ˜¯vm æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚\nå¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š\nâ€‹ 1.mounted: å‘é€ajaxè¯·æ±‚ã€å¯åŠ¨å®šæ—¶å™¨ã€ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€è®¢é˜…æ¶ˆæ¯ç­‰ã€åˆå§‹åŒ–æ“ä½œã€‘ã€‚\nâ€‹ 2.beforeDestroy: æ¸…é™¤å®šæ—¶å™¨ã€è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯ç­‰ã€æ”¶å°¾å·¥ä½œã€‘ã€‚\nå…³äºé”€æ¯Vueå®ä¾‹\nâ€‹ 1.é”€æ¯åå€ŸåŠ©Vueå¼€å‘è€…å·¥å…·çœ‹ä¸åˆ°ä»»ä½•ä¿¡æ¯ã€‚\nâ€‹ 2.é”€æ¯åè‡ªå®šä¹‰äº‹ä»¶ä¼šå¤±æ•ˆï¼Œä½†åŸç”ŸDOMäº‹ä»¶ä¾ç„¶æœ‰æ•ˆã€‚\nâ€‹ 3.ä¸€èˆ¬ä¸ä¼šåœ¨beforeDestroyæ“ä½œæ•°æ®ï¼Œå› ä¸ºå³ä¾¿æ“ä½œæ•°æ®ï¼Œä¹Ÿä¸ä¼šå†è§¦å‘æ›´æ–°æµç¨‹äº†ã€‚\nç»„ä»¶ Vueä¸­ä½¿ç”¨ç»„ä»¶çš„ä¸‰å¤§æ­¥éª¤ï¼š\nâ€‹ ä¸€ã€å®šä¹‰ç»„ä»¶(åˆ›å»ºç»„ä»¶)\nâ€‹ äºŒã€æ³¨å†Œç»„ä»¶\nâ€‹ ä¸‰ã€ä½¿ç”¨ç»„ä»¶(å†™ç»„ä»¶æ ‡ç­¾)\nä¸€ã€å¦‚ä½•å®šä¹‰ä¸€ä¸ªç»„ä»¶ï¼Ÿ\nâ€‹ ä½¿ç”¨Vue.extend(options)åˆ›å»ºï¼Œå…¶ä¸­optionså’Œnew Vue(options)æ—¶ä¼ å…¥çš„é‚£ä¸ªoptionså‡ ä¹ä¸€æ ·ï¼Œä½†ä¹Ÿæœ‰ç‚¹åŒºåˆ«ï¼›\nâ€‹ åŒºåˆ«å¦‚ä¸‹ï¼š\nâ€‹ 1.elä¸è¦å†™ï¼Œä¸ºä»€ä¹ˆï¼Ÿ â€”â€”â€” æœ€ç»ˆæ‰€æœ‰çš„ç»„ä»¶éƒ½è¦ç»è¿‡ä¸€ä¸ªvmçš„ç®¡ç†ï¼Œç”±vmä¸­çš„elå†³å®šæœåŠ¡å“ªä¸ªå®¹å™¨ã€‚\nâ€‹ 2.dataå¿…é¡»å†™æˆå‡½æ•°ï¼Œä¸ºä»€ä¹ˆï¼Ÿ â€”â€”â€”â€” é¿å…ç»„ä»¶è¢«å¤ç”¨æ—¶ï¼Œæ•°æ®å­˜åœ¨å¼•ç”¨å…³ç³»ã€‚\nâ€‹ å¤‡æ³¨ï¼šä½¿ç”¨templateå¯ä»¥é…ç½®ç»„ä»¶ç»“æ„ã€‚\näºŒã€å¦‚ä½•æ³¨å†Œç»„ä»¶ï¼Ÿ\nâ€‹ 1.å±€éƒ¨æ³¨å†Œï¼šé new Vueçš„æ—¶å€™ä¼ å…¥componentsé€‰é¡¹\nâ€‹ 2.å…¨å±€æ³¨å†Œï¼šé Vue.component(\u0026lsquo;ç»„ä»¶å\u0026rsquo;,ç»„ä»¶)\nä¸‰ã€ç¼–å†™ç»„ä»¶æ ‡ç­¾ï¼š\nâ€‹ \u0026lt;school\u0026gt;\u0026lt;/school\u0026gt;\nå‡ ä¸ªæ³¨æ„ç‚¹ï¼š\nâ€‹ 1.å…³äºç»„ä»¶å:\nâ€‹ ä¸€ä¸ªå•è¯ç»„æˆï¼š\nâ€‹ ç¬¬ä¸€ç§å†™æ³•(é¦–å­—æ¯å°å†™)ï¼šschool\nâ€‹ ç¬¬äºŒç§å†™æ³•(é¦–å­—æ¯å¤§å†™)ï¼šSchool\nâ€‹ å¤šä¸ªå•è¯ç»„æˆï¼š\nâ€‹ ç¬¬ä¸€ç§å†™æ³•(kebab-caseå‘½å)ï¼šmy-school\nâ€‹ ç¬¬äºŒç§å†™æ³•(CamelCaseå‘½å)ï¼šMySchool (éœ€è¦Vueè„šæ‰‹æ¶æ”¯æŒ)\nâ€‹ å¤‡æ³¨ï¼š\nâ€‹ (1).ç»„ä»¶åå°½å¯èƒ½å›é¿HTMLä¸­å·²æœ‰çš„å…ƒç´ åç§°ï¼Œä¾‹å¦‚ï¼šh2ã€H2éƒ½ä¸è¡Œã€‚\nâ€‹ (2).å¯ä»¥ä½¿ç”¨nameé…ç½®é¡¹æŒ‡å®šç»„ä»¶åœ¨å¼€å‘è€…å·¥å…·ä¸­å‘ˆç°çš„åå­—ã€‚\nâ€‹ 2.å…³äºç»„ä»¶æ ‡ç­¾:\nâ€‹ ç¬¬ä¸€ç§å†™æ³•ï¼š\u0026lt;school\u0026gt;\u0026lt;/school\u0026gt;\nâ€‹ ç¬¬äºŒç§å†™æ³•ï¼š\u0026lt;school/\u0026gt;\nâ€‹ å¤‡æ³¨ï¼šä¸ç”¨ä½¿ç”¨è„šæ‰‹æ¶æ—¶ï¼Œ\u0026lt;school/\u0026gt;ä¼šå¯¼è‡´åç»­ç»„ä»¶ä¸èƒ½æ¸²æŸ“ã€‚\nâ€‹ 3.ä¸€ä¸ªç®€å†™æ–¹å¼ï¼š\nâ€‹ const school = Vue.extend(options) å¯ç®€å†™ä¸ºï¼šconst school = options\nå…³äºVueComponentï¼š\nâ€‹ 1.schoolç»„ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªåä¸ºVueComponentçš„æ„é€ å‡½æ•°ï¼Œä¸”ä¸æ˜¯ç¨‹åºå‘˜å®šä¹‰çš„ï¼Œæ˜¯Vue.extendç”Ÿæˆçš„ã€‚\nâ€‹ 2.æˆ‘ä»¬åªéœ€è¦å†™\u0026lt;school/\u0026gt;æˆ–\u0026lt;school\u0026gt;\u0026lt;/school\u0026gt;ï¼ŒVueè§£ææ—¶ä¼šå¸®æˆ‘ä»¬åˆ›å»ºschoolç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼Œ\nâ€‹ å³Vueå¸®æˆ‘ä»¬æ‰§è¡Œçš„ï¼šnew VueComponent(options)ã€‚\nâ€‹ 3.ç‰¹åˆ«æ³¨æ„ï¼šæ¯æ¬¡è°ƒç”¨Vue.extendï¼Œè¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªå…¨æ–°çš„VueComponentï¼ï¼ï¼ï¼\nâ€‹ 4.å…³äºthisæŒ‡å‘ï¼š\nâ€‹ (1).ç»„ä»¶é…ç½®ä¸­ï¼š\nâ€‹ dataå‡½æ•°ã€methodsä¸­çš„å‡½æ•°ã€watchä¸­çš„å‡½æ•°ã€computedä¸­çš„å‡½æ•° å®ƒä»¬çš„thiså‡æ˜¯ã€VueComponentå®ä¾‹å¯¹è±¡ã€‘ã€‚\nâ€‹ (2).new Vue(options)é…ç½®ä¸­ï¼š\nâ€‹ dataå‡½æ•°ã€methodsä¸­çš„å‡½æ•°ã€watchä¸­çš„å‡½æ•°ã€computedä¸­çš„å‡½æ•° å®ƒä»¬çš„thiså‡æ˜¯ã€Vueå®ä¾‹å¯¹è±¡ã€‘ã€‚\nâ€‹ 5.VueComponentçš„å®ä¾‹å¯¹è±¡ï¼Œä»¥åç®€ç§°vcï¼ˆä¹Ÿå¯ç§°ä¹‹ä¸ºï¼šç»„ä»¶å®ä¾‹å¯¹è±¡ï¼‰ã€‚\nâ€‹ Vueçš„å®ä¾‹å¯¹è±¡ï¼Œä»¥åç®€ç§°vmã€‚\nVue2è¿›é˜¶ åˆ°è¿™ä¸€éƒ¨åˆ†ï¼Œå°±è¦ä½¿ç”¨åˆ°è„šæ‰‹æ¶äº†ï¼ŒåŒæ—¶ä¹Ÿå‘æ­£å¼çš„é¡¹ç›®é è¿‘äº†ã€‚\nè„šæ‰‹æ¶æ–‡ä»¶ç»“æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 â”œâ”€â”€ node_modules â”œâ”€â”€ public â”‚ â”œâ”€â”€ favicon.ico: é¡µç­¾å›¾æ ‡ â”‚ â””â”€â”€ index.html: ä¸»é¡µé¢ â”œâ”€â”€ src â”‚ â”œâ”€â”€ assets: å­˜æ”¾é™æ€èµ„æº â”‚ â”‚ â””â”€â”€ logo.png â”‚ â”‚â”€â”€ component: å­˜æ”¾ç»„ä»¶ â”‚ â”‚ â””â”€â”€ HelloWorld.vue â”‚ â”‚â”€â”€ App.vue: æ±‡æ€»æ‰€æœ‰ç»„ä»¶ â”‚ â”‚â”€â”€ main.js: å…¥å£æ–‡ä»¶ â”œâ”€â”€ .gitignore: gitç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½® â”œâ”€â”€ babel.config.js: babelçš„é…ç½®æ–‡ä»¶ â”œâ”€â”€ package.json: åº”ç”¨åŒ…é…ç½®æ–‡ä»¶ â”œâ”€â”€ README.md: åº”ç”¨æè¿°æ–‡ä»¶ â”œâ”€â”€ package-lock.jsonï¼šåŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶ å…³äºä¸åŒç‰ˆæœ¬çš„Vue vue.jsä¸vue.runtime.xxx.jsçš„åŒºåˆ«ï¼š vue.jsæ˜¯å®Œæ•´ç‰ˆçš„Vueï¼ŒåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ + æ¨¡æ¿è§£æå™¨ã€‚ vue.runtime.xxx.jsæ˜¯è¿è¡Œç‰ˆçš„Vueï¼ŒåªåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼›æ²¡æœ‰æ¨¡æ¿è§£æå™¨ã€‚ å› ä¸ºvue.runtime.xxx.jsæ²¡æœ‰æ¨¡æ¿è§£æå™¨ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨templateè¿™ä¸ªé…ç½®é¡¹ï¼Œéœ€è¦ä½¿ç”¨renderå‡½æ•°æ¥æ”¶åˆ°çš„createElementå‡½æ•°å»æŒ‡å®šå…·ä½“å†…å®¹ã€‚ä¹Ÿå°±æ˜¯ä»£ç ä¸­çš„è¿™å¥render: h =\u0026gt; h(App) vue.config.jsé…ç½®æ–‡ä»¶ ä½¿ç”¨vue inspect \u0026gt; output.jså¯ä»¥æŸ¥çœ‹åˆ°Vueè„šæ‰‹æ¶çš„é»˜è®¤é…ç½®ã€‚ ä½¿ç”¨vue.config.jså¯ä»¥å¯¹è„šæ‰‹æ¶è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶ï¼Œè¯¦æƒ…è§ï¼šhttps://cli.vuejs.org/zh refå±æ€§ è¢«ç”¨æ¥ç»™å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯ï¼ˆidçš„æ›¿ä»£è€…ï¼‰ åº”ç”¨åœ¨htmlæ ‡ç­¾ä¸Šè·å–çš„æ˜¯çœŸå®DOMå…ƒç´ ï¼Œåº”ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šæ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰ ä½¿ç”¨æ–¹å¼ï¼š æ‰“æ ‡è¯†ï¼š\u0026lt;h1 ref=\u0026quot;xxx\u0026quot;\u0026gt;.....\u0026lt;/h1\u0026gt; æˆ– \u0026lt;School ref=\u0026quot;xxx\u0026quot;\u0026gt;\u0026lt;/School\u0026gt; è·å–ï¼šthis.$refs.xxx propsé…ç½®é¡¹ åŠŸèƒ½ï¼šè®©ç»„ä»¶æ¥æ”¶å¤–éƒ¨ä¼ è¿‡æ¥çš„æ•°æ®\nä¼ é€’æ•°æ®ï¼š\u0026lt;Demo name=\u0026quot;xxx\u0026quot;/\u0026gt;\næ¥æ”¶æ•°æ®ï¼š\nç¬¬ä¸€ç§æ–¹å¼ï¼ˆåªæ¥æ”¶ï¼‰ï¼šprops:['name'] ç¬¬äºŒç§æ–¹å¼ï¼ˆé™åˆ¶ç±»å‹ï¼‰ï¼šprops:{name:String}\nç¬¬ä¸‰ç§æ–¹å¼ï¼ˆé™åˆ¶ç±»å‹ã€é™åˆ¶å¿…è¦æ€§ã€æŒ‡å®šé»˜è®¤å€¼ï¼‰ï¼š\n1 2 3 4 5 6 7 props:{ name:{ type:String, //ç±»å‹ required:true, //å¿…è¦æ€§ default:\u0026#39;è€ç‹\u0026#39; //é»˜è®¤å€¼ } } å¤‡æ³¨ï¼špropsæ˜¯åªè¯»çš„ï¼ŒVueåº•å±‚ä¼šç›‘æµ‹ä½ å¯¹propsçš„ä¿®æ”¹ï¼Œå¦‚æœè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°±ä¼šå‘å‡ºè­¦å‘Šï¼Œè‹¥ä¸šåŠ¡éœ€æ±‚ç¡®å®éœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆè¯·å¤åˆ¶propsçš„å†…å®¹åˆ°dataä¸­ä¸€ä»½ï¼Œç„¶åå»ä¿®æ”¹dataä¸­çš„æ•°æ®ã€‚\nmixin(æ··å…¥) åŠŸèƒ½ï¼šå¯ä»¥æŠŠå¤šä¸ªç»„ä»¶å…±ç”¨çš„é…ç½®æå–æˆä¸€ä¸ªæ··å…¥å¯¹è±¡\nä½¿ç”¨æ–¹å¼ï¼š\nç¬¬ä¸€æ­¥å®šä¹‰æ··åˆï¼š\n1 2 3 4 5 { data(){....}, methods:{....} .... } ç¬¬äºŒæ­¥ä½¿ç”¨æ··å…¥ï¼š\nâ€‹\tå…¨å±€æ··å…¥ï¼šVue.mixin(xxx) â€‹\tå±€éƒ¨æ··å…¥ï¼šmixins:['xxx']\tæ’ä»¶ åŠŸèƒ½ï¼šç”¨äºå¢å¼ºVue\næœ¬è´¨ï¼šåŒ…å«installæ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡ï¼Œinstallçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Vueï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®ã€‚\nå®šä¹‰æ’ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 å¯¹è±¡.install = function (Vue, options) { // 1. æ·»åŠ å…¨å±€è¿‡æ»¤å™¨ Vue.filter(....) // 2. æ·»åŠ å…¨å±€æŒ‡ä»¤ Vue.directive(....) // 3. é…ç½®å…¨å±€æ··å…¥(åˆ) Vue.mixin(....) // 4. æ·»åŠ å®ä¾‹æ–¹æ³• Vue.prototype.$myMethod = function () {...} Vue.prototype.$myProperty = xxxx } ä½¿ç”¨æ’ä»¶ï¼šVue.use()\nscopedæ ·å¼ ä½œç”¨ï¼šè®©æ ·å¼åœ¨å±€éƒ¨ç”Ÿæ•ˆï¼Œé˜²æ­¢å†²çªã€‚ å†™æ³•ï¼š\u0026lt;style scoped\u0026gt; æ€»ç»“TodoListæ¡ˆä¾‹ ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼š\nâ€‹\t(1).æ‹†åˆ†é™æ€ç»„ä»¶ï¼šç»„ä»¶è¦æŒ‰ç…§åŠŸèƒ½ç‚¹æ‹†åˆ†ï¼Œå‘½åä¸è¦ä¸htmlå…ƒç´ å†²çªã€‚\nâ€‹\t(2).å®ç°åŠ¨æ€ç»„ä»¶ï¼šè€ƒè™‘å¥½æ•°æ®çš„å­˜æ”¾ä½ç½®ï¼Œæ•°æ®æ˜¯ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼Œè¿˜æ˜¯ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼š\nâ€‹\t1).ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ç»„ä»¶è‡ªèº«å³å¯ã€‚\nâ€‹\t2). ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ä»–ä»¬å…±åŒçš„çˆ¶ç»„ä»¶ä¸Šï¼ˆçŠ¶æ€æå‡ï¼‰ã€‚\nâ€‹\t(3).å®ç°äº¤äº’ï¼šä»ç»‘å®šäº‹ä»¶å¼€å§‹ã€‚\npropsé€‚ç”¨äºï¼š\nâ€‹\t(1).çˆ¶ç»„ä»¶ ==\u0026gt; å­ç»„ä»¶ é€šä¿¡\nâ€‹\t(2).å­ç»„ä»¶ ==\u0026gt; çˆ¶ç»„ä»¶ é€šä¿¡ï¼ˆè¦æ±‚çˆ¶å…ˆç»™å­ä¸€ä¸ªå‡½æ•°ï¼‰\nä½¿ç”¨v-modelæ—¶è¦åˆ‡è®°ï¼šv-modelç»‘å®šçš„å€¼ä¸èƒ½æ˜¯propsä¼ è¿‡æ¥çš„å€¼ï¼Œå› ä¸ºpropsæ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ï¼\npropsä¼ è¿‡æ¥çš„è‹¥æ˜¯å¯¹è±¡ç±»å‹çš„å€¼ï¼Œä¿®æ”¹å¯¹è±¡ä¸­çš„å±æ€§æ—¶Vueä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸æ¨èè¿™æ ·åšã€‚\nwebStorage å­˜å‚¨å†…å®¹å¤§å°ä¸€èˆ¬æ”¯æŒ5MBå·¦å³ï¼ˆä¸åŒæµè§ˆå™¨å¯èƒ½è¿˜ä¸ä¸€æ ·ï¼‰\næµè§ˆå™¨ç«¯é€šè¿‡ Window.sessionStorage å’Œ Window.localStorage å±æ€§æ¥å®ç°æœ¬åœ°å­˜å‚¨æœºåˆ¶ã€‚\nç›¸å…³APIï¼š\nxxxxxStorage.setItem('key', 'value'); è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®å’Œå€¼ä½œä¸ºå‚æ•°ï¼Œä¼šæŠŠé”®å€¼å¯¹æ·»åŠ åˆ°å­˜å‚¨ä¸­ï¼Œå¦‚æœé”®åå­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶å¯¹åº”çš„å€¼ã€‚\nxxxxxStorage.getItem('person');\nâ€‹\tè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œè¿”å›é”®åå¯¹åº”çš„å€¼ã€‚\nxxxxxStorage.removeItem('key');\nâ€‹\tè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œå¹¶æŠŠè¯¥é”®åä»å­˜å‚¨ä¸­åˆ é™¤ã€‚\nxxxxxStorage.clear()\nâ€‹\tè¯¥æ–¹æ³•ä¼šæ¸…ç©ºå­˜å‚¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚\nå¤‡æ³¨ï¼š\nSessionStorageå­˜å‚¨çš„å†…å®¹ä¼šéšç€æµè§ˆå™¨çª—å£å…³é—­è€Œæ¶ˆå¤±ã€‚ LocalStorageå­˜å‚¨çš„å†…å®¹ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…é™¤æ‰ä¼šæ¶ˆå¤±ã€‚ xxxxxStorage.getItem(xxx)å¦‚æœxxxå¯¹åº”çš„valueè·å–ä¸åˆ°ï¼Œé‚£ä¹ˆgetItemçš„è¿”å›å€¼æ˜¯nullã€‚ JSON.parse(null)çš„ç»“æœä¾ç„¶æ˜¯nullã€‚ ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶ ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºï¼šå­ç»„ä»¶ ===\u0026gt; çˆ¶ç»„ä»¶\nä½¿ç”¨åœºæ™¯ï¼šAæ˜¯çˆ¶ç»„ä»¶ï¼ŒBæ˜¯å­ç»„ä»¶ï¼ŒBæƒ³ç»™Aä¼ æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦åœ¨Aä¸­ç»™Bç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼ˆäº‹ä»¶çš„å›è°ƒåœ¨Aä¸­ï¼‰ã€‚\nç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š\nç¬¬ä¸€ç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š\u0026lt;Demo @atguigu=\u0026quot;test\u0026quot;/\u0026gt; æˆ– \u0026lt;Demo v-on:atguigu=\u0026quot;test\u0026quot;/\u0026gt;\nç¬¬äºŒç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š\n1 2 3 4 5 \u0026lt;Demo ref=\u0026#34;demo\u0026#34;/\u0026gt; ...... mounted(){ this.$refs.xxx.$on(\u0026#39;atguigu\u0026#39;,this.test) } è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨onceä¿®é¥°ç¬¦ï¼Œæˆ–$onceæ–¹æ³•ã€‚\nè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼šthis.$emit('atguigu',æ•°æ®)\nè§£ç»‘è‡ªå®šä¹‰äº‹ä»¶this.$off('atguigu')\nç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”ŸDOMäº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨nativeä¿®é¥°ç¬¦ã€‚\næ³¨æ„ï¼šé€šè¿‡this.$refs.xxx.$on('atguigu',å›è°ƒ)ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒè¦ä¹ˆé…ç½®åœ¨methodsä¸­ï¼Œè¦ä¹ˆç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™thisæŒ‡å‘ä¼šå‡ºé—®é¢˜ï¼\nå…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆGlobalEventBusï¼‰ ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚\nå®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼š\n1 2 3 4 5 6 7 new Vue({ ...... beforeCreate() { Vue.prototype.$bus = this //å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼Œ$buså°±æ˜¯å½“å‰åº”ç”¨çš„vm }, ...... }) ä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼š\næ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­ç»™$busç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶çš„å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«ã€‚\n1 2 3 4 5 6 7 methods(){ demo(data){......} } ...... mounted() { this.$bus.$on(\u0026#39;xxxx\u0026#39;,this.demo) } æä¾›æ•°æ®ï¼šthis.$bus.$emit('xxxx',æ•°æ®)\næœ€å¥½åœ¨beforeDestroyé’©å­ä¸­ï¼Œç”¨$offå»è§£ç»‘å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶ã€‚\næ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆpubsubï¼‰ ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚\nä½¿ç”¨æ­¥éª¤ï¼š\nå®‰è£…pubsubï¼šnpm i pubsub-js\nå¼•å…¥: import pubsub from 'pubsub-js'\næ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­è®¢é˜…æ¶ˆæ¯ï¼Œè®¢é˜…çš„å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«ã€‚\n1 2 3 4 5 6 7 methods(){ demo(data){......} } ...... mounted() { this.pid = pubsub.subscribe(\u0026#39;xxx\u0026#39;,this.demo) //è®¢é˜…æ¶ˆæ¯ } æä¾›æ•°æ®ï¼špubsub.publish('xxx',æ•°æ®)\næœ€å¥½åœ¨beforeDestroyé’©å­ä¸­ï¼Œç”¨PubSub.unsubscribe(pid)å»å–æ¶ˆè®¢é˜…ã€‚\nnextTick è¯­æ³•ï¼šthis.$nextTick(å›è°ƒå‡½æ•°) ä½œç”¨ï¼šåœ¨ä¸‹ä¸€æ¬¡ DOM æ›´æ–°ç»“æŸåæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒã€‚ ä»€ä¹ˆæ—¶å€™ç”¨ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„æ–°DOMè¿›è¡ŒæŸäº›æ“ä½œæ—¶ï¼Œè¦åœ¨nextTickæ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œã€‚ Vueå°è£…çš„è¿‡åº¦ä¸åŠ¨ç”» ä½œç”¨ï¼šåœ¨æ’å…¥ã€æ›´æ–°æˆ–ç§»é™¤ DOMå…ƒç´ æ—¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™ç»™å…ƒç´ æ·»åŠ æ ·å¼ç±»åã€‚\nå›¾ç¤ºï¼šæ— äº†\nå†™æ³•ï¼š\nå‡†å¤‡å¥½æ ·å¼ï¼š\nå…ƒç´ è¿›å…¥çš„æ ·å¼ï¼š v-enterï¼šè¿›å…¥çš„èµ·ç‚¹ v-enter-activeï¼šè¿›å…¥è¿‡ç¨‹ä¸­ v-enter-toï¼šè¿›å…¥çš„ç»ˆç‚¹ å…ƒç´ ç¦»å¼€çš„æ ·å¼ï¼š v-leaveï¼šç¦»å¼€çš„èµ·ç‚¹ v-leave-activeï¼šç¦»å¼€è¿‡ç¨‹ä¸­ v-leave-toï¼šç¦»å¼€çš„ç»ˆç‚¹ ä½¿ç”¨\u0026lt;transition\u0026gt;åŒ…è£¹è¦è¿‡åº¦çš„å…ƒç´ ï¼Œå¹¶é…ç½®nameå±æ€§ï¼š\n1 2 3 \u0026lt;transition name=\u0026#34;hello\u0026#34;\u0026gt; \u0026lt;h1 v-show=\u0026#34;isShow\u0026#34;\u0026gt;ä½ å¥½å•Šï¼\u0026lt;/h1\u0026gt; \u0026lt;/transition\u0026gt; å¤‡æ³¨ï¼šè‹¥æœ‰å¤šä¸ªå…ƒç´ éœ€è¦è¿‡åº¦ï¼Œåˆ™éœ€è¦ä½¿ç”¨ï¼š\u0026lt;transition-group\u0026gt;ï¼Œä¸”æ¯ä¸ªå…ƒç´ éƒ½è¦æŒ‡å®škeyå€¼ã€‚\nvueè„šæ‰‹æ¶é…ç½®ä»£ç† æ–¹æ³•ä¸€ â€‹\tåœ¨vue.config.jsä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š\n1 2 3 devServer:{ proxy:\u0026#34;http://localhost:5000\u0026#34; } è¯´æ˜ï¼š\nä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼Œè¯·æ±‚èµ„æºæ—¶ç›´æ¥å‘ç»™å‰ç«¯ï¼ˆ8080ï¼‰å³å¯ã€‚ ç¼ºç‚¹ï¼šä¸èƒ½é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸èƒ½çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚ å·¥ä½œæ–¹å¼ï¼šè‹¥æŒ‰ç…§ä¸Šè¿°é…ç½®ä»£ç†ï¼Œå½“è¯·æ±‚äº†å‰ç«¯ä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè½¬å‘ç»™æœåŠ¡å™¨ ï¼ˆä¼˜å…ˆåŒ¹é…å‰ç«¯èµ„æºï¼‰ æ–¹æ³•äºŒ â€‹\tç¼–å†™vue.config.jsé…ç½®å…·ä½“ä»£ç†è§„åˆ™ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 module.exports = { devServer: { proxy: { \u0026#39;/api1\u0026#39;: {// åŒ¹é…æ‰€æœ‰ä»¥ \u0026#39;/api1\u0026#39;å¼€å¤´çš„è¯·æ±‚è·¯å¾„ target: \u0026#39;http://localhost:5000\u0026#39;,// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„ changeOrigin: true, pathRewrite: {\u0026#39;^/api1\u0026#39;: \u0026#39;\u0026#39;} }, \u0026#39;/api2\u0026#39;: {// åŒ¹é…æ‰€æœ‰ä»¥ \u0026#39;/api2\u0026#39;å¼€å¤´çš„è¯·æ±‚è·¯å¾„ target: \u0026#39;http://localhost:5001\u0026#39;,// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„ changeOrigin: true, pathRewrite: {\u0026#39;^/api2\u0026#39;: \u0026#39;\u0026#39;} } } } } /* changeOriginè®¾ç½®ä¸ºtrueæ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„hostä¸ºï¼šlocalhost:5000 changeOriginè®¾ç½®ä¸ºfalseæ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„hostä¸ºï¼šlocalhost:8080 changeOriginé»˜è®¤å€¼ä¸ºtrue */ è¯´æ˜ï¼š\nä¼˜ç‚¹ï¼šå¯ä»¥é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸”å¯ä»¥çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚ ç¼ºç‚¹ï¼šé…ç½®ç•¥å¾®ç¹çï¼Œè¯·æ±‚èµ„æºæ—¶å¿…é¡»åŠ å‰ç¼€ã€‚ æ’æ§½ ä½œç”¨ï¼šè®©çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶æŒ‡å®šä½ç½®æ’å…¥htmlç»“æ„ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº çˆ¶ç»„ä»¶ ===\u0026gt; å­ç»„ä»¶ã€‚\nåˆ†ç±»ï¼šé»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½\nä½¿ç”¨æ–¹å¼ï¼š\né»˜è®¤æ’æ§½ï¼š\n1 2 3 4 5 6 7 8 9 10 11 çˆ¶ç»„ä»¶ä¸­ï¼š \u0026lt;Category\u0026gt; \u0026lt;div\u0026gt;htmlç»“æ„1\u0026lt;/div\u0026gt; \u0026lt;/Category\u0026gt; å­ç»„ä»¶ä¸­ï¼š \u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;!-- å®šä¹‰æ’æ§½ --\u0026gt; \u0026lt;slot\u0026gt;æ’æ§½é»˜è®¤å†…å®¹...\u0026lt;/slot\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; å…·åæ’æ§½ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 çˆ¶ç»„ä»¶ä¸­ï¼š \u0026lt;Category\u0026gt; \u0026lt;template slot=\u0026#34;center\u0026#34;\u0026gt; \u0026lt;div\u0026gt;htmlç»“æ„1\u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;template v-slot:footer\u0026gt; \u0026lt;div\u0026gt;htmlç»“æ„2\u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;/Category\u0026gt; å­ç»„ä»¶ä¸­ï¼š \u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;!-- å®šä¹‰æ’æ§½ --\u0026gt; \u0026lt;slot name=\u0026#34;center\u0026#34;\u0026gt;æ’æ§½é»˜è®¤å†…å®¹...\u0026lt;/slot\u0026gt; \u0026lt;slot name=\u0026#34;footer\u0026#34;\u0026gt;æ’æ§½é»˜è®¤å†…å®¹...\u0026lt;/slot\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; ä½œç”¨åŸŸæ’æ§½ï¼š\nç†è§£ï¼šæ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚ï¼ˆgamesæ•°æ®åœ¨Categoryç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±Appç»„ä»¶å†³å®šï¼‰\nå…·ä½“ç¼–ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 çˆ¶ç»„ä»¶ä¸­ï¼š \u0026lt;Category\u0026gt; \u0026lt;template scope=\u0026#34;scopeData\u0026#34;\u0026gt; \u0026lt;!-- ç”Ÿæˆçš„æ˜¯ulåˆ—è¡¨ --\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li v-for=\u0026#34;g in scopeData.games\u0026#34; :key=\u0026#34;g\u0026#34;\u0026gt;{{g}}\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;/Category\u0026gt; \u0026lt;Category\u0026gt; \u0026lt;template slot-scope=\u0026#34;scopeData\u0026#34;\u0026gt; \u0026lt;!-- ç”Ÿæˆçš„æ˜¯h4æ ‡é¢˜ --\u0026gt; \u0026lt;h4 v-for=\u0026#34;g in scopeData.games\u0026#34; :key=\u0026#34;g\u0026#34;\u0026gt;{{g}}\u0026lt;/h4\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;/Category\u0026gt; å­ç»„ä»¶ä¸­ï¼š \u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;slot :games=\u0026#34;games\u0026#34;\u0026gt;\u0026lt;/slot\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script\u0026gt; export default { name:\u0026#39;Category\u0026#39;, props:[\u0026#39;title\u0026#39;], //æ•°æ®åœ¨å­ç»„ä»¶è‡ªèº« data() { return { games:[\u0026#39;çº¢è‰²è­¦æˆ’\u0026#39;,\u0026#39;ç©¿è¶Šç«çº¿\u0026#39;,\u0026#39;åŠ²èˆå›¢\u0026#39;,\u0026#39;è¶…çº§ç›ä¸½\u0026#39;] } }, } \u0026lt;/script\u0026gt; Vuex æ¦‚å¿µ â€‹\tåœ¨Vueä¸­å®ç°é›†ä¸­å¼çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ç®¡ç†çš„ä¸€ä¸ªVueæ’ä»¶ï¼Œå¯¹vueåº”ç”¨ä¸­å¤šä¸ªç»„ä»¶çš„å…±äº«çŠ¶æ€è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼ˆè¯»/å†™ï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œä¸”é€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚\nä½•æ—¶ä½¿ç”¨ï¼Ÿ â€‹\tå¤šä¸ªç»„ä»¶éœ€è¦å…±äº«æ•°æ®æ—¶\næ­å»ºvuexç¯å¢ƒ åˆ›å»ºæ–‡ä»¶ï¼šsrc/store/index.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 //å¼•å…¥Vueæ ¸å¿ƒåº“ import Vue from \u0026#39;vue\u0026#39; //å¼•å…¥Vuex import Vuex from \u0026#39;vuex\u0026#39; //åº”ç”¨Vuexæ’ä»¶ Vue.use(Vuex) //å‡†å¤‡actionså¯¹è±¡â€”â€”å“åº”ç»„ä»¶ä¸­ç”¨æˆ·çš„åŠ¨ä½œ const actions = {} //å‡†å¤‡mutationså¯¹è±¡â€”â€”ä¿®æ”¹stateä¸­çš„æ•°æ® const mutations = {} //å‡†å¤‡stateå¯¹è±¡â€”â€”ä¿å­˜å…·ä½“çš„æ•°æ® const state = {} //åˆ›å»ºå¹¶æš´éœ²store export default new Vuex.Store({ actions, mutations, state }) åœ¨main.jsä¸­åˆ›å»ºvmæ—¶ä¼ å…¥storeé…ç½®é¡¹\n1 2 3 4 5 6 7 8 9 10 11 ...... //å¼•å…¥store import store from \u0026#39;./store\u0026#39; ...... //åˆ›å»ºvm new Vue({ el:\u0026#39;#app\u0026#39;, render: h =\u0026gt; h(App), store }) åŸºæœ¬ä½¿ç”¨ åˆå§‹åŒ–æ•°æ®ã€é…ç½®actionsã€é…ç½®mutationsï¼Œæ“ä½œæ–‡ä»¶store.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 //å¼•å…¥Vueæ ¸å¿ƒåº“ import Vue from \u0026#39;vue\u0026#39; //å¼•å…¥Vuex import Vuex from \u0026#39;vuex\u0026#39; //å¼•ç”¨Vuex Vue.use(Vuex) const actions = { //å“åº”ç»„ä»¶ä¸­åŠ çš„åŠ¨ä½œ jia(context,value){ // console.log(\u0026#39;actionsä¸­çš„jiaè¢«è°ƒç”¨äº†\u0026#39;,miniStore,value) context.commit(\u0026#39;JIA\u0026#39;,value) }, } const mutations = { //æ‰§è¡ŒåŠ  JIA(state,value){ // console.log(\u0026#39;mutationsä¸­çš„JIAè¢«è°ƒç”¨äº†\u0026#39;,state,value) state.sum += value } } //åˆå§‹åŒ–æ•°æ® const state = { sum:0 } //åˆ›å»ºå¹¶æš´éœ²store export default new Vuex.Store({ actions, mutations, state, }) ç»„ä»¶ä¸­è¯»å–vuexä¸­çš„æ•°æ®ï¼š$store.state.sum\nç»„ä»¶ä¸­ä¿®æ”¹vuexä¸­çš„æ•°æ®ï¼š$store.dispatch('actionä¸­çš„æ–¹æ³•å',æ•°æ®) æˆ– $store.commit('mutationsä¸­çš„æ–¹æ³•å',æ•°æ®)\nå¤‡æ³¨ï¼šè‹¥æ²¡æœ‰ç½‘ç»œè¯·æ±‚æˆ–å…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œç»„ä»¶ä¸­ä¹Ÿå¯ä»¥è¶Šè¿‡actionsï¼Œå³ä¸å†™dispatchï¼Œç›´æ¥ç¼–å†™commit\ngettersçš„ä½¿ç”¨ æ¦‚å¿µï¼šå½“stateä¸­çš„æ•°æ®éœ€è¦ç»è¿‡åŠ å·¥åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨gettersåŠ å·¥ã€‚\nåœ¨store.jsä¸­è¿½åŠ gettersé…ç½®\n1 2 3 4 5 6 7 8 9 10 11 12 13 ...... const getters = { bigSum(state){ return state.sum * 10 } } //åˆ›å»ºå¹¶æš´éœ²store export default new Vuex.Store({ ...... getters }) ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š$store.getters.bigSum\nå››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨ mapStateæ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„stateä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§\n1 2 3 4 5 6 7 computed: { //å€ŸåŠ©mapStateç”Ÿæˆè®¡ç®—å±æ€§ï¼šsumã€schoolã€subjectï¼ˆå¯¹è±¡å†™æ³•ï¼‰ ...mapState({sum:\u0026#39;sum\u0026#39;,school:\u0026#39;school\u0026#39;,subject:\u0026#39;subject\u0026#39;}), //å€ŸåŠ©mapStateç”Ÿæˆè®¡ç®—å±æ€§ï¼šsumã€schoolã€subjectï¼ˆæ•°ç»„å†™æ³•ï¼‰ ...mapState([\u0026#39;sum\u0026#39;,\u0026#39;school\u0026#39;,\u0026#39;subject\u0026#39;]), }, mapGettersæ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„gettersä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§\n1 2 3 4 5 6 7 computed: { //å€ŸåŠ©mapGettersç”Ÿæˆè®¡ç®—å±æ€§ï¼šbigSumï¼ˆå¯¹è±¡å†™æ³•ï¼‰ ...mapGetters({bigSum:\u0026#39;bigSum\u0026#39;}), //å€ŸåŠ©mapGettersç”Ÿæˆè®¡ç®—å±æ€§ï¼šbigSumï¼ˆæ•°ç»„å†™æ³•ï¼‰ ...mapGetters([\u0026#39;bigSum\u0026#39;]) }, mapActionsæ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸actionså¯¹è¯çš„æ–¹æ³•ï¼Œå³ï¼šåŒ…å«$store.dispatch(xxx)çš„å‡½æ•°\n1 2 3 4 5 6 7 methods:{ //é mapActionsç”Ÿæˆï¼šincrementOddã€incrementWaitï¼ˆå¯¹è±¡å½¢å¼ï¼‰ ...mapActions({incrementOdd:\u0026#39;jiaOdd\u0026#39;,incrementWait:\u0026#39;jiaWait\u0026#39;}) //é mapActionsç”Ÿæˆï¼šincrementOddã€incrementWaitï¼ˆæ•°ç»„å½¢å¼ï¼‰ ...mapActions([\u0026#39;jiaOdd\u0026#39;,\u0026#39;jiaWait\u0026#39;]) } mapMutationsæ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸mutationså¯¹è¯çš„æ–¹æ³•ï¼Œå³ï¼šåŒ…å«$store.commit(xxx)çš„å‡½æ•°\n1 2 3 4 5 6 7 methods:{ //é mapActionsç”Ÿæˆï¼šincrementã€decrementï¼ˆå¯¹è±¡å½¢å¼ï¼‰ ...mapMutations({increment:\u0026#39;JIA\u0026#39;,decrement:\u0026#39;JIAN\u0026#39;}), //é mapMutationsç”Ÿæˆï¼šJIAã€JIANï¼ˆå¯¹è±¡å½¢å¼ï¼‰ ...mapMutations([\u0026#39;JIA\u0026#39;,\u0026#39;JIAN\u0026#39;]), } å¤‡æ³¨ï¼šmapActionsä¸mapMutationsä½¿ç”¨æ—¶ï¼Œè‹¥éœ€è¦ä¼ é€’å‚æ•°éœ€è¦ï¼šåœ¨æ¨¡æ¿ä¸­ç»‘å®šäº‹ä»¶æ—¶ä¼ é€’å¥½å‚æ•°ï¼Œå¦åˆ™å‚æ•°æ˜¯äº‹ä»¶å¯¹è±¡ã€‚\næ¨¡å—åŒ–+å‘½åç©ºé—´ ç›®çš„ï¼šè®©ä»£ç æ›´å¥½ç»´æŠ¤ï¼Œè®©å¤šç§æ•°æ®åˆ†ç±»æ›´åŠ æ˜ç¡®ã€‚\nä¿®æ”¹store.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 const countAbout = { namespaced:true,//å¼€å¯å‘½åç©ºé—´ state:{x:1}, mutations: { ... }, actions: { ... }, getters: { bigSum(state){ return state.sum * 10 } } } const personAbout = { namespaced:true,//å¼€å¯å‘½åç©ºé—´ state:{ ... }, mutations: { ... }, actions: { ... } } const store = new Vuex.Store({ modules: { countAbout, personAbout } }) å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å–stateæ•°æ®ï¼š\n1 2 3 4 //æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥è¯»å– this.$store.state.personAbout.list //æ–¹å¼äºŒï¼šå€ŸåŠ©mapStateè¯»å–ï¼š ...mapState(\u0026#39;countAbout\u0026#39;,[\u0026#39;sum\u0026#39;,\u0026#39;school\u0026#39;,\u0026#39;subject\u0026#39;]), å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å–gettersæ•°æ®ï¼š\n1 2 3 4 //æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥è¯»å– this.$store.getters[\u0026#39;personAbout/firstPersonName\u0026#39;] //æ–¹å¼äºŒï¼šå€ŸåŠ©mapGettersè¯»å–ï¼š ...mapGetters(\u0026#39;countAbout\u0026#39;,[\u0026#39;bigSum\u0026#39;]) å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨dispatch\n1 2 3 4 //æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥dispatch this.$store.dispatch(\u0026#39;personAbout/addPersonWang\u0026#39;,person) //æ–¹å¼äºŒï¼šå€ŸåŠ©mapActionsï¼š ...mapActions(\u0026#39;countAbout\u0026#39;,{incrementOdd:\u0026#39;jiaOdd\u0026#39;,incrementWait:\u0026#39;jiaWait\u0026#39;}) å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨commit\n1 2 3 4 //æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥commit this.$store.commit(\u0026#39;personAbout/ADD_PERSON\u0026#39;,person) //æ–¹å¼äºŒï¼šå€ŸåŠ©mapMutationsï¼š ...mapMutations(\u0026#39;countAbout\u0026#39;,{increment:\u0026#39;JIA\u0026#39;,decrement:\u0026#39;JIAN\u0026#39;}), è·¯ç”± ç†è§£ï¼š ä¸€ä¸ªè·¯ç”±ï¼ˆrouteï¼‰å°±æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»ï¼ˆkey - valueï¼‰ï¼Œå¤šä¸ªè·¯ç”±éœ€è¦è·¯ç”±å™¨ï¼ˆrouterï¼‰è¿›è¡Œç®¡ç†ã€‚ å‰ç«¯è·¯ç”±ï¼škeyæ˜¯è·¯å¾„ï¼Œvalueæ˜¯ç»„ä»¶ã€‚ åŸºæœ¬ä½¿ç”¨ å®‰è£…vue-routerï¼Œå‘½ä»¤ï¼šnpm i vue-router\nåº”ç”¨æ’ä»¶ï¼šVue.use(VueRouter)\nç¼–å†™routeré…ç½®é¡¹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 //å¼•å…¥VueRouter import VueRouter from \u0026#39;vue-router\u0026#39; //å¼•å…¥Luyou ç»„ä»¶ import About from \u0026#39;../components/About\u0026#39; import Home from \u0026#39;../components/Home\u0026#39; //åˆ›å»ºrouterå®ä¾‹å¯¹è±¡ï¼Œå»ç®¡ç†ä¸€ç»„ä¸€ç»„çš„è·¯ç”±è§„åˆ™ const router = new VueRouter({ routes:[ { path:\u0026#39;/about\u0026#39;, component:About }, { path:\u0026#39;/home\u0026#39;, component:Home } ] }) //æš´éœ²router export default router å®ç°åˆ‡æ¢ï¼ˆactive-classå¯é…ç½®é«˜äº®æ ·å¼ï¼‰\n1 \u0026lt;router-link active-class=\u0026#34;active\u0026#34; to=\u0026#34;/about\u0026#34;\u0026gt;About\u0026lt;/router-link\u0026gt; æŒ‡å®šå±•ç¤ºä½ç½®\n1 \u0026lt;router-view\u0026gt;\u0026lt;/router-view\u0026gt; å‡ ä¸ªæ³¨æ„ç‚¹ è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨pagesæ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨componentsæ–‡ä»¶å¤¹ã€‚ é€šè¿‡åˆ‡æ¢ï¼Œâ€œéšè—â€äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«é”€æ¯æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»æŒ‚è½½ã€‚ æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„$routeå±æ€§ï¼Œé‡Œé¢å­˜å‚¨ç€è‡ªå·±çš„è·¯ç”±ä¿¡æ¯ã€‚ æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªrouterï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶çš„$routerå±æ€§è·å–åˆ°ã€‚ å¤šçº§è·¯ç”±ï¼ˆå¤šçº§è·¯ç”±ï¼‰ é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨childrené…ç½®é¡¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 routes:[ { path:\u0026#39;/about\u0026#39;, component:About, }, { path:\u0026#39;/home\u0026#39;, component:Home, children:[ //é€šè¿‡childrené…ç½®å­çº§è·¯ç”± { path:\u0026#39;news\u0026#39;, //æ­¤å¤„ä¸€å®šä¸è¦å†™ï¼š/news component:News }, { path:\u0026#39;message\u0026#39;,//æ­¤å¤„ä¸€å®šä¸è¦å†™ï¼š/message component:Message } ] } ] è·³è½¬ï¼ˆè¦å†™å®Œæ•´è·¯å¾„ï¼‰ï¼š\n1 \u0026lt;router-link to=\u0026#34;/home/news\u0026#34;\u0026gt;News\u0026lt;/router-link\u0026gt; è·¯ç”±çš„queryå‚æ•° ä¼ é€’å‚æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• --\u0026gt; \u0026lt;router-link :to=\u0026#34;/home/message/detail?id=666\u0026amp;title=ä½ å¥½\u0026#34;\u0026gt;è·³è½¬\u0026lt;/router-link\u0026gt; \u0026lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• --\u0026gt; \u0026lt;router-link :to=\u0026#34;{ path:\u0026#39;/home/message/detail\u0026#39;, query:{ id:666, title:\u0026#39;ä½ å¥½\u0026#39; } }\u0026#34; \u0026gt;è·³è½¬\u0026lt;/router-link\u0026gt; æ¥æ”¶å‚æ•°ï¼š\n1 2 $route.query.id $route.query.title å‘½åè·¯ç”± ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±çš„è·³è½¬ã€‚\nå¦‚ä½•ä½¿ç”¨\nç»™è·¯ç”±å‘½åï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 { path:\u0026#39;/demo\u0026#39;, component:Demo, children:[ { path:\u0026#39;test\u0026#39;, component:Test, children:[ { name:\u0026#39;hello\u0026#39; //ç»™è·¯ç”±å‘½å path:\u0026#39;welcome\u0026#39;, component:Hello, } ] } ] } ç®€åŒ–è·³è½¬ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;!--ç®€åŒ–å‰ï¼Œéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ --\u0026gt; \u0026lt;router-link to=\u0026#34;/demo/test/welcome\u0026#34;\u0026gt;è·³è½¬\u0026lt;/router-link\u0026gt; \u0026lt;!--ç®€åŒ–åï¼Œç›´æ¥é€šè¿‡åå­—è·³è½¬ --\u0026gt; \u0026lt;router-link :to=\u0026#34;{name:\u0026#39;hello\u0026#39;}\u0026#34;\u0026gt;è·³è½¬\u0026lt;/router-link\u0026gt; \u0026lt;!--ç®€åŒ–å†™æ³•é…åˆä¼ é€’å‚æ•° --\u0026gt; \u0026lt;router-link :to=\u0026#34;{ name:\u0026#39;hello\u0026#39;, query:{ id:666, title:\u0026#39;ä½ å¥½\u0026#39; } }\u0026#34; \u0026gt;è·³è½¬\u0026lt;/router-link\u0026gt; è·¯ç”±çš„paramså‚æ•° é…ç½®è·¯ç”±ï¼Œå£°æ˜æ¥æ”¶paramså‚æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 { path:\u0026#39;/home\u0026#39;, component:Home, children:[ { path:\u0026#39;news\u0026#39;, component:News }, { component:Message, children:[ { name:\u0026#39;xiangqing\u0026#39;, path:\u0026#39;detail/:id/:title\u0026#39;, //ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•° component:Detail } ] } ] } ä¼ é€’å‚æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• --\u0026gt; \u0026lt;router-link :to=\u0026#34;/home/message/detail/666/ä½ å¥½\u0026#34;\u0026gt;è·³è½¬\u0026lt;/router-link\u0026gt; \u0026lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• --\u0026gt; \u0026lt;router-link :to=\u0026#34;{ name:\u0026#39;xiangqing\u0026#39;, params:{ id:666, title:\u0026#39;ä½ å¥½\u0026#39; } }\u0026#34; \u0026gt;è·³è½¬\u0026lt;/router-link\u0026gt; ç‰¹åˆ«æ³¨æ„ï¼šè·¯ç”±æºå¸¦paramså‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨toçš„å¯¹è±¡å†™æ³•ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨pathé…ç½®é¡¹ï¼Œå¿…é¡»ä½¿ç”¨nameé…ç½®ï¼\næ¥æ”¶å‚æ•°ï¼š\n1 2 $route.params.id $route.params.title è·¯ç”±çš„propsé…ç½® â€‹\tä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 { name:\u0026#39;xiangqing\u0026#39;, path:\u0026#39;detail/:id\u0026#39;, component:Detail, //ç¬¬ä¸€ç§å†™æ³•ï¼špropså€¼ä¸ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­æ‰€æœ‰çš„key-valueçš„ç»„åˆæœ€ç»ˆéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶ // props:{a:900} //ç¬¬äºŒç§å†™æ³•ï¼špropså€¼ä¸ºå¸ƒå°”å€¼ï¼Œå¸ƒå°”å€¼ä¸ºtrueï¼Œåˆ™æŠŠè·¯ç”±æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°é€šè¿‡propsä¼ ç»™Detailç»„ä»¶ // props:true //ç¬¬ä¸‰ç§å†™æ³•ï¼špropså€¼ä¸ºå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶ props(route){ return { id:route.query.id, title:route.query.title } } } \u0026lt;router-link\u0026gt;çš„replaceå±æ€§ ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼ æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸ºpushå’Œreplaceï¼Œpushæ˜¯è¿½åŠ å†å²è®°å½•ï¼Œreplaceæ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚è·¯ç”±è·³è½¬æ—¶å€™é»˜è®¤ä¸ºpush å¦‚ä½•å¼€å¯replaceæ¨¡å¼ï¼š\u0026lt;router-link replace .......\u0026gt;News\u0026lt;/router-link\u0026gt; ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª ä½œç”¨ï¼šä¸å€ŸåŠ©\u0026lt;router-link\u0026gt; å®ç°è·¯ç”±è·³è½¬ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»\nå…·ä½“ç¼–ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 //$routerçš„ä¸¤ä¸ªAPI this.$router.push({ name:\u0026#39;xiangqing\u0026#39;, params:{ id:xxx, title:xxx } }) this.$router.replace({ name:\u0026#39;xiangqing\u0026#39;, params:{ id:xxx, title:xxx } }) this.$router.forward() //å‰è¿› this.$router.back() //åé€€ this.$router.go() //å¯å‰è¿›ä¹Ÿå¯åé€€ ç¼“å­˜è·¯ç”±ç»„ä»¶ ä½œç”¨ï¼šè®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œä¸è¢«é”€æ¯ã€‚\nå…·ä½“ç¼–ç ï¼š\n1 2 3 \u0026lt;keep-alive include=\u0026#34;News\u0026#34;\u0026gt; \u0026lt;router-view\u0026gt;\u0026lt;/router-view\u0026gt; \u0026lt;/keep-alive\u0026gt; ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­ ä½œç”¨ï¼šè·¯ç”±ç»„ä»¶æ‰€ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­ï¼Œç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€ã€‚ å…·ä½“åå­—ï¼š activatedè·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘ã€‚ deactivatedè·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘ã€‚ è·¯ç”±å®ˆå« ä½œç”¨ï¼šå¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶\nåˆ†ç±»ï¼šå…¨å±€å®ˆå«ã€ç‹¬äº«å®ˆå«ã€ç»„ä»¶å†…å®ˆå«\nå…¨å±€å®ˆå«:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 //å…¨å±€å‰ç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶æ‰§è¡Œã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢å‰æ‰§è¡Œ router.beforeEach((to,from,next)=\u0026gt;{ console.log(\u0026#39;beforeEach\u0026#39;,to,from) if(to.meta.isAuth){ //åˆ¤æ–­å½“å‰è·¯ç”±æ˜¯å¦éœ€è¦è¿›è¡Œæƒé™æ§åˆ¶ if(localStorage.getItem(\u0026#39;school\u0026#39;) === \u0026#39;atguigu\u0026#39;){ //æƒé™æ§åˆ¶çš„å…·ä½“è§„åˆ™ next() //æ”¾è¡Œ }else{ alert(\u0026#39;æš‚æ— æƒé™æŸ¥çœ‹\u0026#39;) // next({name:\u0026#39;guanyu\u0026#39;}) } }else{ next() //æ”¾è¡Œ } }) //å…¨å±€åç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶æ‰§è¡Œã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢åæ‰§è¡Œ router.afterEach((to,from)=\u0026gt;{ console.log(\u0026#39;afterEach\u0026#39;,to,from) if(to.meta.title){ document.title = to.meta.title //ä¿®æ”¹ç½‘é¡µçš„title }else{ document.title = \u0026#39;vue_test\u0026#39; } }) ç‹¬äº«å®ˆå«:\n1 2 3 4 5 6 7 8 9 10 11 12 13 beforeEnter(to,from,next){ console.log(\u0026#39;beforeEnter\u0026#39;,to,from) if(to.meta.isAuth){ //åˆ¤æ–­å½“å‰è·¯ç”±æ˜¯å¦éœ€è¦è¿›è¡Œæƒé™æ§åˆ¶ if(localStorage.getItem(\u0026#39;school\u0026#39;) === \u0026#39;atguigu\u0026#39;){ next() }else{ alert(\u0026#39;æš‚æ— æƒé™æŸ¥çœ‹\u0026#39;) // next({name:\u0026#39;guanyu\u0026#39;}) } }else{ next() } } ç»„ä»¶å†…å®ˆå«ï¼š\n1 2 3 4 5 6 //è¿›å…¥å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨ beforeRouteEnter (to, from, next) { }, //ç¦»å¼€å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨ beforeRouteLeave (to, from, next) { } è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼ å¯¹äºä¸€ä¸ªurlæ¥è¯´ï¼Œä»€ä¹ˆæ˜¯hashå€¼ï¼Ÿâ€”â€” #åŠå…¶åé¢çš„å†…å®¹å°±æ˜¯hashå€¼ã€‚\nhashå€¼ä¸ä¼šåŒ…å«åœ¨ HTTP è¯·æ±‚ä¸­ï¼Œå³ï¼šhashå€¼ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨ã€‚\nhashæ¨¡å¼ï¼š\nåœ°å€ä¸­æ°¸è¿œå¸¦ç€#å·ï¼Œä¸ç¾è§‚ ã€‚ è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœºappåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•ã€‚ å…¼å®¹æ€§è¾ƒå¥½ã€‚ historyæ¨¡å¼ï¼š\nåœ°å€å¹²å‡€ï¼Œç¾è§‚ ã€‚ å…¼å®¹æ€§å’Œhashæ¨¡å¼ç›¸æ¯”ç•¥å·®ã€‚ åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜æ”¯æŒï¼Œè§£å†³åˆ·æ–°é¡µé¢æœåŠ¡ç«¯404çš„é—®é¢˜ã€‚ ","date":"2021-09-22T08:21:14+08:00","image":"https://lbqaq.top/p/vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/88417243.webp","permalink":"https://lbqaq.top/p/vue%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","title":"Vueå­¦ä¹ ç¬”è®°"},{"content":"æœ€è¿‘åšé¡¹ç›®éœ€è¦å‰åç«¯åˆ†ç¦»ï¼Œæ‰€ä»¥éœ€è¦æ¥å£æ–‡æ¡£ç»™å‰ç«¯æ–¹ä¾¿è”è°ƒã€‚æ‰‹å†™æ–‡æ¡£æ˜¯ä¸å¯èƒ½çš„ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨Swaggeräº†ã€‚ç½‘ä¸Šçš„æ•™ç¨‹å¤§éƒ¨åˆ†ç‰ˆæœ¬éƒ½åœ¨2.xç”šè‡³æ˜¯1.xï¼Œå¾ˆå°‘æœ‰3.0çš„æ•™ç¨‹ï¼Œæˆ‘ä¸ªäººå°±æ˜¯å–œæ¬¢ç”¨æœ€æ–°ç‰ˆï¼Œæ‰€ä»¥æˆ‘å°±æ¥åˆ†äº«ä¸€ä¸‹æˆ‘ä½¿ç”¨Swagger3çš„ä½“éªŒå’Œå‘å§ã€‚\né…ç½® è¿™é‡Œå°±åˆ†äº«springbootç‰ˆæœ¬çš„æ–¹æ³•äº†ï¼Œç°åœ¨çš„é¡¹ç›®åº”è¯¥éƒ½ç”¨springbootåˆ›å»ºäº†å§ã€‚\nå¯¼å…¥Mavenä¾èµ–\n1 2 3 4 5 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.springfox\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;springfox-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.0.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨å¯åŠ¨ç±»ä¸ŠåŠ ä¸Š@EnableOpenApiå°±è¡Œäº†ã€‚\nå½“ç„¶ï¼Œè¿™æ ·åªæ˜¯é»˜è®¤çš„ï¼Œæˆ‘ä»¬è¦ç”¨è‚¯å®šè¦é…ç½®ä¸€ä¸‹ï¼Œæˆ‘ä»¬å»åˆ›å»ºä¸€ä¸ªConfigç±»ï¼Œåœ¨é‡Œé¢å»ºç«‹ä¸€ä¸ªå‡½æ•°è¿”å›Docketç±»ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„é…ç½®å°±åœ¨è¿™ä¸ªDocketç±»é‡Œé…ç½®ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 @Configuration @EnableOpenApi public class SwaggerConfig { @Bean public Docket docket(){ return new Docket(DocumentationType.OAS_30)\t//3.0ç‰ˆæœ¬ç”¨OAS_30è¿™ä¸ªæ ‡å‡† .apiInfo(getApiInfo()) .select() //æ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ¥å£ .apis(RequestHandlerSelectors.basePackage(\u0026#34;top.lbqaq.controller\u0026#34;)) .build(); } /** * é…ç½®swaggerä¿¡æ¯ */ private ApiInfo getApiInfo(){ //è¿™é‡Œæ˜¯ä½œè€…ä¿¡æ¯ï¼Œåˆ†åˆ«ä¸ºå§“åã€ä¸ªäººä¸»é¡µã€é‚®ç®± Contact contact = new Contact(\u0026#34;luoboQAQ\u0026#34;,\u0026#34;https://lbqaq.top\u0026#34;,\u0026#34;123@xx.com\u0026#34;); return new ApiInfo( \u0026#34;é¡¹ç›®å\u0026#34;, \u0026#34;é¡¹ç›®æè¿°\u0026#34;, \u0026#34;ç‰ˆæœ¬\u0026#34;, \u0026#34;é¡¹ç›®ä¸»é¡µ\u0026#34;, contact, \u0026#34;Apache 2.0\u0026#34;, \u0026#34;https://www.apache.org/licenses/LICENSE-2.0\u0026#34;, new ArrayList()); } } è¿™æ ·ä¸€ä¸ªå¸¦æœ‰ä¸ªäººä¿¡æ¯çš„é…ç½®é¡µå°±åšå¥½äº†ã€‚\næ³¨è§£ é¦–å…ˆæ˜¯2.0ç‰ˆæœ¬çš„æ³¨è§£ï¼Œå½“ç„¶æ–°ç‰ˆæœ¬ä¹ŸåŒæ ·é€šç”¨ã€‚\nSwaggeræ³¨è§£ ç®€å•è¯´æ˜ @Api(tags = \u0026ldquo;xxxæ¨¡å—è¯´æ˜\u0026rdquo;) ä½œç”¨åœ¨æ¨¡å—ç±»ä¸Š @ApiOperation(\u0026ldquo;xxxæ¥å£è¯´æ˜\u0026rdquo;) ä½œç”¨åœ¨æ¥å£æ–¹æ³•ä¸Š @ApiModel(\u0026ldquo;xxxPOJOè¯´æ˜\u0026rdquo;) ä½œç”¨åœ¨æ¨¡å‹ç±»ä¸Šï¼šå¦‚VOã€BO @ApiModelProperty(value = \u0026ldquo;xxxå±æ€§è¯´æ˜\u0026rdquo;,hidden = true) ä½œç”¨åœ¨ç±»æ–¹æ³•å’Œå±æ€§ä¸Šï¼Œhiddenè®¾ç½®ä¸ºtrueå¯ä»¥éšè—è¯¥å±æ€§ @ApiParam(\u0026ldquo;xxxå‚æ•°è¯´æ˜\u0026rdquo;) ä½œç”¨åœ¨å‚æ•°ã€æ–¹æ³•å’Œå­—æ®µä¸Šï¼Œç±»ä¼¼@ApiModelProperty æ—¢ç„¶ç”¨äº†3.0ï¼Œä¹Ÿå°±å¯ä»¥ä½¿ç”¨3.0çš„æ–°æ³¨é‡Šã€‚\nå…ˆæ”¾ä¸Šå®˜ç½‘é“¾æ¥ï¼š\nSwaggeræ³¨è§£ SpringFoxæ–‡æ¡£ Swaggeræ˜¯åº•å±‚ï¼Œå®ç°æ˜¯ç”±SpringFoxæ¥å®Œæˆçš„ï¼Œæ‰€ä»¥æœ‰äº›åœ¨Swaggeræ–‡æ¡£é‡Œçš„æ³¨è§£æ”¾åˆ°SpringFoxé‡Œå°±æ— æ³•å®ç°ï¼Œæ¯”å¦‚@RequestBodyè¿™ä¸ªæ³¨è§£å°±æ— æ³•å®ç°ã€‚ä¸‹é¢å°±åˆ—ä¸¾æˆ‘æµ‹è¯•è¿‡å¯ä»¥æˆåŠŸçš„æ³¨è§£ï¼š\nåœ¨æ–¹æ³•ä¸Šè¿›è¡Œæ³¨é‡Š\n1 2 3 @Operation(summary = \u0026#34;è¿™ä¼šæ˜¾ç¤ºåœ¨ä¸»é¡µä¸Š\u0026#34;, description = \u0026#34;è¿™æ˜¾ç¤ºåœ¨å†…é¡µé‡Œ\u0026#34;, tags = {\u0026#34;test\u0026#34;})\t//ä¼šå°†æ¥å£åˆ†ç±»å‡ºå» åœ¨å‚æ•°ä¸Šæ³¨é‡Š\n1 @Parameter(description = \u0026#34;è¿™é‡Œæ˜¯æè¿°\u0026#34;, required = true) åªæµ‹äº†è¿™ä¹ˆå¤šï¼Œä¹‹å‰ä¸ºäº†æµ‹è¯•@RequestBodyèŠ±äº†å¤ªå¤šæ—¶é—´ï¼Œç»“æœä¸€æ— æ‰€è·ã€‚å› ä¸º2.0çš„æ³¨è§£è¿˜èƒ½ç”¨ï¼Œè¿™é‡Œå°±æŒ–ä¸ªå‘ï¼Œç­‰ä¹‹åæœ‰æ—¶é—´å†æ¥å®Œå–„å§ã€‚\n","date":"2021-09-09T15:09:04+08:00","image":"https://lbqaq.top/p/swagger/92079701.webp","permalink":"https://lbqaq.top/p/swagger/","title":"Swagger3åˆä½“éªŒ"},{"content":"æ¯æ¬¡å†™å®Œåšå®¢ï¼Œéœ€è¦åœ¨æœ¬åœ°ç¼–è¯‘ï¼Œç„¶åå†æ‰‹åŠ¨é€šè¿‡WinSCPé€åˆ°æœåŠ¡å™¨ä¸Šã€‚ä½œä¸ºä¸€ä¸ªæ‡’äººï¼Œè¿™ä¸Šé¢å‡ æ­¥ä¸‹æ¥è¿˜æ˜¯è§‰å¾—éº»çƒ¦ï¼Œè€Œä¸”æ¯æ¬¡ç¼–è¯‘åˆä¼šç”Ÿæˆä¸€é¡¿ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œäºæ˜¯ä¾¿å†³å®šæ•´ç‚¹è‡ªåŠ¨åŒ–çš„æµç¨‹ï¼Œç›´æ¥è§£æ”¾åŒæ‰‹ã€‚\nå› ä¸ºæˆ‘çš„åšå®¢åœ¨æ²¡ä¹°æœåŠ¡å™¨ä¹‹å‰éƒ½æ˜¯æ‰˜ç®¡åœ¨Githubä¸Šçš„ï¼Œäºæ˜¯è‡ªç„¶è€Œç„¶åœ°å°±æƒ³åˆ°äº†Webhookï¼Œåœ¨æ¯æ¬¡Pushåè‡ªåŠ¨å‘é€æ¶ˆæ¯ç»™æœåŠ¡å™¨ï¼Œè®©å…¶è‡ªåŠ¨æ‹‰å–ä»£ç ã€‚\nç½‘ä¸Šçš„æ•™ç¨‹å¤§å¤šéƒ½æ˜¯åœ¨æœ¬åœ°ç¼–è¯‘ï¼Œç„¶è€Œæˆ‘è§‰å¾—æ—¢ç„¶è¦æ‡’ï¼Œå°±ä¸€æ‡’åˆ°åº•å§ï¼Œç¼–è¯‘ä¹Ÿç›´æ¥é€šè¿‡Github Actionsæ¥å®Œæˆå°±è¡Œäº†ã€‚\næµç¨‹ éœ€è¦2ä¸ªGithubä»“åº“ï¼ˆ1ä¸ªåº”è¯¥ä¹Ÿå¯ä»¥ï¼‰ï¼Œä¸€ä¸ªå­˜æ”¾ç½‘ç«™çš„æºç ï¼Œä¸€ä¸ªæ˜¯å­˜æ”¾ç¼–è¯‘å¥½çš„htmlæ–‡ä»¶ã€‚æ•´ä¸ªå·¥ä½œæµç¨‹å°±å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\næ­¥éª¤ è®¾ç½®è„šæœ¬ é¦–å…ˆè¦å†™ä¸€ä¸ªshellè„šæœ¬ï¼ŒåŠŸèƒ½å¾ˆç®€å•å°±æ˜¯è‡ªåŠ¨æ‹‰å–ä»£ç ã€‚\n1 2 3 #!/bin/bash cd /home/luobo/Blog git pull åˆ›å»ºwebhookæœåŠ¡åç«¯ è¿™é‡Œå°±ç›´æ¥ä½¿ç”¨NodeJSæ¥åˆ›å»ºï¼Œä½¿ç”¨çš„åŸå› å¾ˆç®€å•ï¼Œå› ä¸ºå·²ç»æœ‰ç°æˆçš„æ’ä»¶å¯ä»¥ä½¿ç”¨äº†ã€‚\né¦–å…ˆå®‰è£…ä¾èµ–\n1 2 npm i -S github-webhook-handler npm i -g pm2 ç„¶ååˆ›å»ºwebhook.jsä½œä¸ºåç«¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 var http = require(\u0026#39;http\u0026#39;); var spawn = require(\u0026#39;child_process\u0026#39;).spawn; var createHandler = require(\u0026#39;github-webhook-handler\u0026#39;); //æ³¨æ„è¦å°† secret ä¿®æ”¹ä½ è‡ªå·±çš„ var handler = createHandler({ path: \u0026#39;/webhook\u0026#39;, secret: \u0026#39;xxxxx\u0026#39; }); http.createServer(function (req, res) { handler(req, res, function (err) { res.statusCode = 404; res.end(\u0026#39;no such location\u0026#39;); }) }).listen(6666); handler.on(\u0026#39;error\u0026#39;, function (err) { console.error(\u0026#39;Error:\u0026#39;, err.message) }); handler.on(\u0026#39;push\u0026#39;, function (event) { console.log(\u0026#39;Received a push event for %s to %s\u0026#39;, event.payload.repository.name, event.payload.ref); runCommand(\u0026#39;sh\u0026#39;, [\u0026#39;./deploy.sh\u0026#39;], function( txt ){ console.log(txt); }); }); function runCommand( cmd, args, callback ){ var child = spawn( cmd, args ); var resp = \u0026#39;Deploy OK\u0026#39;; child.stdout.on(\u0026#39;data\u0026#39;, function( buffer ){ resp += buffer.toString(); }); child.stdout.on(\u0026#39;end\u0026#39;, function(){ callback( resp ) }); } æœ€åå¯åŠ¨æœåŠ¡å³å¯\n1 pm2 start webhook.js Nginxè®¾ç½®åä»£ 1 2 3 location /webhook { proxy_pass http://127.0.0.1:6666; } é…ç½®Github Webhook åœ¨ htmlä»“åº“çš„ Settings - webhooks è®¾ç½®ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ webhookã€‚\nå°†Content Type è®¾ç½®ä¸º application/jsonï¼Œsecret è®¾ç½®æˆä¸ webhook.js ä¸­çš„ç›¸åŒã€‚\ntrigeeré€‰æ‹©Just the push event. ã€‚\nå®ŒæˆåGithubä¼šè‡ªåŠ¨å‘èµ·ä¸€ä¸ªæµ‹è¯•è¯·æ±‚ï¼Œå¦‚æœè¿”å›ä¸º200è¯´æ˜é…ç½®å®Œæˆï¼Œ\né…ç½®è‡ªåŠ¨ç¼–è¯‘ åœ¨æºä»£ç ä»“åº“çš„.github/workflowsç›®å½•ä¸‹åˆ›å»ºdeploy.ymlï¼Œå¹¶å¡«å…¥ä»¥ä¸‹å†…å®¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 name: Build and Deploy on: [push] # ä»»åŠ¡ jobs: build-and-deploy: # æœåŠ¡å™¨ç¯å¢ƒï¼šæœ€æ–°ç‰ˆ Ubuntu runs-on: ubuntu-latest steps: # æ‹‰å–ä»£ç  - name: Checkout uses: actions/checkout@v2 # å®‰è£…Hugo - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: latest extended: true - name: Build run: hugo # éƒ¨ç½²åˆ° GitHub Pages - name: Deploy to GitHub Pages uses: JamesIves/github-pages-deploy-action@4.1.4 with: BRANCH: main FOLDER: public token: ${{ secrets.GP_TOKEN }} repository-name: luoboQAQ/luoboQAQ.github.io æ³¨æ„è¦å°†æœ€åçš„repository-nameæ¢ä¸ºä½ è‡ªå·±çš„ä»“åº“ï¼ŒåŒæ—¶éœ€è¦ç”³è¯·å’Œé…ç½®Github Tokenï¼Œè¿™é‡Œæˆ‘å°±ä¸å±•å¼€äº†ã€‚\nå‚è€ƒ ä½¿ç”¨ GitHub Webhook å®ç°é™æ€ç½‘ç«™è‡ªåŠ¨åŒ–éƒ¨ç½² ","date":"2021-08-23T15:44:59+08:00","image":"https://lbqaq.top/p/%E4%BD%BF%E7%94%A8webhooks%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/90550307.webp","permalink":"https://lbqaq.top/p/%E4%BD%BF%E7%94%A8webhooks%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/","title":"ä½¿ç”¨Webhookså®ç°è‡ªåŠ¨éƒ¨ç½²"},{"content":"ä¸€ä¸ªå®Œæ•´çš„åšå®¢ï¼Œæ€ä¹ˆèƒ½å°‘çš„äº†è¯„è®ºç³»ç»Ÿå‘¢ã€‚è¯„è®ºçš„å®ç°å·²ç»æœ‰è®¸è®¸å¤šå¤šçš„æ–¹æ³•äº†ï¼ŒæŒ‘æ¥æŒ‘å»ï¼Œè¿˜æ˜¯é€‰æ‹©äº†Walineã€‚\nä¸€å¼€å§‹æˆ‘æ˜¯é‡‡ç”¨å®˜æ–¹æ¨èçš„LeanCloud+Vercelçš„æ–¹å¼è¿›è¡Œéƒ¨ç½²çš„ï¼Œç»“æœæ­¥éª¤å…¨éƒ¨èµ°å®Œåæ‰å‘ç°Vercelå·²ç»åœ¨å›½å†…è¢«å¢™äº†ï¼Œä¸ç§‘å­¦æ ¹æœ¬ä¸Šä¸å»ğŸ˜‡ã€‚æ€»ä¸èƒ½è¦æ±‚ç”¨æˆ·è¿˜è¦å¼€æ¢¯å­æ‰èƒ½è¯„è®ºå§ï¼Œæ‰€å¹¸å®˜æ–¹æä¾›äº†å…¶ä»–çš„éƒ¨ç½²æ–¹å¼ï¼Œå› ä¸ºæˆ‘æ‰ä¹°äº†è‡ªå·±çš„æœåŠ¡å™¨~~ï¼ˆä¸æ¦¨å¹²æ€ä¹ˆè¡Œå‘¢ï¼‰~~ï¼Œæ‰€ä»¥å°±é€‰æ‹©æœ¬åœ°éƒ¨ç½²+SQLliteçš„æ–¹å¼äº†ã€‚\néƒ¨ç½²æ­¥éª¤ å®‰è£…node.js ç”±äºWalineçš„æœåŠ¡ç«¯æ˜¯ç”±jså†™çš„ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…node.js\nåœ¨nodejsä¸­æ–‡ç½‘æ‰¾åˆ°éœ€è¦çš„ç‰ˆæœ¬ï¼Œé€‰æ‹©é˜¿é‡Œäº‘é•œåƒï¼Œå°†ä¸‹è½½é“¾æ¥å¤åˆ¶ä¸‹æ¥\nè¿æ¥æœåŠ¡å™¨ï¼Œé€‰æ‹©nodejsçš„å®‰è£…ç›®å½•ï¼Œè¿™é‡Œæˆ‘å®‰è£…åœ¨/usr/local/bin/\n1 cd /usr/local/bin/ ä¸‹è½½å®‰è£…åŒ…åˆ°æœ¬åœ°\n1 wget https://npm.taobao.org/mirrors/node/v14.17.5/node-v14.17.5-linux-x64.tar.gz è§£å‹\n1 tar -xvf node-v14.17.5-linux-x64.tar.gz é‡å‘½åç›®å½•\n1 mv node-v14.17.5-linux-x64 nodejs æ·»åŠ ç›®å½•åˆ°ç³»ç»Ÿå˜é‡\n1 2 cd /etc/profile.d vim custom.sh åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ export PATH=$PATH:/usr/local/bin/nodejs/bin\næµ‹è¯•ï¼Œè¾“å…¥ä¸‹é¢3æ¡å‘½ä»¤ï¼Œå¦‚æœä¸æŠ¥é”™åˆ™å®‰è£…æˆåŠŸã€‚\n1 2 3 node -v npm version npx -v ï¼ˆå¯é€‰ï¼‰å®‰è£…cnpm\n1 npm install -g cnpm --registry=https://registry.npm.taobao.org å®‰è£…WalineæœåŠ¡ç«¯ å®‰è£…walineçš„æœåŠ¡ç«¯\n1 npm install -g @waline/vercel é…ç½®æ•°æ®åº“ã€‚è¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯SQLiteï¼Œåªéœ€è¦ä¸‹è½½ waline.sqlite æ–‡ä»¶è‡³åˆé€‚çš„ä½ç½®ã€‚\nå…¶ä»–çš„æ•°æ®åº“å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£æ¥é…ç½®ã€‚\né…ç½®ç¯å¢ƒå˜é‡ã€‚\nè¿™é‡Œæˆ‘é€‰æ‹©æ–°å»ºwaline.shï¼Œæ–¹ä¾¿æ—¥åç»´æŠ¤ã€‚\n1 2 3 4 cd /etc/profile.d vim waline.sh export SQLITE_PATH=/home/luobo export JWT_TOKEN=eqdVMaEwd SQLITE_PATHï¼šè¡¨ç¤ºSQLiteæ–‡ä»¶çš„ä½ç½®ã€‚ JWT_TOKENï¼šéšæœºä¸€ä¸²å­—ç¬¦ä¸²å°±è¡Œã€‚ å¯åŠ¨æ¨¡å—\n1 2 cd /usr/local/bin/nodejs/lib node node_modules/@waline/vercel/vanilla.js é…ç½®nginxåä»£ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 #waline server { listen 80; listen 443 ssl http2; server_name waline.lbqaq.top; if ($server_port !~ 443){ rewrite ^(/.*)$ https://$host$1 permanent; } ssl_certificate cert/waline.lbqaq.top.pem; ssl_certificate_key cert/waline.lbqaq.top.key; ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location / { proxy_pass http://127.0.0.1:8360; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header REMOTE-HOST $remote_addr; add_header X-Cache $upstream_cache_status; # cache add_header Cache-Control no-cache; expires 12h; } } åœ¨hugoä¸­å¯ç”¨Waline ç”±äºæˆ‘ç”¨çš„ä¸»é¢˜å·²ç»æ”¯æŒWalineè¯„è®ºï¼Œæ‰€ä»¥åªéœ€è¦å¡«å…¥serverURLå°±è¡Œäº†ã€‚\næ·»åŠ QQæ¨é€ï¼ˆå¯é€‰ï¼‰ å®˜æ–¹æä¾›äº†å››ç§é€šçŸ¥æ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºé‚®ç®±ã€å¾®ä¿¡ã€QQã€Telegramã€‚\né‚®ç®±åŸºæœ¬ä¸ä¼šå»çœ‹ï¼ŒTelegramæ²¡ç§‘å­¦ä¹Ÿä¸Šä¸å»ï¼Œå¾®ä¿¡ç”±äºæ˜¯èµ°çš„Serveré…±ï¼Œæ²¡æœ‰æèµ ä¸€å¤©å°±æ”¯æŒ5æ¡æ¶ˆæ¯ã€‚\næœ€ç»ˆè¿˜æ˜¯å†³å®šé‡‡ç”¨Qmsg é…±ã€‚\næ³¨å†Œå°±ä¸åœ¨è¿™å±•å¼€äº†ï¼Œå…·ä½“å†™ä¸€ä¸‹ç¯å¢ƒå˜é‡çš„é…ç½®ã€‚\n1 2 3 4 5 6 7 cd /etc/profile.d vim waline.sh export QMSG_KEY=xxxxxx export QQ_ID=xxxxxx export AUTHOR_EMAIL=xxxxxxx export SITE_NAME=Blog export SITE_URL=lbqaq.top è¸©å‘ æœ¬ä»¥ä¸ºå¯ç”¨è¯„è®ºæ˜¯ä¸€ä»¶å¾ˆç®€å•çš„äº‹ï¼Œç»“æœèŠ±äº†æ•´ä¸ªä¸‹åˆåŠ æ™šä¸Šï¼Œè¸©äº†å¥½å¤šå¥½å¤šå‘ã€‚åœ¨è¿™é‡Œå°±æŠŠæˆ‘è¸©çš„å‘è®°å½•ä¸‹æ¥ï¼Œé¿å…ä¹‹åå‡ºç°ä¸€æ ·çš„é—®é¢˜ã€‚\nnpm install -g @waline/vercelæŠ¥é”™\nä½¿ç”¨cnpmè¿›è¡Œå®‰è£…\n2021/10/21æ›´æ–°ï¼š\næ›´æ–°ç³»ç»Ÿåå†å°è¯•å®‰è£…æ— è®ºæ˜¯npmè¿˜æ˜¯cnpméƒ½æ— æ³•å®‰è£…ï¼Œæ•…ä½¿ç”¨Dockerè¿›è¡Œå®‰è£…å’Œè¿è¡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 docker run -d \\ -e SQLITE_PATH=/data \\ -e JWT_TOKEN=xxx \\ -e QMSG_KEY=xxxx \\ -e QQ_ID=123 \\ -e AUTHOR_EMAIL=xxx@xx.com \\ -e SITE_NAME=Blog \\ -e SITE_URL=lbqaq.top \\ -p 8360:8360 \\ -v /home/admin/waline:/data \\ --name=waline \\ lizheming/waline æƒ³ä½¿ç”¨lbqaq.top/waline/è¿™æ ·çš„é“¾æ¥æ¥è®¾ç½®æœåŠ¡ç«¯\nç›´æ¥æŠ¥404é”™è¯¯ï¼Œè¿˜æ˜¯é€‰æ‹©ä¸Šæ–‡ä¸­çš„å­åŸŸåæ–¹æ³•\nnginxæç¤ºæ²¡æ‰¾åˆ°http2æ¨¡å—\nåœ¨å®‰è£…nginxæ—¶åŠ ä¸Š--with-http_v2_moduleå¦‚æœå·²ç»å®‰è£…å¥½äº†ï¼Œå¯ä»¥é‡æ–°å®‰è£…ä¸€é\nè®¾ç½®äº†server_name waline.lbqaq.topè¿˜æ˜¯è·³è½¬é¦–é¡µ\nå¢åŠ ä¸€ä¸ªé»˜è®¤çš„serverï¼Œå°†æ‰€æœ‰ä¸åŒ¹é…çš„é“¾æ¥é˜»æ­¢\n1 2 3 4 5 server { listen 80 default_server; server_name _; return 444; } nginxé…ç½®ä¸ç”Ÿæ•ˆ\nå¦‚æœé…ç½®æ²¡æœ‰é—®é¢˜ï¼Œé™¤äº†nginx -s reloadè¿˜å¯ä»¥å°è¯•é‡å¯nginx\nå‚è€ƒé“¾æ¥ Walineå®˜æ–¹æ–‡æ¡£ nginxä¸­æ–‡æ–‡æ¡£ ","date":"2021-08-21T15:37:44+08:00","image":"https://lbqaq.top/p/waline/78502982.webp","permalink":"https://lbqaq.top/p/waline/","title":"ä¸ºåšå®¢æ·»åŠ è¯„è®ºç³»ç»Ÿ"},{"content":"SpringMVCä¹Ÿå‘Šä¸€æ®µè½äº†ï¼Œç»ˆäºè¦åˆ°SpringBootäº†ã€‚\nè¿˜æ˜¯å’Œä¹‹å‰ä¸€æ ·ï¼Œç¬”è®°æ˜¯åŸºäºé‡è§ç‹‚ç¥è¯´çš„SpringMVCè§†é¢‘æ•™ç¨‹è€Œæ¥ï¼Œåœ¨æ­¤æ„Ÿè°¢èƒ½æä¾›è¿™ä¹ˆä¼˜ç§€çš„æ•™ç¨‹ã€‚\nå›é¡¾MVC ä»€ä¹ˆæ˜¯MVC MVCæ˜¯æ¨¡å‹(Model)ã€è§†å›¾(View)ã€æ§åˆ¶å™¨(Controller)çš„ç®€å†™ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒã€‚ å°†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€æ˜¾ç¤ºåˆ†ç¦»çš„æ–¹æ³•æ¥ç»„ç»‡ä»£ç ã€‚ **Modelï¼ˆæ¨¡å‹ï¼‰ï¼š**æ•°æ®æ¨¡å‹ï¼Œæä¾›è¦å±•ç¤ºçš„æ•°æ®ï¼Œå› æ­¤åŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é¢†åŸŸæ¨¡å‹æˆ–JavaBeanç»„ä»¶ï¼ˆåŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼‰ï¼Œä¸è¿‡ç°åœ¨ä¸€èˆ¬éƒ½åˆ†ç¦»å¼€æ¥ï¼šValue Objectï¼ˆæ•°æ®Daoï¼‰ å’Œ æœåŠ¡å±‚ï¼ˆè¡Œä¸ºServiceï¼‰ã€‚ä¹Ÿå°±æ˜¯æ¨¡å‹æä¾›äº†æ¨¡å‹æ•°æ®æŸ¥è¯¢å’Œæ¨¡å‹æ•°æ®çš„çŠ¶æ€æ›´æ–°ç­‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®å’Œä¸šåŠ¡ã€‚\næ‹“å±•ï¼šåœ¨å‰ç«¯æ•°æ®ä¼ è¾“ç»™åç«¯æ—¶ï¼Œæœ‰äº›å­—æ®µæ˜¯ä¸éœ€è¦çš„ï¼Œè¿™æ˜¯å¯èƒ½ä¼šç»†åˆ†å‡ºVoå±‚ï¼ˆè§†å›¾ï¼‰\næ¯”å¦‚ï¼šç”¨æˆ·æœ‰è´¦å·ã€å¯†ç ã€å¹´é¾„ç­‰ä¸€ç³»åˆ—å­—æ®µ\nè¿™æ—¶å‰ç«¯ç™»å½•åªä¼ äº†è´¦å·å¯†ç \næ­¤æ—¶å¯ä»¥ç”¨UserVoæ¥è¡¨ç¤ºï¼Œé‡Œé¢åªæœ‰è´¦å·å’Œå¯†ç \n**Viewï¼ˆè§†å›¾ï¼‰ï¼š**è´Ÿè´£è¿›è¡Œæ¨¡å‹çš„å±•ç¤ºï¼Œä¸€èˆ¬å°±æ˜¯æˆ‘ä»¬è§åˆ°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®¢æˆ·æƒ³çœ‹åˆ°çš„ä¸œè¥¿ã€‚\n**Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼š**æ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œå§”æ‰˜ç»™æ¨¡å‹è¿›è¡Œå¤„ç†ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰ï¼Œå¤„ç†å®Œæ¯•åæŠŠè¿”å›çš„æ¨¡å‹æ•°æ®è¿”å›ç»™è§†å›¾ï¼Œç”±è§†å›¾è´Ÿè´£å±•ç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´æ§åˆ¶å™¨åšäº†ä¸ªè°ƒåº¦å‘˜çš„å·¥ä½œã€‚\næœ€å…¸å‹çš„MVCå°±æ˜¯JSP + servlet + javabeançš„æ¨¡å¼ã€‚\nç”¨æˆ·å‘è¯·æ±‚ Servletæ¥æ”¶è¯·æ±‚æ•°æ®ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³• ä¸šåŠ¡å¤„ç†å®Œæ¯•ï¼Œè¿”å›æ›´æ–°åçš„æ•°æ®ç»™servlet servletè½¬å‘åˆ°JSPï¼Œç”±JSPæ¥æ¸²æŸ“é¡µé¢ å“åº”ç»™å‰ç«¯æ›´æ–°åçš„é¡µé¢ èŒè´£åˆ†æï¼š\nControllerï¼šæ§åˆ¶å™¨\nå–å¾—è¡¨å•æ•°æ® è°ƒç”¨ä¸šåŠ¡é€»è¾‘ è½¬å‘æŒ‡å®šçš„é¡µé¢ Modelï¼šæ¨¡å‹\nä¸šåŠ¡é€»è¾‘ ä¿å­˜æ•°æ®çš„çŠ¶æ€ Viewï¼šè§†å›¾\næ˜¾ç¤ºé¡µé¢ å¤ä¹ Servlet çˆ¶å·¥ç¨‹æ·»åŠ ä¾èµ–\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 \u0026lt;dependencies\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;junit\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;junit\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.13\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-webmvc\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.3.9\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;javax.servlet\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;javax.servlet-api\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.1.0\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;provided\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;javax.servlet.jsp\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jsp-api\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.2\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;javax.servlet\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jstl\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.2\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; ç¼–å†™Servlet\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class HelloServlet extends HttpServlet { @Override protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { //è·å–å‰ç«¯æ“ä½œ String method = req.getParameter(\u0026#34;method\u0026#34;); if (method.equals(\u0026#34;add\u0026#34;)){ req.getSession().setAttribute(\u0026#34;msg\u0026#34;,\u0026#34;æ‰§è¡Œäº†addæ–¹æ³•\u0026#34;); } if (method.equals(\u0026#34;delete\u0026#34;)){ req.getSession().setAttribute(\u0026#34;msg\u0026#34;,\u0026#34;æ‰§è¡Œäº†deleteæ–¹æ³•\u0026#34;); } //è°ƒç”¨ä¸šåŠ¡å±‚ //è§†å›¾è½¬å‘æˆ–é‡å®šå‘ req.getRequestDispatcher(\u0026#34;/WEB-INF/jsp/test.jsp\u0026#34;).forward(req,resp); } @Override protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { doGet(req, resp); } } ç¼–å†™test.jspï¼Œåœ¨WEB-INFç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªjspçš„æ–‡ä»¶å¤¹ï¼Œæ–°å»ºtest.jsp\n1 2 3 4 5 6 7 8 9 \u0026lt;%@ page contentType=\u0026#34;text/html;charset=UTF-8\u0026#34; language=\u0026#34;java\u0026#34; %\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;Title\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; ${msg} \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; åœ¨web.xmlä¸­æ³¨å†ŒServlet\n1 2 3 4 5 6 7 8 9 \u0026lt;servlet\u0026gt; \u0026lt;servlet-name\u0026gt;hello\u0026lt;/servlet-name\u0026gt; \u0026lt;servlet-class\u0026gt;top.lbqaq.servlet.HelloServlet\u0026lt;/servlet-class\u0026gt; \u0026lt;/servlet\u0026gt; \u0026lt;servlet-mapping\u0026gt; \u0026lt;servlet-name\u0026gt;hello\u0026lt;/servlet-name\u0026gt; \u0026lt;url-pattern\u0026gt;/hello\u0026lt;/url-pattern\u0026gt; \u0026lt;/servlet-mapping\u0026gt; é…ç½®TomCatï¼Œè¿›è¡Œæµ‹è¯•\nMVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…\nå°†urlæ˜ å°„åˆ°javaç±»æˆ–javaç±»çš„æ–¹æ³• . å°è£…ç”¨æˆ·æäº¤çš„æ•°æ® . å¤„ç†è¯·æ±‚\u0026ndash;è°ƒç”¨ç›¸å…³çš„ä¸šåŠ¡å¤„ç†\u0026ndash;å°è£…å“åº”æ•°æ® . å°†å“åº”çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ . jsp / html ç­‰è¡¨ç¤ºå±‚æ•°æ® . è¯´æ˜ï¼š\nâ€‹\tå¸¸è§çš„æœåŠ¡å™¨ç«¯MVCæ¡†æ¶æœ‰ï¼šStrutsã€Spring MVCã€ASP.NET MVCã€Zend Frameworkã€JSFï¼›å¸¸è§å‰ç«¯MVCæ¡†æ¶ï¼švueã€angularjsã€reactã€backboneï¼›ç”±MVCæ¼”åŒ–å‡ºäº†å¦å¤–ä¸€äº›æ¨¡å¼å¦‚ï¼šMVPã€MVVM ç­‰ç­‰\u0026hellip;.\nä»€ä¹ˆæ˜¯SpringMVC æ¦‚è¿° Spring MVCæ˜¯Spring Frameworkçš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åŸºäºJavaå®ç°MVCçš„è½»é‡çº§Webæ¡†æ¶ã€‚\nä¸­æ–‡æ–‡æ¡£\næˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ SpringMVCå‘¢?\nSpring MVCçš„ç‰¹ç‚¹ï¼š\nè½»é‡çº§ï¼Œç®€å•æ˜“å­¦ é«˜æ•ˆ , åŸºäºè¯·æ±‚å“åº”çš„MVCæ¡†æ¶ ä¸Springå…¼å®¹æ€§å¥½ï¼Œæ— ç¼ç»“åˆ çº¦å®šä¼˜äºé…ç½® åŠŸèƒ½å¼ºå¤§ï¼šRESTfulã€æ•°æ®éªŒè¯ã€æ ¼å¼åŒ–ã€æœ¬åœ°åŒ–ã€ä¸»é¢˜ç­‰ ç®€æ´çµæ´» ä¸­å¿ƒæ§åˆ¶å™¨ â€‹\tSpringçš„webæ¡†æ¶å›´ç»•DispatcherServletè®¾è®¡ã€‚DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£çš„controllerå£°æ˜æ–¹å¼ã€‚\nâ€‹\tSpring MVCæ¡†æ¶åƒè®¸å¤šå…¶ä»–MVCæ¡†æ¶ä¸€æ ·, ä»¥è¯·æ±‚ä¸ºé©±åŠ¨ , å›´ç»•ä¸€ä¸ªä¸­å¿ƒServletåˆ†æ´¾è¯·æ±‚åŠæä¾›å…¶ä»–åŠŸèƒ½ï¼ŒDispatcherServletæ˜¯ä¸€ä¸ªå®é™…çš„Servlet (å®ƒç»§æ‰¿è‡ªHttpServlet åŸºç±»)ã€‚\nSpringMVCçš„åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nâ€‹\tå½“å‘èµ·è¯·æ±‚æ—¶è¢«å‰ç½®çš„æ§åˆ¶å™¨æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°ç”Ÿæˆä»£ç†è¯·æ±‚ï¼Œæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å®é™…æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨å¤„ç†è¯·æ±‚ï¼Œåˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œè®¿é—®æ•°æ®åº“ï¼Œå°†æ¨¡å‹å“åº”ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨ä½¿ç”¨æ¨¡å‹ä¸è§†å›¾æ¸²æŸ“è§†å›¾ç»“æœï¼Œå°†ç»“æœè¿”å›ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œå†å°†ç»“æœè¿”å›ç»™è¯·æ±‚è€…ã€‚\nSpringMVCæ‰§è¡ŒåŸç† å›¾ä¸ºSpringMVCçš„ä¸€ä¸ªè¾ƒå®Œæ•´çš„æµç¨‹å›¾ï¼Œå®çº¿è¡¨ç¤ºSpringMVCæ¡†æ¶æä¾›çš„æŠ€æœ¯ï¼Œä¸éœ€è¦å¼€å‘è€…å®ç°ï¼Œè™šçº¿è¡¨ç¤ºéœ€è¦å¼€å‘è€…å®ç°ã€‚\nç®€è¦åˆ†ææ‰§è¡Œæµç¨‹\nDispatcherServletè¡¨ç¤ºå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ªSpringMVCçš„æ§åˆ¶ä¸­å¿ƒã€‚ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ŒDispatcherServletæ¥æ”¶è¯·æ±‚å¹¶æ‹¦æˆªè¯·æ±‚ã€‚\næˆ‘ä»¬å‡è®¾è¯·æ±‚çš„urlä¸º : http://localhost:8080/SpringMVC/hello\nå¦‚ä¸Šurlæ‹†åˆ†æˆä¸‰éƒ¨åˆ†ï¼š\nhttp://localhost:8080æœåŠ¡å™¨åŸŸå\nSpringMVCéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„webç«™ç‚¹\nhelloè¡¨ç¤ºæ§åˆ¶å™¨\né€šè¿‡åˆ†æï¼Œå¦‚ä¸Šurlè¡¨ç¤ºä¸ºï¼šè¯·æ±‚ä½äºæœåŠ¡å™¨localhost:8080ä¸Šçš„SpringMVCç«™ç‚¹çš„helloæ§åˆ¶å™¨ã€‚\nHandlerMappingä¸ºå¤„ç†å™¨æ˜ å°„ã€‚DispatcherServletè°ƒç”¨HandlerMapping,HandlerMappingæ ¹æ®è¯·æ±‚urlæŸ¥æ‰¾Handlerã€‚\nHandlerExecutionè¡¨ç¤ºå…·ä½“çš„Handler,å…¶ä¸»è¦ä½œç”¨æ˜¯æ ¹æ®urlæŸ¥æ‰¾æ§åˆ¶å™¨ï¼Œå¦‚ä¸Šurlè¢«æŸ¥æ‰¾æ§åˆ¶å™¨ä¸ºï¼šhelloã€‚\nHandlerExecutionå°†è§£æåçš„ä¿¡æ¯ä¼ é€’ç»™DispatcherServlet,å¦‚è§£ææ§åˆ¶å™¨æ˜ å°„ç­‰ã€‚\nHandlerAdapterè¡¨ç¤ºå¤„ç†å™¨é€‚é…å™¨ï¼Œå…¶æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å»æ‰§è¡ŒHandlerã€‚\nHandlerè®©å…·ä½“çš„Controlleræ‰§è¡Œã€‚\nControllerå°†å…·ä½“çš„æ‰§è¡Œä¿¡æ¯è¿”å›ç»™HandlerAdapter,å¦‚ModelAndViewã€‚\nHandlerAdapterå°†è§†å›¾é€»è¾‘åæˆ–æ¨¡å‹ä¼ é€’ç»™DispatcherServletã€‚\nDispatcherServletè°ƒç”¨è§†å›¾è§£æå™¨(ViewResolver)æ¥è§£æHandlerAdapterä¼ é€’çš„é€»è¾‘è§†å›¾åã€‚\nè§†å›¾è§£æå™¨å°†è§£æçš„é€»è¾‘è§†å›¾åä¼ ç»™DispatcherServletã€‚\nDispatcherServletæ ¹æ®è§†å›¾è§£æå™¨è§£æçš„è§†å›¾ç»“æœï¼Œè°ƒç”¨å…·ä½“çš„è§†å›¾ã€‚\næœ€ç»ˆè§†å›¾å‘ˆç°ç»™ç”¨æˆ·ã€‚\nè¿™é‡Œæ¯”è¾ƒç»•ï¼Œæ‰€ä»¥ç›´æ¥æŠŠåŸæ–‡æ¬æ¥äº†ï¼Œä¹‹åç­‰ç†è§£åŠ æ·±äº†å†æ¥è¡¥å……è‡ªå·±çš„çœ‹æ³•ã€‚\nç¬¬ä¸€ä¸ªSpringMVCç¨‹åº ç”±äºæˆ‘ä»¬æ˜¯é‡‡ç”¨å­æ¨¡å—çš„æ–¹å¼ï¼Œé‚£ä¹ˆéœ€è¦å»IDEAé‡Œè®¾ç½®ä¸€ä¸‹è®©libä¼šæ‰“åŒ…å‡ºå»ã€‚å¦åˆ™å°±ä¼šæç¤º404é”™è¯¯ã€‚\nåœ¨ç‚¹å‡»IDEAå³ä¸Šè§’çš„å°é½¿è½®ï¼Œé€‰æ‹©é¡¹ç›®ç»“æ„ï¼Œåœ¨å·¥ä»¶ä¸‹çœ‹WEB-INFé‡Œæ˜¯å¦æœ‰libç›®å½•ï¼Œæ²¡æœ‰çš„è¯å°±åˆ›å»ºä¸€ä¸ªï¼Œç„¶åç‚¹å‡»+å·ï¼Œé€‰æ‹©åº“æ–‡ä»¶å°†æ‰€æœ‰çš„åŒ…å¯¼å…¥è¿›å»ã€‚\né…ç½®ç‰ˆ å‡†å¤‡è¦çœ‹çš„è§†å›¾ã€‚åœ¨WEB-INFç›®å½•ä¸‹åˆ›å»ºjspç›®å½•ï¼Œåœ¨é‡Œé¢åˆ›å»ºtest.jspï¼Œå¡«å…¥${msg}\né…ç½®SpringMVCã€‚åœ¨web.xmlé‡Œæ·»åŠ ä¸‹é¢çš„ä»£ç ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;web-app xmlns=\u0026#34;http://xmlns.jcp.org/xml/ns/javaee\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd\u0026#34; version=\u0026#34;4.0\u0026#34;\u0026gt; \u0026lt;!--é…ç½®DispatchServletï¼šè¿™æ˜¯SpringMVCçš„æ ¸å¿ƒï¼šè¯·æ±‚åˆ†å‘å™¨ã€å‰ç«¯æ§åˆ¶å™¨--\u0026gt; \u0026lt;servlet\u0026gt; \u0026lt;servlet-name\u0026gt;springmvc\u0026lt;/servlet-name\u0026gt; \u0026lt;servlet-class\u0026gt;org.springframework.web.servlet.DispatcherServlet\u0026lt;/servlet-class\u0026gt; \u0026lt;!--DispatchServletè¦ç»‘å®šSpringçš„é…ç½®æ–‡ä»¶--\u0026gt; \u0026lt;init-param\u0026gt; \u0026lt;param-name\u0026gt;contextConfigLocation\u0026lt;/param-name\u0026gt; \u0026lt;param-value\u0026gt;classpath:springmvc-servlet.xml\u0026lt;/param-value\u0026gt; \u0026lt;/init-param\u0026gt; \u0026lt;!--å¯åŠ¨çº§åˆ«1ï¼šéšæœåŠ¡å™¨ä¸€èµ·å¯åŠ¨--\u0026gt; \u0026lt;load-on-startup\u0026gt;1\u0026lt;/load-on-startup\u0026gt; \u0026lt;/servlet\u0026gt; \u0026lt;servlet-mapping\u0026gt; \u0026lt;servlet-name\u0026gt;springmvc\u0026lt;/servlet-name\u0026gt; \u0026lt;url-pattern\u0026gt;/\u0026lt;/url-pattern\u0026gt; \u0026lt;/servlet-mapping\u0026gt; \u0026lt;/web-app\u0026gt; å¤‡æ³¨ï¼š/å’Œ/*çš„åŒºåˆ«ï¼š/åŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œä¸åŒ¹é…jspé¡µé¢ï¼›/*ä¼šåŒ¹é…jspé¡µé¢ï¼Œè¿™æ ·ä¼šå¯¼è‡´åµŒå¥—ï¼Œä¸€èˆ¬ä¸ä¼šç”¨\nç¼–å†™SpringMVCçš„é…ç½®æ–‡ä»¶springmvc-servlet.xml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\u0026#34;\u0026gt; \u0026lt;!--å¤„ç†å™¨æ˜ å°„å™¨--\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping\u0026#34;/\u0026gt; \u0026lt;!--å¤„ç†å™¨é€‚é…å™¨--\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter\u0026#34;/\u0026gt; \u0026lt;!--è§†å›¾è§£æå™¨--\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.web.servlet.view.InternalResourceViewResolver\u0026#34; id=\u0026#34;internalResourceViewResolver\u0026#34;\u0026gt; \u0026lt;!--å‰ç¼€--\u0026gt; \u0026lt;property name=\u0026#34;prefix\u0026#34; value=\u0026#34;/WEB-INF/jsp/\u0026#34;/\u0026gt; \u0026lt;!--åç¼€--\u0026gt; \u0026lt;property name=\u0026#34;suffix\u0026#34; value=\u0026#34;.jsp\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;/beans\u0026gt; å®ç°Controlleræ¥å£\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 package top.lbqaq.Controller; import org.springframework.web.servlet.ModelAndView; import org.springframework.web.servlet.mvc.Controller; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; public class HelloController implements Controller { @Override public ModelAndView handleRequest(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws Exception { ModelAndView mv = new ModelAndView(); //ä¸šåŠ¡ä»£ç  String result = \u0026#34;HelloSpringMVC\u0026#34;; mv.addObject(\u0026#34;msg\u0026#34;,result); //è§†å›¾è·³è½¬ mv.setViewName(\u0026#34;test\u0026#34;); return mv; } } å°†Controlleråœ¨Springä¸­æ³¨å†Œ(springmvc-servlet.xml)\n1 2 \u0026lt;!--BeanNameUrlHandlerMapping:æŒ‰BeanNameåŒ¹é…--\u0026gt; \u0026lt;bean id=\u0026#34;/hello\u0026#34; class=\u0026#34;top.lbqaq.Controller.HelloController\u0026#34;/\u0026gt; è¿è¡ŒTomCatæŸ¥çœ‹ç»“æœ\nç„¶è€Œæ­£å¸¸å¼€å‘å¹¶ä¸ä¼šä½¿ç”¨è¿™æ ·çš„æ–¹å¼ï¼Œè¿™æ ·åšåªæ˜¯ä¸ºäº†ç†è§£åº•å±‚çš„æ“ä½œã€‚_(:Ğ·)âˆ )_\næ³¨è§£ç‰ˆ é…ç½®Web.xml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \u0026lt;!--é…ç½®DispatchServletï¼šè¿™æ˜¯SpringMVCçš„æ ¸å¿ƒï¼šè¯·æ±‚åˆ†å‘å™¨ã€å‰ç«¯æ§åˆ¶å™¨--\u0026gt; \u0026lt;servlet\u0026gt; \u0026lt;servlet-name\u0026gt;springmvc\u0026lt;/servlet-name\u0026gt; \u0026lt;servlet-class\u0026gt;org.springframework.web.servlet.DispatcherServlet\u0026lt;/servlet-class\u0026gt; \u0026lt;!--DispatchServletè¦ç»‘å®šSpringçš„é…ç½®æ–‡ä»¶--\u0026gt; \u0026lt;init-param\u0026gt; \u0026lt;param-name\u0026gt;contextConfigLocation\u0026lt;/param-name\u0026gt; \u0026lt;param-value\u0026gt;classpath:springmvc-servlet.xml\u0026lt;/param-value\u0026gt; \u0026lt;/init-param\u0026gt; \u0026lt;!--å¯åŠ¨çº§åˆ«1ï¼šéšæœåŠ¡å™¨ä¸€èµ·å¯åŠ¨ï¼›è¶Šå°çº§åˆ«è¶Šé«˜--\u0026gt; \u0026lt;load-on-startup\u0026gt;1\u0026lt;/load-on-startup\u0026gt; \u0026lt;/servlet\u0026gt; \u0026lt;servlet-mapping\u0026gt; \u0026lt;servlet-name\u0026gt;springmvc\u0026lt;/servlet-name\u0026gt; \u0026lt;url-pattern\u0026gt;/\u0026lt;/url-pattern\u0026gt; \u0026lt;/servlet-mapping\u0026gt; è¿˜æ˜¯è€æ ·å­ï¼Œè¿™é‡Œæ²¡æœ‰ä»€ä¹ˆéœ€è¦æ”¹åŠ¨çš„ã€‚\nåœ¨resourcesç›®å½•ä¸‹æ·»åŠ SpringMVCé…ç½®æ–‡ä»¶springmvc-servlet.xml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xmlns:context=\u0026#34;http://www.springframework.org/schema/context\u0026#34; xmlns:mvc=\u0026#34;http://www.springframework.org/schema/mvc\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd\u0026#34;\u0026gt; \u0026lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œè®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ,ç”±IOCå®¹å™¨ç»Ÿä¸€ç®¡ç† --\u0026gt; \u0026lt;context:component-scan base-package=\u0026#34;top.lbqaq.controller\u0026#34;/\u0026gt; \u0026lt;!-- è®©Spring MVCä¸å¤„ç†é™æ€èµ„æº --\u0026gt; \u0026lt;mvc:default-servlet-handler /\u0026gt; \u0026lt;!-- æ”¯æŒmvcæ³¨è§£é©±åŠ¨ åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³» è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹ è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚ è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚ --\u0026gt; \u0026lt;mvc:annotation-driven /\u0026gt; \u0026lt;!-- è§†å›¾è§£æå™¨ --\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.web.servlet.view.InternalResourceViewResolver\u0026#34; id=\u0026#34;internalResourceViewResolver\u0026#34;\u0026gt; \u0026lt;!-- å‰ç¼€ --\u0026gt; \u0026lt;property name=\u0026#34;prefix\u0026#34; value=\u0026#34;/WEB-INF/jsp/\u0026#34; /\u0026gt; \u0026lt;!-- åç¼€ --\u0026gt; \u0026lt;property name=\u0026#34;suffix\u0026#34; value=\u0026#34;.jsp\u0026#34; /\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;/beans\u0026gt; åˆ›å»ºController\n1 2 3 4 5 6 7 8 9 @Controller public class HelloController { @RequestMapping(\u0026#34;/hello\u0026#34;) public String hello(Model model){ //å°è£…æ•°æ® model.addAttribute(\u0026#34;msg\u0026#34;,\u0026#34;Hello,SpringMVCAnnotation!\u0026#34;); return \u0026#34;hello\u0026#34;; //ä¼šè¢«è§†å›¾è§£æå™¨å¤„ç† } } @Controlleræ˜¯ä¸ºäº†è®©Spring IOCå®¹å™¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨æ‰«æåˆ°ï¼› @RequestMappingæ˜¯ä¸ºäº†æ˜ å°„è¯·æ±‚è·¯å¾„ï¼Œè¿™é‡Œå› ä¸ºç±»ä¸æ–¹æ³•ä¸Šéƒ½æœ‰æ˜ å°„æ‰€ä»¥è®¿é—®æ—¶åº”è¯¥æ˜¯/helloï¼› æ–¹æ³•ä¸­å£°æ˜Modelç±»å‹çš„å‚æ•°æ˜¯ä¸ºäº†æŠŠActionä¸­çš„æ•°æ®å¸¦åˆ°è§†å›¾ä¸­ï¼› æ–¹æ³•è¿”å›çš„ç»“æœæ˜¯è§†å›¾çš„åç§°helloï¼ŒåŠ ä¸Šé…ç½®æ–‡ä»¶ä¸­çš„å‰åç¼€å˜æˆWEB-INF/jsp/hello.jspã€‚ åˆ›å»ºè§†å›¾å±‚ï¼Œåœ¨WEB-INF/jspç›®å½•ä¸­åˆ›å»ºhello.jsp\n1 2 3 4 5 6 7 8 9 \u0026lt;%@ page contentType=\u0026#34;text/html;charset=UTF-8\u0026#34; language=\u0026#34;java\u0026#34; %\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;Title\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; ${msg} \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; è¿è¡ŒTomCatæŸ¥çœ‹ç»“æœ\nå°ç»“ å®ç°æ­¥éª¤å…¶å®éå¸¸çš„ç®€å•ï¼š\næ–°å»ºä¸€ä¸ªwebé¡¹ç›® å¯¼å…¥ç›¸å…³jaråŒ… ç¼–å†™web.xml , æ³¨å†ŒDispatcherServlet ç¼–å†™springmvcé…ç½®æ–‡ä»¶ æ¥ä¸‹æ¥å°±æ˜¯å»åˆ›å»ºå¯¹åº”çš„æ§åˆ¶ç±» , controller æœ€åå®Œå–„å‰ç«¯è§†å›¾å’Œcontrollerä¹‹é—´çš„å¯¹åº” æµ‹è¯•è¿è¡Œè°ƒè¯•. ä½¿ç”¨springMVCå¿…é¡»é…ç½®çš„ä¸‰å¤§ä»¶ï¼š\nå¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨\né€šå¸¸ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰‹åŠ¨é…ç½®è§†å›¾è§£æå™¨ï¼Œè€Œå¤„ç†å™¨æ˜ å°„å™¨å’Œå¤„ç†å™¨é€‚é…å™¨åªéœ€è¦å¼€å¯æ³¨è§£é©±åŠ¨å³å¯ï¼Œè€Œçœå»äº†å¤§æ®µçš„xmlé…ç½®\nRestFulé£æ ¼ æ¦‚å¿µ\nRestfulå°±æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠèµ„æºæ“ä½œçš„é£æ ¼ã€‚ä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œåªæ˜¯ä¸€ç§é£æ ¼ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚\nåŠŸèƒ½\nèµ„æºï¼šäº’è”ç½‘æ‰€æœ‰çš„äº‹ç‰©éƒ½å¯ä»¥è¢«æŠ½è±¡ä¸ºèµ„æº\nèµ„æºæ“ä½œï¼šä½¿ç”¨POSTã€DELETEã€PUTã€GETï¼Œä½¿ç”¨ä¸åŒæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚\nåˆ†åˆ«å¯¹åº” æ·»åŠ ã€ åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ã€‚\nä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº ï¼šé€šè¿‡ä¸åŒçš„å‚æ•°æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼æ–¹æ³•å•ä¸€ï¼Œpost å’Œ get\nâ€‹\thttp://127.0.0.1/item/queryItem.action?id=1 æŸ¥è¯¢,GET\nâ€‹\thttp://127.0.0.1/item/saveItem.action æ–°å¢,POST\nâ€‹\thttp://127.0.0.1/item/updateItem.action æ›´æ–°,POST\nâ€‹\thttp://127.0.0.1/item/deleteItem.action?id=1 åˆ é™¤,GETæˆ–POST\nä½¿ç”¨RESTfulæ“ä½œèµ„æº ï¼šå¯ä»¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼å¦‚ä¸‹ï¼šè¯·æ±‚åœ°å€ä¸€æ ·ï¼Œä½†æ˜¯åŠŸèƒ½å¯ä»¥ä¸åŒï¼\nâ€‹\thttp://127.0.0.1/item/1 æŸ¥è¯¢,GET\nâ€‹\thttp://127.0.0.1/item æ–°å¢,POST\nâ€‹\thttp://127.0.0.1/item æ›´æ–°,PUT\nâ€‹\thttp://127.0.0.1/item/1 åˆ é™¤,DELETE\nä½¿ç”¨æ–¹æ³•\nåˆ›å»ºä¸€ä¸ªç±»RestFulController\n1 2 3 4 5 6 7 8 9 10 11 12 @Controller public class RestFulController { //åŸæ¥çš„ï¼šlocalhost:8085/add?a=1\u0026amp;b=2 //Restful:localhost:8085/add/1/2 @RequestMapping(\u0026#34;/add/{a}/{b}\u0026#34;) public String test1(@PathVariable int a,@PathVariable int b, Model model){ int res = a+b; model.addAttribute(\u0026#34;msg\u0026#34;,\u0026#34;ç»“æœä¸º\u0026#34;+res); return \u0026#34;test\u0026#34;; } } @RequestMappingé‡Œé¢çš„{a}å°±ä»£è¡¨è¿™é‡Œæ˜¯ä¼ ç»™aå˜é‡çš„å€¼ï¼›ä¸‹é¢çš„aå˜é‡å‰è¦åŠ @PathVariable\nä½¿ç”¨è·¯å¾„å˜é‡çš„å¥½å¤„ï¼Ÿ\nä½¿è·¯å¾„å˜å¾—æ›´åŠ ç®€æ´ï¼› è·å¾—å‚æ•°æ›´åŠ æ–¹ä¾¿ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚ é€šè¿‡è·¯å¾„å˜é‡çš„ç±»å‹å¯ä»¥çº¦æŸè®¿é—®å‚æ•°ï¼Œå¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ™è®¿é—®ä¸åˆ°å¯¹åº”çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚è¿™é‡Œè®¿é—®æ˜¯çš„è·¯å¾„æ˜¯/commit/1/aï¼Œåˆ™è·¯å¾„ä¸æ–¹æ³•ä¸åŒ¹é…ï¼Œè€Œä¸ä¼šæ˜¯å‚æ•°è½¬æ¢å¤±è´¥ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œæ–¹æ³•çº¦æŸï¼Œè®©å…¶åªå“åº”æŸä¸€ç§è¯·æ±‚\n1 2 3 4 5 @GetMapping @PostMapping @PutMapping @DeleteMapping @PatchMapping æ‹¿@GetMappingæ¥è¯´ï¼Œå°±æ˜¯@RequestMapping(method =RequestMethod.GET)æ„æ€ï¼Œå¦‚æœä½¿ç”¨å…¶ä»–çš„æ–¹æ³•ï¼Œå°†ä¼šæŠ¥405é”™è¯¯ã€‚\né‡å®šå‘å’Œè½¬å‘ é‡å®šå‘ä¸éœ€è¦è§†å›¾è§£æå™¨ï¼Œæœ¬è´¨å°±æ˜¯é‡æ–°è¯·æ±‚ä¸€ä¸ªæ–°åœ°æ–¹ã€‚\nå¯ä»¥é‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªè¯·æ±‚å®ç°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 @Controller public class ResultSpringMVC2 { @RequestMapping(\u0026#34;/rsm2/t1\u0026#34;) public String test1(){ //è½¬å‘ return \u0026#34;test\u0026#34;; } @RequestMapping(\u0026#34;/rsm2/t2\u0026#34;) public String test2(){ //é‡å®šå‘ return \u0026#34;redirect:/index.jsp\u0026#34;; //return \u0026#34;redirect:hello.do\u0026#34;; //hello.doä¸ºå¦ä¸€ä¸ªè¯·æ±‚/ } } æ•°æ®å¤„ç† å¤„ç†æäº¤æ•°æ® 1ã€æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´\næäº¤æ•°æ® : http://localhost:8080/hello?name=lbqaq\nå¤„ç†æ–¹æ³• :\n1 2 3 4 5 @RequestMapping(\u0026#34;/hello\u0026#34;) public String hello(String name){ System.out.println(name); return \u0026#34;hello\u0026#34;; } åå°è¾“å‡º : lbqaq\n2ã€æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´\næäº¤æ•°æ® : http://localhost:8080/hello?username=lbqaq\nå¤„ç†æ–¹æ³• :\n1 2 3 4 5 6 //@RequestParam(\u0026#34;username\u0026#34;) : usernameæäº¤çš„åŸŸçš„åç§° . @RequestMapping(\u0026#34;/hello\u0026#34;) public String hello(@RequestParam(\u0026#34;username\u0026#34;) String name){ System.out.println(name); return \u0026#34;hello\u0026#34;; } åå°è¾“å‡º : lbqaq\n3ã€æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡\nè¦æ±‚æäº¤çš„è¡¨å•åŸŸå’Œå¯¹è±¡çš„å±æ€§åä¸€è‡´ , å‚æ•°ä½¿ç”¨å¯¹è±¡å³å¯\n1ã€å®ä½“ç±»\n1 2 3 4 5 6 7 8 public class User { private int id; private String name; private int age; //æ„é€  //get/set //tostring() } 2ã€æäº¤æ•°æ® : http://localhost:8080/mvc04/user?name=lbqaq\u0026amp;id=1\u0026amp;age=15\n3ã€å¤„ç†æ–¹æ³• :\n1 2 3 4 5 @RequestMapping(\u0026#34;/user\u0026#34;) public String user(User user){ System.out.println(user); return \u0026#34;hello\u0026#34;; } åå°è¾“å‡º : User { id=1, name=\u0026lsquo;lbqaq\u0026rsquo;, age=15 }\nè¯´æ˜ï¼šå¦‚æœä½¿ç”¨å¯¹è±¡çš„è¯ï¼Œå‰ç«¯ä¼ é€’çš„å‚æ•°åå’Œå¯¹è±¡åå¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™å°±æ˜¯nullã€‚\næ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯ ç¬¬ä¸€ç§ : é€šè¿‡ModelAndView\næˆ‘ä»¬å‰é¢ä¸€ç›´éƒ½æ˜¯å¦‚æ­¤ . å°±ä¸è¿‡å¤šè§£é‡Š\n1 2 3 4 5 6 7 8 9 10 public class ControllerTest1 implements Controller { public ModelAndView handleRequest(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws Exception { //è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡ ModelAndView mv = new ModelAndView(); mv.addObject(\u0026#34;msg\u0026#34;,\u0026#34;ControllerTest1\u0026#34;); mv.setViewName(\u0026#34;test\u0026#34;); return mv; } } ç¬¬äºŒç§ : é€šè¿‡ModelMap\nModelMap\n1 2 3 4 5 6 7 8 @RequestMapping(\u0026#34;/hello\u0026#34;) public String hello(@RequestParam(\u0026#34;username\u0026#34;) String name, ModelMap model){ //å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ® //ç›¸å½“äºreq.setAttribute(\u0026#34;name\u0026#34;,name); model.addAttribute(\u0026#34;name\u0026#34;,name); System.out.println(name); return \u0026#34;hello\u0026#34;; } ç¬¬ä¸‰ç§ : é€šè¿‡Model\nModel\n1 2 3 4 5 6 7 8 @RequestMapping(\u0026#34;/ct2/hello\u0026#34;) public String hello(@RequestParam(\u0026#34;username\u0026#34;) String name, Model model){ //å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ® //ç›¸å½“äºreq.setAttribute(\u0026#34;name\u0026#34;,name); model.addAttribute(\u0026#34;msg\u0026#34;,name); System.out.println(name); return \u0026#34;test\u0026#34;; } å¯¹æ¯” å°±å¯¹äºæ–°æ‰‹è€Œè¨€ç®€å•æ¥è¯´ä½¿ç”¨åŒºåˆ«å°±æ˜¯ï¼š\nModel åªæœ‰å¯¥å¯¥å‡ ä¸ªæ–¹æ³•åªé€‚åˆç”¨äºå‚¨å­˜æ•°æ®ï¼Œç®€åŒ–äº†æ–°æ‰‹å¯¹äºModelå¯¹è±¡çš„æ“ä½œå’Œç†è§£ï¼› ModelMap ç»§æ‰¿äº† LinkedMap ï¼Œé™¤äº†å®ç°äº†è‡ªèº«çš„ä¸€äº›æ–¹æ³•ï¼ŒåŒæ ·çš„ç»§æ‰¿ LinkedMap çš„æ–¹æ³•å’Œç‰¹æ€§ï¼› ModelAndView å¯ä»¥åœ¨å‚¨å­˜æ•°æ®çš„åŒæ—¶ï¼Œå¯ä»¥è¿›è¡Œè®¾ç½®è¿”å›çš„é€»è¾‘è§†å›¾ï¼Œè¿›è¡Œæ§åˆ¶å±•ç¤ºå±‚çš„è·³è½¬ã€‚ å½“ç„¶æ›´å¤šçš„ä»¥åå¼€å‘è€ƒè™‘çš„æ›´å¤šçš„æ˜¯æ€§èƒ½å’Œä¼˜åŒ–ï¼Œå°±ä¸èƒ½å•å•ä»…é™äºæ­¤çš„äº†è§£ã€‚\nè¿™é‡Œéƒ½æ˜¯æ¦‚å¿µæ€§çš„å†…å®¹ï¼Œæ‰€ä»¥å°±ç›´æ¥å¤åˆ¶ç¬”è®°äº†ğŸ˜Œ\nè§£å†³ä¹±ç  ç›´æ¥æŠŠSpringçš„ä¹±ç å¤„ç†å™¨æ”¾å…¥web.xmlé‡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;filter\u0026gt; \u0026lt;filter-name\u0026gt;encoding\u0026lt;/filter-name\u0026gt; \u0026lt;filter-class\u0026gt;org.springframework.web.filter.CharacterEncodingFilter\u0026lt;/filter-class\u0026gt; \u0026lt;init-param\u0026gt; \u0026lt;param-name\u0026gt;encoding\u0026lt;/param-name\u0026gt; \u0026lt;param-value\u0026gt;utf-8\u0026lt;/param-value\u0026gt; \u0026lt;/init-param\u0026gt; \u0026lt;/filter\u0026gt; \u0026lt;filter-mapping\u0026gt; \u0026lt;filter-name\u0026gt;encoding\u0026lt;/filter-name\u0026gt; \u0026lt;url-pattern\u0026gt;/*\u0026lt;/url-pattern\u0026gt; \u0026lt;/filter-mapping\u0026gt; JSON JSON(JavaScript Object Notation, JS å¯¹è±¡æ ‡è®°) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œç›®å‰ä½¿ç”¨ç‰¹åˆ«å¹¿æ³›ã€‚ é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„æ–‡æœ¬æ ¼å¼æ¥å­˜å‚¨å’Œè¡¨ç¤ºæ•°æ®ã€‚ ç®€æ´å’Œæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚ æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆï¼Œå¹¶æœ‰æ•ˆåœ°æå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚ ä½¿ç”¨Jackson å¯¼å…¥ä¾èµ–\n1 2 3 4 5 6 \u0026lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.fasterxml.jackson.core\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jackson-core\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.12.4\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; ç¼–å†™Controller\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 @Controller public class UserController { @RequestMapping(\u0026#34;/json1\u0026#34;) @ResponseBody public String json1() throws JsonProcessingException { //åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ® ObjectMapper mapper = new ObjectMapper(); //åˆ›å»ºä¸€ä¸ªå¯¹è±¡ User user = new User(\u0026#34;å°æ˜\u0026#34;, 3, \u0026#34;ç”·\u0026#34;); //å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼ String str = mapper.writeValueAsString(user); //ç”±äº@ResponseBodyæ³¨è§£ï¼Œè¿™é‡Œä¼šå°†strè½¬æˆjsonæ ¼å¼è¿”å›ï¼›ååˆ†æ–¹ä¾¿ return str; } å¦‚æœå‡ºç°ä¹±ç ï¼Œå¯ä»¥æŒ‡å®šç¼–ç æ ¼å¼ä¸ºUTF8æ¥è§£å†³\n@RequestMapping(value = \u0026quot;/json1\u0026quot;,produces = \u0026quot;application/json;charset=utf-8\u0026quot;)\nè¿™æ ·å¤„ç†ä¹±ç è¿˜æ˜¯å¤ªéº»çƒ¦äº†ï¼Œå¯ä»¥è®©Springç»Ÿä¸€ç®¡ç†ï¼Œåœ¨SpringMVCçš„é…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šä¸‹é¢çš„ä»£ç ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 \u0026lt;mvc:annotation-driven\u0026gt; \u0026lt;mvc:message-converters register-defaults=\u0026#34;true\u0026#34;\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.http.converter.StringHttpMessageConverter\u0026#34;\u0026gt; \u0026lt;constructor-arg value=\u0026#34;UTF-8\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;objectMapper\u0026#34;\u0026gt; \u0026lt;bean class=\u0026#34;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;failOnEmptyBeans\u0026#34; value=\u0026#34;false\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;/mvc:message-converters\u0026gt; \u0026lt;/mvc:annotation-driven\u0026gt; åœ¨ç±»ä¸Šç›´æ¥ä½¿ç”¨ @RestController ï¼Œè¿™æ ·å­ï¼Œé‡Œé¢æ‰€æœ‰çš„æ–¹æ³•éƒ½åªä¼šè¿”å› json å­—ç¬¦ä¸²äº†ï¼Œä¸ç”¨å†æ¯ä¸€ä¸ªéƒ½æ·»åŠ @ResponseBody ï¼æˆ‘ä»¬åœ¨å‰åç«¯åˆ†ç¦»å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨ @RestController ï¼Œååˆ†ä¾¿æ·ï¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 @RestController public class UserController { //produces:æŒ‡å®šå“åº”ä½“è¿”å›ç±»å‹å’Œç¼–ç  @RequestMapping(value = \u0026#34;/json1\u0026#34;) public String json1() throws JsonProcessingException { //åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ® ObjectMapper mapper = new ObjectMapper(); //åˆ›å»ºä¸€ä¸ªå¯¹è±¡ User user = new User(\u0026#34;å°æ˜\u0026#34;, 3, \u0026#34;ç”·\u0026#34;); //å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼ String str = mapper.writeValueAsString(user); //ç”±äº@ResponseBodyæ³¨è§£ï¼Œè¿™é‡Œä¼šå°†strè½¬æˆjsonæ ¼å¼è¿”å›ï¼›ååˆ†æ–¹ä¾¿ return str; } } è‡ªå®šä¹‰å·¥å…·ç±»ï¼Œå¯ä»¥æ˜¯JSONè½¬æ¢å˜å¾—æ›´ç®€å•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 public class JsonUtils { public static String getJson(Object object) { return getJson(object,\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;); } public static String getJson(Object object,String dateFormat) { ObjectMapper mapper = new ObjectMapper(); //ä¸ä½¿ç”¨æ—¶é—´å·®çš„æ–¹å¼ mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false); //è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼å¯¹è±¡ SimpleDateFormat sdf = new SimpleDateFormat(dateFormat); //æŒ‡å®šæ—¥æœŸæ ¼å¼ mapper.setDateFormat(sdf); try { return mapper.writeValueAsString(object); } catch (JsonProcessingException e) { e.printStackTrace(); } return null; } } ä½¿ç”¨FastJson 1 2 3 4 5 6 \u0026lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.alibaba\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;fastjson\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.2.78\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; ä¸ºäº†ä½¿@RestControlleræœ‰æ•ˆï¼Œéœ€è¦åœ¨Springé…ç½®é‡ŒåŠ ä¸Šä¸‹é¢çš„å†…å®¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;mvc:annotation-driven\u0026gt; \u0026lt;mvc:message-converters register-defaults=\u0026#34;true\u0026#34;\u0026gt; \u0026lt;!-- é…ç½®Fastjsonæ”¯æŒ --\u0026gt; \u0026lt;bean class=\u0026#34;com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;supportedMediaTypes\u0026#34;\u0026gt; \u0026lt;list\u0026gt; \u0026lt;value\u0026gt;application/json\u0026lt;/value\u0026gt; \u0026lt;value\u0026gt;text/html;charset=UTF-8\u0026lt;/value\u0026gt; \u0026lt;/list\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;/mvc:message-converters\u0026gt; \u0026lt;/mvc:annotation-driven\u0026gt; fastjson ä¸‰ä¸ªä¸»è¦çš„ç±»ï¼š\nJSONObject ä»£è¡¨ json å¯¹è±¡\nJSONObjectå®ç°äº†Mapæ¥å£, çŒœæƒ³ JSONObjectåº•å±‚æ“ä½œæ˜¯ç”±Mapå®ç°çš„ã€‚ JSONObjectå¯¹åº”jsonå¯¹è±¡ï¼Œé€šè¿‡å„ç§å½¢å¼çš„get()æ–¹æ³•å¯ä»¥è·å–jsonå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œä¹Ÿå¯åˆ©ç”¨è¯¸å¦‚size()ï¼ŒisEmpty()ç­‰æ–¹æ³•è·å–\u0026quot;é”®ï¼šå€¼\u0026quot;å¯¹çš„ä¸ªæ•°å’Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡å®ç°Mapæ¥å£å¹¶è°ƒç”¨æ¥å£ä¸­çš„æ–¹æ³•å®Œæˆçš„ã€‚ JSONArray ä»£è¡¨ json å¯¹è±¡æ•°ç»„\nå†…éƒ¨æ˜¯æœ‰Listæ¥å£ä¸­çš„æ–¹æ³•æ¥å®Œæˆæ“ä½œçš„ã€‚ JSONä»£è¡¨ JSONObjectå’ŒJSONArrayçš„è½¬åŒ–\nJSONç±»æºç åˆ†æä¸ä½¿ç”¨ ä»”ç»†è§‚å¯Ÿè¿™äº›æ–¹æ³•ï¼Œä¸»è¦æ˜¯å®ç°jsonå¯¹è±¡ï¼Œjsonå¯¹è±¡æ•°ç»„ï¼Œjavabeanå¯¹è±¡ï¼Œjsonå­—ç¬¦ä¸²ä¹‹é—´çš„ç›¸äº’è½¬åŒ–ã€‚ æµ‹è¯•ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 public class FastJsonDemo { public static void main(String[] args) { //åˆ›å»ºä¸€ä¸ªå¯¹è±¡ User user1 = new User(\u0026#34;1å·\u0026#34;, 3, \u0026#34;ç”·\u0026#34;); User user2 = new User(\u0026#34;2å·\u0026#34;, 3, \u0026#34;ç”·\u0026#34;); User user3 = new User(\u0026#34;3å·\u0026#34;, 3, \u0026#34;ç”·\u0026#34;); User user4 = new User(\u0026#34;4å·\u0026#34;, 3, \u0026#34;ç”·\u0026#34;); List\u0026lt;User\u0026gt; list = new ArrayList\u0026lt;User\u0026gt;(); list.add(user1); list.add(user2); list.add(user3); list.add(user4); System.out.println(\u0026#34;*******Javaå¯¹è±¡ è½¬ JSONå­—ç¬¦ä¸²*******\u0026#34;); String str1 = JSON.toJSONString(list); System.out.println(\u0026#34;JSON.toJSONString(list)==\u0026gt;\u0026#34;+str1); String str2 = JSON.toJSONString(user1); System.out.println(\u0026#34;JSON.toJSONString(user1)==\u0026gt;\u0026#34;+str2); System.out.println(\u0026#34;\\n****** JSONå­—ç¬¦ä¸² è½¬ Javaå¯¹è±¡*******\u0026#34;); User jp_user1=JSON.parseObject(str2,User.class); System.out.println(\u0026#34;JSON.parseObject(str2,User.class)==\u0026gt;\u0026#34;+jp_user1); System.out.println(\u0026#34;\\n****** Javaå¯¹è±¡ è½¬ JSONå¯¹è±¡ ******\u0026#34;); JSONObject jsonObject1 = (JSONObject) JSON.toJSON(user2); System.out.println(\u0026#34;(JSONObject) JSON.toJSON(user2)==\u0026gt;\u0026#34;+jsonObject1.getString(\u0026#34;name\u0026#34;)); System.out.println(\u0026#34;\\n****** JSONå¯¹è±¡ è½¬ Javaå¯¹è±¡ ******\u0026#34;); User to_java_user = JSON.toJavaObject(jsonObject1, User.class); System.out.println(\u0026#34;JSON.toJavaObject(jsonObject1, User.class)==\u0026gt;\u0026#34;+to_java_user); } } Jacksonåˆšåˆšæµ‹è¯•æ²¡æˆåŠŸï¼Œè¿˜æ˜¯é€‰æ‹©FastJsonå§ğŸ˜‡ã€‚\næ‹¦æˆªå™¨ æ¦‚è¿° SpringMVCçš„å¤„ç†å™¨æ‹¦æˆªå™¨ç±»ä¼¼äºServletå¼€å‘ä¸­çš„è¿‡æ»¤å™¨Filter,ç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚å¼€å‘è€…å¯ä»¥è‡ªå·±å®šä¹‰ä¸€äº›æ‹¦æˆªå™¨æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚\n**è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„åŒºåˆ«ï¼š**æ‹¦æˆªå™¨æ˜¯AOPæ€æƒ³çš„å…·ä½“åº”ç”¨ã€‚\nè¿‡æ»¤å™¨\nservletè§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•java webå·¥ç¨‹éƒ½å¯ä»¥ä½¿ç”¨ åœ¨url-patternä¸­é…ç½®äº†/*ä¹‹åï¼Œå¯ä»¥å¯¹æ‰€æœ‰è¦è®¿é—®çš„èµ„æºè¿›è¡Œæ‹¦æˆª æ‹¦æˆªå™¨\næ‹¦æˆªå™¨æ˜¯SpringMVCæ¡†æ¶è‡ªå·±çš„ï¼Œåªæœ‰ä½¿ç”¨äº†SpringMVCæ¡†æ¶çš„å·¥ç¨‹æ‰èƒ½ä½¿ç”¨ æ‹¦æˆªå™¨åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œ å¦‚æœè®¿é—®çš„æ˜¯jsp/html/css/image/jsæ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„ ä½¿ç”¨æ–¹æ³• è‡ªå®šä¹‰æ‹¦æˆªå™¨éœ€è¦å®ç°æ¥å£HandlerInterceptor\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 public class MyInterceptor implements HandlerInterceptor { //åœ¨è¯·æ±‚å¤„ç†çš„æ–¹æ³•ä¹‹å‰æ‰§è¡Œ //å¦‚æœè¿”å›trueæ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ //å¦‚æœè¿”å›falseå°±ä¸æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ public boolean preHandle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o) throws Exception { System.out.println(\u0026#34;------------å¤„ç†å‰------------\u0026#34;); return true; } //åœ¨è¯·æ±‚å¤„ç†æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ public void postHandle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, ModelAndView modelAndView) throws Exception { System.out.println(\u0026#34;------------å¤„ç†å------------\u0026#34;); } //åœ¨dispatcherServletå¤„ç†åæ‰§è¡Œ,åšæ¸…ç†å·¥ä½œ. public void afterCompletion(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e) throws Exception { System.out.println(\u0026#34;------------æ¸…ç†------------\u0026#34;); } } åœ¨springmvcçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨\n1 2 3 4 5 6 7 8 9 10 11 \u0026lt;!--å…³äºæ‹¦æˆªå™¨çš„é…ç½®--\u0026gt; \u0026lt;mvc:interceptors\u0026gt; \u0026lt;mvc:interceptor\u0026gt; \u0026lt;!--/** åŒ…æ‹¬è·¯å¾„åŠå…¶å­è·¯å¾„--\u0026gt; \u0026lt;!--/admin/* æ‹¦æˆªçš„æ˜¯/admin/addç­‰ç­‰è¿™ç§ , /admin/add/userä¸ä¼šè¢«æ‹¦æˆª--\u0026gt; \u0026lt;!--/admin/** æ‹¦æˆªçš„æ˜¯/admin/ä¸‹çš„æ‰€æœ‰--\u0026gt; \u0026lt;mvc:mapping path=\u0026#34;/**\u0026#34;/\u0026gt; \u0026lt;!--beané…ç½®çš„å°±æ˜¯æ‹¦æˆªå™¨--\u0026gt; \u0026lt;bean class=\u0026#34;top.lbqaq.interceptor.MyInterceptor\u0026#34;/\u0026gt; \u0026lt;/mvc:interceptor\u0026gt; \u0026lt;/mvc:interceptors\u0026gt; æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š\n1 2 3 4 ------------å¤„ç†å‰------------ Controlleræ–¹æ³• ------------å¤„ç†å------------ ------------æ¸…ç†------------ æ‹¦æˆªå™¨å¯ä»¥ç”¨æ¥åšç™»å½•éªŒè¯ç­‰ç­‰å†…å®¹ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼ˆæ‰ä¸æ˜¯æ‡’å¾—å†™ï¼‰\næ–‡ä»¶ä¼ è¾“ æ–‡ä»¶ä¸Šä¼ æ˜¯é¡¹ç›®å¼€å‘ä¸­æœ€å¸¸è§çš„åŠŸèƒ½ä¹‹ä¸€ ,springMVC å¯ä»¥å¾ˆå¥½çš„æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œä½†æ˜¯SpringMVCä¸Šä¸‹æ–‡ä¸­é»˜è®¤æ²¡æœ‰è£…é…MultipartResolverï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹å…¶ä¸èƒ½å¤„ç†æ–‡ä»¶ä¸Šä¼ å·¥ä½œã€‚å¦‚æœæƒ³ä½¿ç”¨Springçš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ä¸Šä¸‹æ–‡ä¸­é…ç½®MultipartResolverã€‚\nå‰ç«¯è¡¨å•è¦æ±‚ï¼šä¸ºäº†èƒ½ä¸Šä¼ æ–‡ä»¶ï¼Œå¿…é¡»å°†è¡¨å•çš„methodè®¾ç½®ä¸ºPOSTï¼Œå¹¶å°†enctypeè®¾ç½®ä¸ºmultipart/form-dataã€‚åªæœ‰åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨æ‰ä¼šæŠŠç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼›\nå¯¹è¡¨å•ä¸­çš„ enctype å±æ€§åšä¸ªè¯¦ç»†çš„è¯´æ˜ï¼š\napplication/x-www=form-urlencodedï¼šé»˜è®¤æ–¹å¼ï¼Œåªå¤„ç†è¡¨å•åŸŸä¸­çš„ value å±æ€§å€¼ï¼Œé‡‡ç”¨è¿™ç§ç¼–ç æ–¹å¼çš„è¡¨å•ä¼šå°†è¡¨å•åŸŸä¸­çš„å€¼å¤„ç†æˆ URL ç¼–ç æ–¹å¼ã€‚ multipart/form-dataï¼šè¿™ç§ç¼–ç æ–¹å¼ä¼šä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™ç§ç¼–ç æ–¹å¼ä¼šæŠŠæ–‡ä»¶åŸŸæŒ‡å®šæ–‡ä»¶çš„å†…å®¹ä¹Ÿå°è£…åˆ°è¯·æ±‚å‚æ•°ä¸­ï¼Œä¸ä¼šå¯¹å­—ç¬¦ç¼–ç ã€‚ text/plainï¼šé™¤äº†æŠŠç©ºæ ¼è½¬æ¢ä¸º \u0026ldquo;+\u0026rdquo; å·å¤–ï¼Œå…¶ä»–å­—ç¬¦éƒ½ä¸åšç¼–ç å¤„ç†ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨ç›´æ¥é€šè¿‡è¡¨å•å‘é€é‚®ä»¶ã€‚ 1 2 3 4 \u0026lt;form action=\u0026#34;\u0026#34; enctype=\u0026#34;multipart/form-data\u0026#34; method=\u0026#34;post\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;file\u0026#34; name=\u0026#34;file\u0026#34;/\u0026gt; \u0026lt;input type=\u0026#34;submit\u0026#34;\u0026gt; \u0026lt;/form\u0026gt; æ–‡ä»¶ä¸Šä¼  å¯¼å…¥ä¾èµ–åŒ…\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!--æ–‡ä»¶ä¸Šä¼ --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;commons-fileupload\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;commons-fileupload\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.3.3\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!--servlet-apiå¯¼å…¥é«˜ç‰ˆæœ¬çš„--\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;javax.servlet\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;javax.servlet-api\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.0.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; é…ç½®multipartResolver\nè¿™ä¸ªbenaçš„idå¿…é¡»ä¸ºï¼šmultipartResolver ï¼Œ å¦åˆ™ä¸Šä¼ æ–‡ä»¶ä¼šæŠ¥400çš„é”™è¯¯ï¼\n1 2 3 4 5 6 7 8 \u0026lt;!--æ–‡ä»¶ä¸Šä¼ é…ç½®--\u0026gt; \u0026lt;bean id=\u0026#34;multipartResolver\u0026#34; class=\u0026#34;org.springframework.web.multipart.commons.CommonsMultipartResolver\u0026#34;\u0026gt; \u0026lt;!-- è¯·æ±‚çš„ç¼–ç æ ¼å¼ï¼Œå¿…é¡»å’ŒjSPçš„pageEncodingå±æ€§ä¸€è‡´ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–è¡¨å•çš„å†…å®¹ï¼Œé»˜è®¤ä¸ºISO-8859-1 --\u0026gt; \u0026lt;property name=\u0026#34;defaultEncoding\u0026#34; value=\u0026#34;utf-8\u0026#34;/\u0026gt; \u0026lt;!-- ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆ10485760=10Mï¼‰ --\u0026gt; \u0026lt;property name=\u0026#34;maxUploadSize\u0026#34; value=\u0026#34;10485760\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;maxInMemorySize\u0026#34; value=\u0026#34;40960\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; ç¼–å†™å‰ç«¯é¡µé¢\n1 2 3 4 \u0026lt;form action=\u0026#34;/upload\u0026#34; enctype=\u0026#34;multipart/form-data\u0026#34; method=\u0026#34;post\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;file\u0026#34; name=\u0026#34;file\u0026#34;/\u0026gt; \u0026lt;input type=\u0026#34;submit\u0026#34; value=\u0026#34;upload\u0026#34;\u0026gt; \u0026lt;/form\u0026gt; é…ç½®Controller\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 package com.kuang.controller; import org.springframework.stereotype.Controller; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RequestParam; import org.springframework.web.multipart.commons.CommonsMultipartFile; import javax.servlet.http.HttpServletRequest; import java.io.*; @Controller public class FileController { //@RequestParam(\u0026#34;file\u0026#34;) å°†name=fileæ§ä»¶å¾—åˆ°çš„æ–‡ä»¶å°è£…æˆCommonsMultipartFile å¯¹è±¡ //æ‰¹é‡ä¸Šä¼ CommonsMultipartFileåˆ™ä¸ºæ•°ç»„å³å¯ @RequestMapping(\u0026#34;/upload\u0026#34;) public String fileUpload(@RequestParam(\u0026#34;file\u0026#34;) CommonsMultipartFile file , HttpServletRequest request) throws IOException { //è·å–æ–‡ä»¶å : file.getOriginalFilename(); String uploadFileName = file.getOriginalFilename(); //å¦‚æœæ–‡ä»¶åä¸ºç©ºï¼Œç›´æ¥å›åˆ°é¦–é¡µï¼ if (\u0026#34;\u0026#34;.equals(uploadFileName)){ return \u0026#34;redirect:/index.jsp\u0026#34;; } System.out.println(\u0026#34;ä¸Šä¼ æ–‡ä»¶å : \u0026#34;+uploadFileName); //ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½® String path = request.getServletContext().getRealPath(\u0026#34;/upload\u0026#34;); //å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª File realPath = new File(path); if (!realPath.exists()){ realPath.mkdir(); } System.out.println(\u0026#34;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š\u0026#34;+realPath); InputStream is = file.getInputStream(); //æ–‡ä»¶è¾“å…¥æµ OutputStream os = new FileOutputStream(new File(realPath,uploadFileName)); //æ–‡ä»¶è¾“å‡ºæµ //è¯»å–å†™å‡º int len=0; byte[] buffer = new byte[1024]; while ((len=is.read(buffer))!=-1){ os.write(buffer,0,len); os.flush(); } os.close(); is.close(); return \u0026#34;redirect:/index.jsp\u0026#34;; } } æ–¹æ³•äºŒï¼šä½¿ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 /* * é‡‡ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶ */ @RequestMapping(\u0026#34;/upload2\u0026#34;) public String fileUpload2(@RequestParam(\u0026#34;file\u0026#34;) CommonsMultipartFile file, HttpServletRequest request) throws IOException { //ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½® String path = request.getServletContext().getRealPath(\u0026#34;/upload\u0026#34;); File realPath = new File(path); if (!realPath.exists()){ realPath.mkdir(); } //ä¸Šä¼ æ–‡ä»¶åœ°å€ System.out.println(\u0026#34;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š\u0026#34;+realPath); //é€šè¿‡CommonsMultipartFileçš„æ–¹æ³•ç›´æ¥å†™æ–‡ä»¶ï¼ˆæ³¨æ„è¿™ä¸ªæ—¶å€™ï¼‰ file.transferTo(new File(realPath +\u0026#34;/\u0026#34;+ file.getOriginalFilename())); return \u0026#34;redirect:/index.jsp\u0026#34;; } æ–‡ä»¶ä¸‹è½½ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 @RequestMapping(value=\u0026#34;/download\u0026#34;) public String downloads(HttpServletResponse response ,HttpServletRequest request) throws Exception{ //è¦ä¸‹è½½çš„å›¾ç‰‡åœ°å€ String path = request.getServletContext().getRealPath(\u0026#34;/upload\u0026#34;); String fileName = \u0026#34;åŸºç¡€è¯­æ³•.jpg\u0026#34;; //1ã€è®¾ç½®response å“åº”å¤´ response.reset(); //è®¾ç½®é¡µé¢ä¸ç¼“å­˜,æ¸…ç©ºbuffer response.setCharacterEncoding(\u0026#34;UTF-8\u0026#34;); //å­—ç¬¦ç¼–ç  response.setContentType(\u0026#34;multipart/form-data\u0026#34;); //äºŒè¿›åˆ¶ä¼ è¾“æ•°æ® //è®¾ç½®å“åº”å¤´ response.setHeader(\u0026#34;Content-Disposition\u0026#34;, \u0026#34;attachment;fileName=\u0026#34;+URLEncoder.encode(fileName, \u0026#34;UTF-8\u0026#34;)); File file = new File(path,fileName); //2ã€ è¯»å–æ–‡ä»¶--è¾“å…¥æµ InputStream input=new FileInputStream(file); //3ã€ å†™å‡ºæ–‡ä»¶--è¾“å‡ºæµ OutputStream out = response.getOutputStream(); byte[] buff =new byte[1024]; int index=0; //4ã€æ‰§è¡Œ å†™å‡ºæ“ä½œ while((index= input.read(buff))!= -1){ out.write(buff, 0, index); out.flush(); } out.close(); input.close(); return null; } æˆ–è€…ç›´æ¥ç”¨aæ ‡ç­¾\n\u0026lt;a href=\u0026quot;/1.jpg\u0026quot;\u0026gt;ç‚¹å‡»ä¸‹è½½\u0026lt;/a\u0026gt;\n","date":"2021-08-15T09:06:00+08:00","image":"https://lbqaq.top/p/springmvc/65411813.webp","permalink":"https://lbqaq.top/p/springmvc/","title":"SpringMVCå­¦ä¹ ç¬”è®°"},{"content":"èŠ±äº†3å¤©æ—¶é—´ï¼ŒSpringä¹Ÿç»ˆäºçœ‹å®Œäº†,SSMå·²ç»å¹²å®Œäº†ä¸¤ä¸ªäº†ï¼Œæ„Ÿè§‰äººéƒ½è¦æ²¡äº†ğŸ˜‡ã€‚è¿˜æ˜¯è€æ ·å­ï¼Œç•™ä¸‹ç¬”è®°ä»¥å…é—å¿˜ã€‚\nä¸‹é¢çš„å†…å®¹éƒ½æ˜¯åŸºäºé‡è§ç‹‚ç¥è¯´çš„Spring5è§†é¢‘æ•™ç¨‹è€Œæ¥ï¼Œåœ¨æ­¤æ„Ÿè°¢èƒ½æä¾›è¿™ä¹ˆä¼˜ç§€çš„æ•™ç¨‹ã€‚\nSpring ç®€ä»‹ Springå°±æ˜¯ç”¨æ¥ç®€åŒ–Javaå¼€å‘çš„ï¼Œåªèƒ½è¯´å­¦Javaä¸å­¦Springï¼Œå°±åƒè¯»å››å¤§åè‘—ä¸è¯»çº¢æ¥¼æ¢¦\u0026hellip;\u0026hellip;\n2002å¹´ï¼ŒRod Jahnsoné¦–æ¬¡æ¨å‡ºäº†Springæ¡†æ¶é›å½¢interface21æ¡†æ¶ã€‚\n2004å¹´3æœˆ24æ—¥ï¼ŒSpringæ¡†æ¶ä»¥interface21æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå‘å¸ƒäº†1.0æ­£å¼ç‰ˆã€‚\nå¾ˆéš¾æƒ³è±¡Rod Johnsonçš„å­¦å† , ä»–æ˜¯æ‚‰å°¼å¤§å­¦çš„åšå£«ï¼Œç„¶è€Œä»–çš„ä¸“ä¸šä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯éŸ³ä¹å­¦ã€‚\nSpringç†å¿µ : ä½¿ç°æœ‰æŠ€æœ¯æ›´åŠ å®ç”¨ã€‚ æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¤§æ‚çƒ© , æ•´åˆç°æœ‰çš„æ¡†æ¶æŠ€æœ¯ã€‚\nSSMï¼šSpringMVC+Spring+MyBatis\nå‡ ä¸ªå¸¸ç”¨çš„ç½‘å€ï¼š\nå®˜ç½‘\nå®˜æ–¹æ–‡æ¡£ï¼ˆè‹±æ–‡ï¼‰\nä¸­æ–‡æ–‡æ¡£\nGitHub\n1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-webmvc\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.3.9\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-jdbc\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.3.9\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; ä¼˜ç‚¹ Springæ˜¯ä¸€ä¸ªå¼€æºå…è´¹çš„æ¡†æ¶ , å®¹å™¨\nSpringæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ¡†æ¶ , éä¾µå…¥å¼çš„\næ§åˆ¶åè½¬ï¼ˆIoCï¼‰,é¢å‘åˆ‡é¢ï¼ˆAopï¼‰\nå¯¹äº‹åŠ¡çš„æ”¯æŒ , å¯¹æ¡†æ¶çš„æ”¯æŒ\nä¸€å¥è¯æ¦‚æ‹¬ï¼š\nSpringæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬(IoC)å’Œé¢å‘åˆ‡é¢(AOP)çš„å®¹å™¨ï¼ˆæ¡†æ¶ï¼‰ã€‚\næ‹“å±• Spring Boot ä¸€å¥—å¿«é€Ÿé…ç½®è„šæ‰‹æ¶ å¯ä»¥åŸºäºSpring Boot å¿«é€Ÿå¼€å‘å•ä¸ªå¾®æœåŠ¡ Spring Cloud Spring Cloudæ˜¯åŸºäºSpring Bootå®ç°çš„ å­¦ä¹ è·¯çº¿ï¼šSpring -\u0026gt; SpringMVC -\u0026gt; Spring Boot -\u0026gt; Spring Cloud\nIOCç†è®ºæ¨å¯¼ åŸå…ˆçš„å¼€å‘æ¨¡å¼ï¼š\nå…ˆå†™ä¸€ä¸ªUserDaoæ¥å£\n1 2 3 public interface UserDao { public void getUser(); } å†å»å†™Daoçš„å®ç°ç±»\n1 2 3 4 5 6 public class UserDaoImpl implements UserDao { @Override public void getUser() { System.out.println(\u0026#34;è·å–ç”¨æˆ·æ•°æ®\u0026#34;); } } ç„¶åå»å†™UserServiceçš„æ¥å£\n1 2 3 public interface UserService { public void getUser(); } æœ€åå†™Serviceçš„å®ç°ç±»\n1 2 3 4 5 6 7 8 public class UserServiceImpl implements UserService { private UserDao userDao = new UserDaoImpl(); @Override public void getUser() { userDao.getUser(); } } æµ‹è¯•ä¸€ä¸‹\n1 2 3 4 5 6 @Test public void test(){ //ç”¨æˆ·å®é™…è°ƒç”¨çš„æ˜¯ä¸šåŠ¡å±‚ï¼Œdaoå±‚ä»–ä»¬å¹¶ä¸éœ€è¦æ¥è§¦ï¼ UserService service = new UserServiceImpl(); service.getUser(); } å¦‚æœéœ€è¦æ›´æ¢Daoå±‚çš„å®ç°æ–¹æ³•ï¼Œæ¯æ¬¡éƒ½éœ€è¦åœ¨UserServiceImplé‡Œæ‰‹åŠ¨ä¿®æ”¹newçš„å¯¹è±¡ï¼Œè¿™æ ·åšååˆ†éº»çƒ¦ã€‚\nç°åœ¨å¯ä»¥ä½¿ç”¨setæ¥å£å®ç°\n1 2 3 4 5 6 7 8 9 10 11 12 13 public class UserServiceImpl implements UserService { private UserDao userDao; // åˆ©ç”¨setè¿›è¡ŒåŠ¨æ€å®ç°å€¼çš„æ³¨å…¥ public void setUserDao(UserDao userDao) { this.userDao = userDao; } @Override public void getUser() { userDao.getUser(); } } ä»¥å‰æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ç”±ç¨‹åºå»è¿›è¡Œæ§åˆ¶åˆ›å»ºã€‚ è€Œç°åœ¨æ˜¯ç”±æˆ‘ä»¬è‡ªè¡Œæ§åˆ¶åˆ›å»ºå¯¹è±¡ï¼ŒæŠŠä¸»åŠ¨æƒäº¤ç»™äº†è°ƒç”¨è€…ã€‚ç¨‹åºä¸ç”¨å»ç®¡æ€ä¹ˆåˆ›å»º,æ€ä¹ˆå®ç°äº†ï¼Œå®ƒåªè´Ÿè´£æä¾›ä¸€ä¸ªæ¥å£ã€‚ è¿™ç§æ€æƒ³ï¼Œä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œæˆ‘ä»¬ç¨‹åºå‘˜ä¸å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº†ï¼Œæ›´å¤šçš„å»å…³æ³¨ä¸šåŠ¡çš„å®ç°ã€‚è€¦åˆæ€§å¤§å¤§é™ä½ï¼Œ è¿™ä¹Ÿå°±æ˜¯IOCçš„åŸå‹ï¼\nIOCæœ¬è´¨ æ§åˆ¶åè½¬IoC(Inversion of Control)ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDI(ä¾èµ–æ³¨å…¥)æ˜¯å®ç°IoCçš„ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºDIåªæ˜¯IoCçš„å¦ä¸€ç§è¯´æ³•ã€‚æ²¡æœ‰IoCçš„ç¨‹åºä¸­ , æˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ , å¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†ã€‚\nSpringçš„å·¥ä½œåŸç†ï¼š\næ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨Springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IoCå®¹å™¨ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection,DIï¼‰ã€‚\nç¬¬ä¸€ä¸ªSpringç¨‹åº æ·»åŠ Mavenä¾èµ–\n1 2 3 4 5 6 7 8 \u0026lt;dependencies\u0026gt; \u0026lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-webmvc\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.3.9\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; åœ¨pojoåŒ…ä¸‹åˆ›å»ºå®ä½“ç±»Hello\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 package top.lbqaq.pojo; /** * @author luoboQAQ * @Date 2021/8/12 ä¸Šåˆ 10:49 */ public class Hello { private String str; public String getStr() { return str; } public void setStr(String str) { this.str = str; } @Override public String toString() { return \u0026#34;Hello{\u0026#34; + \u0026#34;str=\u0026#39;\u0026#34; + str + \u0026#39;\\\u0026#39;\u0026#39; + \u0026#39;}\u0026#39;; } } åœ¨resourcesç›®å½•ä¸‹ç¼–å†™Springçš„é…ç½®æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\u0026#34;\u0026gt; \u0026lt;!--beanå°±æ˜¯javaå¯¹è±¡ , ç”±Springåˆ›å»ºå’Œç®¡ç† åŸæ¥æ˜¯ ç±»å‹ å˜é‡å = new ç±»å‹(); Hello hello = new Hello(); ç°åœ¨ id=å˜é‡å class=newçš„å¯¹è±¡ propertyæ˜¯ç»™å˜é‡èµ‹çš„åˆå€¼ --\u0026gt; \u0026lt;bean id=\u0026#34;hello\u0026#34; class=\u0026#34;top.lbqaq.pojo.Hello\u0026#34;\u0026gt; \u0026lt;!--å¼•ç”¨å¦å¤–ä¸€ä¸ªbean , ä¸æ˜¯ç”¨value è€Œæ˜¯ç”¨ ref--\u0026gt; \u0026lt;property name=\u0026#34;str\u0026#34; value=\u0026#34;Spring\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;/beans\u0026gt; è¿›è¡Œæµ‹è¯•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import org.springframework.context.ApplicationContext; import org.springframework.context.support.ClassPathXmlApplicationContext; import top.lbqaq.pojo.Hello; /** * @author luoboQAQ * @Date 2021/8/12 ä¸Šåˆ 10:53 */ public class MyTest { public static void main(String[] args) { //è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡ ApplicationContext context = new ClassPathXmlApplicationContext(\u0026#34;beans.xml\u0026#34;); //æˆ‘ä»¬çš„å¯¹è±¡éƒ½åœ¨Springä¸­ç®¡ç†äº†ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ç›´æ¥ä»ä¸­å–å³å¯ Hello hello = (Hello) context.getBean(\u0026#34;hello\u0026#34;); System.out.println(hello); } } ç°åœ¨Helloå¯¹è±¡ç”±Springæ¥åˆ›å»ºå’Œç®¡ç†ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«æ§åˆ¶åè½¬\næ§åˆ¶ï¼šè°æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºï¼Œä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¯ç”±ç¨‹åºæœ¬èº«æ§åˆ¶åˆ›å»ºçš„ï¼Œä½¿ç”¨Springåï¼Œå¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„ã€‚\nåè½¬ï¼šç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ï¼Œè€Œå˜æˆè¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡ã€‚\nä¾èµ–æ³¨å…¥ï¼šå°±æ˜¯åˆ©ç”¨setæ–¹æ³•æ¥è¿›è¡Œæ³¨å…¥çš„ã€‚\nIOCæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥æ”¶ã€‚\nIOCåˆ›å»ºå¯¹è±¡æ–¹å¼ é€šè¿‡æ— å‚æ„é€ å‡½æ•°ï¼ˆé»˜è®¤ï¼‰\né€šè¿‡æœ‰å‚æ„é€ å‡½æ•°ï¼Œæœ‰ä¸‰ç§æ–¹å¼\nä¸‹æ ‡èµ‹å€¼\n1 2 3 \u0026lt;bean id=\u0026#34;user\u0026#34; class=\u0026#34;top.lbqaq.pojo.User\u0026#34;\u0026gt; \u0026lt;constructor-arg index=\u0026#34;0\u0026#34; value=\u0026#34;å°æ˜\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; ç”¨ç±»å‹èµ‹å€¼ï¼ˆä¸æ¨èï¼‰\n1 2 3 \u0026lt;bean id=\u0026#34;user\u0026#34; class=\u0026#34;top.lbqaq.pojo.User\u0026#34;\u0026gt; \u0026lt;constructor-arg type=\u0026#34;java.lang.String\u0026#34; value=\u0026#34;å°æ˜\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; é€šè¿‡å‚æ•°ååˆ›å»º\n1 2 3 \u0026lt;bean id=\u0026#34;user\u0026#34; class=\u0026#34;top.lbqaq.pojo.User\u0026#34;\u0026gt; \u0026lt;constructor-arg name=\u0026#34;name\u0026#34; value=\u0026#34;å°æ˜\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; åœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ï¼Œå…¶ä¸­ç®¡ç†çš„å¯¹è±¡éƒ½å·²ç»åˆå§‹åŒ–äº†ï¼\nSpringé…ç½® åˆ«åï¼ˆaliasï¼‰ 1 2 \u0026lt;!--è®¾ç½®åˆ«åï¼šåœ¨è·å–Beançš„æ—¶å€™å¯ä»¥ä½¿ç”¨åˆ«åè·å–--\u0026gt; \u0026lt;alias name=\u0026#34;user\u0026#34; alias=\u0026#34;userNew\u0026#34;/\u0026gt; Beançš„é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;!--beanå°±æ˜¯javaå¯¹è±¡,ç”±Springåˆ›å»ºå’Œç®¡ç†--\u0026gt; \u0026lt;!-- id æ˜¯beançš„æ ‡è¯†ç¬¦,è¦å”¯ä¸€,å¦‚æœæ²¡æœ‰é…ç½®id,nameå°±æ˜¯é»˜è®¤æ ‡è¯†ç¬¦ å¦‚æœé…ç½®id,åˆé…ç½®äº†name,é‚£ä¹ˆnameæ˜¯åˆ«å nameå¯ä»¥è®¾ç½®å¤šä¸ªåˆ«å,å¯ä»¥ç”¨é€—å·,åˆ†å·,ç©ºæ ¼éš”å¼€ å¦‚æœä¸é…ç½®idå’Œname,å¯ä»¥æ ¹æ®applicationContext.getBean(.class)è·å–å¯¹è±¡; classæ˜¯beançš„å…¨é™å®šå=åŒ…å+ç±»å --\u0026gt; \u0026lt;bean id=\u0026#34;hello\u0026#34; name=\u0026#34;hello2 h2,h3;h4\u0026#34; class=\u0026#34;top.lbqaq.pojo.Hello\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;name\u0026#34; value=\u0026#34;Spring\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; import ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ï¼Œå°†å¤šä¸ªé…ç½®æ–‡ä»¶åˆä¸ºä¸€ä¸ªé…ç½®æ–‡ä»¶applicationContext.xml\n1 \u0026lt;import resource=\u0026#34;{path}/beans.xml\u0026#34;/\u0026gt; ä¾èµ–æ³¨å…¥ æ¦‚å¿µ ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection,DIï¼‰ã€‚ ä¾èµ– : æŒ‡Beanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨ï¼ŒBeanå¯¹è±¡çš„ä¾èµ–èµ„æºã€‚ æ³¨å…¥ : æŒ‡Beanå¯¹è±¡æ‰€ä¾èµ–çš„èµ„æºï¼Œç”±å®¹å™¨æ¥è®¾ç½®å’Œè£…é…ã€‚ æ„é€ å™¨æ³¨å…¥ è§å‰é¢çš„IOCåˆ›å»ºå¯¹è±¡æ–¹å¼\nsetæ³¨å…¥ã€é‡ç‚¹ã€‘ æµ‹è¯•ç¯å¢ƒ 1 2 3 4 5 6 7 8 9 10 11 public class Address { private String address; public String getAddress() { return address; } public void setAddress(String address) { this.address = address; } } 1 2 3 4 5 6 7 8 9 10 public class Student { private String name; private Address address; private String[] books; private List\u0026lt;String\u0026gt; hobbys; private Map\u0026lt;String,String\u0026gt; card; private Set\u0026lt;String\u0026gt; games; private String wife; private Properties info; } xmlç¼–å†™ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\u0026#34;\u0026gt; \u0026lt;bean id=\u0026#34;address\u0026#34; class=\u0026#34;top.lbqaq.pojo.Address\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;address\u0026#34; value=\u0026#34;è¥¿å®‰\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;bean id=\u0026#34;student\u0026#34; class=\u0026#34;top.lbqaq.pojo.Student\u0026#34;\u0026gt; \u0026lt;!--æ™®é€šå€¼æ³¨å…¥ï¼Œvalue--\u0026gt; \u0026lt;property name=\u0026#34;name\u0026#34; value=\u0026#34;å°æ˜\u0026#34;/\u0026gt; \u0026lt;!--Beanæ³¨å…¥ï¼Œref--\u0026gt; \u0026lt;property name=\u0026#34;address\u0026#34; ref=\u0026#34;address\u0026#34;/\u0026gt; \u0026lt;!--æ•°ç»„æ³¨å…¥--\u0026gt; \u0026lt;property name=\u0026#34;books\u0026#34;\u0026gt; \u0026lt;array\u0026gt; \u0026lt;value\u0026gt;çº¢æ¥¼æ¢¦\u0026lt;/value\u0026gt; \u0026lt;value\u0026gt;è¥¿æ¸¸è®°\u0026lt;/value\u0026gt; \u0026lt;value\u0026gt;æ°´æµ’ä¼ \u0026lt;/value\u0026gt; \u0026lt;value\u0026gt;ä¸‰å›½æ¼”ä¹‰\u0026lt;/value\u0026gt; \u0026lt;/array\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;!--list--\u0026gt; \u0026lt;property name=\u0026#34;hobbys\u0026#34;\u0026gt; \u0026lt;list\u0026gt; \u0026lt;value\u0026gt;å¬æ­Œ\u0026lt;/value\u0026gt; \u0026lt;value\u0026gt;çœ‹ç”µå½±\u0026lt;/value\u0026gt; \u0026lt;value\u0026gt;æ‰“æ¸¸æˆ\u0026lt;/value\u0026gt; \u0026lt;/list\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;!--map--\u0026gt; \u0026lt;property name=\u0026#34;card\u0026#34;\u0026gt; \u0026lt;map\u0026gt; \u0026lt;entry key=\u0026#34;èº«ä»½è¯\u0026#34; value=\u0026#34;112233445566778899\u0026#34;/\u0026gt; \u0026lt;entry key=\u0026#34;é“¶è¡Œå¡\u0026#34; value=\u0026#34;123987879172197\u0026#34;/\u0026gt; \u0026lt;/map\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;!--Set--\u0026gt; \u0026lt;property name=\u0026#34;games\u0026#34;\u0026gt; \u0026lt;set\u0026gt; \u0026lt;value\u0026gt;LOL\u0026lt;/value\u0026gt; \u0026lt;value\u0026gt;CSGO\u0026lt;/value\u0026gt; \u0026lt;/set\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;!--null--\u0026gt; \u0026lt;property name=\u0026#34;wife\u0026#34;\u0026gt; \u0026lt;null/\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;!--Properties--\u0026gt; \u0026lt;property name=\u0026#34;info\u0026#34;\u0026gt; \u0026lt;props\u0026gt; \u0026lt;prop key=\u0026#34;driver\u0026#34;\u0026gt;20211213\u0026lt;/prop\u0026gt; \u0026lt;prop key=\u0026#34;url\u0026#34;\u0026gt;å¥³\u0026lt;/prop\u0026gt; \u0026lt;prop key=\u0026#34;username\u0026#34;\u0026gt;root\u0026lt;/prop\u0026gt; \u0026lt;prop key=\u0026#34;password\u0026#34;\u0026gt;123456\u0026lt;/prop\u0026gt; \u0026lt;/props\u0026gt; \u0026lt;/property\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;/beans\u0026gt; å…·ä½“ç”¨æ³•è§ä¸Šé¢çš„ä»£ç å°±è¡Œäº†ã€‚\næ‰©å±•æ–¹å¼æ³¨å…¥ på‘½åç©ºé—´ å¯¼å…¥å‘½åç©ºé—´\n1 xmlns:p=\u0026#34;http://www.springframework.org/schema/p\u0026#34; åœ¨beanæ ‡ç­¾é‡Œç›´æ¥ä½¿ç”¨\n1 \u0026lt;bean id=\u0026#34;user\u0026#34; class=\u0026#34;top.lbqaq.pojo.User\u0026#34; p:age=\u0026#34;18\u0026#34; p:name=\u0026#34;å°æ˜\u0026#34;/\u0026gt; ç›¸å½“äºsetæ³¨å…¥\ncå‘½åç©ºé—´ å¯¼å…¥å‘½åç©ºé—´\n1 xmlns:c=\u0026#34;http://www.springframework.org/schema/c\u0026#34; åœ¨beanæ ‡ç­¾é‡Œç›´æ¥ä½¿ç”¨\n1 \u0026lt;bean id=\u0026#34;user2\u0026#34; class=\u0026#34;top.lbqaq.pojo.User\u0026#34; c:age=\u0026#34;20\u0026#34; c:name=\u0026#34;å°çº¢\u0026#34;/\u0026gt; ç›¸å½“äºæœ‰å‚æ„é€ å‡½æ•°æ³¨å…¥\nBeançš„ä½œç”¨åŸŸ ç±»åˆ« è¯´æ˜ singleton (é»˜è®¤)å°†æ¯ä¸ª Spring IoC å®¹å™¨çš„å•ä¸ª bean å®šä¹‰èŒƒå›´é™å®šä¸ºå•ä¸ªå¯¹è±¡å®ä¾‹ã€‚ prototype å°†å•ä¸ª bean å®šä¹‰çš„ä½œç”¨åŸŸé™å®šä¸ºä»»æ„æ•°é‡çš„å¯¹è±¡å®ä¾‹ã€‚ request å°†å•ä¸ª bean å®šä¹‰çš„èŒƒå›´é™å®šä¸ºå•ä¸ª HTTP è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ª HTTP è¯·æ±‚éƒ½æœ‰ä¸€ä¸ªåœ¨å•ä¸ª bean å®šä¹‰åé¢åˆ›å»ºçš„ bean å®ä¾‹ã€‚ä»…åœ¨å¯æ„ŸçŸ¥ç½‘ç»œçš„ Spring ApplicationContextä¸­æœ‰æ•ˆã€‚ session å°†å•ä¸ª bean å®šä¹‰çš„èŒƒå›´é™å®šä¸º HTTP Sessionçš„ç”Ÿå‘½å‘¨æœŸã€‚ä»…åœ¨å¯æ„ŸçŸ¥ç½‘ç»œçš„ Spring ApplicationContextä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆã€‚ application å°†å•ä¸ª bean å®šä¹‰çš„èŒƒå›´é™å®šä¸ºServletContextçš„ç”Ÿå‘½å‘¨æœŸã€‚ä»…åœ¨å¯æ„ŸçŸ¥ç½‘ç»œçš„ Spring ApplicationContextä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆã€‚ websocket å°†å•ä¸ª bean å®šä¹‰çš„èŒƒå›´é™å®šä¸ºWebSocketçš„ç”Ÿå‘½å‘¨æœŸã€‚ä»…åœ¨å¯æ„ŸçŸ¥ç½‘ç»œçš„ Spring ApplicationContextä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆã€‚ å•ä¾‹æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰ï¼šæ¯æ¬¡è·å–çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡\n1 \u0026lt;bean id=\u0026#34;user\u0026#34; class=\u0026#34;top.lbqaq.pojo.User\u0026#34; p:age=\u0026#34;18\u0026#34; p:name=\u0026#34;å°æ˜\u0026#34; scope=\u0026#34;singleton\u0026#34;/\u0026gt; åŸå‹æ¨¡å¼ï¼šæ¯æ¬¡getéƒ½æ˜¯ä»å®¹å™¨ä¸­äº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡\n1 \u0026lt;bean id=\u0026#34;user\u0026#34; class=\u0026#34;top.lbqaq.pojo.User\u0026#34; p:age=\u0026#34;18\u0026#34; p:name=\u0026#34;å°æ˜\u0026#34; scope=\u0026#34;prototype\u0026#34;/\u0026gt; å…¶ä½™requestã€sessionã€applicationã€websocketè¿™äº›åªåœ¨webå¼€å‘ä¸­ä½¿ç”¨ã€‚\nBeançš„è‡ªåŠ¨è£…é… è‡ªåŠ¨è£…é…æ˜¯ä½¿ç”¨springæ»¡è¶³beanä¾èµ–çš„ä¸€ç§æ–¹æ³• springä¼šåœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ä¸ºæŸä¸ªbeanå¯»æ‰¾å…¶ä¾èµ–çš„beanã€‚ Springä¸­beanæœ‰ä¸‰ç§è£…é…æœºåˆ¶ï¼Œåˆ†åˆ«æ˜¯ï¼š\nåœ¨xmlä¸­æ˜¾å¼é…ç½® åœ¨javaä¸­æ˜¾å¼é…ç½® éšå¼çš„beanå‘ç°æœºåˆ¶å’Œè‡ªåŠ¨è£…é…ã€é‡è¦ã€‘ ç¯å¢ƒæ­å»º 1 2 3 4 5 public class Cat { public void shout(){ System.out.println(\u0026#34;miao~\u0026#34;); } } 1 2 3 4 5 public class Dog { public void shout(){ System.out.println(\u0026#34;wang~\u0026#34;); } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 public class People { private Cat cat; private Dog dog; private String name; public Cat getCat() { return cat; } public void setCat(Cat cat) { this.cat = cat; } public Dog getDog() { return dog; } public void setDog(Dog dog) { this.dog = dog; } public String getName() { return name; } public void setName(String name) { this.name = name; } } ByNameè‡ªåŠ¨è£…é… 1 2 3 4 5 6 \u0026lt;bean id=\u0026#34;cat\u0026#34; class=\u0026#34;top.lbqaq.pojo.Cat\u0026#34;/\u0026gt; \u0026lt;bean id=\u0026#34;dog\u0026#34; class=\u0026#34;top.lbqaq.pojo.Dog\u0026#34;/\u0026gt; \u0026lt;bean id=\u0026#34;people\u0026#34; class=\u0026#34;top.lbqaq.pojo.People\u0026#34; autowire=\u0026#34;byName\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;name\u0026#34; value=\u0026#34;å°æ˜\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; ä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åé¢çš„å€¼ç›¸å¯¹åº”çš„beanid\nByTypeè‡ªåŠ¨è£…é… 1 2 3 4 5 6 \u0026lt;bean id=\u0026#34;cat\u0026#34; class=\u0026#34;top.lbqaq.pojo.Cat\u0026#34;/\u0026gt; \u0026lt;bean id=\u0026#34;dog\u0026#34; class=\u0026#34;top.lbqaq.pojo.Dog\u0026#34;/\u0026gt; \u0026lt;bean id=\u0026#34;people\u0026#34; class=\u0026#34;top.lbqaq.pojo.People\u0026#34; autowire=\u0026#34;byType\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;name\u0026#34; value=\u0026#34;å°æ˜\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; è‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„Bean\nå°ç»“ï¼š\nbynameè¦ä¿è¯æ‰€æœ‰çš„beançš„idå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„setæ–¹æ³•çš„å€¼ä¸€è‡´ bytypeçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯beançš„classå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹ä¸€è‡´ ä½¿ç”¨æ³¨è§£è‡ªåŠ¨è£…é… å‡†å¤‡å·¥ä½œ å¯¼å…¥aopåŒ…\nå¯¼å…¥çº¦æŸ\n1 2 3 4 xmlns:context=\u0026#34;http://www.springframework.org/schema/context\u0026#34; http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd é…ç½®æ³¨è§£æ”¯æŒ\u0026lt;context:annotation-config/\u0026gt;\n@Autowired åœ¨å±æ€§æˆ–åœ¨setæ–¹æ³•ä¸Šä½¿ç”¨ã€‚\nä½¿ç”¨Autowiredå¯ä»¥ä¸éœ€è¦setæ–¹æ³•ã€‚\n@Autowiredæ˜¯æŒ‰ç±»å‹è‡ªåŠ¨è½¬é…çš„ã€‚\n@Autowired(required=false) è¯´æ˜å¯¹è±¡å¯ä»¥ä¸ºnull\n@Qualifier å¦‚æœç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œè‡ªåŠ¨è£…é…æ— æ³•é€šè¿‡ä¸€ä¸ª@Autowiredå®Œæˆï¼Œå¯ä»¥é€šè¿‡@Qualifier(value=\u0026quot;xxx\u0026quot;)æ¥å®ç°ã€‚\n@Qualifierç›¸å½“äºbyName\n1 2 3 4 5 6 @Autowired @Qualifier(value = \u0026#34;cat2\u0026#34;) private Cat cat; @Autowired @Qualifier(value = \u0026#34;dog2\u0026#34;) private Dog dog; @Resource @Resourceå¦‚æœ‰æŒ‡å®šçš„nameå±æ€§ï¼Œå…ˆæŒ‰è¯¥å±æ€§è¿›è¡ŒbyNameæ–¹å¼æŸ¥æ‰¾è£…é…ï¼› å…¶æ¬¡å†è¿›è¡Œé»˜è®¤çš„byNameæ–¹å¼è¿›è¡Œè£…é…ï¼› å¦‚æœä»¥ä¸Šéƒ½ä¸æˆåŠŸï¼Œåˆ™æŒ‰byTypeçš„æ–¹å¼è‡ªåŠ¨è£…é…ã€‚ éƒ½ä¸æˆåŠŸï¼Œåˆ™æŠ¥å¼‚å¸¸ã€‚ 1 2 3 4 5 6 7 8 public class User { //å¦‚æœå…è®¸å¯¹è±¡ä¸ºnullï¼Œè®¾ç½®required = false,é»˜è®¤ä¸ºtrue @Resource(name = \u0026#34;cat2\u0026#34;) private Cat cat; @Resource private Dog dog; private String str; } å°ç»“ @Autowiredä¸@Resourceå¼‚åŒï¼š\n@Autowiredä¸@Resourceéƒ½å¯ä»¥ç”¨æ¥è£…é…beanã€‚éƒ½å¯ä»¥å†™åœ¨å­—æ®µä¸Šï¼Œæˆ–å†™åœ¨setteræ–¹æ³•ä¸Šã€‚\n@Autowiredé»˜è®¤æŒ‰ç±»å‹è£…é…ï¼ˆå±äºspringè§„èŒƒï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹å¿…é¡»è¦æ±‚ä¾èµ–å¯¹è±¡å¿…é¡»å­˜åœ¨ï¼Œå¦‚æœè¦å…è®¸null å€¼ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„requiredå±æ€§ä¸ºfalseï¼Œå¦‚ï¼š@Autowired(required=false) ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨åç§°è£…é…å¯ä»¥ç»“åˆ@Qualifieræ³¨è§£è¿›è¡Œä½¿ç”¨\n@Resourceï¼ˆå±äºJ2EEå¤è¿”ï¼‰ï¼Œé»˜è®¤æŒ‰ç…§åç§°è¿›è¡Œè£…é…ï¼Œåç§°å¯ä»¥é€šè¿‡nameå±æ€§è¿›è¡ŒæŒ‡å®šã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šnameå±æ€§ï¼Œå½“æ³¨è§£å†™åœ¨å­—æ®µä¸Šæ—¶ï¼Œé»˜è®¤å–å­—æ®µåè¿›è¡ŒæŒ‰ç…§åç§°æŸ¥æ‰¾ï¼Œå¦‚æœæ³¨è§£å†™åœ¨setteræ–¹æ³•ä¸Šé»˜è®¤å–å±æ€§åè¿›è¡Œè£…é…ã€‚å½“æ‰¾ä¸åˆ°ä¸åç§°åŒ¹é…çš„beanæ—¶æ‰æŒ‰ç…§ç±»å‹è¿›è¡Œè£…é…ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœnameå±æ€§ä¸€æ—¦æŒ‡å®šï¼Œå°±åªä¼šæŒ‰ç…§åç§°è¿›è¡Œè£…é…ã€‚\nå®ƒä»¬çš„ä½œç”¨ç›¸åŒéƒ½æ˜¯ç”¨æ³¨è§£æ–¹å¼æ³¨å…¥å¯¹è±¡ï¼Œä½†æ‰§è¡Œé¡ºåºä¸åŒã€‚@Autowiredå…ˆbyTypeï¼Œ@Resourceå…ˆbyNameã€‚\nä½¿ç”¨æ³¨è§£å¼€å‘ ä½¿ç”¨æ³¨è§£å¼€å‘éœ€è¦å¯¼å…¥aopçš„åŒ…ï¼Œå¯¼å…¥çº¦æŸå’Œé…ç½®æ³¨è§£æ”¯æŒ\n1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xmlns:context=\u0026#34;http://www.springframework.org/schema/context\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\u0026#34;\u0026gt; \u0026lt;!--æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ--\u0026gt; \u0026lt;context:component-scan base-package=\u0026#34;top.lbqaq.pojo\u0026#34;/\u0026gt; \u0026lt;context:annotation-config/\u0026gt; \u0026lt;/beans\u0026gt; Beançš„å®ç° 1 2 3 4 @Component public class User { public String name = \u0026#34;å°æ˜\u0026#34;; } ä½¿ç”¨@Componentæ³¨è§£ï¼Œç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­çš„\u0026lt;bean id=\u0026quot;user\u0026quot; class=\u0026quot;å½“å‰æ³¨è§£çš„ç±»\u0026quot;/\u0026gt;\næ³¨æ„éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¦æ‰«æçš„åŒ…\u0026lt;context:component-scan base-package=\u0026quot;top.lbqaq.pojo\u0026quot;/\u0026gt;\nå±æ€§æ³¨å…¥ ä½¿ç”¨@Valueæ³¨è§£ï¼Œç›¸å½“äºé…ç½®æ–‡ä»¶ä¸­çš„\u0026lt;property name=\u0026quot;name\u0026quot; value=\u0026quot;å°æ˜\u0026quot;/\u0026gt;\nå¯ä»¥åœ¨å£°æ˜ä¸ŠåŠ ï¼Œä¹Ÿå¯ä»¥åœ¨setæ–¹æ³•ä¸ŠåŠ \n1 2 3 4 5 @Component public class User { @Value(\u0026#34;å°æ˜\u0026#34;) public String name; } 1 2 3 4 5 6 7 8 9 10 @Component public class User { public String name; @Value(\u0026#34;å°æ˜\u0026#34;) public void setName(String name) { this.name = name; } } è¡ç”Ÿæ³¨è§£ å¯¹äº@Componentæ³¨è§£ï¼Œæœ‰ä¸‰ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œåˆ†åˆ«å¯¹åº”MVCçš„ä¸‰å±‚ã€‚\nDaoå±‚ï¼š@Repository Serviceå±‚ï¼š@Service Webå±‚ï¼š@Controller è¿™å››ä¸ªæ³¨è§£çš„ä½œç”¨éƒ½æ˜¯ä»£è¡¨å°†æŸä¸ªç±»æ³¨å†Œåˆ°Springä¸­ï¼Œè£…é…Bean\nè‡ªåŠ¨è£…é…æ³¨è§£ @Autowiredï¼šæŒ‰ç±»å‹è‡ªåŠ¨è½¬é… @Qualifier(value=\u0026quot;xxx\u0026quot;)ï¼šæŒ‰nameè‡ªåŠ¨è£…é… @Resourceï¼šJavaæä¾›çš„ï¼Œå…ˆnameå†typeï¼Œæ¯”è¾ƒå¤æ‚ è¯¦ç»†çš„è§£é‡Šå¯ä»¥çœ‹ä¸Šé¢\nä½œç”¨åŸŸ @Scope\nsingletonï¼šå•ä¾‹æ¨¡å¼ prototypeï¼šå¤šä¾‹æ¨¡å¼ 1 2 3 4 5 6 @Component @Scope(\u0026#34;prototype\u0026#34;) public class User { @Value(\u0026#34;å°æ˜\u0026#34;) public String name; } å°ç»“ XMLä¸æ³¨è§£æ¯”è¾ƒ\nXMLå¯ä»¥é€‚ç”¨ä»»ä½•åœºæ™¯ ï¼Œç»“æ„æ¸…æ™°ï¼Œç»´æŠ¤æ–¹ä¾¿ æ³¨è§£ä¸æ˜¯è‡ªå·±æä¾›çš„ç±»ä½¿ç”¨ä¸äº†ï¼Œå¼€å‘ç®€å•æ–¹ä¾¿ æ¨èç”¨æ³•\nxmlç®¡ç†Bean æ³¨è§£å®Œæˆå±æ€§æ³¨å…¥ ä½¿ç”¨Javaç±»è¿›è¡Œé…ç½® å®ä½“ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 public class User { private String name; @Override public String toString() { return \u0026#34;User{\u0026#34; + \u0026#34;name=\u0026#39;\u0026#34; + name + \u0026#39;\\\u0026#39;\u0026#39; + \u0026#39;}\u0026#39;; } public String getName() { return name; } @Value(\u0026#34;å°æ˜\u0026#34;) public void setName(String name) { this.name = name; } } é…ç½®ç±»\n1 2 3 4 5 6 7 @Configuration public class LbqaqConfig { @Bean public User getUser(){ return new User(); } } è¿™é‡Œçš„@Configurationè¡¨æ˜è¿™æ˜¯Springçš„é…ç½®\n@Beanæ˜¯ç”¨æ¥æ³¨å†Œbeanï¼Œè¿™é‡Œçš„è¿”å›å€¼å°±Beançš„ç±»å‹ï¼Œæ–¹æ³•åå°±æ˜¯beançš„id\næµ‹è¯•\n1 2 3 4 5 6 7 8 public class MyTest { @Test public void test1(){ ApplicationContext context = new AnnotationConfigApplicationContext(LbqaqConfig.class); User user = (User) context.getBean(\u0026#34;getUser\u0026#34;); System.out.println(user.getName()); } } ä»£ç†æ¨¡å¼ AOPçš„åº•å±‚æœºåˆ¶å°±æ˜¯åŠ¨æ€ä»£ç†ã€‚\né™æ€ä»£ç† è§’è‰²åˆ†æ\næŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥å®ç° çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰² ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ã€‚ä»£ç†çœŸå®è§’è‰²å , ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±çš„æ“ä½œã€‚ å®¢æˆ·ï¼šä½¿ç”¨ä»£ç†è§’è‰²æ¥è¿›è¡Œä¸€äº›æ“ä½œã€‚ ä¸¾ä¾‹ï¼š\nRent.javaå³æŠ½è±¡è§’è‰²\n1 2 3 4 //æŠ½è±¡è§’è‰²ï¼šç§Ÿæˆ¿ public interface Rent { public void rent(); } Host.javaå³çœŸå®è§’è‰²\n1 2 3 4 5 6 //çœŸå®è§’è‰²: æˆ¿ä¸œï¼Œæˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­ public class Host implements Rent{ public void rent() { System.out.println(\u0026#34;æˆ¿å±‹å‡ºç§Ÿ\u0026#34;); } } Proxy.javaå³ä»£ç†è§’è‰²\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 //ä»£ç†è§’è‰²ï¼šä¸­ä»‹ public class Proxy implements Rent { private Host host; public Proxy() { } public Proxy(Host host) { this.host = host; } //ç§Ÿæˆ¿ public void rent(){ seeHouse(); host.rent(); fare(); } //çœ‹æˆ¿ public void seeHouse(){ System.out.println(\u0026#34;å¸¦æˆ¿å®¢çœ‹æˆ¿\u0026#34;); } //æ”¶ä¸­ä»‹è´¹ public void fare(){ System.out.println(\u0026#34;æ”¶ä¸­ä»‹è´¹\u0026#34;); } } Client.javaå³å®¢æˆ·\n1 2 3 4 5 6 7 8 9 10 11 12 //å®¢æˆ·ç±»ï¼Œä¸€èˆ¬å®¢æˆ·éƒ½ä¼šå»æ‰¾ä»£ç†ï¼ public class Client { public static void main(String[] args) { //æˆ¿ä¸œè¦ç§Ÿæˆ¿ Host host = new Host(); //ä¸­ä»‹å¸®åŠ©æˆ¿ä¸œ Proxy proxy = new Proxy(host); //ä½ å»æ‰¾ä¸­ä»‹ï¼ proxy.rent(); } } åˆ†æï¼š\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ ç›´æ¥æ¥è§¦çš„å°±æ˜¯ä¸­ä»‹ï¼Œå°±å¦‚åŒç°å®ç”Ÿæ´»ä¸­çš„æ ·å­ï¼Œä½ çœ‹ä¸åˆ°æˆ¿ä¸œï¼Œä½†æ˜¯ä½ ä¾æ—§ç§Ÿåˆ°äº†æˆ¿ä¸œçš„æˆ¿å­é€šè¿‡ä»£ç†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä»£ç†æ¨¡å¼ã€‚\né™æ€ä»£ç†çš„å¥½å¤„:\nå¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„çœŸå®è§’è‰²æ›´åŠ çº¯ç²¹ï¼Œä¸å†å»å…³æ³¨ä¸€äº›å…¬å…±çš„äº‹æƒ…ã€‚ å…¬å…±çš„ä¸šåŠ¡ç”±ä»£ç†æ¥å®Œæˆï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ã€‚ å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•æ—¶å˜å¾—æ›´åŠ é›†ä¸­å’Œæ–¹ä¾¿ã€‚ ç¼ºç‚¹ï¼š\nç±»å¤šäº†ï¼Œå¤šäº†ä»£ç†ç±»ï¼Œå·¥ä½œé‡å˜å¤§äº†ï¼Œå¼€å‘æ•ˆç‡é™ä½ã€‚ æˆ‘ä»¬åœ¨ä¸æ”¹å˜åŸæ¥çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ç°äº†å¯¹åŸæœ‰åŠŸèƒ½çš„å¢å¼ºï¼Œè¿™æ˜¯AOPä¸­æœ€æ ¸å¿ƒçš„æ€æƒ³ã€‚\nåŠ¨æ€ä»£ç† åŠ¨æ€ä»£ç†çš„è§’è‰²å’Œé™æ€ä»£ç†çš„ä¸€æ ·ã€‚\nåŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œé™æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯æˆ‘ä»¬æå‰å†™å¥½çš„\nåŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯åŸºäºæ¥å£åŠ¨æ€ä»£ç†ï¼Œä¸€ç±»æ˜¯åŸºäºç±»çš„åŠ¨æ€ä»£ç†\nåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†\u0026mdash;-JDKåŠ¨æ€ä»£ç† åŸºäºç±»çš„åŠ¨æ€ä»£ç†\u0026ndash;cglib ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ javasist æ¥ç”ŸæˆåŠ¨æ€ä»£ç† . ç™¾åº¦ä¸€ä¸‹javasist æˆ‘ä»¬è¿™é‡Œä½¿ç”¨JDKçš„åŸç”Ÿä»£ç æ¥å®ç°ï¼Œå…¶ä½™çš„é“ç†éƒ½æ˜¯ä¸€æ ·çš„ï¼ JDKçš„åŠ¨æ€ä»£ç†éœ€è¦äº†è§£ä¸¤ä¸ªç±»\næ ¸å¿ƒ : InvocationHandlerã€Proxy\nä»£ç å®ç°ï¼š\n1 2 3 4 //ç§Ÿæˆ¿ public interface Rent { void rent(); } 1 2 3 4 5 6 7 8 //æˆ¿ä¸œ public class Host implements Rent { @Override public void rent() { System.out.println(\u0026#34;æˆ¿ä¸œè¦å‡ºç§Ÿ\u0026#34;); } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class ProxyInvocationHandler implements InvocationHandler { //è¢«ä»£ç†çš„æ¥å£ private Rent rent; public void setRent(Rent rent) { this.rent = rent; } //ç”Ÿæˆå¾—åˆ°çš„ä»£ç†ç±» public Object getProxy(){ return Proxy.newProxyInstance(this.getClass().getClassLoader(),rent.getClass().getInterfaces(),this); } @Override //å¤„ç†ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { //åŠ¨æ€ä»£ç†å°±æ˜¯ä¾èµ–åå°„å®ç° Object result = method.invoke(rent, args); return result; } } 1 2 3 4 5 6 7 8 9 10 11 public class Client { public static void main(String[] args) { //çœŸå®è§’è‰² Host host=new Host(); ProxyInvocationHandler pih = new ProxyInvocationHandler(); pih.setRent(host); Rent proxy = (Rent) pih.getProxy(); proxy.rent(); } } åŠ¨æ€ä»£ç†ä»£ç†æ¥å£\né€šç”¨çš„ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 public class ProxyInvocationHandler implements InvocationHandler { private Object target; public void setTarget(Object target) { this.target = target; } //ç”Ÿæˆä»£ç†ç±» public Object getProxy() { return Proxy.newProxyInstance(this.getClass().getClassLoader(), target.getClass().getInterfaces(), this); } // proxy : ä»£ç†ç±» // method : ä»£ç†ç±»çš„è°ƒç”¨å¤„ç†ç¨‹åºçš„æ–¹æ³•å¯¹è±¡. public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { log(method.getName()); Object result = method.invoke(target, args); return result; } public void log(String methodName) { System.out.println(\u0026#34;æ‰§è¡Œäº†\u0026#34; + methodName + \u0026#34;æ–¹æ³•\u0026#34;); } } AOP ä»€ä¹ˆæ˜¯AOP AOPï¼ˆAspect Oriented Programmingï¼‰æ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚AOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚\né€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹å»å¢åŠ æ–°çš„åŠŸèƒ½ã€‚\nAOPåœ¨Springä¸­ æä¾›å£°æ˜å¼äº‹åŠ¡ï¼›å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢\næ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿— , å®‰å…¨ , ç¼“å­˜ , äº‹åŠ¡ç­‰ç­‰ \u0026hellip;. åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹ è¢«æ¨¡å—åŒ– çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚ é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚ ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚ ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚ åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥ æ‰§è¡Œçš„ â€œåœ°ç‚¹â€çš„å®šä¹‰ã€‚ è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚ SpringAOPä¸­ï¼Œé€šè¿‡Adviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„Adviceï¼š\nä½¿ç”¨Springå®ç°AOP å¯¼å…¥ä¾èµ–åŒ…\n1 2 3 4 5 6 7 \u0026lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.aspectj\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;aspectjweaver\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.9.7\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;runtime\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; æ–¹å¼ä¸€ï¼šä½¿ç”¨Springçš„æ–¹æ³• ä¸šåŠ¡æ¥å£å’Œå®ç°ç±»\n1 2 3 4 5 6 public interface UserService { void add(); void delete(); void update(); void select(); } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public class UserServiceImpl implements UserService{ @Override public void add() { System.out.println(\u0026#34;å¢åŠ ä¸€ä¸ªç”¨æˆ·\u0026#34;); } @Override public void delete() { System.out.println(\u0026#34;åˆ é™¤ä¸€ä¸ªç”¨æˆ·\u0026#34;); } @Override public void update() { System.out.println(\u0026#34;æ›´æ–°ä¸€ä¸ªç”¨æˆ·\u0026#34;); } @Override public void select() { System.out.println(\u0026#34;æŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·\u0026#34;); } } å†™ä¸¤ä¸ªå¢å¼ºç±»\n1 2 3 4 5 6 7 8 9 public class Log implements MethodBeforeAdvice { //method : è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³• //objects : è¢«è°ƒç”¨çš„æ–¹æ³•çš„å‚æ•° //o : ç›®æ ‡å¯¹è±¡ @Override public void before(Method method, Object[] objects, Object o) throws Throwable { System.out.println(o.getClass().getName()+\u0026#34;çš„\u0026#34;+method.getName()+\u0026#34;è¢«æ‰§è¡Œäº†\u0026#34;); } } 1 2 3 4 5 6 7 public class AfterLog implements AfterReturningAdvice { //o:è¿”å›å€¼ @Override public void afterReturning(Object o, Method method, Object[] objects, Object o1) throws Throwable { System.out.println(\u0026#34;æ‰§è¡Œäº†\u0026#34;+method.getName()+\u0026#34;æ–¹æ³•ï¼Œè¿”å›ç»“æœä¸º\u0026#34;+o); } } é…ç½®xmlï¼Œè¿™é‡Œéœ€è¦å¼•å…¥aopå‘½åç©ºé—´\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xmlns:aop=\u0026#34;http://www.springframework.org/schema/aop\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd\u0026#34;\u0026gt; \u0026lt;!--æ³¨å†ŒBean--\u0026gt; \u0026lt;bean id=\u0026#34;userService\u0026#34; class=\u0026#34;top.lbqaq.service.UserServiceImpl\u0026#34;/\u0026gt; \u0026lt;bean id=\u0026#34;log\u0026#34; class=\u0026#34;top.lbqaq.log.Log\u0026#34;/\u0026gt; \u0026lt;bean id=\u0026#34;afterLog\u0026#34; class=\u0026#34;top.lbqaq.log.AfterLog\u0026#34;/\u0026gt; \u0026lt;!--é…ç½®aopï¼šéœ€è¦å¯¼å…¥aopçº¦æŸ--\u0026gt; \u0026lt;aop:config\u0026gt; \u0026lt;!--åˆ‡å…¥ç‚¹ï¼šexpressionï¼šè¡¨è¾¾å¼ execution()--\u0026gt; \u0026lt;aop:pointcut id=\u0026#34;pointcut\u0026#34; expression=\u0026#34;execution(* top.lbqaq.service.UserServiceImpl.*(..))\u0026#34;/\u0026gt; \u0026lt;!--æ‰§è¡Œç¯ç»•; advice-refæ‰§è¡Œæ–¹æ³• . pointcut-refåˆ‡å…¥ç‚¹--\u0026gt; \u0026lt;aop:advisor advice-ref=\u0026#34;log\u0026#34; pointcut-ref=\u0026#34;pointcut\u0026#34;/\u0026gt; \u0026lt;aop:advisor advice-ref=\u0026#34;afterLog\u0026#34; pointcut-ref=\u0026#34;pointcut\u0026#34;/\u0026gt; \u0026lt;/aop:config\u0026gt; \u0026lt;/beans\u0026gt; executionè¡¨è¾¾å¼è§£æï¼š\nexecution(ä¿®é¥°ç¬¦ è¿”å›å€¼ åŒ…å.ç±»å/æ¥å£å.æ–¹æ³•å(å‚æ•°åˆ—è¡¨)) ä¿®é¥°ç¬¦å¯ä»¥å¿½ç•¥ (..)å¯ä»¥ä»£è¡¨æ‰€æœ‰å‚æ•°,(*)ä»£è¡¨ä¸€ä¸ªå‚æ•°,(*,String)ä»£è¡¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä»»ä½•å€¼,ç¬¬äºŒä¸ªå‚æ•°ä¸ºStringç±»å‹ æœ€åæµ‹è¯•\n1 2 3 4 5 6 7 8 public class MyTest { @Test public void test(){ ApplicationContext context = new ClassPathXmlApplicationContext(\u0026#34;applicationContext.xml\u0026#34;); UserService userService = (UserService) context.getBean(\u0026#34;userService\u0026#34;); userService.select(); } } æ–¹æ³•äºŒï¼šä½¿ç”¨è‡ªå®šä¹‰ç±»æ¥å®ç° åˆ›å»ºè‡ªå®šä¹‰ç±»\n1 2 3 4 5 6 7 8 9 public class DiyPointCut { public void before(){ System.out.println(\u0026#34;==========æ–¹æ³•æ‰§è¡Œå‰==========\u0026#34;); } public void after(){ System.out.println(\u0026#34;==========æ–¹æ³•æ‰§è¡Œå==========\u0026#34;); } } é…ç½®xml\n1 2 3 4 5 6 7 8 9 10 11 \u0026lt;bean id=\u0026#34;diy\u0026#34; class=\u0026#34;top.lbqaq.diy.DiyPointCut\u0026#34;/\u0026gt; \u0026lt;aop:config\u0026gt; \u0026lt;!--è‡ªå®šä¹‰åˆ‡é¢ï¼Œrefä¸ºè¦å¼•ç”¨çš„ç±»--\u0026gt; \u0026lt;aop:aspect ref=\u0026#34;diy\u0026#34;\u0026gt; \u0026lt;!--åˆ‡å…¥ç‚¹--\u0026gt; \u0026lt;aop:pointcut id=\u0026#34;point\u0026#34; expression=\u0026#34;execution(* top.lbqaq.service.UserServiceImpl.*(..))\u0026#34;/\u0026gt; \u0026lt;!--é€šçŸ¥--\u0026gt; \u0026lt;aop:before method=\u0026#34;before\u0026#34; pointcut-ref=\u0026#34;point\u0026#34;/\u0026gt; \u0026lt;aop:after method=\u0026#34;after\u0026#34; pointcut-ref=\u0026#34;point\u0026#34;/\u0026gt; \u0026lt;/aop:aspect\u0026gt; \u0026lt;/aop:config\u0026gt; æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ³¨è§£æ¥å®ç°AOP åœ¨ç±»ä¸Šæ ‡æ³¨æ³¨è§£@Aspectï¼Œå¦‚æœæ²¡æœ‰è¯¥æ³¨è§£ï¼Œå°±åœ¨mavené…ç½®é‡ŒæŠŠ\u0026lt;scope\u0026gt;runtime\u0026lt;/scope\u0026gt;å»æ‰\nåœ¨æ–¹æ³•å‰åŠ ä¸Š@Before()æˆ–@After()æ³¨è§£ï¼Œå¹¶åœ¨æ‹¬å·ä¸­å¡«å…¥è¡¨è¾¾å¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 //ä½¿ç”¨æ³¨è§£å®ç°AOP @Aspect public class AnnotationPointCut { @Before(\u0026#34;execution(* top.lbqaq.service.UserServiceImpl.*(..))\u0026#34;) public void before(){ System.out.println(\u0026#34;=====æ–¹æ³•æ‰§è¡Œå‰=====\u0026#34;); } @After(\u0026#34;execution(* top.lbqaq.service.UserServiceImpl.*(..))\u0026#34;) public void after(){ System.out.println(\u0026#34;=====æ–¹æ³•æ‰§è¡Œå=====\u0026#34;); } //åœ¨ç¯ç»•å¢å¼ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®šä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨æˆ‘ä»¬è¦è·å–å¤„ç†åˆ‡å…¥çš„ç‚¹ @Around(\u0026#34;execution(* top.lbqaq.service.UserServiceImpl.*(..))\u0026#34;) public void around(ProceedingJoinPoint jp) throws Throwable { System.out.println(\u0026#34;ç¯ç»•å‰\u0026#34;); //æ‰§è¡Œæ–¹æ³• Object proceed = jp.proceed(); System.out.println(\u0026#34;ç¯ç»•å\u0026#34;); } } åœ¨Springé…ç½®æ–‡ä»¶æ³¨å†ŒBeanå¹¶å¼€å¯æ³¨è§£æ”¯æŒ\n1 2 3 \u0026lt;bean id=\u0026#34;annotationPointCut\u0026#34; class=\u0026#34;top.lbqaq.diy.AnnotationPointCut\u0026#34;/\u0026gt; \u0026lt;!--å¼€å¯æ³¨è§£æ”¯æŒ--\u0026gt; \u0026lt;aop:aspectj-autoproxy/\u0026gt; æ•´åˆMyBatis é¦–å…ˆè¦å¯¼å…¥ç›¸å…³jaråŒ…\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 \u0026lt;dependencies\u0026gt; \u0026lt;!-- junit --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;junit\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;junit\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.13\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- mysqlé©±åŠ¨ --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;8.0.25\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;runtime\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- mybatis --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.mybatis\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mybatis\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.5.7\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- mybatis-spring --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.mybatis\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mybatis-spring\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.0.6\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- springæ¡†æ¶ --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-webmvc\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.3.9\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- spring-jdbc --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-jdbc\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;5.3.9\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- AOP ç»‡å…¥å™¨ --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.aspectj\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;aspectjweaver\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.9.7\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; å›é¡¾MyBatis ç¼–å†™å®ä½“ç±»\n1 2 3 4 5 6 7 public class User { private int id; private String name; private String pwd; //setter,getter //toString,æ„é€  } ç¼–å†™Mybatisé…ç½®æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34; ?\u0026gt; \u0026lt;!DOCTYPE configuration PUBLIC \u0026#34;-//mybatis.org//DTD Config 3.0//EN\u0026#34; \u0026#34;http://mybatis.org/dtd/mybatis-3-config.dtd\u0026#34;\u0026gt; \u0026lt;!--æ ¸å¿ƒé…ç½®æ–‡ä»¶--\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;typeAliases\u0026gt; \u0026lt;package name=\u0026#34;top.lbqaq.pojo\u0026#34;/\u0026gt; \u0026lt;/typeAliases\u0026gt; \u0026lt;environments default=\u0026#34;development\u0026#34;\u0026gt; \u0026lt;environment id=\u0026#34;development\u0026#34;\u0026gt; \u0026lt;transactionManager type=\u0026#34;JDBC\u0026#34;/\u0026gt; \u0026lt;dataSource type=\u0026#34;POOLED\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;driver\u0026#34; value=\u0026#34;com.mysql.cj.jdbc.Driver\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;url\u0026#34; value=\u0026#34;jdbc:mysql://localhost:3306/mybatis\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;username\u0026#34; value=\u0026#34;root\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;password\u0026#34; value=\u0026#34;root\u0026#34;/\u0026gt; \u0026lt;/dataSource\u0026gt; \u0026lt;/environment\u0026gt; \u0026lt;/environments\u0026gt; \u0026lt;!--æ¯ä¸€ä¸ªmapperéƒ½éœ€è¦æ³¨å†Œ--\u0026gt; \u0026lt;mappers\u0026gt; \u0026lt;mapper class=\u0026#34;top.lbqaq.mapper.UserMapper\u0026#34;/\u0026gt; \u0026lt;/mappers\u0026gt; \u0026lt;/configuration\u0026gt; ç¼–å†™æ¥å£\n1 2 3 public interface UserMapper { List\u0026lt;User\u0026gt; selectUser(); } ç¼–å†™æ¥å£å¯¹åº”çš„xmlæ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34; ?\u0026gt; \u0026lt;!DOCTYPE mapper PUBLIC \u0026#34;-//mybatis.org//DTD Mapper 3.0//EN\u0026#34; \u0026#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd\u0026#34;\u0026gt; \u0026lt;mapper namespace=\u0026#34;top.lbqaq.mapper.UserMapper\u0026#34;\u0026gt; \u0026lt;select id=\u0026#34;selectUser\u0026#34; resultType=\u0026#34;User\u0026#34;\u0026gt; select * from user \u0026lt;/select\u0026gt; \u0026lt;/mapper\u0026gt; è§£å†³Mavené™æ€èµ„æºè¿‡æ»¤é—®é¢˜\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;build\u0026gt; \u0026lt;resources\u0026gt; \u0026lt;resource\u0026gt; \u0026lt;directory\u0026gt;src/main/java\u0026lt;/directory\u0026gt; \u0026lt;includes\u0026gt; \u0026lt;include\u0026gt;**/*.properties\u0026lt;/include\u0026gt; \u0026lt;include\u0026gt;**/*.xml\u0026lt;/include\u0026gt; \u0026lt;/includes\u0026gt; \u0026lt;filtering\u0026gt;true\u0026lt;/filtering\u0026gt; \u0026lt;/resource\u0026gt; \u0026lt;/resources\u0026gt; \u0026lt;/build\u0026gt; æµ‹è¯•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 public class MyTest { @Test public void test() throws IOException { String resource = \u0026#34;mybatis-config.xml\u0026#34;; InputStream inputStream = Resources.getResourceAsStream(resource); SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); SqlSession sqlSession = sqlSessionFactory.openSession(); UserMapper mapper = sqlSession.getMapper(UserMapper.class); List\u0026lt;User\u0026gt; userList = mapper.selectUser(); for (User user: userList){ System.out.println(user); } sqlSession.close(); } } MyBatis-Spring MyBatis-Spring ä¼šå¸®åŠ©ä½ å°† MyBatis ä»£ç æ— ç¼åœ°æ•´åˆåˆ° Spring ä¸­ã€‚å®˜æ–¹æ–‡æ¡£\næ•´åˆå®ç°ä¸€ å¼•å…¥Springé…ç½®æ–‡ä»¶spring-dao.xml\n1 2 3 4 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\u0026#34;\u0026gt; é…ç½®æ•°æ®æº\n1 2 3 4 5 6 7 8 9 \u0026lt;!--DataSource:ä½¿ç”¨Springçš„æ•°æ®æºæ›¿æ¢MyBatisçš„é…ç½® è¿™é‡Œä½¿ç”¨Springæä¾›çš„JDBC --\u0026gt; \u0026lt;bean id=\u0026#34;dataSource\u0026#34; class=\u0026#34;org.springframework.jdbc.datasource.DriverManagerDataSource\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;driverClassName\u0026#34; value=\u0026#34;com.mysql.cj.jdbc.Driver\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;url\u0026#34; value=\u0026#34;jdbc:mysql://localhost:3306/mybatis\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;username\u0026#34; value=\u0026#34;root\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;password\u0026#34; value=\u0026#34;root\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; é…ç½®SqlSessionFactory,å…³è”MyBatis\n1 2 3 4 5 6 \u0026lt;bean id=\u0026#34;sqlSessionFactory\u0026#34; class=\u0026#34;org.mybatis.spring.SqlSessionFactoryBean\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;dataSource\u0026#34; ref=\u0026#34;dataSource\u0026#34; /\u0026gt; \u0026lt;!--ç»‘å®šMybatisé…ç½®æ–‡ä»¶--\u0026gt; \u0026lt;property name=\u0026#34;configLocation\u0026#34; value=\u0026#34;classpath:mybatis-config.xml\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;mapperLocations\u0026#34; value=\u0026#34;classpath:top/lbqaq/mapper/*.xml\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; æ³¨å†ŒsqlSessionTemplateï¼Œå…³è”sqlSessionFactory\n1 2 3 4 \u0026lt;bean id=\u0026#34;sqlSession\u0026#34; class=\u0026#34;org.mybatis.spring.SqlSessionTemplate\u0026#34;\u0026gt; \u0026lt;!--ä½¿ç”¨æ„é€ å™¨æ³¨å…¥ï¼Œå› ä¸ºå®ƒæ²¡æœ‰setæ–¹æ³•--\u0026gt; \u0026lt;constructor-arg index=\u0026#34;0\u0026#34; ref=\u0026#34;sqlSessionFactory\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; å¢åŠ Mapperæ¥å£çš„å®ç°ç±»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 public class UserMapperImpl implements UserMapper{ //åŸæ¥æˆ‘ä»¬çš„æ‰€æœ‰æ“ä½œï¼Œéƒ½ä½¿ç”¨sqlSessionæ¥æ‰§è¡Œï¼›ç°åœ¨éƒ½ä½¿ç”¨SqlSessionTemplate private SqlSessionTemplate sqlSession; public void setSqlSession(SqlSessionTemplate sqlSession) { this.sqlSession = sqlSession; } @Override public List\u0026lt;User\u0026gt; selectUser() { UserMapper mapper = sqlSession.getMapper(UserMapper.class); return mapper.selectUser(); } } å°†å®ç°ç±»æ³¨å†Œåˆ°Springä¸­\n1 2 3 \u0026lt;bean id=\u0026#34;userMapper\u0026#34; class=\u0026#34;top.lbqaq.mapper.UserMapperImpl\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;sqlSession\u0026#34; ref=\u0026#34;sqlSession\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; æµ‹è¯•\n1 2 3 4 5 6 7 8 @Test public void test2(){ ApplicationContext context = new ClassPathXmlApplicationContext(\u0026#34;spring-dao.xml\u0026#34;); UserMapper userMapper = context.getBean(\u0026#34;userMapper\u0026#34;, UserMapper.class); for (User user : userMapper.selectUser()) { System.out.println(user); } } æ­¤æ—¶å†å»çœ‹MyBatisçš„é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢å¤§éƒ¨åˆ†é…ç½®éƒ½è¢«Springæ•´åˆäº†\n1 2 3 4 5 6 7 8 9 10 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34; ?\u0026gt; \u0026lt;!DOCTYPE configuration PUBLIC \u0026#34;-//mybatis.org//DTD Config 3.0//EN\u0026#34; \u0026#34;http://mybatis.org/dtd/mybatis-3-config.dtd\u0026#34;\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;typeAliases\u0026gt; \u0026lt;package name=\u0026#34;top.lbqaq.pojo\u0026#34;/\u0026gt; \u0026lt;/typeAliases\u0026gt; \u0026lt;/configuration\u0026gt; è¿™é‡Œå»ºè®®å°†typeAliaseså’Œsettingsç•™åœ¨MyBatisçš„é…ç½®æ–‡ä»¶ä¸­ã€‚\nä»¥åå¯ä»¥å°†Springé…ç½®æ–‡ä»¶æ‹†å¼€ï¼Œspring-dao.xmlç”¨æ¥å¤„ç†æ•°æ®åº“ç›¸å…³ä»£ç ï¼ŒapplicationContext.xmlä½œä¸ºæ€»é…ç½®æ–‡ä»¶ã€‚\n1 2 3 4 5 6 7 8 9 10 11 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\u0026#34;\u0026gt; \u0026lt;import resource=\u0026#34;spring-dao.xml\u0026#34;/\u0026gt; \u0026lt;bean id=\u0026#34;userMapper\u0026#34; class=\u0026#34;top.lbqaq.mapper.UserMapperImpl\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;sqlSession\u0026#34; ref=\u0026#34;sqlSession\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;/beans\u0026gt; æ•´åˆæ–¹å¼äºŒ ä½¿ç”¨SqlSessionDaoSupport\nä¿®æ”¹å®ç°ç±»ï¼Œç»§æ‰¿SqlSessionDaoSupport\n1 2 3 4 5 6 public class UserMapperImpl2 extends SqlSessionDaoSupport implements UserMapper{ @Override public List\u0026lt;User\u0026gt; selectUser() { return getSqlSession().getMapper(UserMapper.class).selectUser(); } } é…ç½®Bean\n1 2 3 \u0026lt;bean id=\u0026#34;userMapper2\u0026#34; class=\u0026#34;top.lbqaq.mapper.UserMapperImpl2\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;sqlSessionFactory\u0026#34; ref=\u0026#34;sqlSessionFactory\u0026#34;/\u0026gt; \u0026lt;/bean\u0026gt; æµ‹è¯•\n1 2 3 4 5 6 7 8 @Test public void test2(){ ApplicationContext context = new ClassPathXmlApplicationContext(\u0026#34;applicationContext.xml\u0026#34;); UserMapper userMapper = context.getBean(\u0026#34;userMapper2\u0026#34;, UserMapper.class); for (User user : userMapper.selectUser()) { System.out.println(user); } } ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå°±ä¸éœ€è¦ä¸Šé¢çš„ç¬¬4æ­¥äº†ï¼Œæ­¥éª¤å°±æ›´åŠ ç®€æ´äº†ã€‚\nå£°æ˜å¼äº‹åŠ¡ springä¸­çš„äº‹åŠ¡ï¼š\nç¼–ç¨‹å¼äº‹åŠ¡ï¼šåœ¨ä»£ç ä¸­è¿›è¡Œäº‹åŠ¡çš„ç®¡ç† å£°æ˜å¼äº‹åŠ¡ï¼šAOP ä¸€èˆ¬æˆ‘ä»¬éƒ½é‡‡ç”¨å£°æ˜å¼äº‹åŠ¡ï¼Œå°†äº‹åŠ¡ç®¡ç†ä½œä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œé€šè¿‡aopæ–¹æ³•æ¨¡å—åŒ–ã€‚\nä½¿ç”¨æ–¹æ³•ï¼š\nå¼•å…¥å¤´æ–‡ä»¶çº¦æŸtx\n1 2 3 4 xmlns:tx=\u0026#34;http://www.springframework.org/schema/tx\u0026#34; http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\u0026#34; é…ç½®äº‹åŠ¡ç®¡ç†å™¨\n1 2 3 4 \u0026lt;!--é…ç½®å£°æ˜å¼äº‹åŠ¡--\u0026gt; \u0026lt;bean id=\u0026#34;transactionManager\u0026#34; class=\u0026#34;org.springframework.jdbc.datasource.DataSourceTransactionManager\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;dataSource\u0026#34; ref=\u0026#34;dataSource\u0026#34; /\u0026gt; \u0026lt;/bean\u0026gt; é…ç½®äº‹åŠ¡é€šçŸ¥\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;!--é…ç½®äº‹åŠ¡é€šçŸ¥--\u0026gt; \u0026lt;tx:advice id=\u0026#34;txAdvice\u0026#34; transaction-manager=\u0026#34;transactionManager\u0026#34;\u0026gt; \u0026lt;!--ç»™é‚£äº›æ–¹æ³•é…ç½®äº‹åŠ¡--\u0026gt; \u0026lt;tx:attributes\u0026gt; \u0026lt;!--é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ propagation--\u0026gt; \u0026lt;tx:method name=\u0026#34;add\u0026#34; propagation=\u0026#34;REQUIRED\u0026#34;/\u0026gt; \u0026lt;tx:method name=\u0026#34;delete\u0026#34; propagation=\u0026#34;REQUIRED\u0026#34;/\u0026gt; \u0026lt;tx:method name=\u0026#34;update\u0026#34; propagation=\u0026#34;REQUIRED\u0026#34;/\u0026gt; \u0026lt;tx:method name=\u0026#34;query\u0026#34; read-only=\u0026#34;true\u0026#34;/\u0026gt; \u0026lt;tx:method name=\u0026#34;*\u0026#34; propagation=\u0026#34;REQUIRED\u0026#34;/\u0026gt; \u0026lt;/tx:attributes\u0026gt; \u0026lt;/tx:advice\u0026gt; Springçš„äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ä¸€å…±æœ‰7ç§ï¼š\npropagation_requierdï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå·²å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŠ å…¥åˆ°è¿™ä¸ªäº‹åŠ¡ä¸­ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„é€‰æ‹©ã€‚ propagation_supportsï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹æ³•æ‰§è¡Œã€‚ propagation_mandatoryï¼šä½¿ç”¨å½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚ propagation_required_newï¼šæ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚ propagation_not_supportedï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚ propagation_neverï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ propagation_nestedï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡Œä¸propagation_requiredç±»ä¼¼çš„æ“ä½œ ä¸€èˆ¬ç¬¬ä¸€ç§å°±å¤Ÿç”¨äº†ã€‚\né…ç½®AOP\næ³¨æ„è¦å¯¼å…¥å¤´æ–‡ä»¶ä¾èµ–aopï¼Œè¯¦ç»†çš„å†…å®¹åœ¨ä¸Šé¢ï¼Œæˆ–è€…IDEAä¹Ÿä¼šè‡ªåŠ¨è¡¥å…¨\n1 2 3 4 5 \u0026lt;!--é…ç½®äº‹åŠ¡åˆ‡å…¥--\u0026gt; \u0026lt;aop:config\u0026gt; \u0026lt;aop:pointcut id=\u0026#34;txPointCut\u0026#34; expression=\u0026#34;execution(* top.lbqaq.mapper.*(..))\u0026#34;/\u0026gt; \u0026lt;aop:advisor advice-ref=\u0026#34;txAdvice\u0026#34; pointcut-ref=\u0026#34;txPointCut\u0026#34;/\u0026gt; \u0026lt;/aop:config\u0026gt; ","date":"2021-08-12T09:38:02+08:00","image":"https://lbqaq.top/p/spring/82968220.webp","permalink":"https://lbqaq.top/p/spring/","title":"Springå­¦ä¹ ç¬”è®°"},{"content":"å› ä¸ºä¹°äº†ä¸€å°äº‘æœåŠ¡å™¨ï¼Œä¸æ‹¿æ¥å¹²ç‚¹å•¥å®åœ¨æ˜¯å¤ªäºäº†ï¼Œäºæ˜¯ä¾¿æƒ³åˆ°äº†å¯ä»¥ä½¿ç”¨äº‘æœåŠ¡å™¨æ¥æŒ‚å¡ã€‚\næ­¥éª¤ å®‰è£….netç¯å¢ƒ ASFæ˜¯åŸºäº.netcoreå¼€å‘çš„ç¨‹åºï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ç¯å¢ƒã€‚è¿™é‡Œå»ºè®®çœ‹å¾®è½¯å®˜æ–¹çš„å®‰è£…æ–‡æ¡£ï¼Œé‡Œé¢æœ‰ä¸åŒç³»ç»Ÿçš„å®‰è£…æ–¹æ³•ã€‚\næˆ‘ä»¬éœ€è¦å®‰è£…çš„åªæ˜¯ASP.NET Core è¿è¡Œæ—¶ã€‚\næˆ‘çš„ç³»ç»Ÿæ˜¯centos7ï¼Œè¿™é‡Œå°±åªåˆ—ä¸¾æˆ‘ç³»ç»Ÿä¸Šçš„å‘½ä»¤äº†ã€‚\n1 2 sudo rpm -Uvh https://packages.microsoft.com/config/centos/7/packages-microsoft-prod.rpm sudo yum install aspnetcore-runtime-5.0 å®‰è£…ASF åœ¨ASFçš„å‘å¸ƒé¡µé¢ä¸Šä¸‹è½½ç³»ç»Ÿå¯¹åº”çš„ç‰ˆæœ¬è§£å‹å³å¯ã€‚\næˆ‘è¿™é‡Œæ˜¯åœ¨æœ¬åœ°å…ˆä¸‹è½½å¥½åç”¨WinSCPç›´æ¥ä¼ ä¸ŠæœåŠ¡å™¨ã€‚\né…ç½®ASF è¿™é‡Œå°±é‡‡ç”¨å®˜æ–¹çš„**åœ¨çº¿é…ç½®æ–‡ä»¶ç”Ÿæˆå™¨**è‡ªåŠ¨ç”Ÿæˆå³å¯ã€‚\næˆ‘ä»¬è¿™é‡Œé€‰æ‹©æœºå™¨äººï¼Œå°†steamçš„è´¦å·å’Œå¯†ç å¡«å…¥ï¼Œå¹¶å°†Enabledè®¾ç½®ä¸ºTrueå°±è¡Œäº†ã€‚\nè¯¦ç»†çš„é…ç½®å†…å®¹å¯ä»¥åœ¨å®˜æ–¹Wikiä¸Šçœ‹åˆ°ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚\nä¸‹é¢æ”¾ä¸Šæˆ‘çš„é…ç½®æ–‡ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 { \u0026#34;SteamLogin\u0026#34;: \u0026#34;xxx\u0026#34;, \u0026#34;SteamPassword\u0026#34;: \u0026#34;xxx\u0026#34;, \u0026#34;Enabled\u0026#34;: true, \u0026#34;CustomGamePlayedWhileFarming\u0026#34;: \u0026#34;æŒ‚å¡ä¸­...\u0026#34;, \u0026#34;CustomGamePlayedWhileIdle\u0026#34;: \u0026#34;ç©ºé—²ä¸­...\u0026#34;, \u0026#34;FarmingOrders\u0026#34;: [ 15, 12 ], \u0026#34;HoursUntilCardDrops\u0026#34;: 0, \u0026#34;OnlineStatus\u0026#34;: 1 } CustomGamePlayedWhileFarmingï¼šè¡¨ç¤ºæŒ‚å¡æ—¶æ˜¾ç¤ºçš„æ¸¸æˆå CustomGamePlayedWhileIdleï¼šè¡¨ç¤ºç©ºé—²æ—¶æ˜¾ç¤ºçš„æ¸¸æˆå HoursUntilCardDropsï¼šè¡¨ç¤ºè‡³å°‘å°†æ¸¸æˆæŒ‚åˆ°å‡ å°æ—¶ï¼Œå¦‚æœæ˜¯éé™åˆ¶è´¦æˆ·ï¼Œè°ƒåˆ°0æ˜¯æœ€å¥½çš„ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥é…ç½®ASFæœ¬èº«çš„è®¾ç½®ï¼Œè¿™é‡Œä¹ŸåŒæ ·è´´ä¸Šæˆ‘çš„é…ç½®ï¼š\n1 2 3 4 5 { \u0026#34;s_SteamOwnerID\u0026#34;: \u0026#34;xxx\u0026#34;, \u0026#34;CurrentCulture\u0026#34;: \u0026#34;zh-CN\u0026#34;, \u0026#34;IPCPassword\u0026#34;: \u0026#34;xxx\u0026#34; } s_SteamOwnerIDï¼šè¯¥å±æ€§å®šä¹‰ ASF è¿›ç¨‹æ‰€æœ‰è€…çš„ 64 ä½ Steam IDï¼Œç›´æ¥è®¾ç½®æˆè‡ªå·±çš„å¤§å·å°±è¡Œ CurrentCultureï¼šASFçš„è¯­è¨€ IPCPasswordï¼šç”±äºASFé»˜è®¤ä¼šå¼€å¯IPCæœåŠ¡ï¼Œä¸ºäº†å®‰å…¨èµ·è§å»ºè®®è®¾ç½®å¯†ç æˆ–å…³é—­IPCæœåŠ¡ã€‚ å°†é…ç½®æ–‡ä»¶æ”¾å…¥configç›®å½•é‡Œå°±è¡Œäº†ã€‚\nå¯åŠ¨ASF é¦–å…ˆå°†ASFçš„ä¸»ç¨‹åºè®¾ç½®ä¸ºå¯æ‰§è¡Œï¼š\n1 sudo chmod 755 ./ArchiSteamFarm ç„¶åè¿è¡Œå³å¯ï¼š\n1 ./ArchiSteamFarm é™„åŠ æ­¥éª¤ ä½¿ç”¨ASCF ç”±äºæœåŠ¡å™¨åœ¨å¤§é™†å¢ƒå†…ï¼Œç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› æ˜¯æ— æ³•è®¿é—®steamç¤¾åŒºçš„ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨å¤§ä½¬å¼€å‘çš„è½¬å‘å·¥å…·äº†ã€‚\nã€æ›´æ–°2.0ã€‘å¦ä¸€ä¸ªSteamCommunityFix | æ”¯æŒWin/Linux/MacOS ã€2018-08-29ã€‘\nä¸‹è½½åœ°å€ï¼šhttps://pan.baidu.com/s/1nvBW8qP\nä½¿ç”¨æ­¥éª¤ï¼š\nä¸‹è½½å¹¶è§£å‹ç¼©\næ‰“å¼€ç»ˆç«¯ï¼ˆTerminalï¼‰ï¼Œè¿›å…¥åˆ°ascfç¨‹åºç›®å½•ï¼š å¦‚ascfç¨‹åºåœ¨ /Users/Makazeu/Downloads/æ–‡ä»¶å¤¹ä¸­ï¼Œé‚£ä¹ˆåœ¨ç»ˆç«¯ä¸­è¾“å…¥\n1 cd /Users/Makazeu/Downloads èµ‹äºˆç¨‹åºå¯æ‰§è¡Œæƒé™ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼š\n1 chmod +x ./ascf ä½¿ç”¨rootç”¨æˆ·ï¼ˆç®¡ç†å‘˜ç”¨æˆ·ï¼‰è¿è¡Œç¨‹åºï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥\n1 sudo ./ascf è¾“å…¥rootç”¨æˆ·å¯†ç åï¼Œçœ‹ç¨‹åºæ˜¯å¦è¿è¡Œ å› ä¸ºç¨‹åºæ¶‰åŠåˆ°hostsæ–‡ä»¶ä¿®æ”¹ï¼Œéœ€è¦é«˜æƒé™ï¼Œæ‰€ä»¥ä½ éœ€è¦è¾“å…¥rootå¯†ç \nè‹¥ç¨‹åºå·²ç»æˆåŠŸè¿è¡Œï¼Œæ­¤æ—¶å°±ä¸è¦å…³é—­ç»ˆç«¯çª—å£äº†ï¼Œå¦åˆ™ç¨‹åºå°±ä¼šé€€å‡ºï¼è¯•ä¸‹Steamç¤¾åŒºèƒ½å¦æ­£å¸¸æ‰“å¼€\nä½¿ç”¨Tmux ç”±äºæˆ‘ä»¬åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ï¼Œä¸å¯èƒ½ä¸€ç›´å¼€ç€sshï¼Œè¿™æ—¶å°±éœ€è¦å°†ç»ˆç«¯çª—å£å’Œä¼šè¯è§£ç»‘ï¼ŒTmuxå°±æ˜¯åšè¿™ä¸ªå·¥ä½œçš„ã€‚\nå®‰è£…ï¼š\n1 2 3 4 5 6 7 8 # Ubuntu æˆ– Debian $ sudo apt-get install tmux # CentOS æˆ– Fedora $ sudo yum install tmux # Mac $ brew install tmux å¸¸ç”¨å‘½ä»¤/å¿«æ·é”®ï¼š\næ–°å»ºä¼šè¯ï¼šTmux çª—å£é»˜è®¤æ˜¯ä»¥0ã€1ã€2\u0026hellip;\u0026hellip;æ¥ç¼–å·çš„ï¼Œä¸ºäº†ä¾¿äºåŒºåˆ†ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªä¼šè¯èµ·å\n1 tmux new -s \u0026lt;session-name\u0026gt; åˆ†ç¦»å½“å‰ä¼šè¯ï¼šCtrl+b d\nåˆ—å‡ºæ‰€æœ‰ä¼šè¯ï¼šCtrl+b sæˆ–tmux ls\né‡å‘½åå½“å‰ä¼šè¯ï¼šCtrl+b $æˆ–tmux rename-session -t 0 \u0026lt;new-name\u0026gt;\næ¥å…¥åˆ°æŸä¸ªä¼šè¯ï¼š\n1 2 3 4 5 # ä½¿ç”¨ä¼šè¯ç¼–å· $ tmux attach -t 0 # ä½¿ç”¨ä¼šè¯åç§° $ tmux attach -t \u0026lt;session-name\u0026gt; åˆ‡æ¢åˆ°æŸä¸ªä¼šè¯ï¼š\n1 2 3 4 5 # ä½¿ç”¨ä¼šè¯ç¼–å· $ tmux switch -t 0 # ä½¿ç”¨ä¼šè¯åç§° $ tmux switch -t \u0026lt;session-name\u0026gt; å‚è€ƒé“¾æ¥ Tmux ä½¿ç”¨æ•™ç¨‹ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— ASFå®˜æ–¹Wiki NETå¼€å‘æ–‡æ¡£ ","date":"2021-08-11T21:46:24+08:00","image":"https://lbqaq.top/p/asf/82970659.webp","permalink":"https://lbqaq.top/p/asf/","title":"ä»é›¶å¼€å§‹ASFæŒ‚å¡"},{"content":"èŠ±äº†å››å¤©çš„æ—¶é—´ï¼Œç»ˆäºæŠŠMyBatisçš„è§†é¢‘æ•™ç¨‹å…¨éƒ¨çœ‹å®Œäº†ï¼Œä¸ºäº†ä»¥åä¸è¦é‚£ä¹ˆå¿«çš„é—å¿˜æ‰ï¼Œè¿˜æ˜¯æ¥å†™ä¸€ä¸‹ç¬”è®°æ¯”è¾ƒå¥½ã€‚\nä¸‹é¢çš„å†…å®¹éƒ½æ˜¯åŸºäºé‡è§ç‹‚ç¥è¯´çš„MyBatisè§†é¢‘æ•™ç¨‹è€Œæ¥ï¼Œåœ¨æ­¤æ„Ÿè°¢èƒ½æä¾›è¿™ä¹ˆä¼˜ç§€çš„æ•™ç¨‹ã€‚\nç®€ä»‹ MyBatisçš„ä½œç”¨ç”¨æˆ‘è‡ªå·±çš„è¯è¯´ï¼Œå°±æ˜¯ä¸ç”¨è‡ªå·±æ‰‹åŠ¨æJDBCäº†ï¼Œçœäº‹ï¼Œè¡Œï¼ MyBatisä½œç”¨äºæŒä¹…å±‚â€”â€”DAOå±‚ ã€DAO (Data Access Object) æ•°æ®è®¿é—®å¯¹è±¡ã€‘ï¼Œé€šä¿—ç‚¹è¯´å°±æ˜¯ç”¨æ¥æ“ä½œæ•°æ®åº“çš„å±‚ é€‰æ‹©MyBatisçš„æœ€å¤§åŸå› è¿˜æ˜¯ç”¨çš„äººå¤šï¼Œä¸ºåé¢çš„Springæ‰“åŸºç¡€_(:Ğ·)âˆ )_ ç¬¬ä¸€ä¸ªMyBatisç¨‹åº æ€è·¯æµç¨‹ï¼šæ­å»ºç¯å¢ƒ\u0026ndash;\u0026gt;å¯¼å…¥MyBatis\u0026mdash;\u0026gt;ç¼–å†™ä»£ç \u0026mdash;\u0026gt;æµ‹è¯•\nå…·ä½“ä»£ç  åˆ›å»ºMavené¡¹ç›®\nå¼•å…¥ä¾èµ–åŒ…\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 \u0026lt;!-- å¯¼å…¥ä¾èµ– --\u0026gt; \u0026lt;dependencies\u0026gt; \u0026lt;!-- mysqlé©±åŠ¨ --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;8.0.25\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;runtime\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- mybatis --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.mybatis\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mybatis\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;3.5.7\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- junit --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;junit\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;junit\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.12\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºmybatis-config.xmlï¼Œä½œä¸ºMyBatisçš„é…ç½®æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34; ?\u0026gt; \u0026lt;!DOCTYPE configuration PUBLIC \u0026#34;-//mybatis.org//DTD Config 3.0//EN\u0026#34; \u0026#34;http://mybatis.org/dtd/mybatis-3-config.dtd\u0026#34;\u0026gt; \u0026lt;!--æ ¸å¿ƒé…ç½®æ–‡ä»¶--\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;environments default=\u0026#34;development\u0026#34;\u0026gt; \u0026lt;environment id=\u0026#34;development\u0026#34;\u0026gt; \u0026lt;transactionManager type=\u0026#34;JDBC\u0026#34;/\u0026gt; \u0026lt;dataSource type=\u0026#34;POOLED\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;driver\u0026#34; value=\u0026#34;com.mysql.cj.jdbc.Driver\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;url\u0026#34; value=\u0026#34;jdbc:mysql://localhost:3306/mybatis\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;username\u0026#34; value=\u0026#34;root\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;password\u0026#34; value=\u0026#34;root\u0026#34;/\u0026gt; \u0026lt;/dataSource\u0026gt; \u0026lt;/environment\u0026gt; \u0026lt;/environments\u0026gt; \u0026lt;!--æ¯ä¸€ä¸ªmapperéƒ½éœ€è¦æ³¨å†Œ--\u0026gt; \u0026lt;mappers\u0026gt; \u0026lt;mapper resource=\u0026#34;UserMapper.xml\u0026#34;/\u0026gt; \u0026lt;/mappers\u0026gt; \u0026lt;/configuration\u0026gt; ç¼–å†™MyBatiså·¥å…·ç±»ï¼Œåœ¨utilsçš„åŒ…ä¸‹é¢åˆ›å»ºMybatisUtilsç±»ï¼Œå¡«å…¥ä»¥ä¸‹ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 import org.apache.ibatis.io.Resources; import org.apache.ibatis.session.SqlSession; import org.apache.ibatis.session.SqlSessionFactory; import org.apache.ibatis.session.SqlSessionFactoryBuilder; import java.io.IOException; import java.io.InputStream; //SqlSessionFactory /** * @author luoboQAQ */ public class MybatisUtils { private static SqlSessionFactory sqlSessionFactory; static { try { //ä½¿ç”¨Mybatisç¬¬ä¸€æ­¥ï¼šè·å–SqlSessionFactory String resource = \u0026#34;mybatis-config.xml\u0026#34;; InputStream inputStream = Resources.getResourceAsStream(resource); sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); } catch (IOException e) { e.printStackTrace(); } } //æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚ //SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚ public static SqlSession getSqlSession(){ return sqlSessionFactory.openSession(); } } åœ¨pojoåŒ…ä¸‹åˆ›å»ºå®ä½“ç±»\n1 2 3 4 5 6 7 8 9 public class User { private int id; //id private String name; //å§“å private String pwd; //å¯†ç  //æ„é€ ,æœ‰å‚,æ— å‚ //set/get //toString() } åœ¨daoåŒ…ä¸‹åˆ›å»ºæ¥å£ç±»ï¼Œæˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½å°±å¡«å…¥åˆ°è¿™é‡Œé¢\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 import top.lbqaq.pojo.User; import java.util.List; import java.util.Map; public interface UserMapper { //æ¨¡ç³ŠæŸ¥è¯¢ List\u0026lt;User\u0026gt; getUserLike(String value); //æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ· List\u0026lt;User\u0026gt; getUserList(); //æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ· User getUserById(int id); //æ’å…¥ç”¨æˆ· int addUser(User user); int addUser2(Map\u0026lt;String,Object\u0026gt; map); //ä¿®æ”¹ç”¨æˆ· int updateUser(User user); //åˆ é™¤ç”¨æˆ· int deleteUser(int id); } ç¼–å†™Mapper.xmlé…ç½®æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34; ?\u0026gt; \u0026lt;!DOCTYPE mapper PUBLIC \u0026#34;-//mybatis.org//DTD Mapper 3.0//EN\u0026#34; \u0026#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd\u0026#34;\u0026gt; \u0026lt;!--namespaceç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperæ¥å£--\u0026gt; \u0026lt;mapper namespace=\u0026#34;top.lbqaq.dao.UserMapper\u0026#34;\u0026gt; \u0026lt;!--idå°±æ˜¯namespaceä¸­å¯¹åº”çš„æ–¹æ³•åï¼ŒresultTypeï¼šsqlè¯­å¥çš„è¿”å›å€¼--\u0026gt; \u0026lt;select id=\u0026#34;getUserList\u0026#34; resultType=\u0026#34;top.lbqaq.pojo.User\u0026#34;\u0026gt; select * from user \u0026lt;/select\u0026gt; \u0026lt;select id=\u0026#34;getUserLike\u0026#34; resultType=\u0026#34;top.lbqaq.pojo.User\u0026#34;\u0026gt; select * from user where name like #{value} \u0026lt;/select\u0026gt; \u0026lt;!--parameterTypeï¼šä¼ å…¥å‚æ•°ç±»å‹--\u0026gt; \u0026lt;select id=\u0026#34;getUserById\u0026#34; parameterType=\u0026#34;int\u0026#34; resultType=\u0026#34;top.lbqaq.pojo.User\u0026#34;\u0026gt; select * from user where id=#{id} \u0026lt;/select\u0026gt; \u0026lt;insert id=\u0026#34;addUser\u0026#34; parameterType=\u0026#34;top.lbqaq.pojo.User\u0026#34;\u0026gt; insert into user (id,name,pwd) values (#{id},#{name},#{pwd}) \u0026lt;/insert\u0026gt; \u0026lt;!--ä¼ é€’mapçš„key--\u0026gt; \u0026lt;insert id=\u0026#34;addUser2\u0026#34; parameterType=\u0026#34;map\u0026#34;\u0026gt; insert into user (id,name,pwd) values (#{userid},#{userName},#{passWord}) \u0026lt;/insert\u0026gt; \u0026lt;update id=\u0026#34;updateUser\u0026#34; parameterType=\u0026#34;top.lbqaq.pojo.User\u0026#34;\u0026gt; update user set name =#{name},pwd=#{pwd} where id=#{id} \u0026lt;/update\u0026gt; \u0026lt;delete id=\u0026#34;deleteUser\u0026#34; parameterType=\u0026#34;int\u0026#34;\u0026gt; delete from user where id=#{id} \u0026lt;/delete\u0026gt; \u0026lt;/mapper\u0026gt; è¿›è¡Œæµ‹è¯•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 import org.apache.ibatis.session.SqlSession; import org.junit.Test; import top.lbqaq.pojo.User; import top.lbqaq.utils.MybatisUtils; import java.util.HashMap; import java.util.List; public class UserMapperTest { @Test public void test() { //è·å¾—sqlSessionå¯¹è±¡ try (SqlSession sqlSession = MybatisUtils.getSqlSession()) { //æ‰§è¡ŒSQL UserMapper mapper = sqlSession.getMapper(UserMapper.class); List\u0026lt;User\u0026gt; userList = mapper.getUserList(); for (User user : userList) { System.out.println(user); } } } @Test public void getUserLike() { //è·å¾—sqlSessionå¯¹è±¡ try (SqlSession sqlSession = MybatisUtils.getSqlSession()) { //æ‰§è¡ŒSQL UserMapper mapper = sqlSession.getMapper(UserMapper.class); List\u0026lt;User\u0026gt; userList = mapper.getUserLike(\u0026#34;%æ%\u0026#34;); for (User user : userList) { System.out.println(user); } } } @Test public void getUserById() { SqlSession sqlSession = MybatisUtils.getSqlSession(); UserMapper mapper = sqlSession.getMapper(UserMapper.class); User user = mapper.getUserById(1); System.out.println(user); sqlSession.close(); } @Test public void addUser(){ SqlSession sqlSession = MybatisUtils.getSqlSession(); UserMapper mapper = sqlSession.getMapper(UserMapper.class); int res = mapper.addUser(new User(4, \u0026#34;å°æ˜\u0026#34;, \u0026#34;123\u0026#34;)); if(res\u0026gt;0){ System.out.println(\u0026#34;æäº¤æˆåŠŸ\u0026#34;); //æäº¤äº‹åŠ¡ sqlSession.commit(); } sqlSession.close(); } @Test public void addUser2(){ SqlSession sqlSession = MybatisUtils.getSqlSession(); UserMapper mapper = sqlSession.getMapper(UserMapper.class); HashMap\u0026lt;String,Object\u0026gt; map= new HashMap\u0026lt;\u0026gt;(); map.put(\u0026#34;userid\u0026#34;,5); map.put(\u0026#34;userName\u0026#34;,\u0026#34;å°ç»¿\u0026#34;); map.put(\u0026#34;passWord\u0026#34;,\u0026#34;1234\u0026#34;); int res = mapper.addUser2(map); if(res\u0026gt;0){ System.out.println(\u0026#34;æäº¤æˆåŠŸ\u0026#34;); //æäº¤äº‹åŠ¡ sqlSession.commit(); } sqlSession.close(); } @Test public void updateUser(){ SqlSession sqlSession = MybatisUtils.getSqlSession(); UserMapper mapper = sqlSession.getMapper(UserMapper.class); int res = mapper.updateUser(new User(4, \u0026#34;å°æ˜\u0026#34;, \u0026#34;123456\u0026#34;)); if(res\u0026gt;0){ System.out.println(\u0026#34;æäº¤æˆåŠŸ\u0026#34;); //æäº¤äº‹åŠ¡ sqlSession.commit(); } sqlSession.close(); } @Test public void deleteUser(){ SqlSession sqlSession = MybatisUtils.getSqlSession(); UserMapper mapper = sqlSession.getMapper(UserMapper.class); int res = mapper.deleteUser(4); if(res\u0026gt;0){ System.out.println(\u0026#34;æäº¤æˆåŠŸ\u0026#34;); //æäº¤äº‹åŠ¡ sqlSession.commit(); } sqlSession.close(); } } æ³¨æ„äº‹é¡¹ å¦‚æœMapper.xmlåˆ›å»ºåœ¨javaç›®å½•é‡Œè€Œä¸æ˜¯resoucesé‡Œï¼Œéœ€è¦åœ¨Mavené…ç½®é‡Œé…ç½®è¿‡æ»¤ï¼Œå¦åˆ™ä¼šä¿é”™\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 \u0026lt;resources\u0026gt; \u0026lt;resource\u0026gt; \u0026lt;directory\u0026gt;src/main/java\u0026lt;/directory\u0026gt; \u0026lt;includes\u0026gt; \u0026lt;include\u0026gt;**/*.properties\u0026lt;/include\u0026gt; \u0026lt;include\u0026gt;**/*.xml\u0026lt;/include\u0026gt; \u0026lt;/includes\u0026gt; \u0026lt;filtering\u0026gt;false\u0026lt;/filtering\u0026gt; \u0026lt;/resource\u0026gt; \u0026lt;resource\u0026gt; \u0026lt;directory\u0026gt;src/main/resources\u0026lt;/directory\u0026gt; \u0026lt;includes\u0026gt; \u0026lt;include\u0026gt;**/*.properties\u0026lt;/include\u0026gt; \u0026lt;include\u0026gt;**/*.xml\u0026lt;/include\u0026gt; \u0026lt;/includes\u0026gt; \u0026lt;filtering\u0026gt;false\u0026lt;/filtering\u0026gt; \u0026lt;/resource\u0026gt; \u0026lt;/resources\u0026gt; å½“éœ€è¦ä¼ å…¥å‚æ•°è¿›è¡ŒæŸ¥è¯¢è€Œä¸æ˜¯ä¼ å…¥å®ä½“ç±»ï¼Œæœ‰ä¸¤ç§æ–¹æ³•\nç¬¬ä¸€ç§ï¼šç›´æ¥åœ¨æ–¹æ³•ä¸­ä¼ é€’å‚æ•°ã€‚\nåœ¨æ¥å£æ–¹æ³•çš„å‚æ•°å‰åŠ @Paramå±æ€§ï¼Œsqlè¯­å¥ç¼–å†™çš„æ—¶å€™ï¼Œç›´æ¥å–@Paramä¸­è®¾ç½®çš„å€¼å³å¯ï¼Œä¸éœ€è¦å•ç‹¬è®¾ç½®å‚æ•°ç±»å‹\n1 2 3 4 5 6 7 User selectUserByNP(@Param(\u0026#34;username\u0026#34;) String username,@Param(\u0026#34;pwd\u0026#34;) String pwd); /* \u0026lt;select id=\u0026#34;selectUserByNP\u0026#34; resultType=\u0026#34;top.lbqaq.pojo.User\u0026#34;\u0026gt; select * from user where name = #{username} and pwd = #{pwd} \u0026lt;/select\u0026gt; */ ç¬¬äºŒç§ï¼šé€šè¿‡mapæ¥ä¼ é€’å‚æ•°ã€‚ï¼ˆæ¨èï¼‰\nåœ¨æ¥å£åˆ›å»ºæ—¶å°±ç›´æ¥ä½¿ç”¨mapä½œä¸ºå‚æ•°\n1 int addUser2(Map\u0026lt;String,Object\u0026gt; map); åœ¨å†™sqlæ—¶ç›´æ¥è®¾ç½®å…¥å‚ä¸ºmapå³å¯\n1 2 3 4 \u0026lt;!--ä¼ é€’mapçš„key--\u0026gt; \u0026lt;insert id=\u0026#34;addUser2\u0026#34; parameterType=\u0026#34;map\u0026#34;\u0026gt; insert into user (id,name,pwd) values (#{userid},#{userName},#{passWord}) \u0026lt;/insert\u0026gt; é…ç½®è§£æ å®˜æ–¹æ–‡æ¡£\næ ¸å¿ƒé…ç½® MyBatiså®˜æ–¹ç»™å‡ºçš„é…ç½®é¡¹æœ‰ä»¥ä¸‹è¿™ä¹ˆå¤šï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 configurationï¼ˆé…ç½®ï¼‰ propertiesï¼ˆå±æ€§ï¼‰ settingsï¼ˆè®¾ç½®ï¼‰ typeAliasesï¼ˆç±»å‹åˆ«åï¼‰ typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰ objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰ pluginsï¼ˆæ’ä»¶ï¼‰ environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰ environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰ transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰ dataSourceï¼ˆæ•°æ®æºï¼‰ databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰ mappersï¼ˆæ˜ å°„å™¨ï¼‰ \u0026lt;!-- æ³¨æ„å…ƒç´ èŠ‚ç‚¹çš„é¡ºåºï¼é¡ºåºä¸å¯¹ä¼šæŠ¥é”™ --\u0026gt; æˆ‘ä»¬éœ€è¦å…³æ³¨çš„å°±æ˜¯propertiesï¼ˆå±æ€§ï¼‰ã€settingsï¼ˆè®¾ç½®ï¼‰ã€typeAliasesï¼ˆç±»å‹åˆ«åï¼‰ã€pluginsï¼ˆæ’ä»¶ï¼‰ã€environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰ã€mappersï¼ˆæ˜ å°„å™¨ï¼‰è¿™å‡ é¡¹é…ç½®ï¼Œå…¶ä½™çš„å¯ä»¥å¿½ç•¥ï¼ˆåŸºæœ¬ç”¨ä¸åˆ°ï¼‰\nproperties æ•°æ®åº“è¿™äº›å±æ€§éƒ½æ˜¯å¯å¤–éƒ¨é…ç½®ä¸”å¯åŠ¨æ€æ›¿æ¢çš„ï¼Œæ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®ï¼Œäº¦å¯é€šè¿‡ properties å…ƒç´ çš„å­å…ƒç´ æ¥ä¼ é€’ã€‚\nè¯´ç™½äº†ï¼Œå°±æ˜¯èƒ½å°†æ•°æ®åº“é‚£äº›é…ç½®é¡¹ä»æ ¸å¿ƒé…ç½®ä¸­å‰¥ç¦»å‡ºæ¥ï¼Œé™ä½è€¦åˆã€‚\nç”¨æ³• åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºdb.propertiesï¼Œå¡«å…¥ä¸‹é¢çš„å†…å®¹\n1 2 3 4 driver=com.mysql.cj.jdbc.Driver url=jdbc:mysql://localhost:3306/mybatis username=root password=root åœ¨é…ç½®xmlä¸­å¯¼å…¥\n1 2 3 4 5 6 \u0026lt;!--å¼•ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶--\u0026gt; \u0026lt;properties resource=\u0026#34;db.properties\u0026#34;\u0026gt; \u0026lt;!--å¤–éƒ¨æ–‡ä»¶ä¼˜å…ˆçº§å¤§äºå†…éƒ¨ï¼ˆä¸‹é¢ï¼‰--\u0026gt; \u0026lt;property name=\u0026#34;username\u0026#34; value=\u0026#34;root\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;password\u0026#34; value=\u0026#34;123\u0026#34;/\u0026gt; \u0026lt;/properties\u0026gt; æ­£å¸¸æƒ…å†µä¸‹ï¼Œåªéœ€è¦ç”¨\u0026lt;properties resource=\u0026quot;db.properties\u0026quot;/\u0026gt;è¿™çŸ­çŸ­ä¸€å¥å°±è¡Œäº†ï¼Œä¸Šé¢çš„ä»£ç æ˜¯ç”¨æ¥æµ‹è¯•ä¼˜å…ˆçº§çš„\nsettings è¿™é‡Œå­˜æ”¾çš„æ˜¯MyBatisçš„ä¸€äº›è®¾ç½®é¡¹ï¼Œå…·ä½“çš„å†…å®¹åœ¨å®˜æ–¹æ–‡æ¡£ä¸Šå¯ä»¥æŸ¥çœ‹\nå¸¸ç”¨çš„è®¾ç½®é¡¹æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š\nè®¾ç½®å æè¿° æœ‰æ•ˆå€¼ é»˜è®¤å€¼ cacheEnabled å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚ true | false true mapUnderscoreToCamelCase æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—åA_COLUMN æ˜ å°„åˆ°ç»å…¸ Java å±æ€§å aColumnã€‚ true | false False logImpl æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚ SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING æœªè®¾ç½® typeAliases ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ã€‚å®ƒåªå’Œ XML é…ç½®æœ‰å…³ï¼Œå­˜åœ¨çš„æ„ä¹‰ä»…åœ¨äºç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å†—ä½™ã€‚\nä¹Ÿå°±æ˜¯åœ¨resultTypeå’ŒparameterTypeä¸­ä¸éœ€è¦å†™é‚£ä¹ˆé•¿çš„ç±»åäº†\nç”¨æ³• 1 2 3 4 5 6 7 \u0026lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--\u0026gt; \u0026lt;typeAliases\u0026gt; \u0026lt;!--æ‰‹åŠ¨æŒ‡å®š--\u0026gt; \u0026lt;typeAlias type=\u0026#34;top.lbqaq.pojo.User\u0026#34; alias=\u0026#34;User\u0026#34;/\u0026gt; \u0026lt;!--è‡ªåŠ¨æ‰«æåŒ…ä¸‹æ‰€æœ‰ç±»ï¼Œåˆ«åä¸ºç±»åå…¨å°å†™--\u0026gt; \u0026lt;package name=\u0026#34;top.lbqaq.pojo\u0026#34;/\u0026gt; \u0026lt;/typeAliases\u0026gt; æœ‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§å°±æ˜¯æ‰‹åŠ¨æŒ‡å®šåˆ«åï¼Œç¬¬äºŒç§å°±æ˜¯é€šè¿‡packageæ ‡ç­¾è‡ªåŠ¨æ‰«æåŒ…ä¸‹æ‰€æœ‰çš„ç±»\nåœ¨ç¬¬äºŒç§æ–¹æ³•ä¸‹ï¼Œé»˜è®¤åˆ«åæ˜¯ç±»åå…¨å°å†™ï¼ˆå½“ç„¶é¦–å­—æ¯å¤§å†™ä¹ŸåŒæ ·å¯ç”¨ï¼‰\nå¦‚æœåœ¨ç±»å‰åŠ ä¸Š@Aliasæ³¨è§£ï¼Œåˆ™åˆ«åå°±ä¸ºæ‰‹åŠ¨è®¾å®šçš„å†…å®¹ã€‚\nplugins è¿™é‡Œæ˜¯é…ç½®mybatisçš„æ’ä»¶çš„åœ°æ–¹ï¼Œå¸¸ç”¨çš„æ’ä»¶æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š\nPageHelper MyBatis-Plus \u0026hellip; \u0026hellip; è¿™é‡Œæ˜¯å°±ä¸å±•å¼€è¿™äº›æ’ä»¶äº†ï¼Œä»¥åæœ‰éœ€è¦å†çœ‹\nenvironments é…ç½®MyBatisçš„å¤šå¥—è¿è¡Œç¯å¢ƒï¼Œå°†SQLæ˜ å°„åˆ°å¤šä¸ªä¸åŒçš„æ•°æ®åº“ä¸Šï¼Œå¿…é¡»æŒ‡å®šå…¶ä¸­ä¸€ä¸ªä¸ºé»˜è®¤è¿è¡Œç¯å¢ƒï¼ˆé€šè¿‡defaultæŒ‡å®šï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 \u0026lt;environments default=\u0026#34;development\u0026#34;\u0026gt; \u0026lt;environment id=\u0026#34;development\u0026#34;\u0026gt; \u0026lt;transactionManager type=\u0026#34;JDBC\u0026#34;/\u0026gt; \u0026lt;dataSource type=\u0026#34;POOLED\u0026#34;\u0026gt; \u0026lt;property name=\u0026#34;driver\u0026#34; value=\u0026#34;${driver}\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;url\u0026#34; value=\u0026#34;${url}\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;username\u0026#34; value=\u0026#34;${username}\u0026#34;/\u0026gt; \u0026lt;property name=\u0026#34;password\u0026#34; value=\u0026#34;${password}\u0026#34;/\u0026gt; \u0026lt;/dataSource\u0026gt; \u0026lt;/environment\u0026gt; \u0026lt;/environments\u0026gt; transactionManagerï¼š äº‹åŠ¡ç®¡ç†å™¨ ã€‚æœ‰ä¸¤ä¸ªé€‰é¡¹ï¼š JDBCï¼šæ­£å¸¸çš„ MANAGEDï¼šå‡ ä¹å•¥éƒ½ä¸å¹² dataSourceï¼šå¦‚ä½•ä½¿ç”¨æ ‡å‡†çš„ JDBC æ•°æ®æºæ¥å£æ¥é…ç½® JDBC è¿æ¥å¯¹è±¡çš„èµ„æºã€‚æœ‰ä¸‰ä¸ªé€‰é¡¹ï¼š unpooledï¼šè¿™ä¸ªæ•°æ®æºçš„å®ç°åªæ˜¯æ¯æ¬¡è¢«è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚ pooledï¼šè¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ , è¿™æ˜¯ä¸€ç§ä½¿å¾—å¹¶å‘ Web åº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚çš„æµè¡Œå¤„ç†æ–¹å¼ã€‚ jndiï¼šè¿™ä¸ªæ•°æ®æºçš„å®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚ Spring æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æºï¼Œç„¶åæ”¾ç½®ä¸€ä¸ª JNDI ä¸Šä¸‹æ–‡çš„å¼•ç”¨ã€‚ mappers ç”¨äºå‘Šè¯‰MyBatisæˆ‘ä»¬å†™çš„xmlæ–‡ä»¶åˆ°åº•åœ¨å“ªï¼Œæ¯ä¸ªxmlæ–‡ä»¶éƒ½éœ€è¦ç»‘å®šï¼\nå¸¸ç”¨çš„æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š\n1 2 3 4 \u0026lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --\u0026gt; \u0026lt;mappers\u0026gt; \u0026lt;mapper resource=\u0026#34;top/lbqaq/dao/UserMapper.xml\u0026#34;/\u0026gt; \u0026lt;/mappers\u0026gt; 1 2 3 4 5 6 7 \u0026lt;!-- ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹ --\u0026gt; \u0026lt;mappers\u0026gt; \u0026lt;mapper class=\u0026#34;top.lbqaq.dao.UserMapper\u0026#34;/\u0026gt; \u0026lt;/mappers\u0026gt; 1 2 3 4 5 6 7 \u0026lt;!-- å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ ä½†æ˜¯éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹ --\u0026gt; \u0026lt;mappers\u0026gt; \u0026lt;package name=\u0026#34;org.mybatis.builder\u0026#34;/\u0026gt; \u0026lt;/mappers\u0026gt; ResultMap å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´ åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¼šé‡åˆ°ç±»çš„å±æ€§åå’Œæ•°æ®åº“çš„å­—æ®µåä¸ä¸€è‡´ï¼Œè¿™æ—¶MyBatisçš„è‡ªåŠ¨åŒ¹é…å°†æ— æ³•äº§ç”Ÿä½œç”¨ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ResultMapæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;mapper namespace=\u0026#34;top.lbqaq.dao.UserMapper\u0026#34;\u0026gt; \u0026lt;!--ç»“æœé›†æ˜ å°„--\u0026gt; \u0026lt;resultMap id=\u0026#34;UserMap\u0026#34; type=\u0026#34;User\u0026#34;\u0026gt; \u0026lt;!--column:æ•°æ®åº“ä¸­çš„å­—æ®µï¼›propertyï¼šå®ä½“ç±»çš„å±æ€§--\u0026gt; \u0026lt;!-- \u0026lt;result column=\u0026#34;id\u0026#34; property=\u0026#34;id\u0026#34;/\u0026gt;--\u0026gt; \u0026lt;!-- \u0026lt;result column=\u0026#34;name\u0026#34; property=\u0026#34;name\u0026#34;/\u0026gt;--\u0026gt; \u0026lt;result column=\u0026#34;pwd\u0026#34; property=\u0026#34;password\u0026#34;/\u0026gt; \u0026lt;/resultMap\u0026gt; \u0026lt;select id=\u0026#34;getUserById\u0026#34; parameterType=\u0026#34;int\u0026#34; resultMap=\u0026#34;UserMap\u0026#34;\u0026gt; select * from user where id=#{id} \u0026lt;/select\u0026gt; \u0026lt;/mapper\u0026gt; å¤šå¯¹ä¸€ åœ¨å¼€å‘æ—¶å¸¸å¸¸ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œæ¯”å¦‚å¤šä¸ªå­¦ç”Ÿéƒ½è¢«ä¸€ä¸ªè€å¸ˆæ•™ï¼Œä¸‹é¢å°†å¯¹è¯¥å®ä¾‹å…·ä½“å±•å¼€æ¥äº†è§£å¤šå¯¹ä¸€å¦‚ä½•å¤„ç†ã€‚\nç¯å¢ƒæ­å»º æ·»åŠ Lombokæ’ä»¶\nå¼•å…¥Mavenä¾èµ–\n1 2 3 4 5 6 7 8 9 \u0026lt;dependencies\u0026gt; \u0026lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.18.20\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;provided\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt; ç¼–å†™å®ä½“ç±»\n1 2 3 4 5 6 7 8 9 10 @Data public class Student { private int id; private String name; /** * å­¦ç”Ÿéœ€è¦å…³è”ä¸€ä¸ªè€å¸ˆ */ private Teacher teacher; } 1 2 3 4 5 @Data public class Teacher { private int id; private String name; } æŒ‰æŸ¥è¯¢åµŒå¥—å¤„ç† æ€è·¯ï¼š\nè·å–æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯\næ ¹æ®è·å–çš„å­¦ç”Ÿä¿¡æ¯çš„è€å¸ˆID-\u0026gt;è·å–è¯¥è€å¸ˆçš„ä¿¡æ¯\næ€è€ƒé—®é¢˜ï¼Œè¿™æ ·å­¦ç”Ÿçš„ç»“æœé›†ä¸­åº”è¯¥åŒ…å«è€å¸ˆï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Œæ•°æ®åº“ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨å…³è”æŸ¥è¯¢ï¼Ÿ\nåšä¸€ä¸ªç»“æœé›†æ˜ å°„ï¼šStudentTeacher StudentTeacherç»“æœé›†çš„ç±»å‹ä¸º Student å­¦ç”Ÿä¸­è€å¸ˆçš„å±æ€§ä¸ºteacherï¼Œå¯¹åº”æ•°æ®åº“ä¸­ä¸ºtidã€‚ å¤šä¸ª [1,\u0026hellip;ï¼‰å­¦ç”Ÿå…³è”ä¸€ä¸ªè€å¸ˆ=\u0026gt; ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š æŸ¥çœ‹å®˜ç½‘æ‰¾åˆ°ï¼šassociation â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”ï¼›ä½¿ç”¨å®ƒæ¥å¤„ç†å…³è”æŸ¥è¯¢ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 \u0026lt;select id=\u0026#34;getStudent\u0026#34; resultMap=\u0026#34;StudentTeacher\u0026#34;\u0026gt; select * from student \u0026lt;/select\u0026gt; \u0026lt;resultMap id=\u0026#34;StudentTeacher\u0026#34; type=\u0026#34;Student\u0026#34;\u0026gt; \u0026lt;result column=\u0026#34;id\u0026#34; property=\u0026#34;id\u0026#34;/\u0026gt; \u0026lt;result column=\u0026#34;name\u0026#34; property=\u0026#34;name\u0026#34;/\u0026gt; \u0026lt;!--å¤æ‚çš„å±æ€§éœ€è¦å•ç‹¬å¤„ç† å¯¹è±¡ï¼šassociation é›†åˆï¼šcollection--\u0026gt; \u0026lt;association column=\u0026#34;tid\u0026#34; property=\u0026#34;teacher\u0026#34; javaType=\u0026#34;Teacher\u0026#34; select=\u0026#34;getTeacher\u0026#34;/\u0026gt; \u0026lt;/resultMap\u0026gt; \u0026lt;select id=\u0026#34;getTeacher\u0026#34; resultType=\u0026#34;Teacher\u0026#34;\u0026gt; select * from teacher where id=#{tid} \u0026lt;/select\u0026gt; æ³¨æ„ç‚¹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 \u0026lt;resultMap id=\u0026#34;StudentTeacher\u0026#34; type=\u0026#34;Student\u0026#34;\u0026gt; \u0026lt;!--associationå…³è”å±æ€§ propertyå±æ€§å javaTypeå±æ€§ç±»å‹ columnåœ¨å¤šçš„ä¸€æ–¹çš„è¡¨ä¸­çš„åˆ—å--\u0026gt; \u0026lt;association property=\u0026#34;teacher\u0026#34; column=\u0026#34;{id=tid,name=tid}\u0026#34; javaType=\u0026#34;Teacher\u0026#34; select=\u0026#34;getTeacher\u0026#34;/\u0026gt; \u0026lt;/resultMap\u0026gt; \u0026lt;!-- è¿™é‡Œä¼ é€’è¿‡æ¥çš„idï¼Œåªæœ‰ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¸‹é¢å¯ä»¥å†™ä»»ä½•å€¼ associationä¸­columnå¤šå‚æ•°é…ç½®ï¼š column=\u0026#34;{key=value,key=value}\u0026#34; å…¶å®å°±æ˜¯é”®å€¼å¯¹çš„å½¢å¼ï¼Œkeyæ˜¯ä¼ ç»™ä¸‹ä¸ªsqlçš„å–å€¼åç§°ï¼Œvalueæ˜¯ç‰‡æ®µä¸€ä¸­sqlæŸ¥è¯¢çš„å­—æ®µåã€‚ --\u0026gt; \u0026lt;select id=\u0026#34;getTeacher\u0026#34; resultType=\u0026#34;teacher\u0026#34;\u0026gt; select * from teacher where id = #{id} and name = #{name} \u0026lt;/select\u0026gt; è¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒéš¾ä»¥ç†è§£çš„ï¼Œä¸€èˆ¬æˆ‘é€‰æ‹©ç”¨ç¬¬äºŒç§æ–¹æ³•\næŒ‰ç»“æœåµŒå¥—å¤„ç† 1 2 3 4 5 6 7 8 9 10 11 12 13 14 \u0026lt;!--æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†--\u0026gt; \u0026lt;select id=\u0026#34;getStudent2\u0026#34; resultMap=\u0026#34;StudentTeacher2\u0026#34;\u0026gt; select s.id sid,s.name sname,t.name tname from student s,teacher t where s.tid=t.id \u0026lt;/select\u0026gt; \u0026lt;resultMap id=\u0026#34;StudentTeacher2\u0026#34; type=\u0026#34;Student\u0026#34;\u0026gt; \u0026lt;result column=\u0026#34;sid\u0026#34; property=\u0026#34;id\u0026#34;/\u0026gt; \u0026lt;result column=\u0026#34;sname\u0026#34; property=\u0026#34;name\u0026#34;/\u0026gt; \u0026lt;association property=\u0026#34;teacher\u0026#34; javaType=\u0026#34;Teacher\u0026#34;\u0026gt; \u0026lt;result column=\u0026#34;tname\u0026#34; property=\u0026#34;name\u0026#34;/\u0026gt; \u0026lt;/association\u0026gt; \u0026lt;/resultMap\u0026gt; è¿™ç§å°±æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œéš¾åº¦ä¸»è¦åœ¨sqléƒ¨åˆ†ï¼Œå¥½åœ¨ä¹‹å‰æ•°æ®åº“å­¦çš„è¿˜è¡Œï¼Œè¿™ç§æ–¹æ³•è¿˜æ˜¯æ¯”è¾ƒé€‚åˆæˆ‘ã€‚\nä¸€å¯¹å¤š ä¸€ä¸ªè€å¸ˆä¼šæ•™å¤šä¸ªå­¦ç”Ÿã€‚\nç¯å¢ƒæ­å»º 1 2 3 4 5 6 @Data public class Student { private int id; private String name; private int tid; } 1 2 3 4 5 6 7 8 9 10 @Data public class Teacher { private int id; private String name; /** * ä¸€ä¸ªè€å¸ˆæœ‰å¤šä¸ªå­¦ç”Ÿ */ private List\u0026lt;Student\u0026gt; students; } æŒ‰ç»“æœåµŒå¥—æŸ¥è¯¢ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \u0026lt;!--æŒ‰ç»“æœåµŒå¥—æŸ¥è¯¢--\u0026gt; \u0026lt;select id=\u0026#34;getTeacher\u0026#34; resultMap=\u0026#34;TeacherStudent\u0026#34;\u0026gt; select s.id sid,s.name sname,t.name tname,t.id tid from student s,teacher t where s.tid=t.id and t.id=#{tid} \u0026lt;/select\u0026gt; \u0026lt;resultMap id=\u0026#34;TeacherStudent\u0026#34; type=\u0026#34;Teacher\u0026#34;\u0026gt; \u0026lt;result column=\u0026#34;tid\u0026#34; property=\u0026#34;id\u0026#34;/\u0026gt; \u0026lt;result column=\u0026#34;tname\u0026#34; property=\u0026#34;name\u0026#34;/\u0026gt; \u0026lt;!--é›†åˆä¸­çš„æ³›å‹ä¿¡æ¯ç”¨ofTypeè·å–--\u0026gt; \u0026lt;collection property=\u0026#34;students\u0026#34; ofType=\u0026#34;Student\u0026#34;\u0026gt; \u0026lt;result column=\u0026#34;sid\u0026#34; property=\u0026#34;id\u0026#34;/\u0026gt; \u0026lt;result column=\u0026#34;sname\u0026#34; property=\u0026#34;name\u0026#34;/\u0026gt; \u0026lt;result column=\u0026#34;tid\u0026#34; property=\u0026#34;tid\u0026#34;/\u0026gt; \u0026lt;/collection\u0026gt; \u0026lt;/resultMap\u0026gt; JavaTypeå’ŒofTypeéƒ½æ˜¯ç”¨æ¥æŒ‡å®šå¯¹è±¡ç±»å‹çš„ã€‚\nJavaTypeæ˜¯ç”¨æ¥æŒ‡å®špojoä¸­å±æ€§çš„ç±»å‹ã€‚\nofTypeæŒ‡å®šçš„æ˜¯æ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ã€‚\næŒ‰æŸ¥è¯¢åµŒå¥— 1 2 3 4 5 6 7 8 9 10 11 \u0026lt;!--æŒ‰æŸ¥è¯¢åµŒå¥—--\u0026gt; \u0026lt;select id=\u0026#34;getTeacher2\u0026#34; resultMap=\u0026#34;TeacherStudent2\u0026#34;\u0026gt; select * from teacher where id=#{tid} \u0026lt;/select\u0026gt; \u0026lt;resultMap id=\u0026#34;TeacherStudent2\u0026#34; type=\u0026#34;Teacher\u0026#34;\u0026gt; \u0026lt;collection property=\u0026#34;students\u0026#34; javaType=\u0026#34;ArrayList\u0026#34; ofType=\u0026#34;Student\u0026#34; select=\u0026#34;getStudentByTeacherId\u0026#34; column=\u0026#34;id\u0026#34;/\u0026gt; \u0026lt;/resultMap\u0026gt; \u0026lt;select id=\u0026#34;getStudentByTeacherId\u0026#34; resultType=\u0026#34;Student\u0026#34;\u0026gt; select * from student where tid = #{tid} \u0026lt;/select\u0026gt; æ—¥å¿—å·¥å‚ å¦‚æœä¸€ä¸ªæ•°æ®åº“ç›¸å…³çš„æ“ä½œå‡ºç°äº†é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¾“å‡ºçš„SQLè¯­å¥å¿«é€Ÿæ’æŸ¥é—®é¢˜ã€‚å¯è§æ‰“å°å‡ºSQLè¯­å¥æ˜¯ååˆ†é‡è¦çš„ã€‚ï¼ˆè¿˜è®°å¾—ä¹‹å‰é¡¹ç›®ç»¼åˆå®è·µä¸ºäº†ææ—¥å¿—å¿™äº†åŠå¤©ï¼Œç»“æœè¿˜æ˜¯æ²¡æå‡ºæ¥ğŸ˜­ï¼‰\næ ‡å‡†æ—¥å¿— åœ¨MyBatisé‡Œè‡ªå¸¦äº†é€šè¿‡æ§åˆ¶å°æ‰“å°çš„æ—¥å¿—åŠŸèƒ½ï¼Œå¦‚æœé¡¹ç›®å¹¶ä¸æ˜¯å¾ˆå¤æ‚ï¼Œç”¨å®ƒå°±è¶³å¤Ÿäº†ã€‚\nåªéœ€è¦åœ¨è®¾ç½®é‡Œè®¾ç½®å¯ç”¨å°±å¯ä»¥äº†ã€‚\n1 2 3 \u0026lt;settings\u0026gt; \u0026lt;setting name=\u0026#34;logImpl\u0026#34; value=\u0026#34;STDOUT_LOGGING\u0026#34;/\u0026gt; \u0026lt;/settings\u0026gt; log4j log4jç›¸æ¯”æ ‡å‡†æ—¥å¿—ï¼Œé‚£ä¸çŸ¥é“é«˜åˆ°å“ªé‡Œå»äº†ï¼Œå…·ä½“çš„åŠŸèƒ½æˆ‘å°±ä¸å†™äº†ï¼Œæ¯•ç«Ÿä¸€ç™¾åº¦å°±èƒ½å‡ºæ¥äº†ã€‚\nä½¿ç”¨æ­¥éª¤ï¼š\nå¯¼å…¥log4jçš„åŒ…\n1 2 3 4 5 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;log4j\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;log4j\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.2.17\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; åœ¨resourcesç›®å½•ä¸‹æ–°å»ºlog4j.propertiesï¼Œå¹¶å¡«å…¥ä»¥ä¸‹é…ç½®æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç  log4j.rootLogger=DEBUG,console,file #æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½® log4j.appender.console = org.apache.log4j.ConsoleAppender log4j.appender.console.Target = System.out log4j.appender.console.Threshold=DEBUG log4j.appender.console.layout = org.apache.log4j.PatternLayout log4j.appender.console.layout.ConversionPattern=[%c]-%m%n #æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½® log4j.appender.file = org.apache.log4j.RollingFileAppender log4j.appender.file.File=./log/log.log log4j.appender.file.MaxFileSize=10mb log4j.appender.file.Threshold=DEBUG log4j.appender.file.layout=org.apache.log4j.PatternLayout log4j.appender.file.layout.ConversionPattern=[%p][%d{yy-MM-dd}][%c]%m%n #æ—¥å¿—è¾“å‡ºçº§åˆ« log4j.logger.org.mybatis=DEBUG log4j.logger.java.sql=DEBUG log4j.logger.java.sql.Statement=DEBUG log4j.logger.java.sql.ResultSet=DEBUG log4j.logger.java.sql.PreparedStatement=DEBUG åœ¨MyBatisé‡Œå¯ç”¨\n1 2 3 \u0026lt;settings\u0026gt; \u0026lt;setting name=\u0026#34;logImpl\u0026#34; value=\u0026#34;LOG4J\u0026#34;/\u0026gt; \u0026lt;/settings\u0026gt; åœ¨ç¨‹åºä¸­ä½¿ç”¨Log4jè¿›è¡Œè¾“å‡º\n1 2 3 4 5 6 7 8 9 10 11 12 13 import org.apache.log4j.Logger; import org.junit.Test; public class UserMapperTest { static Logger logger = Logger.getLogger(UserMapperTest.class); @Test public void testLog4j(){ logger.info(\u0026#34;info:è¿›å…¥äº†testLog4j\u0026#34;); logger.debug(\u0026#34;debug:è¿›å…¥äº†testLog4j\u0026#34;); logger.error(\u0026#34;error:è¿›å…¥äº†testLog4j\u0026#34;); } } ä½¿ç”¨æ³¨è§£å¼€å‘ MyBatisæœ€åˆé…ç½®ä¿¡æ¯æ˜¯åŸºäº XML ,æ˜ å°„è¯­å¥(SQL)ä¹Ÿæ˜¯å®šä¹‰åœ¨ XML ä¸­çš„ã€‚\nè€Œåˆ°MyBatis 3æä¾›äº†æ–°çš„åŸºäºæ³¨è§£çš„é…ç½®ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒJava æ³¨è§£çš„çš„è¡¨è¾¾åŠ›å’Œçµæ´»æ€§ååˆ†æœ‰é™ã€‚æœ€å¼ºå¤§çš„ MyBatis æ˜ å°„å¹¶ä¸èƒ½ç”¨æ³¨è§£æ¥æ„å»ºã€‚\nåœ¨æ³¨è§£å¼€å‘ä¸­ï¼Œä¸»è¦ä½¿ç”¨è¿™å‡ ä¸ªæ³¨è§£ï¼š@select ()ã€@update ()ã€@Insert ()ã€@delete ()\nä¸¾ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 public interface UserMapper { @Select(\u0026#34;select * from user\u0026#34;) List\u0026lt;User\u0026gt; getUser(); @Select(\u0026#34;select * from user where id=#{id}\u0026#34;) User getUserByID(@Param(\u0026#34;id\u0026#34;) int id); @Insert(\u0026#34;insert into user(id,name,pwd) values(#{id},#{name},#{pwd})\u0026#34;) int addUser(User user); } æ”¹é€ MybatisUtilså·¥å…·ç±»çš„getSession() æ–¹æ³•ï¼Œé‡è½½å®ç°ã€‚\n1 2 3 4 5 6 7 8 //è·å–SqlSessionè¿æ¥ public static SqlSession getSession(){ return getSession(true); //äº‹åŠ¡è‡ªåŠ¨æäº¤ } public static SqlSession getSession(boolean flag){ return sqlSessionFactory.openSession(flag); } @Paramæ³¨è§£ç”¨äºç»™æ–¹æ³•å‚æ•°èµ·ä¸€ä¸ªåå­—ã€‚ä»¥ä¸‹æ˜¯æ€»ç»“çš„ä½¿ç”¨åŸåˆ™ï¼š\nåœ¨æ–¹æ³•åªæ¥å—ä¸€ä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸ä½¿ç”¨@Paramã€‚ åœ¨æ–¹æ³•æ¥å—å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä¸€å®šè¦ä½¿ç”¨@Paramæ³¨è§£ç»™å‚æ•°å‘½åã€‚ å¦‚æœå‚æ•°æ˜¯ JavaBean ï¼Œ åˆ™ä¸èƒ½ä½¿ç”¨@Paramã€‚ ä¸ä½¿ç”¨@Paramæ³¨è§£æ—¶ï¼Œå‚æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¹¶ä¸”æ˜¯JavaBeanã€‚ åŠ¨æ€SQL åŠ¨æ€SQLæŒ‡çš„æ˜¯æ ¹æ®ä¸åŒçš„æŸ¥è¯¢æ¡ä»¶ , ç”Ÿæˆä¸åŒçš„sqlè¯­å¥ã€‚\nä¸»è¦ä½¿ç”¨è¿™å‡ ä¸ªæ ‡ç­¾ï¼šifã€chooseã€whereã€setã€foreach\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34; ?\u0026gt; \u0026lt;!DOCTYPE mapper PUBLIC \u0026#34;-//mybatis.org//DTD Config 3.0//EN\u0026#34; \u0026#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd\u0026#34;\u0026gt; \u0026lt;mapper namespace=\u0026#34;top.lbqaq.dao.BlogMapper\u0026#34;\u0026gt; \u0026lt;insert id=\u0026#34;addBook\u0026#34; parameterType=\u0026#34;Blog\u0026#34;\u0026gt; insert into blog(id, title, author, create_time, views) values (#{id}, #{title}, #{author}, #{createTime}, #{views}) \u0026lt;/insert\u0026gt; \u0026lt;select id=\u0026#34;queryBlogIF\u0026#34; parameterType=\u0026#34;map\u0026#34; resultType=\u0026#34;Blog\u0026#34;\u0026gt; select * from blog \u0026lt;where\u0026gt; \u0026lt;if test=\u0026#34;title != null\u0026#34;\u0026gt; title = #{title} \u0026lt;/if\u0026gt; \u0026lt;if test=\u0026#34;author != null\u0026#34;\u0026gt; and author = #{author} \u0026lt;/if\u0026gt; \u0026lt;/where\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;select id=\u0026#34;queryBlogChoose\u0026#34; parameterType=\u0026#34;map\u0026#34; resultType=\u0026#34;Blog\u0026#34;\u0026gt; select * from blog \u0026lt;where\u0026gt; \u0026lt;choose\u0026gt; \u0026lt;when test=\u0026#34;title != null\u0026#34;\u0026gt; title = #{title} \u0026lt;/when\u0026gt; \u0026lt;when test=\u0026#34;author != null\u0026#34;\u0026gt; and author = #{author} \u0026lt;/when\u0026gt; \u0026lt;otherwise\u0026gt; and views = #{view} \u0026lt;/otherwise\u0026gt; \u0026lt;/choose\u0026gt; \u0026lt;/where\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;update id=\u0026#34;updateBlog\u0026#34; parameterType=\u0026#34;map\u0026#34;\u0026gt; update blog \u0026lt;set\u0026gt; \u0026lt;if test=\u0026#34;title != null\u0026#34;\u0026gt; title = #{title}, \u0026lt;/if\u0026gt; \u0026lt;if test=\u0026#34;author != null\u0026#34;\u0026gt; author = #{author} \u0026lt;/if\u0026gt; \u0026lt;/set\u0026gt; where id = #{id} \u0026lt;/update\u0026gt; \u0026lt;select id=\u0026#34;queryBlogForeach\u0026#34; parameterType=\u0026#34;map\u0026#34; resultType=\u0026#34;Blog\u0026#34;\u0026gt; select * from blog \u0026lt;where\u0026gt; \u0026lt;!--collection:æŒ‡å®šè¾“å…¥å¯¹è±¡ä¸­çš„é›†åˆå±æ€§ item:æ¯æ¬¡éå†ç”Ÿæˆçš„å¯¹è±¡ open:å¼€å§‹éå†æ—¶çš„æ‹¼æ¥å­—ç¬¦ä¸² close:ç»“æŸæ—¶æ‹¼æ¥çš„å­—ç¬¦ä¸² separator:éå†å¯¹è±¡ä¹‹é—´éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²--\u0026gt; \u0026lt;foreach collection=\u0026#34;ids\u0026#34; item=\u0026#34;id\u0026#34; open=\u0026#34;(\u0026#34; close=\u0026#34;)\u0026#34; separator=\u0026#34;or\u0026#34;\u0026gt; id = #{id} \u0026lt;/foreach\u0026gt; \u0026lt;/where\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;/mapper\u0026gt; SQLç‰‡æ®µ æœ‰æ—¶å€™å¯èƒ½æŸä¸ª sql è¯­å¥æˆ‘ä»¬ç”¨çš„ç‰¹åˆ«å¤šï¼Œä¸ºäº†å¢åŠ ä»£ç çš„é‡ç”¨æ€§ï¼Œç®€åŒ–ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›ä»£ç æŠ½å–å‡ºæ¥ï¼Œç„¶åä½¿ç”¨æ—¶ç›´æ¥è°ƒç”¨ã€‚\næå–SQLç‰‡æ®µï¼š\n1 2 3 4 5 6 7 8 \u0026lt;sql id=\u0026#34;if-title-author\u0026#34;\u0026gt; \u0026lt;if test=\u0026#34;title != null\u0026#34;\u0026gt; title = #{title} \u0026lt;/if\u0026gt; \u0026lt;if test=\u0026#34;author != null\u0026#34;\u0026gt; and author = #{author} \u0026lt;/if\u0026gt; \u0026lt;/sql\u0026gt; å¼•ç”¨SQLç‰‡æ®µï¼š\n1 2 3 4 5 6 7 8 \u0026lt;select id=\u0026#34;queryBlogIf\u0026#34; parameterType=\u0026#34;map\u0026#34; resultType=\u0026#34;blog\u0026#34;\u0026gt; select * from blog \u0026lt;where\u0026gt; \u0026lt;!-- å¼•ç”¨ sql ç‰‡æ®µï¼Œå¦‚æœrefid æŒ‡å®šçš„ä¸åœ¨æœ¬æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆéœ€è¦åœ¨å‰é¢åŠ ä¸Š namespace --\u0026gt; \u0026lt;include refid=\u0026#34;if-title-author\u0026#34;\u0026gt;\u0026lt;/include\u0026gt; \u0026lt;!-- åœ¨è¿™é‡Œè¿˜å¯ä»¥å¼•ç”¨å…¶ä»–çš„ sql ç‰‡æ®µ --\u0026gt; \u0026lt;/where\u0026gt; \u0026lt;/select\u0026gt; æ³¨æ„ï¼š\nâ‘ ã€æœ€å¥½åŸºäº å•è¡¨æ¥å®šä¹‰ sql ç‰‡æ®µï¼Œæé«˜ç‰‡æ®µçš„å¯é‡ç”¨æ€§\nâ‘¡ã€åœ¨ sql ç‰‡æ®µä¸­ä¸è¦åŒ…æ‹¬ where\nç¼“å­˜ ç®€ä»‹ 1ã€ä»€ä¹ˆæ˜¯ç¼“å­˜ [ Cache ]ï¼Ÿ\nå­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚ å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Š(å…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶)æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚ 2ã€ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ\nå‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚ 3ã€ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜ï¼Ÿ\nç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚ MyBatisç¼“å­˜ MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚\nMyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼šä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜\né»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰ äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚ ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜ ä¸€çº§ç¼“å­˜ ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼š\nä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚ ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…é¡»å†å»æŸ¥è¯¢æ•°æ®åº“ï¼› ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ sqlSessionä¸åŒ sqlSessionç›¸åŒï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸åŒ sqlSessionç›¸åŒï¼Œä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œï¼ sqlSessionç›¸åŒï¼Œæ‰‹åŠ¨æ¸…é™¤ä¸€çº§ç¼“å­˜ äºŒçº§ç¼“å­˜ äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜\nåŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ï¼›\nå·¥ä½œæœºåˆ¶\nä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼› å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼› æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼› ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼› ä½¿ç”¨æ–¹æ³• å¼€å¯å…¨å±€ç¼“å­˜ mybatis-config.xml\n1 \u0026lt;setting name=\u0026#34;cacheEnabled\u0026#34; value=\u0026#34;true\u0026#34;/\u0026gt; å»æ¯ä¸ªmapper.xmlä¸­é…ç½®ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œè¿™ä¸ªé…ç½®éå¸¸ç®€å•ã€‚\n1 2 3 4 5 6 7 8 9 \u0026lt;cache/\u0026gt; å®˜æ–¹ç¤ºä¾‹ \u0026lt;cache eviction=\u0026#34;FIFO\u0026#34; flushInterval=\u0026#34;60000\u0026#34; size=\u0026#34;512\u0026#34; readOnly=\u0026#34;true\u0026#34;/\u0026gt; è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œæ¯éš” 60 ç§’åˆ·æ–°ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…äº§ç”Ÿå†²çªã€‚ ","date":"2021-08-11T11:11:10+08:00","image":"https://lbqaq.top/p/mybatis/86164137.webp","permalink":"https://lbqaq.top/p/mybatis/","title":"MyBatiså­¦ä¹ ç¬”è®°"},{"content":"è¿™ç¯‡æ–‡ç« æˆ‘æ‰“ç®—æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•æ„å»ºqsqlmysql.dllï¼Œç”±äºç‰ˆæƒåŸå› ï¼Œåœ¨æ–°ç‰ˆçš„Qté‡Œæ˜¯ä¸è‡ªå¸¦è¯¥dllçš„ï¼Œè¿™æ ·å¯¹æˆ‘ä»¬ç¼–å†™æ•°æ®åº“ç¨‹åºä¼šå¾ˆéº»çƒ¦ã€‚ï¼ˆä½ ç”¨ODBCï¼Ÿé‚£æ²¡äº‹äº†ï¼‰\næˆ‘åœ¨ç½‘ä¸Šä¹ŸæŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œä½†æ ¹æ®æ­¥éª¤æ¥æ€»æ˜¯ä¼šæŠ¥é”™ï¼Œæç¤ºæ²¡æœ‰mysql.hè¿™ä¸ªå¤´æ–‡ä»¶ã€‚ä¸‹é¢å°±è®°å½•ä¸€ä¸‹æˆ‘æˆåŠŸç¼–è¯‘çš„è¿‡ç¨‹ã€‚\nåŸºäºcmakeçš„æ­¥éª¤ åœ¨6.1ä¹‹åçš„Qtç‰ˆæœ¬ä¸­ï¼ŒQtå…¬å¸åˆ é™¤äº†qmakeè€Œæ›´æ¢æˆäº†cmakeçš„æ–¹å¼æ¥æ„å»ºé¡¹ç›®æ–‡ä»¶ï¼Œä¸‹é¢å°±æ˜¯æˆ‘æ€»ç»“çš„ä½¿ç”¨cmakeç”Ÿæˆçš„æ–¹æ³•ã€‚\næ³¨æ„ï¼š è·¯å¾„çš„å‰æ®µéƒ¨åˆ†(è½¯ä»¶çš„å®‰è£…ä½ç½®)æ¯ä¸ªäººå¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯è·¯å¾„çš„åæ®µéƒ¨åˆ†åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œè¯·è‡ªè¡Œä¿®æ”¹ã€‚\n1.å‡†å¤‡å¥½Qtçš„æºä»£ç ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥åœ¨Qtçš„å®‰è£…ç›®å½•æ‰“å¼€MaintenanceTool.exeå¯åŠ¨Qtç»„ä»¶ç®¡ç†ï¼Œåœ¨é‡Œé¢å‹¾é€‰SrcæŠŠæºç ä¸‹è½½ä¸‹æ¥ã€‚\n2.æ‰“å¼€cmake-guiï¼Œé€‰æ‹©ç›®æ ‡æ–‡ä»¶å¤¹ä¸ºD:\\Qt\\6.1.1\\Src\\qtbase\\src\\plugins\\sqldriversï¼Œå¹¶è®¾ç½®ç”Ÿæˆæ–‡ä»¶å¤¹ä¸ºD:/Qt/6.1.1/Src/qtbase/src/plugins/sqldrivers/build\n3.ç‚¹å‡»å·¦ä¸‹è§’çš„Configureï¼Œä¼šæç¤ºç”Ÿæˆçš„ç›®å½•ä¸å­˜åœ¨æ˜¯å¦åˆ›å»ºï¼Œç›´æ¥ç‚¹æ˜¯å°±å¯ä»¥äº†ã€‚\n4.ç¼–è¯‘å™¨è¿™é‡Œé€‰æ‹©MinGW Makefiles,ç„¶åç‚¹å‡»Finish\n5.ç­‰å¾…ç”Ÿæˆå®Œæˆåï¼ŒæŠŠFEATURE_sql_mysqlåé¢çš„å‹¾å‹¾ä¸Šï¼Œç„¶åæŠŠå…¶ä½™çš„FEATURE_sqlåé¢çš„å‹¾å–æ¶ˆã€‚\n6.å†æ¬¡ç‚¹å‡»å·¦ä¸‹è§’çš„Configureï¼Œå¯ä»¥å‘ç°ä¸Šé¢çš„çº¢æ¡†å·²ç»æ¶ˆå¤±äº†ï¼Œè¯´æ˜é…ç½®æˆåŠŸäº†ã€‚ç„¶åç‚¹å‡»Generateï¼Œç”ŸæˆMakefilesã€‚\n7.è¿™æ—¶é…ç½®æ–‡ä»¶å·²ç»æ„å»ºå®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç”Ÿæˆdlläº†ï¼Œæ‰“å¼€PowerShellåˆ‡æ¢ç›®å½•è‡³D:/Qt/6.1.1/Src/qtbase/src/plugins/sqldrivers/buildï¼Œè¾“å…¥mingw32-makeå¼€å§‹ç¼–è¯‘ç”Ÿæˆdllã€‚\næ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜ç”ŸæˆæˆåŠŸã€‚\n8.æœ€åæ‰“å¼€ç›®å½•D:\\Qt\\6.1.1\\Src\\qtbase\\src\\plugins\\sqldrivers\\build\\plugins\\sqldriversï¼Œå°±å¯ä»¥çœ‹åˆ°ç”Ÿæˆå¥½çš„qsqlmysql.dlläº†ã€‚\nåŸºäºqmakeçš„æ­¥éª¤ æ³¨æ„ï¼š è·¯å¾„çš„å‰æ®µéƒ¨åˆ†(è½¯ä»¶çš„å®‰è£…ä½ç½®)æ¯ä¸ªäººå¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯è·¯å¾„çš„åæ®µéƒ¨åˆ†åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œè¯·è‡ªè¡Œä¿®æ”¹ã€‚\n1.å‡†å¤‡å¥½Qtçš„æºä»£ç ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥åœ¨Qtçš„å®‰è£…ç›®å½•æ‰“å¼€MaintenanceTool.exeå¯åŠ¨Qtç»„ä»¶ç®¡ç†ï¼Œåœ¨é‡Œé¢å‹¾é€‰SrcæŠŠæºç ä¸‹è½½ä¸‹æ¥ã€‚\n2.è¿›å…¥D:\\Qt\\6.0.3\\Src\\qtbase\\src\\plugins\\sqldriversç›®å½•ä¸‹ï¼Œæ‰“å¼€sqldrivers.proè¿™ä¸ªæ–‡ä»¶ã€‚\n3.åœ¨å·¦ä¾§æ–‡ä»¶æ ‘ä¸­æ‰“å¼€mysqlæ–‡ä»¶å¤¹ï¼Œé€‰æ‹©mysql.proæ‰“å¼€ã€‚\n4.ä¿®æ”¹é‡Œé¢çš„å†…å®¹ï¼š\næ³¨é‡Šæ‰QMAKE_USE += mysqlè¿™ä¸€å¥\nå¢åŠ ä¸‹é¢ä¸‰è¡Œä»£ç (æ³¨æ„æŠŠD:/MySQL/æ”¹ä¸ºä½ MySQLçš„å®‰è£…è·¯å¾„)ï¼š\n1 2 3 LIBS +=-LD:/MySQL/lib -llibmysql INCLUDEPATH += D:/MySQL/include DEPENDPATH += D:/MySQL/include 5.ç‚¹å‡»Qtå·¦ä¸‹è§’çš„å°é”¤å­è¿›è¡Œæ„å»ºï¼Œä¸å‡ºæ„å¤–çš„è¯å°±å¯ä»¥åœ¨D:\\Qt\\6.0.3\\Src\\qtbase\\src\\pluginsè¿™ä¸ªè·¯å¾„ä¸‹çœ‹åˆ°buildå¼€å¤´çš„æ–‡ä»¶å¤¹ï¼Œåœ¨.\\plugins\\sqldriversç›®å½•ä¸‹å°±èƒ½çœ‹åˆ°ç¼–è¯‘å¥½çš„dlläº†ã€‚\n6.æœ€åå°†qsqlmysql.dllæ”¾å…¥D:\\Qt\\6.0.3\\mingw81_64\\plugins\\sqldrivers\\é‡Œå°±è¡Œäº†ã€‚å¦‚æœé“¾æ¥æ•°æ®åº“æ—¶è¿˜æŠ¥é”™ï¼Œå°±æŠŠlibmysql.dllå¤åˆ¶åˆ°Qtçš„ç¼–è¯‘å™¨çš„D:\\Qt\\6.0.3\\mingw81_64\\bin\\ç›®å½•ã€‚\n","date":"2021-06-03T15:44:17+08:00","image":"https://lbqaq.top/p/qt%E6%9E%84%E5%BB%BAqsqlmysql.dll/89217963.webp","permalink":"https://lbqaq.top/p/qt%E6%9E%84%E5%BB%BAqsqlmysql.dll/","title":"Qtæ„å»ºqsqlmysql.dll"},{"content":"1202å¹´äº†ï¼Œæ˜¯æ—¶å€™æŠ›å¼ƒè€æ—§çš„cmdçª—å£å’Œè‡ƒè‚¿çš„VMè™šæ‹Ÿæœºäº†ï¼Œæ¥è¯•è¯•å·¨ç¡¬æ¨å‡ºçš„WSL2+Windows Terminal(ï½ï¿£â–½ï¿£)ï½ã€‚\nèµ·å›  åœ¨çŸ¥ä¹ä¸Šåˆ·åˆ°äº†ä¸€ç¯‡å›ç­”ï¼Œæ˜¯å…³äºWindowsç¼–ç¨‹çš„ä½“éªŒçš„ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­æåˆ°äº†WSL2å’ŒWindows Terminalï¼Œæˆ‘ä¸€ä¸‹å°±è¢«é‚£ç²¾ç¾çš„ç•Œé¢å¸å¼•äº†ï¼ˆç®¡ä»–å¥½ä¸å¥½ç”¨ï¼Œå¥½çœ‹å°±å®Œäº‹äº†ï¼‰ã€‚æ­£å¥½ç°åœ¨åœ¨ä¸Šæ“ä½œç³»ç»Ÿè¿™é—¨è¯¾ï¼Œéœ€è¦ä½¿ç”¨Linuxè¿›è¡Œå®éªŒï¼Œè¿™è¿˜è¯´ä»€ä¹ˆï¼Œç›´æ¥å¼€å†²ã€‚\nWSL2å®‰è£… å®‰è£…å…¶å®å¾ˆç®€å•ï¼ŒæŒ‰ç…§å¾®è½¯çš„æ•™ç¨‹ä¸€æ­¥ä¸€æ­¥åšå°±å®Œäº‹äº†ã€‚\n0.å‰ç½®æ¡ä»¶ æƒ³è¦ç”¨WSL2ï¼Œé¦–å…ˆä½ å¾—æ˜¯ Windows 10ï¼Œè€Œä¸”è¿˜æœ‰ç‰ˆæœ¬å·è¦æ±‚ã€‚\nå¯¹äº x64 ç³»ç»Ÿï¼šç‰ˆæœ¬ 1903 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œé‡‡ç”¨ å†…éƒ¨ç‰ˆæœ¬ 18362 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ å¯¹äº ARM64 ç³»ç»Ÿï¼šç‰ˆæœ¬ 2004 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œé‡‡ç”¨ å†…éƒ¨ç‰ˆæœ¬ 19041 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ 1. å¼€å¯WSLæœåŠ¡ åœ¨Powershell(ç®¡ç†å‘˜)ä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š\n1 dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart 2. å¯ç”¨è™šæ‹ŸæœºæœåŠ¡ åœ¨Powershell(ç®¡ç†å‘˜)ä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š\n1 dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart é‡æ–°å¯åŠ¨ è®¡ç®—æœºï¼Œä»¥å®Œæˆ WSL å®‰è£…å¹¶æ›´æ–°åˆ° WSL 2ã€‚\n3. ä¸‹è½½ Linux å†…æ ¸æ›´æ–°åŒ… ä¸‹è½½æœ€æ–°åŒ…å¹¶å®‰è£…ï¼š\né€‚ç”¨äº x64 è®¡ç®—æœºçš„ WSL2 Linux å†…æ ¸æ›´æ–°åŒ… 4. å°† WSL 2 è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬ åœ¨Powershellä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š\n1 wsl --set-default-version 2 5.å®‰è£… Linux æ‰“å¼€ Microsoft Storeï¼Œå¹¶é€‰æ‹©ä½ åå¥½çš„ Linux åˆ†å‘ç‰ˆå¹¶ç‚¹å‡»è·å–è¿›è¡Œå®‰è£…ã€‚ ç­‰å®‰è£…å¥½åï¼Œæ‰“å¼€å¹¶è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ã€‚ åˆ°æ­¤WSL2å°±å®‰è£…å®Œäº‹äº†ã€‚\nWindows Terminalå®‰è£… 1. ä¸‹è½½å’Œå®‰è£… ä»Microsoft Storeä¸­ä¸‹è½½\nä»Githubä¸Šä¸‹è½½\n2. é…ç½® ä¸ºäº†è®©Windows Terminalçœ‹èµ·æ¥æ›´å¥½çœ‹ä¸€äº›ï¼Œæˆ‘ä»¬è¿˜è¦å¯¹å…¶è¿›è¡Œä¸€äº›é…ç½®ã€‚\næ‰“å¼€Windows Terminalçš„è®¾ç½®é€‰é¡¹ï¼Œç„¶åé€‰æ‰“å¼€JSONæ–‡ä»¶ï¼ŒæŠŠæˆ‘é…å¥½çš„é…ç½®æ–‡ä»¶ç²˜è´´è¿›å»\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 { \u0026#34;$schema\u0026#34;: \u0026#34;https://aka.ms/terminal-profiles-schema\u0026#34;, // Add custom actions and keybindings to this array. // To unbind a key combination from your defaults.json, set the command to \u0026#34;unbound\u0026#34;. // To learn more about actions and keybindings, visit https://aka.ms/terminal-keybindings \u0026#34;actions\u0026#34;: [ // Copy and paste are bound to Ctrl+Shift+C and Ctrl+Shift+V in your defaults.json. // These two lines additionally bind them to Ctrl+C and Ctrl+V. // To learn more about selection, visit https://aka.ms/terminal-selection { \u0026#34;command\u0026#34;: { \u0026#34;action\u0026#34;: \u0026#34;copy\u0026#34;, \u0026#34;singleLine\u0026#34;: false }, \u0026#34;keys\u0026#34;: \u0026#34;ctrl+c\u0026#34; }, { \u0026#34;command\u0026#34;: \u0026#34;paste\u0026#34;, \u0026#34;keys\u0026#34;: \u0026#34;ctrl+v\u0026#34; }, // Press Ctrl+Shift+F to open the search box { \u0026#34;command\u0026#34;: \u0026#34;find\u0026#34;, \u0026#34;keys\u0026#34;: \u0026#34;ctrl+shift+f\u0026#34; }, // Press Alt+Shift+D to open a new pane. // - \u0026#34;split\u0026#34;: \u0026#34;auto\u0026#34; makes this pane open in the direction that provides the most surface area. // - \u0026#34;splitMode\u0026#34;: \u0026#34;duplicate\u0026#34; makes the new pane use the focused pane\u0026#39;s profile. // To learn more about panes, visit https://aka.ms/terminal-panes { \u0026#34;command\u0026#34;: { \u0026#34;action\u0026#34;: \u0026#34;splitPane\u0026#34;, \u0026#34;split\u0026#34;: \u0026#34;auto\u0026#34;, \u0026#34;splitMode\u0026#34;: \u0026#34;duplicate\u0026#34; }, \u0026#34;keys\u0026#34;: \u0026#34;alt+shift+d\u0026#34; } ], \u0026#34;copyFormatting\u0026#34;: \u0026#34;none\u0026#34;, \u0026#34;copyOnSelect\u0026#34;: false, \u0026#34;defaultProfile\u0026#34;: \u0026#34;{61c54bbd-c2c6-5271-96e7-009a87ff44bf}\u0026#34;, \u0026#34;initialCols\u0026#34;: 120, \u0026#34;initialRows\u0026#34;: 30, \u0026#34;profiles\u0026#34;: { \u0026#34;defaults\u0026#34;: { \u0026#34;acrylicOpacity\u0026#34;: 0.75, \u0026#34;closeOnExit\u0026#34;: \u0026#34;graceful\u0026#34;, \u0026#34;colorScheme\u0026#34;: \u0026#34;Campbell\u0026#34;, \u0026#34;cursorColor\u0026#34;: \u0026#34;#FFFFFF\u0026#34;, \u0026#34;cursorShape\u0026#34;: \u0026#34;bar\u0026#34;, \u0026#34;fontFace\u0026#34;: \u0026#34;Consolas\u0026#34;, \u0026#34;fontSize\u0026#34;: 13, \u0026#34;historySize\u0026#34;: 9001, \u0026#34;padding\u0026#34;: \u0026#34;0, 0, 0, 0\u0026#34;, \u0026#34;snapOnInput\u0026#34;: true, \u0026#34;startingDirectory\u0026#34;: \u0026#34;./\u0026#34;, \u0026#34;useAcrylic\u0026#34;: true }, \u0026#34;list\u0026#34;: [ { \u0026#34;commandline\u0026#34;: \u0026#34;powershell.exe -NoLogo\u0026#34;, \u0026#34;guid\u0026#34;: \u0026#34;{61c54bbd-c2c6-5271-96e7-009a87ff44bf}\u0026#34;, \u0026#34;hidden\u0026#34;: false, \u0026#34;name\u0026#34;: \u0026#34;Windows PowerShell\u0026#34; }, { \u0026#34;commandline\u0026#34;: \u0026#34;cmd.exe\u0026#34;, \u0026#34;guid\u0026#34;: \u0026#34;{0caa0dad-35be-5f56-a8ff-afceeeaa6101}\u0026#34;, \u0026#34;hidden\u0026#34;: false, \u0026#34;name\u0026#34;: \u0026#34;Command Prompt\u0026#34; }, { \u0026#34;guid\u0026#34;: \u0026#34;{b453ae62-4e3d-5e58-b989-0a998ec441b8}\u0026#34;, \u0026#34;hidden\u0026#34;: true, \u0026#34;name\u0026#34;: \u0026#34;Azure Cloud Shell\u0026#34;, \u0026#34;source\u0026#34;: \u0026#34;Windows.Terminal.Azure\u0026#34; }, { \u0026#34;guid\u0026#34;: \u0026#34;{2c4de342-38b7-51cf-b940-2309a097f518}\u0026#34;, \u0026#34;hidden\u0026#34;: false, \u0026#34;name\u0026#34;: \u0026#34;Ubuntu\u0026#34;, \u0026#34;source\u0026#34;: \u0026#34;Windows.Terminal.Wsl\u0026#34;, \u0026#34;startingDirectory\u0026#34;: \u0026#34;//wsl$/Ubuntu/home/luobo\u0026#34; } ] } } ä¸€èˆ¬è¦ä¿®æ”¹è¿™å‡ é¡¹ï¼š\nfontFace - å­—ä½“ï¼Œæˆ‘çš„å­—ä½“ä¸ºConsolasï¼Œé€‚åˆ1080Pçš„å±å¹•ã€‚é«˜åˆ†è¾©ç‡å±å»ºè®®ç”¨monacoæˆ–è€…fira code fontSize - å­—ä½“å¤§å°ï¼Œå› äººè€Œå¼‚ï¼Œå› å±å¹•è€Œå¼‚ï¼Œè‡ªå·±æ ¹æ®è§†è§‰æ•ˆæœè°ƒæ•´å¤§å° acrylicOpacity - èƒŒæ™¯é€æ˜åº¦ï¼ŒåŒæ ·å› äººè€Œå¼‚ï¼Œå› å±å¹•è€Œå¼‚ï¼Œè‡ªå·±æ ¹æ®è§†è§‰æ•ˆæœè°ƒæ•´å¤§å° initialCols - åˆå§‹çª—å£å®½åº¦ï¼ŒåŒæ ·å› äººè€Œå¼‚ï¼Œå› å±å¹•è€Œå¼‚ï¼Œè‡ªå·±æ ¹æ®è§†è§‰æ•ˆæœè°ƒæ•´å¤§å° initialRows - åˆå§‹çª—å£é«˜åº¦ï¼ŒåŒæ ·å› äººè€Œå¼‚ï¼Œå› å±å¹•è€Œå¼‚ï¼Œè‡ªå·±æ ¹æ®è§†è§‰æ•ˆæœè°ƒæ•´å¤§å° startingDirectory - Ubuntuçš„é»˜è®¤æ‰“å¼€è·¯å¾„ï¼ŒæŠŠå…¶ä¸­çš„luoboæ¢æˆä½ è‡ªå·±çš„ç”¨æˆ·åã€‚ WSL+VSCode æ¯•ç«Ÿéƒ½æ˜¯å¾®è½¯å®¶çš„è½¯ä»¶ï¼Œç›´æ¥å°±èƒ½é€šè¿‡VSCodeæ¥è¿œç¨‹ç¼–è¾‘Linuxé‡Œçš„æ–‡ä»¶ã€‚vimå¤ªéš¾ä¸Šæ‰‹ï¼Ÿæˆ‘ç›´æ¥åœ¨Windowsé‡Œç¼–ç¨‹(é›¾)ã€‚\nåªè¦åœ¨é¡¹ç›®ç›®å½•é‡Œé”®å…¥code .ï¼Œå°±ä¼šè‡ªåŠ¨è·³åˆ°Windowsé‡Œçš„VSCodeé‡Œäº†ã€‚\nå°ç»“ WSL+Windows Terminal+VSCodeï¼Œå°†ä¸‰è€…é…åˆèµ·æ¥ï¼Œæˆ‘è§‰å¾—å¯ä»¥å®ç°1+1+1\u0026gt;3çš„åŠŸèƒ½ï¼Œæ¯•ç«Ÿï¼Œè°ä¸å–œæ¬¢é¢œå€¼é«˜çš„è½¯ä»¶å‘¢ãƒ¾(â‰§â–½â‰¦*)o\nå‚è€ƒé“¾æ¥ å¾®è½¯å®˜æ–¹WSL2æ•™ç¨‹ å¾®è½¯å®˜æ–¹Windows Terminalæ•™ç¨‹ Windows Terminal ç»ˆç«¯å…¥é—¨ ","date":"2021-04-08T13:14:20+08:00","image":"https://lbqaq.top/p/wsl2-wt%E9%85%8D%E7%BD%AE%E5%B0%8F%E7%BB%93/43493473.webp","permalink":"https://lbqaq.top/p/wsl2-wt%E9%85%8D%E7%BD%AE%E5%B0%8F%E7%BB%93/","title":"WSL2+WTé…ç½®å°ç»“"},{"content":"çœ‹åˆ°zsnmwyå¤§ä½¬çš„åšå®¢ï¼Œå’Œæˆ‘ä½¿ç”¨çš„æ˜¯åŒæ ·çš„ä¸»é¢˜ï¼Œä½†æ˜¯äººå®¶å´å¤šäº†ä¸€äº›åŠ¨ç”»ï¼Œç¬é—´å°±é«˜çº§èµ·æ¥äº†ã€‚äºæ˜¯æ‰“å¼€ç™¾åº¦æœç´ ä¸€æ³¢ï¼Œå‘ç°åªè¦æ”¹ä¸€ä¸‹CSSå°±å¯ä»¥å®ç°äº†ã€‚\nå‡†å¤‡å·¥å…· hugoçš„æ‰©å±•ç‰ˆï¼ˆextendedï¼‰\nè¿™é‡Œä¸€å®šè¦ä¸‹æ‰©å±•ç‰ˆï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„ä¸»é¢˜éƒ½æ˜¯åˆ©ç”¨scssæ¥ç”Ÿæˆcssçš„ï¼Œå¦‚æœç”¨æ™®é€šç‰ˆæ˜¯æ— æ³•åˆ©ç”¨scssç”Ÿæˆå¯¹åº”çš„cssçš„ã€‚ä¹‹å‰ä¸çŸ¥é“ä¸‹çš„æ˜¯æ™®é€šç‰ˆï¼Œç»“æœæ€ä¹ˆæ”¹scsséƒ½æ²¡æœ‰æ•ˆæœï¼Œæµªè´¹äº†å¾ˆå¤šæ—¶é—´ğŸ˜¥ã€‚\n23.7.13æ›´æ–° ç°åœ¨ä¼˜åŒ–äº†ä¸»é¢˜çš„ç¼–å†™æ–¹å¼ï¼Œä¸éœ€è¦ä¿®æ”¹åŸå§‹çš„ä¸»é¢˜æ–‡ä»¶ï¼Œé™ä½äº†ä»£ç è€¦åˆğŸ˜‰ã€‚\nåªéœ€è¦åœ¨HUGO_SITE_FOLDER/assets/scss/custom.scssæ–‡ä»¶é‡Œå¡«å†™ä¸‹é¢çš„å†…å®¹å°±å¥½äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 :root { --article-background: #f0f8ff; \u0026amp;[data-scheme=\u0026#34;dark\u0026#34;] { --article-background: #292d30; } } // æ–‡ç« åˆ—è¡¨ .article-list--compact article { //å¢åŠ åŠ¨ç”» transition: .5s ease; \u0026amp;:hover { transform: scale(1.02, 1.02); background: var(--article-background); } .article-image img { // å˜æˆé•¿æ–¹å½¢ width: calc(var(--image-size) * 5 / 3); // å¢åŠ åœ†è§’ border-radius: var(--card-border-radius); } } //å¤´åƒ .sidebar header .site-avatar .site-logo { transition: all 1.75s ease-out; \u0026amp;:hover { transform: rotate(360deg); } } //èœå•æ  .menu { //æŠŠautoæ”¹ä¸ºvisibleï¼Œä¸ºäº†å›¾æ ‡æ”¾å¤§æº¢å‡ºæ—¶ä¸æ˜¾ç¤ºæ»šåŠ¨æ¡ overflow-y: visible; li { transition: .5s ease; \u0026amp;:hover { transform: scale(1.1, 1.1); } } } //æ–‡ç« å¤´å›¾ .article-list article .article-image { //é¿å…å‡ºç°æ»šåŠ¨æ¡ overflow: hidden; img { //è®¾ç½®å›¾ç‰‡ç¼©æ”¾ transition: all .5s ease; \u0026amp;:hover { transform: scale(1.2); } @include respond(xl) { //åŠ å¤§å›¾ç‰‡é«˜åº¦ height: 385px; } } } //å‹æƒ…é“¾æ¥ä¸‰æ  (From https://blog.linsnow.cn/p/join-hugo-and-stack/) @media (min-width: 1024px) { .article-list--compact.links { display: grid; grid-template-columns: 1fr 1fr 1fr; background: none; box-shadow: none; gap: 1rem; article { background: var(--card-background); border: none; box-shadow: var(--shadow-l2); margin-bottom: 8px; border-radius: var(--card-border-radius); \u0026amp;:nth-child(odd) { margin-right: 8px; } .article-image img { // æ¢å¤æˆæ­£æ–¹å½¢ width: var(--image-size); } } } } åŒæ—¶å¢åŠ äº†ä¸€äº›ç‰¹æ•ˆï¼Œè¿™é‡Œå°±ä¸å±•å¼€è¯´äº†ğŸ•Šï¸\nç›¸å…³ä»£ç  1.å¤´åƒè½¬åŠ¨ åœ¨themes/hugo-theme-stack/assets/scss/partials/sidebar.scssä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š\n1 2 3 4 5 6 7 .site-logo { transition: all 1.75s ease-out; } .site-logo:hover { transform: rotate(360deg); } 2.æ–‡ç« å¤´å›¾ç¼©æ”¾ åœ¨themes/hugo-theme-stack/assets/scss/partials/article.scssä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 .article-image { overflow:hidden; } .article-image { img { transition:all .5s ease; } \u0026amp;:hover{ transform:scale(1.2); } 3.Archivesé¡µé¢ç¼©æ”¾ åœ¨themes/hugo-theme-stack/assets/scss/partials/article.scssä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 article{ transition:.5s ease; } article { \u0026amp;:hover{ transform:scale(1.05,1.05); background:#f0f8ff; } } 4.èœå•ç¼©æ”¾ åœ¨themes/hugo-theme-stack/assets/scss/partials/menu.scssä¸­å¢åŠ ä»¥ä¸‹ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 overflow-y: visible; //æŠŠautoæ”¹ä¸ºvisibleï¼Œä¸ºäº†å›¾æ ‡æ”¾å¤§æº¢å‡ºæ—¶ä¸æ˜¾ç¤ºæ»šåŠ¨æ¡ li { transition:.5s ease; } li{ \u0026amp;:hover{ transform:scale(1.1,1.1); } } æœ‰äº†åŠ¨ç”»åï¼Œæ„Ÿè§‰æ•´ä¸ªåšå®¢éƒ½å˜å¾—é«˜çº§èµ·æ¥äº†ãƒ¾(â€¢Ï‰â€¢`)o\nåœ¨è¿™æ„Ÿè°¢zsnmwyå¤§ä½¬ï¼Œä¸Šé¢æœ‰äº›åŠ¨ç”»æ‡’å¾—è‡ªå·±å†™äº†ï¼Œå°±ç›´æ¥ä»ä»–çš„cssä¸­å¤åˆ¶äº†ãƒ¾(ï¿£â–½ï¿£)\n","date":"2021-02-01T13:55:05+08:00","image":"https://lbqaq.top/p/%E7%BB%99blog%E5%A2%9E%E5%8A%A0%E5%8A%A8%E7%94%BB/86589864.webp","permalink":"https://lbqaq.top/p/%E7%BB%99blog%E5%A2%9E%E5%8A%A0%E5%8A%A8%E7%94%BB/","title":"ç»™Blogå¢åŠ åŠ¨ç”»"},{"content":"æœ€è¿‘åˆ·äº†å¥½å‡ é“å…³äºSTLçš„ç«èµ›é¢˜ï¼Œè®¸å¤šçŸ¥è¯†ç‚¹è¿˜æ˜¯ä¸ç†Ÿç»ƒï¼Œåœ¨ç»§ç»­å­¦ä¹ ä¹‹å‰ï¼Œè¿˜æ˜¯æ¥å¥½å¥½æ•´ç†ä¸€ä¸‹ä¸€äº›å¸¸è§çš„STLå’Œå®¹å™¨å§ã€‚ç´«ä¹¦ä¸Šä»‹ç»çš„æœ‰ä»¥ä¸‹å‡ ç§ï¼š\nçº¿æ€§ï¼švector,list,string å…³è”ï¼šmap,set ç‰¹æ®Šï¼šstack,queue,priority_queue ç®—æ³•ï¼šsort,lower_bound,find vector vectorå¯ä»¥ç†è§£ä¸ºå¯ä»¥è‡ªç”±å˜æ¢é•¿åº¦çš„æ•°ç»„(ä¸å®šé•¿æ•°ç»„)ï¼Œä¸ªäººæ„Ÿè§‰ä½¿ç”¨é¢‘ç‡è¿˜æ˜¯å¾ˆé«˜çš„ã€‚vectoræ˜¯è¿ç»­çš„ï¼Œæ„å‘³ç€å¯ä»¥ä½¿ç”¨[]æˆ–at()ã€‚\nå£°æ˜ï¼š vector\u0026lt;int\u0026gt; a\nå¸¸ç”¨å‡½æ•° push_backï¼šåœ¨å°¾éƒ¨æ·»åŠ ä¸€ä¸ªæ•°æ®\npop_backï¼šåˆ é™¤å°¾éƒ¨çš„ä¸€ä¸ªæ•°æ®\nsizeï¼šå½“å‰çš„å¤§å°ï¼ˆå°±æ˜¯æœ‰å¤šå°‘å…ƒç´ ï¼‰\neraseï¼šåˆ é™¤æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®é¡¹\nclearï¼šæ¸…ç©º\nemptyï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç©º\ndeque dequeå¯ä»¥çœ‹ä½œæ˜¯åŒå‘é˜Ÿåˆ—ï¼Œæ˜¯è¿ç»­å­˜å‚¨ç»“æ„ã€‚vectoræœ‰çš„åŠŸèƒ½å®ƒéƒ½æœ‰ï¼Œè¿˜æ”¯æŒé«˜æ•ˆçš„é¦–/å°¾ç«¯æ’å…¥/åˆ é™¤æ“ä½œã€‚\næ–°å¢å‡½æ•° push_frontï¼šåœ¨å¤´éƒ¨æ·»åŠ ä¸€ä¸ªæ•°æ® pop_frontï¼šåœ¨å¤´éƒ¨åˆ é™¤ä¸€ä¸ªæ•°æ® list listå¯ä»¥çœ‹ä½œæ˜¯åŒé“¾è¡¨ï¼Œæ˜¯éè¿ç»­å­˜å‚¨ç»“æ„ã€‚å¯åœ¨ä¸¤ç«¯è¿›è¡Œpushã€popï¼ŒåŒæ—¶åœ¨å†…éƒ¨å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œã€‚ä¸è¿‡æˆ‘æ²¡æ€ä¹ˆç”¨åˆ°è¿™ä¸ªå®¹å™¨ã€‚ç­‰æˆ‘åšåˆ°ç›¸å…³çš„é¢˜ç›®å†æ¥è¡¥å……ä¸€äº›ä¿¡æ¯å§ã€‚\nstring stringå°±æ˜¯å­—ç¬¦ä¸²ã€‚ç›¸æ¯”char[]é‚£å¯æ˜¯æ–¹ä¾¿ä¸å°‘ï¼Œc++çš„cin/coutå°±åªæ”¯æŒstringç±»å‹è€Œä¸æ”¯æŒcharå‹æ•°ç»„ã€‚stringè¿˜æ”¯æŒ+ã€=ã€+=ç­‰è¿ç®—ç¬¦ã€‚\nå¸¸ç”¨å‡½æ•° appendï¼šåœ¨å­—ç¬¦ä¸²åæ·»åŠ ï¼ˆç›¸å½“äº+=ï¼‰\nsubstr(n,m)ï¼šè¿”å›stringçš„å­ä¸²ï¼Œä»nå¤„å¼€å§‹ï¼Œå–mä¸ªã€‚å½“mçœç•¥æˆ–è¶…è¿‡äº†å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™ä¸€ç›´å–åˆ°å­—ç¬¦ä¸²ç»“æŸã€‚\næŸ¥æ‰¾ç›¸å…³å‡½æ•°ï¼š\nå¦‚æœæ²¡æœ‰æŸ¥åˆ°ï¼Œè¿”å›string::nposã€‚\nfindï¼šä»å‰å¾€åæŸ¥æ‰¾å­ä¸²æˆ–å­—ç¬¦å‡ºç°çš„ä½ç½®ã€‚\nrfindï¼šä»åå¾€å‰æŸ¥æ‰¾å­ä¸²æˆ–å­—ç¬¦å‡ºç°çš„ä½ç½®ã€‚\nfind_first_ofï¼šä»å‰å¾€åæŸ¥æ‰¾ä½•å¤„å‡ºç°å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­åŒ…å«çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼š\ns1.find_first_of(\u0026ldquo;abc\u0026rdquo;); //æŸ¥æ‰¾s1ä¸­ç¬¬ä¸€æ¬¡å‡ºç°\u0026quot;abc\u0026quot;ä¸­ä»»ä¸€å­—ç¬¦çš„ä½ç½®\nfind_last_ofï¼šä»åå¾€å‰æŸ¥æ‰¾ä½•å¤„å‡ºç°å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­åŒ…å«çš„å­—ç¬¦ã€‚\nfind_first_not_ofï¼šä»å‰å¾€åæŸ¥æ‰¾ä½•å¤„å‡ºç°å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ²¡æœ‰åŒ…å«çš„å­—ç¬¦ã€‚\nfind_last_not_ofï¼šä»åå¾€å‰æŸ¥æ‰¾ä½•å¤„å‡ºç°å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ²¡æœ‰åŒ…å«çš„å­—ç¬¦ã€‚\næµå¤„ç† å¯ä»¥é€šè¿‡\u0026lt;sstream\u0026gt;ï¼Œå°†stringå¯¹è±¡ä½œä¸ºä¸€ä¸ªæµã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 #include \u0026lt;iostream\u0026gt; #include \u0026lt;sstream\u0026gt; #include \u0026lt;string\u0026gt; using namespace std; int main(){ string line; while(getline(cin,line)){ stringstream ss(line); while(ss\u0026gt;\u0026gt;x){...} } } set setå°±æ˜¯æ•°å­¦ä¸­çš„é›†åˆï¼Œæ¯ä¸ªå…ƒç´ åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œsetä¸­çš„å…ƒç´ å·²ç»ä»å°åˆ°å¤§æ’å¥½äº†ã€‚\nå¸¸ç”¨å‡½æ•° insertï¼šæ’å…¥ä¸€ä¸ªå…ƒç´  eraseï¼šåˆ é™¤ï¼Œå¯ä»¥ä¼ å…¥å®šä½å™¨ï¼Œä¹Ÿå¯ç›´æ¥ä¼ å…¥å€¼ countï¼šç»Ÿè®¡å…ƒç´ å‡ºç°çš„ä¸ªæ•°ï¼Œå› ä¸ºåªæœ‰0/1ä¸ªï¼Œæ‰€ä»¥ä¸€èˆ¬ç”¨æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ findï¼šæŸ¥æ‰¾ å¯¹äºè‡ªå·±å®šä¹‰çš„ç»“æ„ä½“ï¼Œéœ€è¦é‡è½½\u0026lt;è¿ç®—ç¬¦ã€‚\nå¸¸ç”¨ç®—æ³• åœ¨\u0026lt;algorithm\u0026gt;ä¸­æä¾›äº†å…³äºsetçš„ä¸¤ç§ç®—æ³•ï¼ˆç›®å‰åªçŸ¥é“ä¸¤ç§ï¼‰\nset_unionï¼šå–ä¸¤ä¸ªé›†åˆçš„å¹¶é›†ï¼Œä¾‹å¦‚ï¼š\n1 2 3 #define ALL(x) x.begin(),x.end() #define INS(x) inserter(x,x.begin()) set_union(ALL(x1),ALL(x2),INS(x)); //å°†x1å’Œx2çš„å†…å®¹å–å¹¶é›†åæ”¾å…¥xä¸­ set_intersectionï¼šå–ä¸¤ä¸ªé›†åˆçš„äº¤é›†ï¼Œä¾‹å¦‚ï¼š\n1 set_intersection(ALL(x1),ALL(x2),INS(x)); //å°†x1å’Œx2çš„å†…å®¹å–äº¤é›†æ”¾å…¥xä¸­ map mapæ˜¯æ˜ å°„ï¼Œæ”¯æŒ[]è¿ç®—ç¬¦ï¼Œè¿˜æ˜¯éå¸¸å®ç”¨çš„ã€‚\nmapçš„å‡½æ•°å’ŒsetåŸºæœ¬ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸é‡å¤å†™äº†ã€‚\nstack stackå°±æ˜¯æ•°æ®ç»“æ„ä¸­çš„æ ˆï¼Œæ•°æ®æ˜¯â€œåè¿›å…ˆå‡ºâ€ã€‚\nåŸºæœ¬å‡½æ•° pushï¼šå…¥æ ˆ popï¼šå‡ºæ ˆ topï¼šå–æ ˆé¡¶å…ƒç´  è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨pop()å‡ºæ ˆå¹¶ä¸ä¼šè¿”å›è¢«åˆ é™¤çš„å…ƒç´ å€¼ï¼Œå¦‚æœæƒ³è¦éœ€è¦å…ˆtop()ä¸€ä¸‹\nqueue queueå°±æ˜¯æ•°æ®ç»“æ„é‡Œçš„é˜Ÿåˆ—ï¼Œæ•°æ®ç¬¦åˆâ€œå…ˆè¿›å…ˆå‡ºâ€çš„è§„åˆ™ã€‚\nåŸºæœ¬å‡½æ•° pushï¼šå…¥é˜Ÿ\npopï¼šå‡ºé˜Ÿ\nfrontï¼šå–é˜Ÿé¦–\npriority_queue ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå°†æŒ‰ç…§ä¼˜å…ˆçº§æ¥æ’åºï¼Œå–é˜Ÿé¦–çš„front()çš„å‡½æ•°å°†æ¢ä¸ºtop()ã€‚è¯¥å®¹å™¨ä¹Ÿå®šä¹‰åœ¨å¤´æ–‡ä»¶\u0026lt;queue\u0026gt;é‡Œã€‚\nå¯¹äºè‡ªå®šä¹‰æ•°æ®ç±»å‹çš„é˜Ÿåˆ—ï¼Œéœ€è¦å®šä¹‰\u0026lt;è¿ç®—ã€‚å¯¹äºå·²ç»å®šä¹‰è¿‡çš„æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œåœ¨å…¶ä¸­é‡è½½()è¿ç®—ç¬¦æ¥çœ‹èµ·æ¥åƒä¸€ä¸ªå‡½æ•°ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 struct cmp { bool operator()(const int a, const int b) const { return abs(a) \u0026lt; abs(b); } }; priority_queue\u0026lt;int, vector\u0026lt;int\u0026gt;, cmp\u0026gt; p_queue; è¿™æ ·å°±å®šä¹‰äº†ä¸€ä¸ªç»å¯¹å€¼å¤§å°ä¼˜å…ˆçš„é˜Ÿåˆ—\n","date":"2021-01-31T20:39:29+08:00","image":"https://lbqaq.top/p/%E7%AB%9E%E8%B5%9B%E7%94%A8stl%E6%95%B4%E7%90%86/85526504.webp","permalink":"https://lbqaq.top/p/%E7%AB%9E%E8%B5%9B%E7%94%A8stl%E6%95%B4%E7%90%86/","title":"ç«èµ›ç”¨STLæ•´ç†"},{"content":"è€ƒå‰æ•´ç†çš„ç®—æ³•ï¼Œä¹Ÿé¡ºä¾¿æ”¾åˆ°åšå®¢ä¸Šå§ãƒ¾(â€¢Ï‰â€¢`)o\næ•°æ®ç»“æ„ä»£ç å¤ä¹  3.å•é“¾è¡¨é€†ç½® å¸¦å¤´ç»“ç‚¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 int Inverse_Link(LinkList *L) { LinkList *cur, *p; if (L-\u0026gt;next \u0026amp;\u0026amp; L-\u0026gt;next-\u0026gt;next) { p = L-\u0026gt;next-\u0026gt;next; L-\u0026gt;next-\u0026gt;next = NULL; while (p) { cur = L-\u0026gt;next; L-\u0026gt;next = p; p = p-\u0026gt;next; L-\u0026gt;next-\u0026gt;next = cur; } } return 0; } 5.åŒå‘é“¾è¡¨ åŒé“¾è¡¨å®šä¹‰ï¼š\n1 2 3 4 5 6 typedef struct DuLinkList { int data; struct DuLinkList *prior; struct DuLinkList *next; } DuLinkList; éå†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 void Printlist_DuL(DuLinkList *L) { DuLinkList *s; s = L-\u0026gt;next; if (L-\u0026gt;next != NULL) { printf(\u0026#34;å½“å‰çš„åŒå‘é“¾è¡¨å€¼ä¸ºï¼š\u0026#34;); do { printf(\u0026#34;%d \u0026#34;, s-\u0026gt;data); s = s-\u0026gt;next; } while (s != NULL); } printf(\u0026#34;\\n\u0026#34;); } äº¤æ¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 int ListSwap_DuL(DuLinkList *L, int i) { //åœ¨å¸¦å¤´ç»“ç‚¹çš„åŒå‘é“¾è¡¨ä¸­äº¤æ¢ç¬¬iä¸ªï¼Œi+1ä¸ªä½ç½®çš„å…ƒç´  DuLinkList *p = L, *q; int j = 0; while (p \u0026amp;\u0026amp; j \u0026lt; i - 1) { p = p-\u0026gt;next; j += 1; } if (!p || j \u0026gt; i - 1) return -1; p = p-\u0026gt;next; q = p-\u0026gt;next; p-\u0026gt;prior-\u0026gt;next = q; //1 -\u0026gt;q p 2 q-\u0026gt;prior = p-\u0026gt;prior; //1\u0026lt;--\u0026gt;q p 2 p-\u0026gt;next = q-\u0026gt;next; //1\u0026lt;--\u0026gt;q p -\u0026gt;2 q-\u0026gt;next-\u0026gt;prior = p; //1\u0026lt;--\u0026gt;q p\u0026lt;--\u0026gt;2 q-\u0026gt;next = p; //1\u0026lt;--\u0026gt;q -\u0026gt;p\u0026lt;--\u0026gt;2 p-\u0026gt;prior = q; //1\u0026lt;--\u0026gt;q\u0026lt;--\u0026gt;p\u0026lt;--\u0026gt;2 return 0; } 6.é“¾è¡¨å›æ–‡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 bool isPalindrome(struct ListNode *head) { Lstack *s; int e; struct ListNode *p = head; s = (Lstack *)malloc(sizeof(Lstack)); Initlist_Stack(s); while (p) { push(s, p-\u0026gt;val); p = p-\u0026gt;next; } p = head; while (p) { e = pop(s); if (p-\u0026gt;val != e) break; p = p-\u0026gt;next; } if (p) return false; else return true; } 7-1.é“¾é˜Ÿåˆ— å®šä¹‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 typedef struct QNode //é˜Ÿåˆ— { int data; struct QNode *next; } QNode; typedef struct LinkQueue //å¯¹åˆ—ç›¸å…³çš„æŒ‡é’ˆ { QNode *front; //å¯¹å¤´æŒ‡é’ˆ QNode *rear; //é˜Ÿå°¾æŒ‡é’ˆ } LinkQueue; æ’å…¥ï¼š\n1 2 3 4 5 6 7 8 9 10 11 int EnQueue(LinkQueue *q, int e) { //[å…¥é˜Ÿ]å°†å…ƒç´ eæ”¾å…¥é˜Ÿå°¾ï¼Œå¸¦å¤´ç»“ç‚¹ QNode *p; p = (QNode *)malloc(sizeof(QNode)); p-\u0026gt;data = e; p-\u0026gt;next = NULL; q-\u0026gt;rear-\u0026gt;next = p; q-\u0026gt;rear = p; return 0; } 7-2.å¾ªç¯é“¾è¡¨ æ’å…¥å’Œæ™®é€šå•é“¾è¡¨æ²¡åŒºåˆ«ï¼Œè¿™é‡Œå°±åˆ—ä¸¾éƒ¨åˆ†\n1 2 3 4 s = (LinkList *)malloc(sizeof(LinkList)); s-\u0026gt;data = e; s-\u0026gt;next = p-\u0026gt;next; p-\u0026gt;next = s; 8.æ±‚äºŒå‰æ ‘å„ç§æ•°çš„ç®—æ³• ï¼ˆ1ï¼‰æ±‚é«˜åº¦ é«˜åº¦å¾ˆç®€å•ï¼Œæ¥ä¸ªé€’å½’å°±å®Œäº‹äº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 int BiTreeHeight(BiTNode *T) { //æ±‚äºŒå‰æ ‘çš„é«˜åº¦ int treeHeight = 0; if (T != NULL) { int leftHeight = BiTreeHeight(T-\u0026gt;lchild); int rightHeight = BiTreeHeight(T-\u0026gt;rchild); treeHeight = leftHeight \u0026gt;= rightHeight ? leftHeight + 1 : rightHeight + 1; } return treeHeight; } ï¼ˆ2ï¼‰æ±‚å¶å­æ•° å¶å­æ•°ä¹Ÿä¸€æ ·ï¼Œé€’å½’æ°¸è¿œæ»´ç¥\n1 2 3 4 5 6 7 8 9 10 void BiTreeLeafCount(BiTNode *T, int *count) { //æ±‚äºŒå‰æ ‘å¶å­ç»“ç‚¹æ•° if (!T) return; if (T-\u0026gt;lchild == NULL \u0026amp;\u0026amp; T-\u0026gt;rchild == NULL) *count += 1; BiTreeLeafCount(T-\u0026gt;lchild, count); BiTreeLeafCount(T-\u0026gt;rchild, count); } ï¼ˆ3ï¼‰æ±‚ç»“ç‚¹æ•° è¿™ä¸å°±éå†å˜›ï¼Œç›´æ¥çœ‹ä¸‹é¢å§=ï¿£Ï‰ï¿£=\n9.äºŒå‰æ ‘çš„ä¸­åºéå† é€’å½’ï¼š\n1 2 3 4 5 6 7 8 9 int InOrderTraverse(BiTNode *T) { //ä¸­åºéå†äºŒå‰æ ‘Tçš„é€’å½’ç®—æ³• if (T == NULL) return 0; InOrderTraverse(T-\u0026gt;lchild); printf(\u0026#34;%c \u0026#34;, T-\u0026gt;data); InOrderTraverse(T-\u0026gt;rchild); } éé€’å½’ï¼ˆé‡è¦ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 int inorder(BiTNode *T) { //ä¸­åºéå†äºŒå‰æ ‘Tçš„éé€’å½’ç®—æ³• BiTNode *s[MAXSIZE + 1]; int top = 0; while (T != NULL || top != 0) { while (T != NULL) { s[++top] = T; T = T-\u0026gt;lchild; } if (top != 0) { T = s[top--]; printf(\u0026#34;%c \u0026#34;, T-\u0026gt;data); T = T-\u0026gt;rchild; } } return 0; } 10.äºŒå‰æ’åºæ ‘ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 int Search_BST(BSTree t, int key, BSTree f, BSTree *p) { //åœ¨æŒ‡é’ˆtæ‰€æŒ‡çš„äºŒå‰æ’åºæ ‘ä¸ŠæŸ¥æ‰¾keyï¼ŒæˆåŠŸåˆ™pæŒ‡å‘è¯¥å…ƒç´ æ•°æ®ç»“ç‚¹å¹¶è¿”å›0 //å¦åˆ™pæŒ‡å‘æŸ¥æ‰¾è·¯å¾„ä¸Šæœ€åä¸€ä¸ªç»“ç‚¹å¹¶è¿”å›1ï¼ŒfæŒ‡å‘Tçš„åŒäº²ï¼Œåˆå§‹å€¼ä¸ºNULL if (!t) { *p = f; return 1; } else if (key == t-\u0026gt;data) { *p = t; return 0; } else if (key \u0026lt; t-\u0026gt;data) { return Search_BST(t-\u0026gt;lchild, key, t, p); } else return Search_BST(t-\u0026gt;rchild, key, t, p); } int Insert_BST(BSTree *t, int key) { //äºŒå‰æ’åºæ ‘çš„æ’å…¥ï¼Œå½“ä¸å­˜åœ¨keyæ—¶æ’å…¥å¹¶è¿”å›0ï¼Œå¦åˆ™è¿”å›1 BSTree p, s; p = NULL; if (Search_BST(*t, key, NULL, \u0026amp;p)) { s = (BSTree)malloc(sizeof(BSTNode)); s-\u0026gt;data = key; s-\u0026gt;lchild = s-\u0026gt;rchild = NULL; if (!p) *t = s; else if (key \u0026lt; p-\u0026gt;data) p-\u0026gt;lchild = s; else p-\u0026gt;rchild = s; return 0; } else return 1; } 14.å›¾çš„éå† ï¼ˆ1ï¼‰æ·±åº¦ä¼˜å…ˆ å…¥æ ˆæ—¶æ‰“å°ç»“ç‚¹ä¿¡æ¯\né€’å½’ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 void DFS(ALGraph *G, int v, int visited[]) { ArcNode *p; int w, i; visited[v] = 1; printf(\u0026#34;%d \u0026#34;, v); p = G-\u0026gt;vertices[v].firstarc; while (p != NULL) { w = p-\u0026gt;adjvex; if (visited[w] == 0) DFS(G, w, visited); p = p-\u0026gt;nextarc; } } éé€’å½’ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 void DFS1(ALGraph *G, int v) { ArcNode *p; int w, i; int visited[MAX_VERTEX_NUM]; ArcNode *s[MAX_VERTEX_NUM]; //é¡ºåºæ ˆ int top = 0; for (i = 1; i \u0026lt;= G-\u0026gt;vexnum; i++) visited[i] = 0; //è®¿é—®æ ‡å¿—æ•°ç»„åˆå§‹åŒ– visited[v] = 1; printf(\u0026#34;%2d\u0026#34;, v); p = G-\u0026gt;vertices[v].firstarc; while (p != NULL || top != 0) { while (p != NULL) { w = p-\u0026gt;adjvex; if (visited[w] == 0) { printf(\u0026#34;%2d\u0026#34;, w); visited[w] = 1; s[++top] = p; p = G-\u0026gt;vertices[w].firstarc; } else p = p-\u0026gt;nextarc; } if (top != 0) { p = s[top--]; p = p-\u0026gt;nextarc; } } } ï¼ˆ2ï¼‰å¹¿åº¦ä¼˜å…ˆ å‡ºé˜Ÿåˆ—æ—¶æ‰“å°ç»“ç‚¹ä¿¡æ¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 void BFS(ALGraph *G, int v) { ArcNode *p; int w, i; int queue[MAX_VERTEX_NUM], front = 0, rear = 0; // å®šä¹‰å¾ªç¯é˜Ÿåˆ— int visited[MAX_VERTEX_NUM]; for (i = 1; i \u0026lt;= G-\u0026gt;vexnum; i++) visited[i] = 0; //è®¿é—®æ ‡å¿—æ•°ç»„åˆå§‹åŒ– printf(\u0026#34;%2d\u0026#34;, v); //è¾“å‡ºè¢«è®¿é—®é¡¶ç‚¹çš„ç¼–å· visited[v] = 1; //ç½®å·²è®¿é—®æ ‡è®° rear = (rear + 1) % MAX_VERTEX_NUM; queue[rear] = v; //vè¿›é˜Ÿ while (front != rear) // é˜Ÿåˆ—ä¸ç©ºæ—¶å¾ªç¯ { front = (front + 1) % MAX_VERTEX_NUM; w = queue[front]; //å‡ºé˜Ÿå¹¶èµ‹ç»™w p = G-\u0026gt;vertices[w].firstarc; //æ‰¾wçš„ç¬¬ä¸€ä¸ªçš„é‚»æ¥ç‚¹ while (p != NULL) { if (visited[p-\u0026gt;adjvex] == 0) { printf(\u0026#34;%2d\u0026#34;, p-\u0026gt;adjvex); //è®¿é—®ä¹‹ visited[p-\u0026gt;adjvex] = 1; rear = (rear + 1) % MAX_VERTEX_NUM; //ç›¸é‚»é¡¶ç‚¹è¿›é˜Ÿ queue[rear] = p-\u0026gt;adjvex; } p = p-\u0026gt;nextarc; //æ‰¾ä¸‹ä¸€ä¸ªé‚»æ¥é¡¶ç‚¹ } } } 15.åŒå‘å†’æ³¡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 void BubbleSort1(int R[], int n) { //åŒå‘å†’æ³¡ int i, j, lastExchange, lastExchange1, i1, temp; i = n; //i æŒ‡ç¤ºæ— åºåºåˆ—ä¸­æœ€åä¸€ä¸ªè®°å½•çš„ä½ç½® i1 = 1; while (i \u0026gt; i1) { lastExchange = 1; //è®°å½•æ­£åºæœ€åä¸€æ¬¡äº¤æ¢å‘ç”Ÿçš„ä½ç½® lastExchange1 = n; //è®°å½•é€†åºæœ€åä¸€æ¬¡äº¤æ¢å‘ç”Ÿçš„ä½ç½® for (j = i1; j \u0026lt; i; j++) if (R[j] \u0026gt; R[j + 1]) { temp = R[j]; R[j] = R[j + 1]; R[j + 1] = temp; //é€†åºæ—¶äº¤æ¢ lastExchange = j; } for (j = lastExchange; j \u0026gt; i1; j--) if (R[j] \u0026lt; R[j - 1]) { temp = R[j]; R[j] = R[j - 1]; R[j - 1] = temp; //é€†åºæ—¶äº¤æ¢ lastExchange1 = j; } i = lastExchange; i1 = lastExchange1; } } ","date":"2021-01-10T15:06:20+08:00","image":"https://lbqaq.top/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%A4%8D%E4%B9%A0/83667969.webp","permalink":"https://lbqaq.top/p/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%A4%8D%E4%B9%A0/","title":"æ•°æ®ç»“æ„ç®—æ³•å¤ä¹ "},{"content":"ç”Ÿæˆéšæœºæ•° åœ¨Cè¯­è¨€ä¸­ï¼Œç”Ÿæˆéšæœºæ•°å¯ä»¥ä½¿ç”¨stdlib.hå¤´æ–‡ä»¶é‡Œçš„rand()æ¥ç”Ÿæˆï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; int main(){ int a = rand(); printf(\u0026#34;%d\\n\u0026#34;,a); return 0; } rand() ä¼šéšæœºç”Ÿæˆä¸€ä¸ªä½äº 0 ~ RAND_MAX ä¹‹é—´çš„æ•´æ•°ã€‚\nä½†æ˜¯è¿™æ ·ç”Ÿæˆçš„éšæœºæ•°æ¯æ¬¡å¼€å¯ç¨‹åºéƒ½æ˜¯ä¸€æ ·çš„ï¼Œåˆ™éœ€è¦ä½¿ç”¨srand()æ¥é‡æ–°æ’­ç§ï¼Œä¸€èˆ¬å¸¸ä¸\u0026lt;time.h\u0026gt;é‡Œçš„time()å‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚\n1 srand((unsigned)time(NULL)); è¿ç»­ç”Ÿæˆå¤šä¸ªéšæœºæ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;time.h\u0026gt; int main() { int a, i; srand((unsigned)time(NULL)); //ä½¿ç”¨forå¾ªç¯ç”Ÿæˆ10ä¸ªéšæœºæ•° for (i = 0; i \u0026lt; 10; i++) { a = rand(); printf(\u0026#34;%d \u0026#34;, a); } return 0; } ç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºæ•° æƒ³è¦ç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºæ•°ï¼Œåªè¦è¿›è¡Œ%è¿ç®—å°±å¥½äº†\n1 2 int a = rand() % 10; //äº§ç”Ÿ0~9çš„éšæœºæ•° int a = rand() % 10 + 1; //äº§ç”Ÿ1~10çš„éšæœºæ•° è¿ç»­ç”Ÿæˆä¸é‡å¤çš„éšæœºæ•° è¿™å°±æ˜¯æœ¬æ–‡çš„é‡ç‚¹äº†ãƒ¾(â€¢Ï‰â€¢`)o ï¼ˆå…¶å®å°±æ˜¯ä¸ºäº†è®°ä¸‹è¿™ä¸ªç®—æ³•æ‰æ°´äº†ä¸€ç¯‡æ–‡ç« ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 int *GetRandom(int m) { //æ ¹æ®ç»™å®šçš„mç”Ÿæˆéšæœºä¸é‡å¤çš„æ•°ç»„a int i, n, w, t; int *a; n = 2 * m; srand((unsigned int)time(0)); a = (int *)malloc(n * sizeof(int)); for (i = 0; i \u0026lt; n; i++) a[i] = i + 1; for (i = 1; i \u0026lt;= m; i++) { w = rand() % (n - i) + i; t = a[i]; a[i] = a[w]; a[w] = t; } return a; } ","date":"2020-12-22T19:36:53+08:00","image":"https://lbqaq.top/p/c%E8%AF%AD%E8%A8%80%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0/84444030.webp","permalink":"https://lbqaq.top/p/c%E8%AF%AD%E8%A8%80%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0/","title":"Cè¯­è¨€ç”Ÿæˆéšæœºæ•°"},{"content":"åŸºæœ¬æ“ä½œ å»ºç«‹ç‰ˆæœ¬åº“ï¼šgit init\næŸ¥çœ‹ç»“æœï¼šgit status\næŸ¥çœ‹ä¸åŒï¼šgit diff\nç‰ˆæœ¬å›é€€ æŸ¥çœ‹æäº¤æ—¥è®°ï¼šgit log\nå›é€€ï¼šgit reset --hard HEAD^\nHEAD^è¡¨ç¤ºä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ŒHEAD^^è¡¨ç¤ºå‰ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒHEAD~100è¡¨ç¤ºå‰100ä¸ªç‰ˆæœ¬\næ¢å¤ï¼šgit reflogæŸ¥çœ‹å‘½ä»¤å†å²ï¼Œç¡®å®šå›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬\næ’¤é”€ä¿®æ”¹ ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤git checkout -- file å·²ç»æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œåˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤git reset HEAD \u0026lt;file\u0026gt;ï¼Œç¬¬äºŒæ­¥æŒ‰1æ“ä½œã€‚ ä¸Šä¼  1 2 3 4 git remote add origin ä»“åº“é“¾æ¥ #å°†è¿œç¨‹ä»“åº“å’Œæœ¬åœ°ä»“åº“ç»‘å®š git add . git commit -m \u0026#34;æäº¤ä¿¡æ¯\u0026#34; git push -u origin è‡ªå·±å½“å‰çš„åˆ†æ”¯å #-uå°†æœ¬åœ°åº“å’Œè¿œç¨‹åº“çš„åˆ†æ”¯å…³è”ï¼Œä¹‹åå¯ä»¥ä¸åŠ  ä¸‹è½½ 1 git clone ä»“åº“é“¾æ¥ git cloneåˆ°å½“å‰æ–‡ä»¶å¤¹\n1 git clone ä»“åº“é“¾æ¥ . åˆ†æ”¯ç®¡ç† åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯ æŸ¥çœ‹åˆ†æ”¯ï¼šgit branch\nåˆ›å»ºåˆ†æ”¯ï¼šgit branch \u0026lt;name\u0026gt;\nåˆ‡æ¢åˆ†æ”¯ï¼šgit checkout \u0026lt;name\u0026gt;æˆ–è€…git switch \u0026lt;name\u0026gt;\nåˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b \u0026lt;name\u0026gt;æˆ–è€…git switch -c \u0026lt;name\u0026gt;\nåˆ é™¤åˆ†æ”¯ï¼šgit branch -d \u0026lt;name\u0026gt;\nåˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge \u0026lt;name\u0026gt;\nå½“Gitæ— æ³•è‡ªåŠ¨åˆå¹¶åˆ†æ”¯æ—¶ï¼Œå°±å¿…é¡»é¦–å…ˆè§£å†³å†²çªï¼Œè‡ªå·±æ‰‹åŠ¨ä¿®æ”¹å†²çªæ–‡ä»¶å†åˆå¹¶å³å¯ã€‚ æŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾ï¼šgit log --graph ä½¿ç”¨éå¿«é€Ÿæ¨¡å¼åˆå¹¶ï¼Œæœ‰commitï¼šgit merge --no-ff -m \u0026quot;merge with no-ff\u0026quot; dev Bugåˆ†æ”¯ éœ€è¦ç´§æ€¥å¤„ç†Bugæ—¶ï¼Œå¯ä»¥ä½¿ç”¨git stashå°†ç°åœ¨çš„å·¥ä½œåŒºæš‚å­˜\næ¢å¤åŸæ¥çš„å·¥ä½œåŒº\næ¢å¤ä½†ä¸åˆ é™¤stashå†…å®¹ï¼šgit stash apply æ‰‹åŠ¨åˆ é™¤stashå†…å®¹ï¼šgit stash drop æ¢å¤ä¸”åˆ é™¤stashå†…å®¹ï¼šgit stash pop å¯ä»¥å¤šæ¬¡stashï¼Œæ¢å¤çš„æ—¶å€™ï¼Œå…ˆç”¨git stash listæŸ¥çœ‹ï¼Œç„¶åæ¢å¤æŒ‡å®šçš„stashï¼Œå¦‚ï¼š\n1 git stash apply stash@{0} åœ¨masteråˆ†æ”¯ä¸Šä¿®å¤çš„bugï¼Œæƒ³è¦åˆå¹¶åˆ°å½“å‰devåˆ†æ”¯ï¼Œå¯ä»¥ç”¨git cherry-pick \u0026lt;commit\u0026gt;å‘½ä»¤ï¼ŒæŠŠbugæäº¤çš„ä¿®æ”¹â€œå¤åˆ¶â€åˆ°å½“å‰åˆ†æ”¯ï¼Œé¿å…é‡å¤åŠ³åŠ¨ã€‚\nå¤šäººåä½œ æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼Œä½¿ç”¨git remote -v\nä»æœ¬åœ°æ¨é€åˆ†æ”¯ï¼Œä½¿ç”¨git push origin branch-name\nå¦‚æœå†²çªï¼Œå…ˆgit pullæŠ“å–è¿œç¨‹çš„æ–°æäº¤ï¼Œå¤„ç†å¥½åå†push\nåœ¨æœ¬åœ°åˆ›å»ºå’Œè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„åˆ†æ”¯ï¼šgit checkout -b branch-name origin/branch-name\nå»ºç«‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è”ï¼šgit branch --set-upstream branch-name origin/branch-name\nå°†éç›´çº¿çš„æäº¤æ—¥è®°å˜ä¸ºç›´çº¿ï¼šgit rebase\næ ‡ç­¾ç®¡ç† åˆ›å»ºæ ‡ç­¾ æ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼šgit tag \u0026lt;name\u0026gt;,é»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit id\næŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼šgit tag -a \u0026lt;tagname\u0026gt; -m \u0026quot;blablabla...\u0026quot;\næŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ï¼šgit tag\næ ‡ç­¾ç®¡ç† æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼šgit push origin \u0026lt;tagname\u0026gt; æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼šgit push origin --tags åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼šgit tag -d \u0026lt;tagname\u0026gt; åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ï¼šgit push origin :refs/tags/\u0026lt;tagname\u0026gt; ","date":"2020-12-16T13:16:45+08:00","image":"https://lbqaq.top/p/git/79008828.webp","permalink":"https://lbqaq.top/p/git/","title":"Gitçš„å¸¸ç”¨å‘½ä»¤"},{"content":"ä¸»é¢˜ç›¸å…³ FrontMatter å­—æ®µå«ä¹‰\n1 2 3 4 5 6 7 8 9 10 11 12 title: æ ‡é¢˜ description: æè¿° image: æ˜¾ç¤ºçš„ç‰¹è‰²å›¾ç‰‡ comments: æ˜¾ç¤º / éšè—è¯„è®ºåŒº(T/F) license: æ–‡ç« åè®® è¾“å…¥ false å¯ä»¥éšè— hidden: éšè—æ–‡ç« ï¼ˆä¸åœ¨é¦–é¡µï¼Œå½’æ¡£ç­‰é¡µé¢æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡é“¾æ¥è®¿é—®ï¼‰ math: æ˜¯å¦åŠ è½½ KaTeX è„šæœ¬ slug: å›ºå®šé“¾æ¥ draft: æ˜¯å¦ä¸ºè‰ç¨¿ categories: åˆ†ç±» tags: æ ‡ç­¾ lastmod: ä¸Šæ¬¡æ›´æ–°æ—¶é—´ MarkDownç›¸å…³ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # æˆ‘æ˜¯ä¸€çº§æ ‡é¢˜ ## æˆ‘æ˜¯äºŒçº§æ ‡é¢˜ å¯å¯¹åº”1-6çº§æ ‡é¢˜ *æ–œä½“æ–‡æœ¬* **ç²—ä½“æ–‡æœ¬** ***ç²—æ–œä½“æ–‡æœ¬*** ä¸€è¡Œä¸­ç”¨ä¸‰ä¸ªä»¥ä¸Šçš„æ˜Ÿå·*ã€å‡å·-ã€åº•çº¿_æ¥å»ºç«‹ä¸€ä¸ªåˆ†éš”çº¿ ~~åˆ é™¤çº¿~~ \u0026lt;u\u0026gt;å¸¦ä¸‹åˆ’çº¿æ–‡æœ¬\u0026lt;/u\u0026gt; åˆ›å»ºè„šæ³¨æ ¼å¼ç±»ä¼¼è¿™æ · [^JiaoZhu]ã€‚ [^JiaoZhu]: è„šæ³¨çš„å†…å®¹ åˆ—è¡¨ï¼š*ã€+ã€-ã€1. \u0026gt; åŒºå— [é“¾æ¥æ–‡æœ¬](ç½‘å€) å›¾ç‰‡åœ¨å‰åŠ ! | è¡¨å¤´ | è¡¨å¤´ | | ---- | ---- | | å•å…ƒæ ¼ | å•å…ƒæ ¼ | | å•å…ƒæ ¼ | å•å…ƒæ ¼ | -: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å³å¯¹é½ã€‚ :- è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å·¦å¯¹é½ã€‚ :-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…ä¸­å¯¹é½ã€‚ ","date":"2020-12-15T18:02:14+08:00","image":"https://lbqaq.top/p/blog%E5%B8%B8%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4/80228475.webp","permalink":"https://lbqaq.top/p/blog%E5%B8%B8%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4/","title":"Blogå¸¸ç”¨çš„å‘½ä»¤"}]