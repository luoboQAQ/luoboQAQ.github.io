<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>å®‰å“ on luoboQAQ</title><link>https://lbqaq.top/tags/%E5%AE%89%E5%8D%93/</link><description>Recent content in å®‰å“ on luoboQAQ</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 15 Sep 2023 15:52:44 +0800</lastBuildDate><atom:link href="https://lbqaq.top/tags/%E5%AE%89%E5%8D%93/index.xml" rel="self" type="application/rss+xml"/><item><title>ä»é›¶å¼€å§‹ç¼–å†™Xposedæ¨¡å—</title><link>https://lbqaq.top/p/init-xposed/</link><pubDate>Fri, 21 Jul 2023 14:22:44 +0800</pubDate><guid>https://lbqaq.top/p/init-xposed/</guid><description>&lt;img src="https://lbqaq.top/p/init-xposed/109457609.webp" alt="Featured image of post ä»é›¶å¼€å§‹ç¼–å†™Xposedæ¨¡å—" />&lt;p>ä¹‹å‰å†™è¿‡ä¸€ç¯‡å…³äº&lt;a class="link" href="https://lbqaq.top/p/%E7%AE%80%E6%98%93magisk%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%B6%E4%BD%9C/" target="_blank" rel="noopener"
>Magiskæ¨¡å—&lt;/a>çš„ç¼–å†™çš„æ–‡ç« ï¼Œä¸è¿‡Magiskä¿®æ”¹çš„éƒ½æ˜¯æ¯”è¾ƒåç³»ç»Ÿçš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”¨çš„å¹¶ä¸æ˜¯å¾ˆå¤šã€‚äºæ˜¯æˆ‘ä¾¿æŠŠç›®å…‰è½¬å‘Xposedï¼Œæ¯•ç«Ÿä¼šHookçœŸçš„å¤ªé…·è¾£ğŸ˜&lt;/p>
&lt;h2 id="xposedçš„åŸºæœ¬æ¦‚å¿µ">&lt;a href="#xposed%e7%9a%84%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5" class="header-anchor">&lt;/a>Xposedçš„åŸºæœ¬æ¦‚å¿µ
&lt;/h2>&lt;p>æåˆ°Xposedï¼Œçˆ±ç©æœºçš„ç”¨æˆ·éƒ½åº”è¯¥å¬è¿‡ä»–çš„å¤§åï¼Œä½œä¸ºä¸€æ¬¾å¯ä»¥åœ¨ä¸ä¿®æ”¹APKçš„æƒ…å†µä¸‹å½±å“ç¨‹åºè¿è¡Œçš„æ¡†æ¶ï¼Œå¯ä»¥åŸºäºå®ƒå¯ä»¥åˆ¶ä½œå‡ºè®¸å¤šåŠŸèƒ½å¼ºå¤§çš„æ¨¡å—ï¼Œä¸”åœ¨åŠŸèƒ½ä¸å†²çªçš„æƒ…å†µä¸‹åŒæ—¶è¿ä½œã€‚å¾®ä¿¡é˜²æ’¤å›ã€æ­¥æ•°ä¿®æ”¹ã€å»å¹¿å‘Šã€ç¾åŒ–&amp;hellip;&amp;hellip;.ä»–èƒ½å®ç°è®¸è®¸å¤šå¤šçš„åŠŸèƒ½ï¼Œå¯ä»¥è¯´æ²¡æœ‰å®ƒç©æœºçš„ä¸–ç•Œå°†ä¼šå°‘å¾ˆå¤šçš„ä¹è¶£ã€‚&lt;/p>
&lt;p>å®ƒçš„åŸç†å°±æ˜¯é€šè¿‡æ›¿æ¢ç³»ç»ŸåŸæœ¬çš„&lt;code>app_process&lt;/code>ï¼ŒåŠ è½½ä¸€ä¸ªé¢å¤–çš„jaråŒ…ï¼Œä»è€Œå®ç°å¯¹zygoteè¿›ç¨‹åŠå…¶åˆ›å»ºçš„Dalvik/ARTè™šæ‹Ÿæœºçš„åŠ«æŒã€‚&lt;/p>
&lt;p>æ²¡å¬æ‡‚ï¼Ÿæ²¡å…³ç³»ï¼Œ&lt;del>æˆ‘ä¹Ÿä¸æ‡‚&lt;/del>ã€‚ç›®å‰æˆ‘ä»¬åªè¦å…³æ³¨å¦‚ä½•ä½¿ç”¨å³å¯äº†ï¼Œè‡³äºåŸç†å¯ä»¥å…ˆæ”¾ä¸€æ”¾ã€‚&lt;/p>
&lt;h2 id="ç¯å¢ƒå‡†å¤‡">&lt;a href="#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87" class="header-anchor">&lt;/a>ç¯å¢ƒå‡†å¤‡
&lt;/h2>&lt;p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸€å°å¯ä»¥å®‰è£…Xposedæ¡†æ¶çš„æ‰‹æœºï¼ˆæ¨èLSPosedã€Android 10+ï¼‰&lt;/li>
&lt;li>ä¸€å°å¯ä»¥ç¼–å†™ä»£ç å¹¶ä¸”è£…æœ‰jdkçš„ç”µè„‘&lt;/li>
&lt;li>ä¸€ä¸ªåå«&lt;a class="link" href="https://developer.android.com/studio" target="_blank" rel="noopener"
>Android Studio&lt;/a>çš„è½¯ä»¶ï¼ˆæˆ‘ä¸»æ‰“ä¸€ä¸ªå›é€†ï¼Œç”¨&lt;a class="link" href="https://www.jetbrains.com/zh-cn/idea/download/" target="_blank" rel="noopener"
>IDEA&lt;/a>åŒæ ·å¯ä»¥ï¼‰&lt;/li>
&lt;li>ä¸€ä¸ªåç¼–è¯‘è½¯ä»¶ï¼Œå¦‚ï¼š&lt;a class="link" href="https://github.com/skylot/jadx" target="_blank" rel="noopener"
>JADX&lt;/a>&lt;/li>
&lt;li>ä¸€ä¸ªå¯ä»¥æŸ¥çœ‹å¸ƒå±€çš„Appï¼Œå¦‚ï¼šå¼€å‘è€…åŠ©æ‰‹&lt;/li>
&lt;/ul>
&lt;p>è¿™æ¬¡æˆ‘æ‰“ç®—ä»ä¸€ä¸ªå®ä¾‹å‡ºå‘ï¼šå°æ˜æ‰‹æœºä¸Šè£…äº†ä¸€äº›æ¶æ„è½¯ä»¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡Xposedè¿›è¡ŒHookï¼Œä¸è®©å°æ˜å¯åŠ¨è¿™äº›è½¯ä»¶ã€‚&lt;/p>
&lt;h2 id="å‡†å¤‡å·¥ä½œ">&lt;a href="#%e5%87%86%e5%a4%87%e5%b7%a5%e4%bd%9c" class="header-anchor">&lt;/a>å‡†å¤‡å·¥ä½œ
&lt;/h2>&lt;h3 id="åˆ›å»ºé¡¹ç›®å¼•å…¥ä¾èµ–">&lt;a href="#%e5%88%9b%e5%bb%ba%e9%a1%b9%e7%9b%ae%e5%bc%95%e5%85%a5%e4%be%9d%e8%b5%96" class="header-anchor">&lt;/a>åˆ›å»ºé¡¹ç›®&amp;amp;å¼•å…¥ä¾èµ–
&lt;/h3>&lt;p>é¦–å…ˆåœ¨IDEAé€‰æ‹©æ–°å»ºé¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆå™¨ä¸‹æœ‰Androidè¿™é¡¹ï¼Œæˆ‘ä»¬é€‰æ‹©å®ƒã€‚&lt;/p>
&lt;p>ç¬¬ä¸€æ¬¡é€‰æ‹©æ—¶å¯èƒ½ä¼šè¦æ±‚ä½ ä¸‹è½½å®‰å“çš„SDKï¼ŒæŒ‰ç…§æŒ‡ç¤ºä¸€æ­¥ä¸€æ­¥è¿›è¡Œå°±å¥½ã€‚&lt;/p>
&lt;h4 id="java">&lt;a href="#java" class="header-anchor">&lt;/a>Java
&lt;/h4>&lt;p>æˆ‘ä»¬é€‰æ‹©åˆ›å»ºä¸€ä¸ª&lt;code>No Activity&lt;/code>ï¼Œè¯­è¨€é€‰æ‹©&lt;code>Java&lt;/code>ï¼ŒSDKé€‰é»˜è®¤çš„&lt;code>API 24&lt;/code>å°±å¯ã€‚&lt;/p>
&lt;p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥Xposedçš„åº“ï¼Œä¸è¿‡å®ƒå¹¶æ²¡æœ‰ä¸Šä¼ åˆ°MavenCentralä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨&lt;code>settings.gradle&lt;/code>é‡Œä¿®æ”¹ä¸€ä¸‹(gradle 7.0+)&lt;/p>
&lt;p>æ‰“å¼€&lt;code>settings.gradle&lt;/code>ï¼Œæ·»åŠ ä¸€è¡Œä»£ç &lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gradle" data-lang="gradle">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dependencyResolutionManagement&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">repositoriesMode&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">set&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">RepositoriesMode&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">FAIL_ON_PROJECT_REPOS&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">repositories&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">google&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mavenCentral&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maven&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="n">url&lt;/span> &lt;span class="s1">&amp;#39;https://api.xposed.info/&amp;#39;&lt;/span> &lt;span class="o">}&lt;/span> &lt;span class="c1">// æ·»åŠ è¿™ä¸€è¡Œå³å¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¹‹åï¼Œè¿›å…¥æˆ‘ä»¬appç›®å½•ä¸‹çš„build.gradleï¼Œå¼•å…¥xposedçš„ä¾èµ–&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gradle" data-lang="gradle">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dependencies&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">compileOnly&lt;/span> &lt;span class="s1">&amp;#39;de.robv.android.xposed:api:82&amp;#39;&lt;/span> &lt;span class="c1">//æ·»åŠ æˆ‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// compileOnly &amp;#39;de.robv.android.xposed:api:82:sources&amp;#39; // ä¸è¦å¯¼å…¥æºç ï¼Œè¿™ä¼šå¯¼è‡´ideaæ— æ³•ç´¢å¼•æ–‡ä»¶ï¼Œä»è€Œè®©è¯­æ³•æç¤ºå¤±æ•ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬è¿˜è¦åœ¨&lt;code>./app/src/main/res/values&lt;/code>ç›®å½•ä¸‹åˆ›å»º&lt;code>arrays.xml&lt;/code>ï¼Œå¡«å…¥ä¸‹é¢çš„å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;resources&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;string-array&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;xposedscope&amp;#34;&lt;/span> &lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- è¿™é‡Œå¡«å†™æ¨¡å—çš„ä½œç”¨åŸŸåº”ç”¨çš„åŒ…åï¼Œå¯ä»¥å¡«å¤šä¸ªã€‚ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&amp;gt;&lt;/span>ceui.lisa.pixiv&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&amp;gt;&lt;/span>com.xjs.ehviewer&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;item&amp;gt;&lt;/span>com.picacomic.fregata&lt;span class="nt">&amp;lt;/item&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/string-array&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/resources&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™ä¸€æ­¥ä¸»è¦æ˜¯æŒ‡å®šæ¨¡å—çš„ä½œç”¨åŸŸåŒ…åï¼Œæ•ˆæœå°±æ˜¯åœ¨Lsposedä¸­å‹¾é€‰ä½œç”¨åŸŸæ—¶ä¼šåœ¨åº”ç”¨ä¸‹æç¤ºæ¨èåº”ç”¨ã€‚&lt;/p>
&lt;p>&lt;img src="https://lbqaq.top/p/init-xposed/IMAGE/1.jpg"
width="864"
height="956"
srcset="https://lbqaq.top/p/init-xposed/IMAGE/1_hu_844a5e10eae581d7.jpg 480w, https://lbqaq.top/p/init-xposed/IMAGE/1_hu_a27c19c76dcb8ce0.jpg 1024w"
loading="lazy"
alt="æ¨èåº”ç”¨æ•ˆæœ"
class="gallery-image"
data-flex-grow="90"
data-flex-basis="216px"
>&lt;/p>
&lt;p>æœ€åï¼Œæˆ‘ä»¬åœ¨Runé‚£é‡Œç¼–è¾‘ä¸€ä¸‹å¯åŠ¨é…ç½®ï¼Œå‹¾é€‰&lt;code>Always install with package manager&lt;/code>å¹¶ä¸”å°†&lt;code>Launch Options&lt;/code>æ”¹æˆ&lt;code>Nothing&lt;/code>&lt;/p>
&lt;h4 id="kotlin">&lt;a href="#kotlin" class="header-anchor">&lt;/a>Kotlin
&lt;/h4>&lt;p>åˆ›å»ºé¡¹ç›®çš„éƒ¨åˆ†å’ŒJavaçš„è®¾ç½®æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯éœ€è¦å°†è¯­è¨€åˆ‡æ¢ä¸€ä¸‹ã€‚æ–°ç‰ˆæœ¬çš„Android Studioå°†åŸæ¥çš„æ‰“åŒ…è¯­è¨€æ¢æˆäº†Kotlinï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è®¾ç½®æœ‰ä¸€äº›ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚&lt;a class="link" href="#20240915" >2024.09.15æ›´æ–°&lt;/a>&lt;/p>
&lt;p>åŸæ¥çš„&lt;code>settings.gradle&lt;/code>å˜ä¸º&lt;code>settings.gradle.kts&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gradle" data-lang="gradle">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dependencyResolutionManagement&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">repositoriesMode&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">set&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">RepositoriesMode&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">FAIL_ON_PROJECT_REPOS&lt;/span>&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">repositories&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">google&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mavenCentral&lt;/span>&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maven&lt;/span> &lt;span class="o">{&lt;/span> &lt;span class="n">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">uri&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;https://api.xposed.info/&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">}&lt;/span> &lt;span class="c1">//æ·»åŠ è¿™ä¸€è¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŸæ¥çš„&lt;code>build.gradle&lt;/code>å˜ä¸º&lt;code>build.gradle.kts&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gradle" data-lang="gradle">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dependencies&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">compileOnly&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s2">&amp;#34;de.robv.android.xposed:api:82&amp;#34;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="c1">//æ·»åŠ æˆ‘
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å£°æ˜æ¨¡å—">&lt;a href="#%e5%a3%b0%e6%98%8e%e6%a8%a1%e5%9d%97" class="header-anchor">&lt;/a>å£°æ˜æ¨¡å—
&lt;/h3>&lt;p>æ¥ä¸‹æ¥å°±æ˜¯è¦å£°æ˜æˆ‘ä»¬æ˜¯ä¸€ä¸ªXposedæ¨¡å—ï¼Œæ–¹ä¾¿æ¡†æ¶å‘ç°ã€‚&lt;/p>
&lt;p>åœ¨&lt;code>./app/src/main/AndroidManifest.xml&lt;/code>é‡Œï¼Œæˆ‘ä»¬å°†&lt;code>&amp;lt;application ... /&amp;gt;&lt;/code>æ”¹æˆä»¥ä¸‹å½¢å¼ï¼ˆæ³¨æ„ï¼Œæ˜¯æ”¹æˆï¼å°±æ˜¯æŠŠç»“å°¾çš„&lt;code>/&amp;gt;&lt;/code>æ¢æˆ&lt;code>&amp;gt; &amp;lt;/application&amp;gt;&lt;/code>ï¼‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;application&lt;/span> &lt;span class="err">...&lt;/span> &lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- æ˜¯å¦æ˜¯xposedæ¨¡å—ï¼Œxposedæ ¹æ®è¿™ä¸ªæ¥åˆ¤æ–­æ˜¯å¦æ˜¯æ¨¡å— --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;meta-data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:name=&lt;/span>&lt;span class="s">&amp;#34;xposedmodule&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:value=&lt;/span>&lt;span class="s">&amp;#34;true&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- æ¨¡å—æè¿°ï¼Œæ˜¾ç¤ºåœ¨xposedæ¨¡å—åˆ—è¡¨é‚£é‡Œç¬¬äºŒè¡Œ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;meta-data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:name=&lt;/span>&lt;span class="s">&amp;#34;xposeddescription&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:value=&lt;/span>&lt;span class="s">&amp;#34;ä¸å¯ä»¥æ¶©æ¶©&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- æœ€ä½xposedç‰ˆæœ¬å·(libæ–‡ä»¶åå¯çŸ¥,ä¸€èˆ¬å¡«54å³å¯) --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;meta-data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:name=&lt;/span>&lt;span class="s">&amp;#34;xposedminversion&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:value=&lt;/span>&lt;span class="s">&amp;#34;54&amp;#34;&lt;/span> &lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- æ¨¡å—ä½œç”¨åŸŸ --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;meta-data&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:name=&lt;/span>&lt;span class="s">&amp;#34;xposedscope&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">android:resource=&lt;/span>&lt;span class="s">&amp;#34;@array/xposedscope&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/application&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶ååœ¨&lt;code>src/main&lt;/code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åå«&lt;code>assets&lt;/code>ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å«&lt;code>xposed_init&lt;/code>ï¼Œ&lt;strong>æ³¨æ„ï¼Œå®ƒæ²¡æœ‰åç¼€åï¼ï¼&lt;/strong>ã€‚&lt;/p>
&lt;p>æ¥ç€æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå…¥å£ç±»ï¼Œåå«&lt;code>MainHook&lt;/code>ï¼ˆæˆ–è€…éšä¾¿ä½ æƒ³å–ä»€ä¹ˆåå­—éƒ½è¡Œï¼‰ï¼Œåˆ›å»ºå¥½åå›åˆ°æˆ‘ä»¬çš„&lt;code>xposed_init&lt;/code>é‡Œå¹¶ç”¨æ–‡æœ¬æ–‡ä»¶çš„æ–¹å¼æ‰“å¼€å®ƒï¼Œè¾“å…¥æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ç±»çš„å®Œæ•´è·¯å¾„ã€‚å¦‚ï¼š&lt;code>top.lbqaq.nosese.MainHook&lt;/code>ï¼ŒåŒæ—¶&lt;strong>æ³¨æ„å¤§å°å†™&lt;/strong>ã€‚&lt;/p>
&lt;p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¼å¼€å§‹ç¼–å†™Xposedæ¨¡å—äº†ã€‚&lt;/p>
&lt;h2 id="æ¨¡å—ç¼–å†™">&lt;a href="#%e6%a8%a1%e5%9d%97%e7%bc%96%e5%86%99" class="header-anchor">&lt;/a>æ¨¡å—ç¼–å†™
&lt;/h2>&lt;h3 id="mainhook">&lt;a href="#mainhook" class="header-anchor">&lt;/a>MainHook
&lt;/h3>&lt;p>åœ¨&lt;code>MainHook&lt;/code>é‡Œï¼Œæˆ‘ä»¬éœ€è¦å®ç°Xposedçš„IXposedHookLoadPackageæ¥å£ï¼Œä»¥ä¾¿æ‰§è¡ŒHookæ“ä½œã€‚å°†ä»¥ä¸‹å†…å®¹æ›¿æ¢åŸæ¥çš„ç±»&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">de.robv.android.xposed.IXposedHookLoadPackage&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kn">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nn">de.robv.android.xposed.callbacks.XC_LoadPackage&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">class&lt;/span> &lt;span class="nc">MainHook&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">implements&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">IXposedHookLoadPackage&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">handleLoadPackage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">XC_LoadPackage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">LoadPackageParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">throws&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Throwable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// è¿‡æ»¤ä¸å¿…è¦çš„åº”ç”¨&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">packageName&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ceui.lisa.pixiv&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// æ‰§è¡ŒHook&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">hook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">hook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">XC_LoadPackage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">LoadPackageParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// å…·ä½“æµç¨‹&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äºKotlinï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="nn">de.robv.android.xposed.IXposedHookLoadPackage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="nn">de.robv.android.xposed.callbacks.XC_LoadPackage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">MainHook&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">IXposedHookLoadPackage&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">handleLoadPackage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nc">XC_LoadPackage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LoadPackageParam&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¿‡æ»¤ä¸å¿…è¦çš„åº”ç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">packageName&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;ceui.lisa.pixiv&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ‰§è¡ŒHook
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">hook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">private&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">hook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nc">XC_LoadPackage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LoadPackageParam&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å…·ä½“æµç¨‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„å‡†å¤‡å·¥ä½œå·²ç»å®Œæˆï¼Œå®‰è£…æ¨¡å—å¹¶åœ¨æ¡†æ¶ä¸­æ¿€æ´»å®ƒï¼&lt;/p>
&lt;h3 id="é˜»æ­¢åº”ç”¨å¯åŠ¨">&lt;a href="#%e9%98%bb%e6%ad%a2%e5%ba%94%e7%94%a8%e5%90%af%e5%8a%a8" class="header-anchor">&lt;/a>é˜»æ­¢åº”ç”¨å¯åŠ¨
&lt;/h3>&lt;p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åç¼–è¯‘ç¨‹åºæ¥æ‰¾åˆ°éœ€è¦Hookçš„ç‚¹ã€‚æ ¹æ®å®ä¾‹çš„è¦æ±‚ï¼Œæˆ‘ä»¬éœ€è¦é˜»æ­¢å°æ˜å¯åŠ¨æŸäº›åº”ç”¨ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åªéœ€è¦Hookå¯åŠ¨å‡½æ•°ï¼Œè®©å…¶æ— æ³•è¿è¡Œå³å¯ã€‚&lt;/p>
&lt;p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£Androidçš„å››å¤§ç»„ä»¶ä¹‹ä¸€â€”â€”&amp;ldquo;Activity(æ´»åŠ¨)&amp;rdquo;&lt;/p>
&lt;blockquote>
&lt;p>åœ¨åº”ç”¨ä¸­çš„ä¸€ä¸ªActivityå¯ä»¥ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç•Œé¢ï¼Œæ„æ€å¯ä»¥ç†è§£ä¸ºâ€œæ´»åŠ¨â€ï¼Œå³ä¸€ä¸ªæ´»åŠ¨å¼€å§‹ï¼Œä»£è¡¨ Activityç»„ä»¶å¯åŠ¨ï¼Œæ´»åŠ¨ç»“æŸï¼Œä»£è¡¨ä¸€ä¸ªActivityçš„ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚ä¸€ä¸ªAndroidåº”ç”¨å¿…é¡»é€šè¿‡Activityæ¥è¿è¡Œå’Œå¯åŠ¨ï¼ŒActivityçš„ç”Ÿå‘½å‘¨æœŸäº¤ç»™ç³»ç»Ÿç»Ÿä¸€ç®¡ç†ã€‚&lt;/p>&lt;/blockquote>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å‡½æ•°åç§°&lt;/th>
&lt;th>æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>onCreate()&lt;/td>
&lt;td>ä¸€ä¸ªActivityå¯åŠ¨åç¬¬ä¸€ä¸ªè¢«è°ƒç”¨çš„å‡½æ•°ï¼Œå¸¸ç”¨æ¥åœ¨æ­¤æ–¹æ³•ä¸­è¿›è¡ŒActivityçš„ä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚ä¾‹å¦‚åˆ›å»ºViewï¼Œç»‘å®šæ•°æ®ï¼Œæ³¨å†Œç›‘å¬ï¼ŒåŠ è½½å‚æ•°ç­‰ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>onStart()&lt;/td>
&lt;td>å½“Activityæ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ—¶ï¼Œæ­¤æ–¹æ³•è¢«è°ƒç”¨ä½†æ­¤æ—¶è¿˜æ— æ³•è¿›è¡Œä¸ç”¨æˆ·çš„äº¤äº’æ“ä½œã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>onResume()&lt;/td>
&lt;td>è¿™ä¸ªæ–¹æ³•åœ¨onStart()ä¹‹åè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯åœ¨Activityå‡†å¤‡å¥½ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’çš„æ—¶å€™è°ƒç”¨ï¼Œæ­¤æ—¶çš„Activityä¸€å®šä½äºActivityæ ˆé¡¶ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>onPause()&lt;/td>
&lt;td>è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ç³»ç»Ÿå‡†å¤‡å»å¯åŠ¨æˆ–è€…æ¢å¤å¦å¤–ä¸€ä¸ªActivityçš„æ—¶å€™è°ƒç”¨ï¼Œé€šå¸¸åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œä¸€äº›é‡Šæ”¾èµ„æºçš„æ–¹æ³•ï¼Œä»¥åŠä¿å­˜ä¸€äº›å…³é”®æ•°æ®ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>onStop()&lt;/td>
&lt;td>è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨Activityå®Œå…¨ä¸å¯è§çš„æ—¶å€™è°ƒç”¨çš„ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>onDestroy()&lt;/td>
&lt;td>è¿™ä¸ªæ–¹æ³•åœ¨Activityé”€æ¯ä¹‹å‰è°ƒç”¨ï¼Œä¹‹åActivityçš„çŠ¶æ€ä¸ºé”€æ¯çŠ¶æ€ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>onRestart()&lt;/td>
&lt;td>å½“Activityä»åœæ­¢stopçŠ¶æ€æ¢è¿›å…¥startçŠ¶æ€æ—¶è°ƒç”¨çŠ¶æ€ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>å½“ Activity è¿›å…¥æ–°çŠ¶æ€æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨å…¶ä¸­æ¯ä¸ªå›è°ƒã€‚&lt;/p>
&lt;p>&lt;img src="https://lbqaq.top/p/init-xposed/IMAGE/activity_lifecycle.png"
width="513"
height="663"
srcset="https://lbqaq.top/p/init-xposed/IMAGE/activity_lifecycle_hu_dee1c1ccebe80832.png 480w, https://lbqaq.top/p/init-xposed/IMAGE/activity_lifecycle_hu_5724e3eb302afd88.png 1024w"
loading="lazy"
alt="Activityç”Ÿå‘½å‘¨æœŸ"
class="gallery-image"
data-flex-grow="77"
data-flex-basis="185px"
>&lt;/p>
&lt;p>é‚£ä¹ˆï¼Œæˆ‘ä»¬çš„æ€è·¯å°±å¾ˆæ˜ç¡®äº†ï¼šåªè¦æ‰¾åˆ°è¿™äº›ç¨‹åºçš„èµ·å§‹Activityï¼Œå¹¶Hookå®ƒçš„&lt;code>onCreate()&lt;/code>å‡½æ•°ï¼Œåœ¨å…¶å¯åŠ¨æ—¶å°±å°†å…¶æ€æ­»ï¼Œè¿™æ ·èƒ½å®ç°æ— æ³•å¯åŠ¨è¯¥ç¨‹åºã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä½¿ç”¨å¼€å‘è€…åŠ©æ‰‹ï¼Œé€‰æ‹©å¸ƒå±€æŸ¥çœ‹ï¼Œç„¶åæ‰“å¼€ç›®æ ‡åº”ç”¨ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ˜¾ç¤ºäº†å½“å‰çš„åŒ…åå’Œå½“å‰Activityã€‚&lt;/p>
&lt;p>&lt;img src="https://lbqaq.top/p/init-xposed/IMAGE/2.jpg"
width="432"
height="960"
srcset="https://lbqaq.top/p/init-xposed/IMAGE/2_hu_52b78cececac8714.jpg 480w, https://lbqaq.top/p/init-xposed/IMAGE/2_hu_15ac3d3dccafb44b.jpg 1024w"
loading="lazy"
alt="å¸ƒå±€æŸ¥çœ‹"
class="gallery-image"
data-flex-grow="45"
data-flex-basis="108px"
>&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨jadx-guiï¼Œåç¼–è¯‘è¯¥åº”ç”¨ï¼Œæ‰¾åˆ°è¯¥Activity(&lt;code>ceui.lisa.activities.MainActivity&lt;/code>)ï¼Œå¹¶å¯»æ‰¾æ˜¯å¦æœ‰&lt;code>onCreate()&lt;/code>å‡½æ•°ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥Hookå³å¯ã€‚&lt;/p>
&lt;p>&lt;img src="https://lbqaq.top/p/init-xposed/IMAGE/image-20230721100655336.png"
width="1790"
height="1004"
srcset="https://lbqaq.top/p/init-xposed/IMAGE/image-20230721100655336_hu_730d6091497d831b.png 480w, https://lbqaq.top/p/init-xposed/IMAGE/image-20230721100655336_hu_a03e790876a820cf.png 1024w"
loading="lazy"
alt="jadx-guiåç¼–è¯‘"
class="gallery-image"
data-flex-grow="178"
data-flex-basis="427px"
>&lt;/p>
&lt;p>ç„¶è€Œï¼Œè¿™ä¸ªç¨‹åºå±…ç„¶æ²¡æœ‰ğŸ˜¥ï¼Œè¯´æ˜å®ƒæ²¡æœ‰é‡å†™è¯¥æ–¹æ³•ï¼Œé‚£è¯¥å¦‚ä½•åšå‘¢ï¼Ÿè¿™æ—¶å°±å¯ä»¥ç”¨ç¬¬äºŒç§æ–¹æ³•äº†ã€‚&lt;/p>
&lt;h3 id="éå†æ‰€æœ‰ç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•">&lt;a href="#%e9%81%8d%e5%8e%86%e6%89%80%e6%9c%89%e7%b1%bb%e4%b8%8b%e7%9a%84%e6%89%80%e6%9c%89%e6%96%b9%e6%b3%95" class="header-anchor">&lt;/a>éå†æ‰€æœ‰ç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•
&lt;/h3>&lt;p>ä»æ ‡é¢˜å°±èƒ½çœ‹å‡ºæ¥ï¼Œæˆ‘ç›´æ¥æŠŠä½ æ‰€æœ‰èƒ½Hookçš„æ–¹æ³•å…¨éƒ¨è¯»å‡ºæ¥ï¼Œé‚£ä¸å°±éšä¾¿æˆ‘æŒ‘äº†å˜›ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬çŸ¥é“ï¼ŒJavaç¨‹åºéƒ½è¿è¡Œåœ¨jvmè™šæ‹Ÿæœºä¸­ï¼Œjvmè™šæ‹Ÿæœºé€šè¿‡ClassLoaderåŠ¨æ€è£…è½½æ‰€éœ€çš„classã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬ç›´æ¥Hook ClassLoader ï¼Œä¸å°±çŸ¥é“ä½ æœ‰å“ªäº›æ–¹æ³•è¢«åŠ è½½è¿›æ¥äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">hook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">XC_LoadPackage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">LoadPackageParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">findAndHookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ClassLoader&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;loadClass&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XC_MethodHook&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MethodHookParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">throws&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Throwable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">super&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Class&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">clazz&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Class&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getResult&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">String&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">clazzName&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">clazz&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getName&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">//æ’é™¤éåŒ…åçš„ç±»&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">clazzName&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">contains&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ceui.lisa&amp;#34;&lt;/span>&lt;span class="p">)){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Method&lt;/span>&lt;span class="o">[]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mds&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">clazz&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getDeclaredMethods&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">mds&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">length&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">final&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Method&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mds&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mod&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mds&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getModifiers&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">//å»é™¤æŠ½è±¡ã€nativeã€æ¥å£æ–¹æ³•&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">Modifier&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">isAbstract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mod&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;amp;&amp;amp;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">Modifier&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">isNative&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mod&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;amp;&amp;amp;!&lt;/span>&lt;span class="n">Modifier&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">isAbstract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mod&lt;/span>&lt;span class="p">)){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">XposedBridge&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">hookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mds&lt;/span>&lt;span class="o">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">]&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XC_MethodHook&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">beforeHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MethodHookParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">throws&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Throwable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">super&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">beforeHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">d&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;lbqaq&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">md&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">toString&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ï¼ˆPSï¼šè¿™ä¸ªç¨‹åºå¾ˆå¥‡æ€ªï¼ŒåŒ…åæœ‰pixivï¼Œä½†ç±»åæ²¡æœ‰ï¼Œæ‰€ä»¥ç”¨&lt;code>ceui.lisa.pixiv&lt;/code>ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼‰&lt;/p>
&lt;p>å°†ä¸Šé¢è¿™æ®µä»£ç å¤åˆ¶åˆ°ä¹‹å‰å†™å¥½çš„&lt;code>MainHook&lt;/code>ä¸­å»ï¼Œç¼–è¯‘æ¨é€åˆ°æ‰‹æœºã€‚&lt;/p>
&lt;p>åœ¨ç»ˆç«¯æ‰§è¡Œ&lt;code>adb logcat &amp;quot;lbqaq:D *:S&amp;quot;&lt;/code>å¼€å¯logcatå¹¶è¿›è¡Œè¿‡æ»¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">â¯ adb logcat &amp;#34;lbqaq:D *:S&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------- beginning of main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.185 5050 5050 D lbqaq : public void ceui.lisa.activities.Shaft.onCreate()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.194 5050 5050 D lbqaq : private void ceui.lisa.activities.Shaft.updateTheme()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.216 5050 5050 D lbqaq : public static android.content.Context ceui.lisa.activities.Shaft.getContext()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.238 5050 5050 D lbqaq : protected int ceui.lisa.activities.MainActivity.initLayout()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.238 5050 5050 D lbqaq : public boolean ceui.lisa.activities.MainActivity.hideStatusBar()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.276 5050 5050 D lbqaq : protected void ceui.lisa.activities.MainActivity.initView()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.276 5050 5050 D lbqaq : public static com.tencent.mmkv.MMKV ceui.lisa.activities.Shaft.getMMKV()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.276 5050 5050 D lbqaq : private void ceui.lisa.activities.MainActivity.initDrawerHeader()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.278 5050 5050 D lbqaq : public androidx.drawerlayout.widget.DrawerLayout ceui.lisa.activities.MainActivity.getDrawer()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.279 5050 5050 D lbqaq : protected void ceui.lisa.activities.MainActivity.initData()
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">07-21 10:49:48.279 5050 5050 D lbqaq : private void ceui.lisa.activities.MainActivity.initFragment()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°è¯¥ç¨‹åºçš„è°ƒç”¨æ–¹æ³•ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©é åçš„&lt;code>ceui.lisa.activities.MainActivity.initFragment()&lt;/code>ä½œä¸ºæˆ‘ä»¬çš„Hookç›®æ ‡ã€‚&lt;/p>
&lt;div class="notice notice-info" >
&lt;div class="notice-title">&lt;svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 512 512" fill="hsl(30, 80%, 70%)">&lt;path d="M256 8a248 248 0 100 496 248 248 0 000-496zm0 110a42 42 0 110 84 42 42 0 010-84zm56 254c0 7-5 12-12 12h-88c-7 0-12-5-12-12v-24c0-7 5-12 12-12h12v-64h-12c-7 0-12-5-12-12v-24c0-7 5-12 12-12h64c7 0 12 5 12 12v100h12c7 0 12 5 12 12v24z"/>&lt;/svg>&lt;/div>&lt;p>ä¸ºä»€ä¹ˆè¦é€‰æ‹©é åçš„æ–¹æ³•ä½œä¸ºæˆ‘ä»¬çš„Hookç›®æ ‡å‘¢ï¼Ÿ&lt;/p>
&lt;p>è¿™æ˜¯ç”±äºå¦‚æœé€‰æ‹©è¾ƒå‰çš„æ–¹æ³•ï¼Œæœ‰äº›å˜é‡è¿˜æ²¡åˆå§‹åŒ–å®Œæˆï¼Œè¿™æ—¶è°ƒç”¨&lt;code>finish()&lt;/code>å¯èƒ½ä¼šæŠ¥é”™ã€‚&lt;/p>&lt;/div>
&lt;h3 id="hook-activity">&lt;a href="#hook-activity" class="header-anchor">&lt;/a>Hook activity
&lt;/h3>&lt;p>æˆ‘ä»¬ä½¿ç”¨æœ€åŸºç¡€çš„hookæ–¹å¼ï¼Œå³Xposedè‡ªå¸¦çš„&lt;code>XposedHelpers.findAndHookMethod&lt;/code>ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">private&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">hook&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">XC_LoadPackage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">LoadPackageParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// å®ƒæœ‰ä¸¤ä¸ªé‡è½½ï¼ŒåŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯å¡«Classï¼Œä¸€ä¸ªæ˜¯å¡«ClassNameä»¥åŠClassLoader&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ç¬¬ä¸€ç§ å¡«ClassName&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">XC_MethodHook&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">Unhook&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">unhook&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">findAndHookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;me.kyuubiran.xposedapp.MainActivity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// className&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">classLoader&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// classLoader ä½¿ç”¨lpparam.classLoader&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;onCreate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// è¦hookçš„æ–¹æ³•&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Bundle&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// è¦hookçš„æ–¹æ³•çš„å‚æ•°è¡¨ï¼Œå¦‚æœæœ‰å¤šä¸ªå°±ç”¨é€—å·éš”å¼€ &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XC_MethodHook&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// æœ€åä¸€ä¸ªå¡«hookçš„å›è°ƒ&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">beforeHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MethodHookParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// Hookæ–¹æ³•æ‰§è¡Œå‰ &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MethodHookParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// Hookæ–¹æ³•æ‰§è¡Œå&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// å®ƒè¿”å›ä¸€ä¸ªunhook åœ¨ä½ ä¸éœ€è¦ç»§ç»­hookçš„æ—¶å€™å¯ä»¥è°ƒç”¨å®ƒæ¥å–æ¶ˆHook&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">unhook&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">unhook&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">// å–æ¶ˆç©ºçš„Hook &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ç¬¬äºŒç§æ–¹å¼ å¡«Class&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// é¦–å…ˆä½ å¾—åŠ è½½å®ƒçš„ç±» æˆ‘ä»¬ä½¿ç”¨XposedHelpers.findClasså³å¯ å‚æ•°æœ‰ä¸¤ä¸ª ä¸€ä¸ªæ˜¯ç±»å ä¸€ä¸ªæ˜¯ç±»åŠ è½½å™¨&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Class&lt;/span>&lt;span class="o">&amp;lt;?&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">clazz&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">findClass&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;me.kyuubiran.xposedapp.MainActivity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">classLoader&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">findAndHookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">clazz&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;onCreate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Bundle&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XC_MethodHook&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MethodHookParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">// ç”±äºæˆ‘ä»¬éœ€è¦åœ¨Activityåˆ›å»ºä¹‹åå†å¼¹å‡ºToastï¼Œæ‰€ä»¥æˆ‘ä»¬Hookæ–¹æ³•æ‰§è¡Œä¹‹å&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">makeText&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">Activity&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;æ¨¡å—åŠ è½½æˆåŠŸï¼&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">LENGTH_SHORT&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="na">show&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ ¹æ®ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºå¯¹åº”çš„æ–¹æ³•äº†ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç»“æŸè¿™ä¸ªç¨‹åºå‘¢ï¼Ÿåœ¨å‰é¢æˆ‘ä»¬ä»‹ç»äº†Activityçš„ç”Ÿå­˜å‘¨æœŸï¼Œé€šè¿‡æŸ¥è¯¢å¯çŸ¥Activityå­˜åœ¨ä¸€ä¸ªå…³é—­çš„æ–¹æ³•&lt;code>finish()&lt;/code>ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦æ‰‹åŠ¨è°ƒç”¨å³å¯ï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">packageName&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ceui.lisa.pixiv&amp;#34;&lt;/span>&lt;span class="p">)){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">findAndHookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ceui.lisa.activities.MainActivity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">classLoader&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;initFragment&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XC_MethodHook&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MethodHookParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">throws&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Throwable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">makeText&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">Activity&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;ä¸è®¸æ¶©æ¶©ï¼&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">LENGTH_SHORT&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="na">show&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">Activity&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="na">finish&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åŒæ ·ï¼Œå¦å¤–ä¸¤ä¸ªåº”ç”¨ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å®ç°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">packageName&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;com.xjs.ehviewer&amp;#34;&lt;/span>&lt;span class="p">)){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">findAndHookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;com.hippo.ehviewer.ui.MainActivity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">classLoader&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;initUserImage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XC_MethodHook&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MethodHookParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">throws&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Throwable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">makeText&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">Activity&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;ä¸è®¸æ¶©æ¶©ï¼&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">LENGTH_SHORT&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="na">show&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">Activity&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="na">finish&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">packageName&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;com.picacomic.fregata&amp;#34;&lt;/span>&lt;span class="p">)){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">findAndHookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;com.picacomic.fregata.activities.SplashActivity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">classLoader&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;onCreate&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Bundle&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XC_MethodHook&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MethodHookParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">throws&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Throwable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">makeText&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">Activity&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;ä¸è®¸æ¶©æ¶©ï¼&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">LENGTH_SHORT&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="na">show&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">Activity&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="na">finish&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™é‡Œè¦æ³¨æ„ï¼Œä½¿ç”¨&lt;code>findAndHookMethod&lt;/code>æ—¶è¦hookçš„æ–¹æ³•çš„å‚æ•°è¡¨ä¸€å®šè¦å¡«å¯¹ã€‚å¦‚æœæ²¡æœ‰å¡«å¯¹å°±ä¼šæŠ¥&lt;code>java.lang.NoSuchMethodError&lt;/code>é”™è¯¯ã€‚æˆ‘ä¹‹å‰è¢«è¿™ä¸ªé—®é¢˜æŠ˜ç£¨äº†å¾ˆä¹…ğŸ˜­ï¼ˆä»”ç»†æƒ³æƒ³ä¹Ÿæ˜¯è¿™æ ·ï¼ŒJavaé‡Œæœ‰é‡è½½æœºåˆ¶ï¼Œå‚æ•°ä¸åŒå°±ä¸æ˜¯åŒä¸€ä¸ªæ–¹æ³•äº†ï¼‰&lt;/p>
&lt;p>kotlinæ‰€å¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">packageName&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;com.xjs.ehviewer&amp;#34;&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">findAndHookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;com.hippo.ehviewer.ui.MainActivity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">classLoader&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;initUserImage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">object&lt;/span> &lt;span class="err">: &lt;/span>&lt;span class="nc">XC&lt;/span>&lt;span class="n">_MethodHook&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">param&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">MethodHookParam&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">makeText&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">thisObject&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">Activity&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;ä¸è®¸æ¶©æ¶©ï¼&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nc">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LENGTH_SHORT&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="k">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">thisObject&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">Activity&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">finish&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ä¿®æ”¹å†…éƒ¨å‚æ•°">&lt;a href="#%e4%bf%ae%e6%94%b9%e5%86%85%e9%83%a8%e5%8f%82%e6%95%b0" class="header-anchor">&lt;/a>ä¿®æ”¹å†…éƒ¨å‚æ•°
&lt;/h3>&lt;p>è™½ç„¶ä¸€è‚¡è„‘å…³é—­ç¨‹åºéå¸¸ç®€å•ï¼Œä½†å°æ˜ä¸ä¹æ„äº†ã€‚å¯¹äº&lt;code>ceui.lisa.pixiv&lt;/code>æ¥è¯´ï¼Œåªæœ‰é•¿æŒ‰å¤´åƒæ‰ä¼šè§¦å‘ï¼Œç›´æ¥ä¸€åˆ€åˆ‡å®åœ¨æ˜¯å¤ªç²—æš´äº†ã€‚æ²¡é—®é¢˜ï¼Œç›´æ¥å®‰æ’ä¸Šã€‚&lt;/p>
&lt;p>é¦–å…ˆæˆ‘ä»¬è¦å®šä½åˆ°è¿™ä¸ªåˆ‡æ¢çš„æ–¹æ³•ç©¶ç«Ÿåœ¨å“ªï¼Ÿä»”ç»†è§‚å¯Ÿï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½ä¼šå¼¹å‡ºä¸€ä¸ªé¢œæ–‡å­—çš„Toastï¼Œæˆ‘ä»¬å°±ä»æ­¤å¤„åˆ‡å…¥ã€‚è¿™ä¸¤ä¸ªé¢œæ–‡å­—åˆ†åˆ«ä¸º&lt;code>Ô…(â™¡ï¹ƒâ™¡Ô…)&lt;/code>å’Œ&lt;code>Xï¹X&lt;/code>ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä½¿ç”¨jadx-guiåç¼–è¯‘ç¨‹åºï¼Œå…¨å±€æœç´¢ï¼Œç›´æ¥å°±æ‰¾åˆ°äº†æ‰€åœ¨ä½ç½®ã€‚&lt;/p>
&lt;p>&lt;img src="https://lbqaq.top/p/init-xposed/IMAGE/image-20230721141436862.png"
width="793"
height="493"
srcset="https://lbqaq.top/p/init-xposed/IMAGE/image-20230721141436862_hu_181bd4c880565686.png 480w, https://lbqaq.top/p/init-xposed/IMAGE/image-20230721141436862_hu_e8c62698746d232f.png 1024w"
loading="lazy"
alt="å…¨å±€æœç´¢"
class="gallery-image"
data-flex-grow="160"
data-flex-basis="386px"
>&lt;/p>
&lt;p>åŒå‡»æŸ¥çœ‹æ­¤å¤„çš„ä»£ç ï¼Œåèµ·æ¥äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œæ ¹æ®ä¸Šé¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ²¡æœ‰è¿™ä¸ªå‡½æ•°åï¼Œè‡ªç„¶ä¹Ÿå°±æ— æ³•å¯¹å…¶è¿›è¡ŒHookã€‚&lt;/p>
&lt;p>&lt;img src="https://lbqaq.top/p/init-xposed/IMAGE/image-20230721141535571.png"
width="1788"
height="996"
srcset="https://lbqaq.top/p/init-xposed/IMAGE/image-20230721141535571_hu_aeda4e86ca43434e.png 480w, https://lbqaq.top/p/init-xposed/IMAGE/image-20230721141535571_hu_3083de029044a583.png 1024w"
loading="lazy"
alt="å…·ä½“ä»£ç "
class="gallery-image"
data-flex-grow="179"
data-flex-basis="430px"
>&lt;/p>
&lt;p>éš¾é“å°±è¦å¡åœ¨è¿™é‡Œäº†å—ï¼Ÿ&lt;del>å¦‚æœçœŸæ˜¯è¿™æ ·æˆ‘å°±ä¸ä¼šå†™è¿™ç¯‡æ–‡ç« äº†&lt;/del>&lt;/p>
&lt;p>ä»”ç»†åˆ†æè¿™æ®µä»£ç ï¼Œè¿™é‡Œå¯¹&lt;code>this.userHead&lt;/code>è®¾ç½®äº†ä¸€ä¸ª&lt;code>OnLongClickListener&lt;/code>ã€‚ä¸€ä¸ªæ§ä»¶åªèƒ½ç»‘å®šä¸€ä¸ªä¾¦å¬å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€ä¸ªæ›¿æ¢ï¼Œä¸å°±å®ç°å¯¹å…¶çš„Hookäº†å—ğŸ˜&lt;/p>
&lt;p>ç›´æ¥Hook &lt;code>initView&lt;/code>è¿™ä¸ªæ–¹æ³•ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">packageName&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">equals&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ceui.lisa.pixiv&amp;#34;&lt;/span>&lt;span class="p">)){&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">findAndHookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ceui.lisa.activities.MainActivity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">classLoader&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;initView&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">new&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">XC_MethodHook&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@Override&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">protected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">MethodHookParam&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kd">throws&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Throwable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Field&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">getClass&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="na">getDeclaredField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;userHead&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">setAccessible&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">ImageView&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ImageView&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c1">// v.setLongClickable(false); //è®¾ç½®å…¶æ— æ³•å“åº”&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">setOnLongClickListener&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">v1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">makeText&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">Activity&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">thisObject&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;ä¸è®¸æ¶©æ¶©ï¼&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="na">LENGTH_SHORT&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="na">show&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†Javaçš„åå°„æœºåˆ¶ï¼Œæ‹¿åˆ°äº†å®ƒå†…éƒ¨çš„å˜é‡&lt;code>userHead&lt;/code>ï¼Œç„¶åé€šè¿‡&lt;code>setAccessible&lt;/code>å°†å…¶è®¾ç½®ä¸ºå¯è®¿é—®ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¯¹å…¶ç§æœ‰å˜é‡è¿›è¡Œä¿®æ”¹äº†ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¯ä»¥ç®€å•çš„å°†å…¶å¯ç‚¹å‡»å…³é—­ï¼Œä½†æ˜¯è¿™æ ·ä¸€ç‚¹ä¹Ÿä¸é…·ã€‚æˆ‘ç›´æ¥ä½¿ç”¨è‡ªå·±çš„å‡½æ•°å°†å…¶è¿›è¡Œæ›¿æ¢ï¼Œè¿™æ ·æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šå‡ºç°ä¸€ä¸ª&lt;code>Toast&lt;/code>ã€‚&lt;/p>
&lt;p>kotlinçš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">packageName&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;ceui.lisa.pixiv&amp;#34;&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">XposedHelpers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">findAndHookMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ceui.lisa.activities.MainActivity&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lpparam&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">classLoader&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;initView&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="k">object&lt;/span> &lt;span class="err">: &lt;/span>&lt;span class="nc">XC&lt;/span>&lt;span class="n">_MethodHook&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">override&lt;/span> &lt;span class="k">fun&lt;/span> &lt;span class="nf">afterHookedMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">param&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">MethodHookParam&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">f&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">thisObject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">javaClass&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">getDeclaredField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;userHead&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">isAccessible&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="k">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">val&lt;/span> &lt;span class="py">v&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="k">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">thisObject&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">ImageView&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">setOnLongClickListener&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nc">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">makeText&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">param&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">thisObject&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">Activity&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;ä¸è®¸æ¶©æ¶©ï¼&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nc">Toast&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">LENGTH_SHORT&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">show&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è‡³æ­¤ï¼Œä¸€ä¸ªç®€å•çš„Xposedæ¨¡å—å°±å†™å¥½äº†ã€‚&lt;/p>
&lt;h2 id="é…ç½®æ–‡ä»¶è¯»å–">&lt;a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%bb%e5%8f%96" class="header-anchor">&lt;/a>é…ç½®æ–‡ä»¶è¯»å–
&lt;/h2>&lt;p>ç°åœ¨çš„æ¨¡å—å¾€å¾€è¿˜ä¼šæ­é…ä¸€ä¸ªUIæ¥å®ç°é…ç½®æ–‡ä»¶çš„è®¾ç½®ï¼Œåœ¨å®‰å“å¼€å‘ä¸­ï¼Œå¸¸ç”¨&lt;code>SharedPreferences&lt;/code>æ¥å®ç°é…ç½®çš„ä¿å­˜ã€‚éšç€googleçš„æ›´æ–°ï¼Œç°åœ¨çš„é…ç½®æ–‡ä»¶æ— æ³•è®¾ç½®&lt;code>MODE_WORLD_READABLE&lt;/code>çš„æƒé™ï¼Œå³åªå…è®¸æœ¬åº”ç”¨è¯»å–ã€‚è™½ç„¶Xposedæœ¬èº«æä¾›äº†&lt;code>XSharedPreferences&lt;/code>æ¥è¯»å–é…ç½®æ–‡ä»¶ï¼Œç„¶è€Œæ¨¡å—æ˜¯ä¾é™„äºå®¿ä¸»ç¨‹åºæ‰€æ‰§è¡Œçš„ï¼Œå®ƒçš„è®¿é—®æƒé™å’Œå®¿ä¸»ä¸€è‡´ï¼Œæ‰€ä»¥æ— æ³•è®¿é—®åˆ°æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ã€‚&lt;a class="link" href="#20240915" >2024.09.15æ›´æ–°&lt;/a>&lt;/p>
&lt;p>å¥½åœ¨ç›®å‰å¸¸ç”¨çš„æ¡†æ¶LSPosedæä¾›äº†&lt;a class="link" href="https://github.com/LSPosed/LSPosed/wiki/New-XSharedPreferences" target="_blank" rel="noopener"
>New XSharedPreferences&lt;/a>ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®šxposedAPIçš„æœ€ä½ç‰ˆæœ¬â‰¥93å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;p>åœ¨&lt;code>AndroidManifest.xml&lt;/code>é‡Œå°†&lt;code>xposedminversion&lt;/code>çš„å€¼æ”¹ä¸º&lt;code>93&lt;/code>&lt;/p>
&lt;p>å¯¹äºæ¨¡å—çš„Activityæ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®šæƒé™ä¸º&lt;code>Context.MODE_WORLD_READABLE&lt;/code>å³å¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">sharedPreferences&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">SharedPreferences&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">getSharedPreferences&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nc">Context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">MODE_WORLD_READABLE&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯¹äºhookçš„åº”ç”¨æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨åŸæ¥çš„&lt;code>XSharedPreferences&lt;/code>å³å¯&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">val&lt;/span> &lt;span class="py">xsp&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">XSharedPreferences&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;top.lbqaq.nosese&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s2">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ç»“è¯­">&lt;a href="#%e7%bb%93%e8%af%ad" class="header-anchor">&lt;/a>ç»“è¯­
&lt;/h2>&lt;p>å®Œæ•´çš„é¡¹ç›®ä»£ç å¯ä»¥åœ¨&lt;a class="link" href="https://github.com/luoboQAQ/nosese" target="_blank" rel="noopener"
>Githubä»“åº“&lt;/a>ä¸­æŸ¥çœ‹ï¼Œé€šè¿‡è¿™æ¬¡çš„ç¼–å†™ï¼Œæˆ‘å‘ç°Xposedå®é™…ä¸Šè¿˜æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæƒ³è¦å®ç°å»å¹¿å‘Šç­‰åŠŸèƒ½ï¼Œéƒ½æ˜¯é€šè¿‡åç¼–è¯‘æ¥æ‰¾åˆ°çªç ´å£ï¼Œæœ‰äº†Hookçš„ç›®æ ‡åæ‰éœ€è¦Xposedã€‚&lt;/p>
&lt;p>æ‰€ä»¥ï¼Œä¹‹åçš„å­¦ä¹ è¿˜æ˜¯è¦ä»¥å®‰å“é€†å‘ä¸ºä¸»ï¼Œåªæœ‰æ‰“å¥½åŸºæœ¬åŠŸï¼Œæ‰èƒ½å†™å‡ºä¼˜ç§€çš„ä»£ç ã€‚&lt;/p>
&lt;h2 id="åç»­æ›´æ–°">&lt;a href="#%e5%90%8e%e7%bb%ad%e6%9b%b4%e6%96%b0" class="header-anchor">&lt;/a>åç»­æ›´æ–°
&lt;/h2>&lt;h3 id="20240915">&lt;a href="#20240915" class="header-anchor">&lt;/a>2024.09.15
&lt;/h3>&lt;p>å°†é¡¹ç›®ä½¿ç”¨äº†ç›®å‰æµè¡Œçš„Kotliné‡æ„äº†ä¸€æ³¢ï¼Œå¹¶æ·»åŠ äº†UIå’Œæ¨¡å—çš„é…ç½®è¯»å–çš„å†…å®¹&lt;/p>
&lt;h2 id="å‚è€ƒæ–‡çŒ®">&lt;a href="#%e5%8f%82%e8%80%83%e6%96%87%e7%8c%ae" class="header-anchor">&lt;/a>å‚è€ƒæ–‡çŒ®
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.52pojie.cn/thread-1740944-1-1.html" target="_blank" rel="noopener"
>ã€Šå®‰å“é€†å‘è¿™æ¡£äº‹ã€‹ä¸ƒã€Sorryï¼Œä¼šHookçœŸçš„å¯ä»¥ä¸ºæ‰€æ¬²ä¸º-Xposedå¿«é€Ÿä¸Šæ‰‹(ä¸Š)æ¨¡å—ç¼–.. - å¾çˆ±ç ´è§£&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://blog.ketal.icu/cn/Xposed%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8%E4%BF%9D%E5%A7%86%E7%BA%A7%E6%95%99%E7%A8%8B/" target="_blank" rel="noopener"
>Xposedæ¨¡å—å¼€å‘å…¥é—¨ä¿å§†çº§æ•™ç¨‹ - ç‹è¨€ç‹è¯­å’Œä»™è´çš„é­”æ³•å­¦ä¹ è®°å½•&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.52pojie.cn/thread-1706691-1-1.html" target="_blank" rel="noopener"
>ã€Šå®‰å“é€†å‘è¿™æ¡£äº‹ã€‹å››ã€æ­å–œä½ è·å¾—å¹¿å‘Š&amp;amp;å¼¹çª—é™é»˜å¡ - å¾çˆ±ç ´è§£&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.52pojie.cn/thread-1748081-1-1.html" target="_blank" rel="noopener"
>ã€Šå®‰å“é€†å‘è¿™æ¡£äº‹ã€‹å…«ã€Sorryï¼Œä¼šHookçœŸçš„å¯ä»¥ä¸ºæ‰€æ¬²ä¸º-Xposedå¿«é€Ÿä¸Šæ‰‹(ä¸‹)æ¨¡å—ç¼–.. - å¾çˆ±ç ´è§£&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>ç®€æ˜“Magiskæ¨¡å—çš„åˆ¶ä½œ</title><link>https://lbqaq.top/p/%E7%AE%80%E6%98%93magisk%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%B6%E4%BD%9C/</link><pubDate>Fri, 07 Oct 2022 11:30:17 +0800</pubDate><guid>https://lbqaq.top/p/%E7%AE%80%E6%98%93magisk%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%B6%E4%BD%9C/</guid><description>&lt;img src="https://lbqaq.top/p/%E7%AE%80%E6%98%93magisk%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%B6%E4%BD%9C/95936465.webp" alt="Featured image of post ç®€æ˜“Magiskæ¨¡å—çš„åˆ¶ä½œ" />&lt;h2 id="å‰è¨€">&lt;a href="#%e5%89%8d%e8%a8%80" class="header-anchor">&lt;/a>å‰è¨€
&lt;/h2>&lt;p>è¯´åˆ°ææœºï¼Œé‚£è‚¯å®šç»•ä¸å¼€å¤§åé¼é¼çš„&lt;a class="link" href="https://github.com/topjohnwu/Magisk" target="_blank" rel="noopener"
>Magisk&lt;/a>ã€‚å°±æˆ‘æ¥è¯´ï¼Œ&lt;code>root&lt;/code>å®Œååšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯å®‰è£…å„ç§å„æ ·çš„æ¨¡å—ï¼Œä½†æ˜¯ï¼Œæˆ‘å´ä»æ¥æ²¡æœ‰ç ”ç©¶è¿‡Magiskçš„å†…å®¹ã€‚åŒæ—¶ï¼Œç°åœ¨ä¹Ÿæœ‰è®¸å¤šå¿ƒæ€€ä¸è½¨çš„äººåˆ¶ä½œé”æœºæ¨¡å—éª—äººåˆ·å…¥ã€‚æ‰€ä»¥ï¼Œäº†è§£Magiskæ¨¡å—çš„ä¸€äº›åŸºæœ¬å†…å®¹å°±æ˜¾å¾—æ¯”è¾ƒé‡è¦äº†ã€‚&lt;/p>
&lt;h2 id="è®¤è¯†magiskæ¨¡å—">&lt;a href="#%e8%ae%a4%e8%af%86magisk%e6%a8%a1%e5%9d%97" class="header-anchor">&lt;/a>è®¤è¯†Magiskæ¨¡å—
&lt;/h2>&lt;p>æ ¹æ®å®˜æ–¹çš„æ–‡æ¡£ï¼Œä¸€ä¸ªå…¸å‹çš„Magiskæ¨¡å—çš„ç›®å½•åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">module.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ META-INF
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ google
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ android
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â”œâ”€â”€ update-binary &amp;lt;--- ä»å®˜æ–¹ä»“åº“ä¸Šä¸‹è½½çš„module_installer.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ updater-script &amp;lt;--- åªæœ‰ä¸€è¡Œæ–‡å­—ä¸º &amp;#34;#MAGISK&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ module.prop &amp;lt;--- æ¨¡å—çš„æ ‡è¯†ä¿¡æ¯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ customize.sh &amp;lt;--- (å¯é€‰)ç”¨äºè‡ªå®šä¹‰æ¨¡å—å®‰è£…è¿‡ç¨‹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ ...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ ... /* æ¨¡å—çš„å…¶ä½™æ–‡ä»¶ */
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œ&lt;code>META-INF&lt;/code>ç›®å½•æ˜¯ç”±å®˜æ–¹æä¾›ï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬è¿›è¡Œä¿®æ”¹ã€‚&lt;/p>
&lt;h3 id="moduleprop">&lt;a href="#moduleprop" class="header-anchor">&lt;/a>module.prop
&lt;/h3>&lt;p>è¿™ä¸ªæ–‡ä»¶æ˜¯æ¨¡å—çš„æ ‡è¯†ä¿¡æ¯ï¼Œæ¨¡å—çš„åŸºæœ¬ä¿¡æ¯å°±å­˜æ”¾åœ¨è¿™é‡Œï¼Œæ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ã€‚&lt;sup id="fnref1:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">id=&amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name=&amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version=&amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">versionCode=&amp;lt;int&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">author=&amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">description=&amp;lt;string&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">updateJson=&amp;lt;url&amp;gt; (optional)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å„é”®å€¼çš„ä½œç”¨è¯´æ˜å¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>åç§°&lt;/th>
&lt;th>è¯´æ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>æ¨¡å—çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œéœ€ç¬¦åˆè¯¥æ­£åˆ™è¡¨è¾¾å¼&lt;code>^[a-zA-Z][a-zA-Z0-9._-]+$&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>æ¨¡å—åç§°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>version&lt;/td>
&lt;td>æ¨¡å—ç‰ˆæœ¬å·&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>versionCode&lt;/td>
&lt;td>æ¨¡å—ç‰ˆæœ¬æ ‡è¯†ï¼Œå¿…é¡»ä¸ºæ•´æ•°ï¼Œç”¨äºæ›´æ–°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>author&lt;/td>
&lt;td>ä½œè€…ä¿¡æ¯&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>description&lt;/td>
&lt;td>æ¨¡å—æè¿°&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>updateJson&lt;/td>
&lt;td>æ›´æ–°ä¿¡æ¯é“¾æ¥ï¼Œç°åœ¨Magiskç§»é™¤äº†å†…éƒ¨çš„æ›´æ–°åŠŸèƒ½ï¼Œè¿™ä¸ªå±æ€§åº”è¯¥æ˜¯æ— ç”¨äº†&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="systemæ–‡ä»¶å¤¹">&lt;a href="#system%e6%96%87%e4%bb%b6%e5%a4%b9" class="header-anchor">&lt;/a>systemæ–‡ä»¶å¤¹
&lt;/h3>&lt;p>Magiskçš„ä¸€ä¸ªä¸»è¦ä½œç”¨å°±æ˜¯å¯¹ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œæ³¨å…¥æˆ–æ›¿æ¢ï¼Œåªè¦å°†æ–‡ä»¶æŒ‰é¡ºåºæ”¾å…¥æ­¤ç›®å½•ä¸­å³å¯ã€‚ä¾‹å¦‚æˆ‘æƒ³ä¿®æ”¹hostsæ–‡ä»¶ï¼Œåªéœ€è¦å°†ä¿®æ”¹å¥½çš„hostsæ–‡ä»¶æ”¾å…¥&lt;code>system/etc&lt;/code>è¿™ä¸ªç›®å½•ä¸‹ï¼ŒMagiskå°±ä¼šè‡ªåŠ¨å°†å…¶æ›¿æ¢äº†ã€‚&lt;/p>
&lt;p>å¦‚æœè¦æ›¿æ¢&lt;code>/vendor&lt;/code>ã€&lt;code>/product&lt;/code>æˆ–&lt;code>/system_ext&lt;/code>ä¸­çš„æ–‡ä»¶ï¼Œåªéœ€å°†å®ƒä»¬åˆ†åˆ«æ”¾åœ¨&lt;code>system/vendor&lt;/code>ã€&lt;code>system/product&lt;/code>å’Œ&lt;code>system/system_ext&lt;/code>ä¸‹ã€‚Magiskå°±ä¼šè‡ªåŠ¨æ›¿æ¢å®Œæˆã€‚&lt;/p>
&lt;h3 id="customizesh">&lt;a href="#customizesh" class="header-anchor">&lt;/a>customize.sh
&lt;/h3>&lt;p>è¿™æ˜¯è‡ªå®šä¹‰æ¨¡å—å®‰è£…è¿‡ç¨‹ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„æ›¿æ¢æ–‡ä»¶å°±ä¸éœ€è¦ç”¨åˆ°å®ƒã€‚ä½†æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯ä»…éœ€æ›¿æ¢æ–‡ä»¶ï¼Œè¿˜éœ€è¦æ‰§è¡Œä¸€äº›è„šæœ¬ï¼Œè¿™é‡Œå°±éœ€è¦ä½¿ç”¨åˆ°å®ƒäº†ã€‚&lt;/p>
&lt;p>æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œæ”¯æŒä»¥ä¸‹çš„ç¯å¢ƒå˜é‡ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å˜é‡å&lt;/th>
&lt;th>ä½œç”¨&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>MAGISK_VER (string)&lt;/td>
&lt;td>å½“å‰å®‰è£…çš„Magiskçš„ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚v20.0ï¼‰&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MAGISK_VER_CODE (int)&lt;/td>
&lt;td>å½“å‰å®‰è£…çš„Magiskçš„ç‰ˆæœ¬ä»£ç ï¼ˆä¾‹å¦‚20000ï¼‰&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>BOOTMODE (bool)&lt;/td>
&lt;td>å¦‚æœæ¨¡å—æ­£åœ¨Magiskåº”ç”¨ç¨‹åºä¸­å®‰è£…ï¼Œåˆ™ä¸ºtrue&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MODPATH (path)&lt;/td>
&lt;td>å®‰è£…æ¨¡å—æ–‡ä»¶çš„è·¯å¾„&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>TMPDIR (path)&lt;/td>
&lt;td>å¯ä»¥ä¸´æ—¶å­˜å‚¨æ–‡ä»¶çš„ä½ç½®&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ZIPFILE (path)&lt;/td>
&lt;td>æ‚¨çš„æ¨¡å—çš„å®‰è£…zip&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ARCH (string)&lt;/td>
&lt;td>è®¾å¤‡çš„CPUæ¶æ„ï¼Œå€¼å¯ä»¥æ˜¯&lt;code>arm&lt;/code>ã€&lt;code>arm 64&lt;/code>ã€&lt;code>x86&lt;/code>æˆ–&lt;code>x64&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IS64BIT (bool)&lt;/td>
&lt;td>å¦‚æœ&lt;code>$ARCH&lt;/code>ä¸º&lt;code>arm 64&lt;/code>æˆ–&lt;code>x64&lt;/code>ï¼Œåˆ™ä¸ºtrue&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>API (int)&lt;/td>
&lt;td>è®¾å¤‡çš„APIçº§åˆ«ï¼ˆAndroidç‰ˆæœ¬ï¼‰ï¼ˆä¾‹å¦‚ï¼ŒAndroid 5.0ä¸º21ï¼‰&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä»¥åŠä»¥ä¸‹çš„å‘½ä»¤ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>ui_print &amp;lt;msg&amp;gt;&lt;/code>ï¼šåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºä¿¡æ¯&lt;/li>
&lt;li>&lt;code>abort &amp;lt;msg&amp;gt;&lt;/code>ï¼šå°†é”™è¯¯æ¶ˆæ¯æ‰“å°åˆ°æ§åˆ¶å°å¹¶ç»ˆæ­¢å®‰è£…&lt;/li>
&lt;li>&lt;code>set_perm&lt;/code>å’Œ&lt;code>set_perm_recursive&lt;/code>ï¼šä¿®æ”¹æ–‡ä»¶æƒé™&lt;/li>
&lt;/ul>
&lt;h2 id="å®è·µ">&lt;a href="#%e5%ae%9e%e8%b7%b5" class="header-anchor">&lt;/a>å®è·µ
&lt;/h2>&lt;h3 id="ä¿®æ”¹ç³»ç»Ÿhosts">&lt;a href="#%e4%bf%ae%e6%94%b9%e7%b3%bb%e7%bb%9fhosts" class="header-anchor">&lt;/a>ä¿®æ”¹ç³»ç»ŸHosts
&lt;/h3>&lt;p>æˆ‘ä¸€å¼€å§‹æƒ³ç ”ç©¶Magiskçš„å¥‘æœºï¼Œå°±æ˜¯æƒ³è¦ä¿®æ”¹æˆ‘æ‰‹æœºçš„Hostsæ–‡ä»¶ã€‚ä¸€å¼€å§‹æŒ‰ç™¾åº¦çš„æ•™ç¨‹åšï¼Œä½†æ²¡æœ‰æ•ˆæœï¼Œåæ¥å°±å°è¯•äº†ä¸€ä¸‹Magiskæ¨¡å—ï¼Œç›´æ¥å°±æˆåŠŸäº†ã€‚&lt;/p>
&lt;p>æœ‰äº†å‰é¢çŸ¥è¯†çš„é“ºå«ï¼Œæƒ³è¦å®ç°è¿™ä¸ªåŠŸèƒ½å°±éå¸¸ç®€å•äº†ï¼Œä¸‹é¢åˆ—å‡ºæˆ‘ä»¬ç¨‹åºçš„ç›®å½•æ ‘ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ChangeHosts.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ META-INF
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ google
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ android
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ update-binary
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚ â””â”€â”€ updater-script
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ module.prop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ etc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ hosts
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å®é™…æˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†åªæœ‰&lt;code>module.prop&lt;/code>å’Œ&lt;code>hosts&lt;/code>ï¼Œ&lt;code>hosts&lt;/code>æ˜¯æˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±åªè¦å…³æ³¨&lt;code>module.prop&lt;/code>ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-properties" data-lang="properties">&lt;span class="line">&lt;span class="cl">&lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">ChangeHosts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">ChangeHosts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">v1.0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">versionCode&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">author&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">luoboQAQ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">ä¿®æ”¹hostsæ–‡ä»¶æ¥å±è”½å¹¿å‘Š&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æ­¤çœ‹æ¥ï¼Œå¦‚æœåªè¦æ›¿æ¢æ–‡ä»¶ï¼ŒåŸºæœ¬æ²¡æœ‰ä»»ä½•éš¾åº¦ã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨dnscrypt-proxyå®ç°doh">&lt;a href="#%e4%bd%bf%e7%94%a8dnscrypt-proxy%e5%ae%9e%e7%8e%b0doh" class="header-anchor">&lt;/a>ä½¿ç”¨dnscrypt-proxyå®ç°DoH
&lt;/h3>&lt;p>è¿™éƒ¨åˆ†æˆ‘æ­£åœ¨ç ”ç©¶ï¼Œç­‰ç ”ç©¶æ˜ç™½äº†å°±è¡¥ä¸ŠğŸ•Šï¸ã€‚&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://topjohnwu.github.io/Magisk/guides.html" target="_blank" rel="noopener"
>Magiskå®˜æ–¹å¼€å‘æŒ‡å¯¼&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&amp;#160;&lt;a href="#fnref1:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item></channel></rss>