<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="ç”¨æ¥è®°å½•SpringMVCçš„å­¦ä¹ å¿ƒå¾—"><title>SpringMVCå­¦ä¹ ç¬”è®°</title><link rel=canonical href=https://lbqaq.top/p/springmvc/><link rel=stylesheet href=/scss/style.min.ae1eb7f887336befbb146467b4baee8138bb2b0004f1f7aa9fcf3b40efa7e299.css><meta property='og:title' content="SpringMVCå­¦ä¹ ç¬”è®°"><meta property='og:description' content="ç”¨æ¥è®°å½•SpringMVCçš„å­¦ä¹ å¿ƒå¾—"><meta property='og:url' content='https://lbqaq.top/p/springmvc/'><meta property='og:site_name' content='luoboQAQ'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Java'><meta property='article:tag' content='Spring'><meta property='article:tag' content='ç¬”è®°'><meta property='article:published_time' content='2021-08-15T09:06:00+08:00'><meta property='article:modified_time' content='2021-08-18T16:00:00+08:00'><meta property='og:image' content='https://lbqaq.top/p/springmvc/65411813.webp'><meta name=twitter:title content="SpringMVCå­¦ä¹ ç¬”è®°"><meta name=twitter:description content="ç”¨æ¥è®°å½•SpringMVCçš„å­¦ä¹ å¿ƒå¾—"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://lbqaq.top/p/springmvc/65411813.webp'><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><style>:root{--sys-font-family:-apple-system, "LXGW WenKai", 'Microsoft Yahei', 'WenQuanYi Micro Hei', sans-serif;--code-font-family:"JetBrains Mono", "LXGW WenKai Mono", Menlo, Monaco, Consolas, monospace;--article-font-family:"LXGW WenKai", sans-serif;--base-font-family:"LXGW WenKai", var(--sys-font-family), sans-serif}</style><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","smhd51txrk")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/Mint_hu_90cbcbb19cfdb02a.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸŒ</span></figure><div class=site-meta><h1 class=site-name><a href=/>luoboQAQ</a></h1><h2 class=site-description>å¿«ä¹å­¦ä¹ æ¯ä¸€å¤©</h2></div></header><ol class=menu-social><li><a href=https://github.com/luoboQAQ target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://lbqaq.top/index.xml target=_blank title=RSSè®¢é˜… rel=me><svg class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li><li><a href=https://pan.lbqaq.top target=_blank title=æˆ‘çš„ä¸ªäººäº‘ç›˜ rel=me><svg class="icon icon-tabler icon-tabler-cloud" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 18a4.6 4.4.0 010-9 5 4.5.0 0111 2h1a3.5 3.5.0 010 7H7"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>æ–‡ç« </span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æŸ¥è¯¢</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹é“¾</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#å›é¡¾mvc>å›é¡¾MVC</a><ol><li><a href=#ä»€ä¹ˆæ˜¯mvc>ä»€ä¹ˆæ˜¯MVC</a></li><li><a href=#å¤ä¹ servlet>å¤ä¹ Servlet</a></li></ol></li><li><a href=#ä»€ä¹ˆæ˜¯springmvc>ä»€ä¹ˆæ˜¯SpringMVC</a><ol><li><a href=#æ¦‚è¿°>æ¦‚è¿°</a></li><li><a href=#ä¸­å¿ƒæ§åˆ¶å™¨>ä¸­å¿ƒæ§åˆ¶å™¨</a></li><li><a href=#springmvcæ‰§è¡ŒåŸç†>SpringMVCæ‰§è¡ŒåŸç†</a></li></ol></li><li><a href=#ç¬¬ä¸€ä¸ªspringmvcç¨‹åº>ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº</a><ol><li><ol><li><a href=#é…ç½®ç‰ˆ>é…ç½®ç‰ˆ</a></li><li><a href=#æ³¨è§£ç‰ˆ>æ³¨è§£ç‰ˆ</a></li><li><a href=#å°ç»“>å°ç»“</a></li></ol></li></ol></li><li><a href=#restfulé£æ ¼>RestFulé£æ ¼</a></li><li><a href=#é‡å®šå‘å’Œè½¬å‘>é‡å®šå‘å’Œè½¬å‘</a></li><li><a href=#æ•°æ®å¤„ç†>æ•°æ®å¤„ç†</a><ol><li><a href=#å¤„ç†æäº¤æ•°æ®>å¤„ç†æäº¤æ•°æ®</a></li><li><a href=#æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯>æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯</a></li><li><a href=#å¯¹æ¯”>å¯¹æ¯”</a><ol><li><a href=#è§£å†³ä¹±ç >è§£å†³ä¹±ç </a></li></ol></li></ol></li><li><a href=#json>JSON</a><ol><li><a href=#ä½¿ç”¨jackson>ä½¿ç”¨Jackson</a></li><li><a href=#ä½¿ç”¨fastjson>ä½¿ç”¨FastJson</a></li></ol></li><li><a href=#æ‹¦æˆªå™¨>æ‹¦æˆªå™¨</a><ol><li><a href=#æ¦‚è¿°-1>æ¦‚è¿°</a></li><li><a href=#ä½¿ç”¨æ–¹æ³•>ä½¿ç”¨æ–¹æ³•</a></li></ol></li><li><a href=#æ–‡ä»¶ä¼ è¾“>æ–‡ä»¶ä¼ è¾“</a><ol><li><a href=#æ–‡ä»¶ä¸Šä¼ >æ–‡ä»¶ä¸Šä¼ </a></li><li><a href=#æ–‡ä»¶ä¸‹è½½>æ–‡ä»¶ä¸‹è½½</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/springmvc/><img src=/p/springmvc/65411813.webp width=1638 height=815 loading=lazy alt="Featured image of post SpringMVCå­¦ä¹ ç¬”è®°"></a></div><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/springmvc/>SpringMVCå­¦ä¹ ç¬”è®°</a></h2><h3 class=article-subtitle>ç”¨æ¥è®°å½•SpringMVCçš„å­¦ä¹ å¿ƒå¾—</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2021-08-15</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 22 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p>SpringMVCä¹Ÿå‘Šä¸€æ®µè½äº†ï¼Œç»ˆäºè¦åˆ°SpringBootäº†ã€‚</p><p>è¿˜æ˜¯å’Œä¹‹å‰ä¸€æ ·ï¼Œç¬”è®°æ˜¯åŸºäº<a class=link href=https://space.bilibili.com/95256449 target=_blank rel=noopener>é‡è§ç‹‚ç¥è¯´</a>çš„<a class=link href=https://www.bilibili.com/video/BV1aE41167Tu target=_blank rel=noopener>SpringMVCè§†é¢‘æ•™ç¨‹</a>è€Œæ¥ï¼Œåœ¨æ­¤æ„Ÿè°¢èƒ½æä¾›è¿™ä¹ˆä¼˜ç§€çš„æ•™ç¨‹ã€‚</p><h2 id=å›é¡¾mvc><a href=#%e5%9b%9e%e9%a1%bemvc class=header-anchor></a>å›é¡¾MVC</h2><h3 id=ä»€ä¹ˆæ˜¯mvc><a href=#%e4%bb%80%e4%b9%88%e6%98%afmvc class=header-anchor></a>ä»€ä¹ˆæ˜¯MVC</h3><ul><li>MVCæ˜¯æ¨¡å‹(Model)ã€è§†å›¾(View)ã€æ§åˆ¶å™¨(Controller)çš„ç®€å†™ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒã€‚</li><li>å°†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€æ˜¾ç¤ºåˆ†ç¦»çš„æ–¹æ³•æ¥ç»„ç»‡ä»£ç ã€‚</li></ul><p>**Modelï¼ˆæ¨¡å‹ï¼‰ï¼š**æ•°æ®æ¨¡å‹ï¼Œæä¾›è¦å±•ç¤ºçš„æ•°æ®ï¼Œå› æ­¤åŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é¢†åŸŸæ¨¡å‹æˆ–JavaBeanç»„ä»¶ï¼ˆåŒ…å«æ•°æ®å’Œè¡Œä¸ºï¼‰ï¼Œä¸è¿‡ç°åœ¨ä¸€èˆ¬éƒ½åˆ†ç¦»å¼€æ¥ï¼šValue Objectï¼ˆæ•°æ®Daoï¼‰ å’Œ æœåŠ¡å±‚ï¼ˆè¡Œä¸ºServiceï¼‰ã€‚ä¹Ÿå°±æ˜¯æ¨¡å‹æä¾›äº†æ¨¡å‹æ•°æ®æŸ¥è¯¢å’Œæ¨¡å‹æ•°æ®çš„çŠ¶æ€æ›´æ–°ç­‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ•°æ®å’Œä¸šåŠ¡ã€‚</p><p>æ‹“å±•ï¼šåœ¨å‰ç«¯æ•°æ®ä¼ è¾“ç»™åç«¯æ—¶ï¼Œæœ‰äº›å­—æ®µæ˜¯ä¸éœ€è¦çš„ï¼Œè¿™æ˜¯å¯èƒ½ä¼šç»†åˆ†å‡ºVoå±‚ï¼ˆè§†å›¾ï¼‰</p><p>æ¯”å¦‚ï¼šç”¨æˆ·æœ‰è´¦å·ã€å¯†ç ã€å¹´é¾„ç­‰ä¸€ç³»åˆ—å­—æ®µ</p><p>è¿™æ—¶å‰ç«¯ç™»å½•åªä¼ äº†è´¦å·å¯†ç </p><p>æ­¤æ—¶å¯ä»¥ç”¨UserVoæ¥è¡¨ç¤ºï¼Œé‡Œé¢åªæœ‰è´¦å·å’Œå¯†ç </p><p>**Viewï¼ˆè§†å›¾ï¼‰ï¼š**è´Ÿè´£è¿›è¡Œæ¨¡å‹çš„å±•ç¤ºï¼Œä¸€èˆ¬å°±æ˜¯æˆ‘ä»¬è§åˆ°çš„ç”¨æˆ·ç•Œé¢ï¼Œå®¢æˆ·æƒ³çœ‹åˆ°çš„ä¸œè¥¿ã€‚</p><p>**Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼š**æ¥æ”¶ç”¨æˆ·è¯·æ±‚ï¼Œå§”æ‰˜ç»™æ¨¡å‹è¿›è¡Œå¤„ç†ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰ï¼Œå¤„ç†å®Œæ¯•åæŠŠè¿”å›çš„æ¨¡å‹æ•°æ®è¿”å›ç»™è§†å›¾ï¼Œç”±è§†å›¾è´Ÿè´£å±•ç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´æ§åˆ¶å™¨åšäº†ä¸ªè°ƒåº¦å‘˜çš„å·¥ä½œã€‚</p><p><strong>æœ€å…¸å‹çš„MVCå°±æ˜¯JSP + servlet + javabeançš„æ¨¡å¼ã€‚</strong></p><ol><li>ç”¨æˆ·å‘è¯·æ±‚</li><li>Servletæ¥æ”¶è¯·æ±‚æ•°æ®ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•</li><li>ä¸šåŠ¡å¤„ç†å®Œæ¯•ï¼Œè¿”å›æ›´æ–°åçš„æ•°æ®ç»™servlet</li><li>servletè½¬å‘åˆ°JSPï¼Œç”±JSPæ¥æ¸²æŸ“é¡µé¢</li><li>å“åº”ç»™å‰ç«¯æ›´æ–°åçš„é¡µé¢</li></ol><p><strong>èŒè´£åˆ†æï¼š</strong></p><p><strong>Controllerï¼šæ§åˆ¶å™¨</strong></p><ol><li>å–å¾—è¡¨å•æ•°æ®</li><li>è°ƒç”¨ä¸šåŠ¡é€»è¾‘</li><li>è½¬å‘æŒ‡å®šçš„é¡µé¢</li></ol><p><strong>Modelï¼šæ¨¡å‹</strong></p><ol><li>ä¸šåŠ¡é€»è¾‘</li><li>ä¿å­˜æ•°æ®çš„çŠ¶æ€</li></ol><p><strong>Viewï¼šè§†å›¾</strong></p><ol><li>æ˜¾ç¤ºé¡µé¢</li></ol><h3 id=å¤ä¹ servlet><a href=#%e5%a4%8d%e4%b9%a0servlet class=header-anchor></a>å¤ä¹ Servlet</h3><ol><li><p>çˆ¶å·¥ç¨‹æ·»åŠ ä¾èµ–</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependencies&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>junit<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>junit<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>4.13<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>org.springframework<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>spring-webmvc<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>5.3.9<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>javax.servlet<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>javax.servlet-api<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>3.1.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;scope&gt;</span>provided<span class=nt>&lt;/scope&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>javax.servlet.jsp<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>jsp-api<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>2.2<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;groupId&gt;</span>javax.servlet<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;artifactId&gt;</span>jstl<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;version&gt;</span>1.2<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependencies&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>ç¼–å†™Servlet</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HelloServlet</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>HttpServlet</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>doGet</span><span class=p>(</span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>req</span><span class=p>,</span><span class=w> </span><span class=n>HttpServletResponse</span><span class=w> </span><span class=n>resp</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>ServletException</span><span class=p>,</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//è·å–å‰ç«¯æ“ä½œ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>method</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>req</span><span class=p>.</span><span class=na>getParameter</span><span class=p>(</span><span class=s>&#34;method&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>method</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;add&#34;</span><span class=p>)){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>req</span><span class=p>.</span><span class=na>getSession</span><span class=p>().</span><span class=na>setAttribute</span><span class=p>(</span><span class=s>&#34;msg&#34;</span><span class=p>,</span><span class=s>&#34;æ‰§è¡Œäº†addæ–¹æ³•&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>method</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=s>&#34;delete&#34;</span><span class=p>)){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>req</span><span class=p>.</span><span class=na>getSession</span><span class=p>().</span><span class=na>setAttribute</span><span class=p>(</span><span class=s>&#34;msg&#34;</span><span class=p>,</span><span class=s>&#34;æ‰§è¡Œäº†deleteæ–¹æ³•&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//è°ƒç”¨ä¸šåŠ¡å±‚</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//è§†å›¾è½¬å‘æˆ–é‡å®šå‘</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>req</span><span class=p>.</span><span class=na>getRequestDispatcher</span><span class=p>(</span><span class=s>&#34;/WEB-INF/jsp/test.jsp&#34;</span><span class=p>).</span><span class=na>forward</span><span class=p>(</span><span class=n>req</span><span class=p>,</span><span class=n>resp</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>doPost</span><span class=p>(</span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>req</span><span class=p>,</span><span class=w> </span><span class=n>HttpServletResponse</span><span class=w> </span><span class=n>resp</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>ServletException</span><span class=p>,</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>doGet</span><span class=p>(</span><span class=n>req</span><span class=p>,</span><span class=w> </span><span class=n>resp</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>ç¼–å†™<code>test.jsp</code>ï¼Œåœ¨<code>WEB-INF</code>ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>jsp</code>çš„æ–‡ä»¶å¤¹ï¼Œæ–°å»º<code>test.jsp</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
</span></span><span class=line><span class=cl>&lt;html&gt;
</span></span><span class=line><span class=cl>&lt;head&gt;
</span></span><span class=line><span class=cl>    &lt;title&gt;Title&lt;/title&gt;
</span></span><span class=line><span class=cl>&lt;/head&gt;
</span></span><span class=line><span class=cl>&lt;body&gt;
</span></span><span class=line><span class=cl>${msg}
</span></span><span class=line><span class=cl>&lt;/body&gt;
</span></span><span class=line><span class=cl>&lt;/html&gt;
</span></span></code></pre></td></tr></table></div></div></li><li><p>åœ¨<code>web.xml</code>ä¸­æ³¨å†ŒServlet</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;servlet&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;servlet-name&gt;</span>hello<span class=nt>&lt;/servlet-name&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;servlet-class&gt;</span>top.lbqaq.servlet.HelloServlet<span class=nt>&lt;/servlet-class&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/servlet&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;servlet-mapping&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;servlet-name&gt;</span>hello<span class=nt>&lt;/servlet-name&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;url-pattern&gt;</span>/hello<span class=nt>&lt;/url-pattern&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/servlet-mapping&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>é…ç½®TomCatï¼Œè¿›è¡Œæµ‹è¯•</p></li></ol><p><strong>MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…</strong></p><ol><li>å°†urlæ˜ å°„åˆ°javaç±»æˆ–javaç±»çš„æ–¹æ³• .</li><li>å°è£…ç”¨æˆ·æäº¤çš„æ•°æ® .</li><li>å¤„ç†è¯·æ±‚&ndash;è°ƒç”¨ç›¸å…³çš„ä¸šåŠ¡å¤„ç†&ndash;å°è£…å“åº”æ•°æ® .</li><li>å°†å“åº”çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ . jsp / html ç­‰è¡¨ç¤ºå±‚æ•°æ® .</li></ol><p><strong>è¯´æ˜ï¼š</strong></p><p>â€‹ å¸¸è§çš„æœåŠ¡å™¨ç«¯MVCæ¡†æ¶æœ‰ï¼šStrutsã€Spring MVCã€ASP.NET MVCã€Zend Frameworkã€JSFï¼›å¸¸è§å‰ç«¯MVCæ¡†æ¶ï¼švueã€angularjsã€reactã€backboneï¼›ç”±MVCæ¼”åŒ–å‡ºäº†å¦å¤–ä¸€äº›æ¨¡å¼å¦‚ï¼šMVPã€MVVM ç­‰ç­‰&mldr;.</p><h2 id=ä»€ä¹ˆæ˜¯springmvc><a href=#%e4%bb%80%e4%b9%88%e6%98%afspringmvc class=header-anchor></a>ä»€ä¹ˆæ˜¯SpringMVC</h2><h3 id=æ¦‚è¿°><a href=#%e6%a6%82%e8%bf%b0 class=header-anchor></a>æ¦‚è¿°</h3><p>Spring MVCæ˜¯Spring Frameworkçš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åŸºäºJavaå®ç°MVCçš„è½»é‡çº§Webæ¡†æ¶ã€‚</p><p><a class=link href=https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/web.html target=_blank rel=noopener>ä¸­æ–‡æ–‡æ¡£</a></p><p><strong>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ SpringMVCå‘¢?</strong></p><p>Spring MVCçš„ç‰¹ç‚¹ï¼š</p><ol><li>è½»é‡çº§ï¼Œç®€å•æ˜“å­¦</li><li>é«˜æ•ˆ , åŸºäºè¯·æ±‚å“åº”çš„MVCæ¡†æ¶</li><li>ä¸Springå…¼å®¹æ€§å¥½ï¼Œæ— ç¼ç»“åˆ</li><li>çº¦å®šä¼˜äºé…ç½®</li><li>åŠŸèƒ½å¼ºå¤§ï¼šRESTfulã€æ•°æ®éªŒè¯ã€æ ¼å¼åŒ–ã€æœ¬åœ°åŒ–ã€ä¸»é¢˜ç­‰</li><li>ç®€æ´çµæ´»</li></ol><h3 id=ä¸­å¿ƒæ§åˆ¶å™¨><a href=#%e4%b8%ad%e5%bf%83%e6%8e%a7%e5%88%b6%e5%99%a8 class=header-anchor></a>ä¸­å¿ƒæ§åˆ¶å™¨</h3><p>â€‹ Springçš„webæ¡†æ¶å›´ç»•DispatcherServletè®¾è®¡ã€‚DispatcherServletçš„ä½œç”¨æ˜¯å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚ä»Spring 2.5å¼€å§‹ï¼Œä½¿ç”¨Java 5æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·å¯ä»¥é‡‡ç”¨åŸºäºæ³¨è§£çš„controllerå£°æ˜æ–¹å¼ã€‚</p><p>â€‹ Spring MVCæ¡†æ¶åƒè®¸å¤šå…¶ä»–MVCæ¡†æ¶ä¸€æ ·, <strong>ä»¥è¯·æ±‚ä¸ºé©±åŠ¨</strong> , <strong>å›´ç»•ä¸€ä¸ªä¸­å¿ƒServletåˆ†æ´¾è¯·æ±‚åŠæä¾›å…¶ä»–åŠŸèƒ½</strong>ï¼Œ<strong>DispatcherServletæ˜¯ä¸€ä¸ªå®é™…çš„Servlet (å®ƒç»§æ‰¿è‡ªHttpServlet åŸºç±»)</strong>ã€‚</p><p><img src=/p/springmvc/IMAGE/1.webp width=1080 height=544 srcset="/p/springmvc/IMAGE/1_hu_944b22fbdb3ccab.webp 480w, /p/springmvc/IMAGE/1_hu_877a3202e9e194d8.webp 1024w" loading=lazy alt=DispatcherServlet class=gallery-image data-flex-grow=198 data-flex-basis=476px></p><p>SpringMVCçš„åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>â€‹ å½“å‘èµ·è¯·æ±‚æ—¶è¢«å‰ç½®çš„æ§åˆ¶å™¨æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°ç”Ÿæˆä»£ç†è¯·æ±‚ï¼Œæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å®é™…æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨å¤„ç†è¯·æ±‚ï¼Œåˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œè®¿é—®æ•°æ®åº“ï¼Œå°†æ¨¡å‹å“åº”ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨ä½¿ç”¨æ¨¡å‹ä¸è§†å›¾æ¸²æŸ“è§†å›¾ç»“æœï¼Œå°†ç»“æœè¿”å›ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œå†å°†ç»“æœè¿”å›ç»™è¯·æ±‚è€…ã€‚</p><p><img src=/p/springmvc/IMAGE/2.webp width=930 height=457 srcset="/p/springmvc/IMAGE/2_hu_313f7deb9f801365.webp 480w, /p/springmvc/IMAGE/2_hu_819de0cebde4ca85.webp 1024w" loading=lazy alt=SpringMVCæµç¨‹ class=gallery-image data-flex-grow=203 data-flex-basis=488px></p><h3 id=springmvcæ‰§è¡ŒåŸç†><a href=#springmvc%e6%89%a7%e8%a1%8c%e5%8e%9f%e7%90%86 class=header-anchor></a>SpringMVCæ‰§è¡ŒåŸç†</h3><p><img src=/p/springmvc/IMAGE/3.webp width=952 height=507 srcset="/p/springmvc/IMAGE/3_hu_226a7e4dc4065440.webp 480w, /p/springmvc/IMAGE/3_hu_c339bf2acd32688.webp 1024w" loading=lazy alt=æ‰§è¡Œæµç¨‹ class=gallery-image data-flex-grow=187 data-flex-basis=450px></p><p>å›¾ä¸ºSpringMVCçš„ä¸€ä¸ªè¾ƒå®Œæ•´çš„æµç¨‹å›¾ï¼Œå®çº¿è¡¨ç¤ºSpringMVCæ¡†æ¶æä¾›çš„æŠ€æœ¯ï¼Œä¸éœ€è¦å¼€å‘è€…å®ç°ï¼Œè™šçº¿è¡¨ç¤ºéœ€è¦å¼€å‘è€…å®ç°ã€‚</p><p><strong>ç®€è¦åˆ†ææ‰§è¡Œæµç¨‹</strong></p><ol><li><p>DispatcherServletè¡¨ç¤ºå‰ç½®æ§åˆ¶å™¨ï¼Œæ˜¯æ•´ä¸ªSpringMVCçš„æ§åˆ¶ä¸­å¿ƒã€‚ç”¨æˆ·å‘å‡ºè¯·æ±‚ï¼ŒDispatcherServletæ¥æ”¶è¯·æ±‚å¹¶æ‹¦æˆªè¯·æ±‚ã€‚</p><p>æˆ‘ä»¬å‡è®¾è¯·æ±‚çš„urlä¸º : <code>http://localhost:8080/SpringMVC/hello</code></p><p><strong>å¦‚ä¸Šurlæ‹†åˆ†æˆä¸‰éƒ¨åˆ†ï¼š</strong></p><p><code>http://localhost:8080</code>æœåŠ¡å™¨åŸŸå</p><p>SpringMVCéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„webç«™ç‚¹</p><p>helloè¡¨ç¤ºæ§åˆ¶å™¨</p><p>é€šè¿‡åˆ†æï¼Œå¦‚ä¸Šurlè¡¨ç¤ºä¸ºï¼šè¯·æ±‚ä½äºæœåŠ¡å™¨localhost:8080ä¸Šçš„SpringMVCç«™ç‚¹çš„helloæ§åˆ¶å™¨ã€‚</p></li><li><p>HandlerMappingä¸ºå¤„ç†å™¨æ˜ å°„ã€‚DispatcherServletè°ƒç”¨HandlerMapping,HandlerMappingæ ¹æ®è¯·æ±‚urlæŸ¥æ‰¾Handlerã€‚</p></li><li><p>HandlerExecutionè¡¨ç¤ºå…·ä½“çš„Handler,å…¶ä¸»è¦ä½œç”¨æ˜¯æ ¹æ®urlæŸ¥æ‰¾æ§åˆ¶å™¨ï¼Œå¦‚ä¸Šurlè¢«æŸ¥æ‰¾æ§åˆ¶å™¨ä¸ºï¼šhelloã€‚</p></li><li><p>HandlerExecutionå°†è§£æåçš„ä¿¡æ¯ä¼ é€’ç»™DispatcherServlet,å¦‚è§£ææ§åˆ¶å™¨æ˜ å°„ç­‰ã€‚</p></li><li><p>HandlerAdapterè¡¨ç¤ºå¤„ç†å™¨é€‚é…å™¨ï¼Œå…¶æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å»æ‰§è¡ŒHandlerã€‚</p></li><li><p>Handlerè®©å…·ä½“çš„Controlleræ‰§è¡Œã€‚</p></li><li><p>Controllerå°†å…·ä½“çš„æ‰§è¡Œä¿¡æ¯è¿”å›ç»™HandlerAdapter,å¦‚ModelAndViewã€‚</p></li><li><p>HandlerAdapterå°†è§†å›¾é€»è¾‘åæˆ–æ¨¡å‹ä¼ é€’ç»™DispatcherServletã€‚</p></li><li><p>DispatcherServletè°ƒç”¨è§†å›¾è§£æå™¨(ViewResolver)æ¥è§£æHandlerAdapterä¼ é€’çš„é€»è¾‘è§†å›¾åã€‚</p></li><li><p>è§†å›¾è§£æå™¨å°†è§£æçš„é€»è¾‘è§†å›¾åä¼ ç»™DispatcherServletã€‚</p></li><li><p>DispatcherServletæ ¹æ®è§†å›¾è§£æå™¨è§£æçš„è§†å›¾ç»“æœï¼Œè°ƒç”¨å…·ä½“çš„è§†å›¾ã€‚</p></li><li><p>æœ€ç»ˆè§†å›¾å‘ˆç°ç»™ç”¨æˆ·ã€‚</p></li></ol><p>è¿™é‡Œæ¯”è¾ƒç»•ï¼Œæ‰€ä»¥ç›´æ¥æŠŠåŸæ–‡æ¬æ¥äº†ï¼Œä¹‹åç­‰ç†è§£åŠ æ·±äº†å†æ¥è¡¥å……è‡ªå·±çš„çœ‹æ³•ã€‚</p><h2 id=ç¬¬ä¸€ä¸ªspringmvcç¨‹åº><a href=#%e7%ac%ac%e4%b8%80%e4%b8%aaspringmvc%e7%a8%8b%e5%ba%8f class=header-anchor></a>ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº</h2><p>ç”±äºæˆ‘ä»¬æ˜¯é‡‡ç”¨å­æ¨¡å—çš„æ–¹å¼ï¼Œé‚£ä¹ˆéœ€è¦å»IDEAé‡Œè®¾ç½®ä¸€ä¸‹è®©libä¼šæ‰“åŒ…å‡ºå»ã€‚å¦åˆ™å°±ä¼šæç¤º404é”™è¯¯ã€‚</p><p>åœ¨ç‚¹å‡»IDEAå³ä¸Šè§’çš„å°é½¿è½®ï¼Œé€‰æ‹©<code>é¡¹ç›®ç»“æ„</code>ï¼Œåœ¨<code>å·¥ä»¶</code>ä¸‹çœ‹<code>WEB-INF</code>é‡Œæ˜¯å¦æœ‰<code>lib</code>ç›®å½•ï¼Œæ²¡æœ‰çš„è¯å°±åˆ›å»ºä¸€ä¸ªï¼Œç„¶åç‚¹å‡»<code>+</code>å·ï¼Œé€‰æ‹©<code>åº“æ–‡ä»¶</code>å°†æ‰€æœ‰çš„åŒ…å¯¼å…¥è¿›å»ã€‚</p><h4 id=é…ç½®ç‰ˆ><a href=#%e9%85%8d%e7%bd%ae%e7%89%88 class=header-anchor></a>é…ç½®ç‰ˆ</h4><ol><li><p>å‡†å¤‡è¦çœ‹çš„è§†å›¾ã€‚åœ¨<code>WEB-INF</code>ç›®å½•ä¸‹åˆ›å»º<code>jsp</code>ç›®å½•ï¼Œåœ¨é‡Œé¢åˆ›å»º<code>test.jsp</code>ï¼Œå¡«å…¥<code>${msg}</code></p></li><li><p>é…ç½®SpringMVCã€‚åœ¨<code>web.xml</code>é‡Œæ·»åŠ ä¸‹é¢çš„ä»£ç ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;web-app</span> <span class=na>xmlns=</span><span class=s>&#34;http://xmlns.jcp.org/xml/ns/javaee&#34;</span>
</span></span><span class=line><span class=cl>         <span class=na>xmlns:xsi=</span><span class=s>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class=line><span class=cl>         <span class=na>xsi:schemaLocation=</span><span class=s>&#34;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&#34;</span>
</span></span><span class=line><span class=cl>         <span class=na>version=</span><span class=s>&#34;4.0&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--é…ç½®DispatchServletï¼šè¿™æ˜¯SpringMVCçš„æ ¸å¿ƒï¼šè¯·æ±‚åˆ†å‘å™¨ã€å‰ç«¯æ§åˆ¶å™¨--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;servlet&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;servlet-name&gt;</span>springmvc<span class=nt>&lt;/servlet-name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class=nt>&lt;/servlet-class&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!--DispatchServletè¦ç»‘å®šSpringçš„é…ç½®æ–‡ä»¶--&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;init-param&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;param-name&gt;</span>contextConfigLocation<span class=nt>&lt;/param-name&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;param-value&gt;</span>classpath:springmvc-servlet.xml<span class=nt>&lt;/param-value&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/init-param&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!--å¯åŠ¨çº§åˆ«1ï¼šéšæœåŠ¡å™¨ä¸€èµ·å¯åŠ¨--&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;load-on-startup&gt;</span>1<span class=nt>&lt;/load-on-startup&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/servlet&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;servlet-mapping&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;servlet-name&gt;</span>springmvc<span class=nt>&lt;/servlet-name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;url-pattern&gt;</span>/<span class=nt>&lt;/url-pattern&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/servlet-mapping&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/web-app&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>å¤‡æ³¨ï¼š</strong><code>/</code>å’Œ<code>/*</code>çš„åŒºåˆ«ï¼š<code>/</code>åŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œä¸åŒ¹é…jspé¡µé¢ï¼›<code>/*</code>ä¼šåŒ¹é…jspé¡µé¢ï¼Œè¿™æ ·ä¼šå¯¼è‡´åµŒå¥—ï¼Œä¸€èˆ¬ä¸ä¼šç”¨</p></li><li><p>ç¼–å†™SpringMVCçš„é…ç½®æ–‡ä»¶<code>springmvc-servlet.xml</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;beans</span> <span class=na>xmlns=</span><span class=s>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span class=line><span class=cl>       <span class=na>xmlns:xsi=</span><span class=s>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class=line><span class=cl>       <span class=na>xsi:schemaLocation=</span><span class=s>&#34;http://www.springframework.org/schema/beans
</span></span></span><span class=line><span class=cl><span class=s>       http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--å¤„ç†å™¨æ˜ å°„å™¨--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--å¤„ç†å™¨é€‚é…å™¨--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--è§†å›¾è§£æå™¨--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span> <span class=na>id=</span><span class=s>&#34;internalResourceViewResolver&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!--å‰ç¼€--&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;prefix&#34;</span> <span class=na>value=</span><span class=s>&#34;/WEB-INF/jsp/&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!--åç¼€--&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;suffix&#34;</span> <span class=na>value=</span><span class=s>&#34;.jsp&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>å®ç°Controlleræ¥å£</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span><span class=w> </span><span class=nn>top.lbqaq.Controller</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.web.servlet.ModelAndView</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.web.servlet.mvc.Controller</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>javax.servlet.http.HttpServletRequest</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>javax.servlet.http.HttpServletResponse</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HelloController</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Controller</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>ModelAndView</span><span class=w> </span><span class=nf>handleRequest</span><span class=p>(</span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>httpServletRequest</span><span class=p>,</span><span class=w> </span><span class=n>HttpServletResponse</span><span class=w> </span><span class=n>httpServletResponse</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ModelAndView</span><span class=w> </span><span class=n>mv</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ModelAndView</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//ä¸šåŠ¡ä»£ç </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;HelloSpringMVC&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>mv</span><span class=p>.</span><span class=na>addObject</span><span class=p>(</span><span class=s>&#34;msg&#34;</span><span class=p>,</span><span class=n>result</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//è§†å›¾è·³è½¬</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>mv</span><span class=p>.</span><span class=na>setViewName</span><span class=p>(</span><span class=s>&#34;test&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>mv</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>å°†Controlleråœ¨Springä¸­æ³¨å†Œ(<code>springmvc-servlet.xml</code>)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!--BeanNameUrlHandlerMapping:æŒ‰BeanNameåŒ¹é…--&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;/hello&#34;</span> <span class=na>class=</span><span class=s>&#34;top.lbqaq.Controller.HelloController&#34;</span><span class=nt>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>è¿è¡ŒTomCatæŸ¥çœ‹ç»“æœ</p></li></ol><p>ç„¶è€Œæ­£å¸¸å¼€å‘å¹¶ä¸ä¼šä½¿ç”¨è¿™æ ·çš„æ–¹å¼ï¼Œè¿™æ ·åšåªæ˜¯ä¸ºäº†ç†è§£åº•å±‚çš„æ“ä½œã€‚_(:Ğ·)âˆ )_</p><h4 id=æ³¨è§£ç‰ˆ><a href=#%e6%b3%a8%e8%a7%a3%e7%89%88 class=header-anchor></a>æ³¨è§£ç‰ˆ</h4><ol><li><p>é…ç½®<code>Web.xml</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl>    <span class=c>&lt;!--é…ç½®DispatchServletï¼šè¿™æ˜¯SpringMVCçš„æ ¸å¿ƒï¼šè¯·æ±‚åˆ†å‘å™¨ã€å‰ç«¯æ§åˆ¶å™¨--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;servlet&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;servlet-name&gt;</span>springmvc<span class=nt>&lt;/servlet-name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class=nt>&lt;/servlet-class&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!--DispatchServletè¦ç»‘å®šSpringçš„é…ç½®æ–‡ä»¶--&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;init-param&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;param-name&gt;</span>contextConfigLocation<span class=nt>&lt;/param-name&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;param-value&gt;</span>classpath:springmvc-servlet.xml<span class=nt>&lt;/param-value&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/init-param&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!--å¯åŠ¨çº§åˆ«1ï¼šéšæœåŠ¡å™¨ä¸€èµ·å¯åŠ¨ï¼›è¶Šå°çº§åˆ«è¶Šé«˜--&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;load-on-startup&gt;</span>1<span class=nt>&lt;/load-on-startup&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/servlet&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;servlet-mapping&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;servlet-name&gt;</span>springmvc<span class=nt>&lt;/servlet-name&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;url-pattern&gt;</span>/<span class=nt>&lt;/url-pattern&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/servlet-mapping&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿˜æ˜¯è€æ ·å­ï¼Œè¿™é‡Œæ²¡æœ‰ä»€ä¹ˆéœ€è¦æ”¹åŠ¨çš„ã€‚</p></li><li><p>åœ¨<code>resources</code>ç›®å½•ä¸‹æ·»åŠ SpringMVCé…ç½®æ–‡ä»¶<code>springmvc-servlet.xml</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;beans</span> <span class=na>xmlns=</span><span class=s>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span class=line><span class=cl>       <span class=na>xmlns:xsi=</span><span class=s>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class=line><span class=cl>       <span class=na>xmlns:context=</span><span class=s>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span class=line><span class=cl>       <span class=na>xmlns:mvc=</span><span class=s>&#34;http://www.springframework.org/schema/mvc&#34;</span>
</span></span><span class=line><span class=cl>       <span class=na>xsi:schemaLocation=</span><span class=s>&#34;http://www.springframework.org/schema/beans
</span></span></span><span class=line><span class=cl><span class=s>       http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span class=line><span class=cl><span class=s>       http://www.springframework.org/schema/context
</span></span></span><span class=line><span class=cl><span class=s>       https://www.springframework.org/schema/context/spring-context.xsd
</span></span></span><span class=line><span class=cl><span class=s>       http://www.springframework.org/schema/mvc
</span></span></span><span class=line><span class=cl><span class=s>       https://www.springframework.org/schema/mvc/spring-mvc.xsd&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œè®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ,ç”±IOCå®¹å™¨ç»Ÿä¸€ç®¡ç† --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;context:component-scan</span> <span class=na>base-package=</span><span class=s>&#34;top.lbqaq.controller&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- è®©Spring MVCä¸å¤„ç†é™æ€èµ„æº --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;mvc:default-servlet-handler</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--
</span></span></span><span class=line><span class=cl><span class=c>    æ”¯æŒmvcæ³¨è§£é©±åŠ¨
</span></span></span><span class=line><span class=cl><span class=c>        åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»
</span></span></span><span class=line><span class=cl><span class=c>        è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ
</span></span></span><span class=line><span class=cl><span class=c>        å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping
</span></span></span><span class=line><span class=cl><span class=c>        å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹
</span></span></span><span class=line><span class=cl><span class=c>        è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚
</span></span></span><span class=line><span class=cl><span class=c>        è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚
</span></span></span><span class=line><span class=cl><span class=c>     --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;mvc:annotation-driven</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span>
</span></span><span class=line><span class=cl>          <span class=na>id=</span><span class=s>&#34;internalResourceViewResolver&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- å‰ç¼€ --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;prefix&#34;</span> <span class=na>value=</span><span class=s>&#34;/WEB-INF/jsp/&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- åç¼€ --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;suffix&#34;</span> <span class=na>value=</span><span class=s>&#34;.jsp&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;/beans&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>åˆ›å»ºController</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Controller</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>HelloController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/hello&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>hello</span><span class=p>(</span><span class=n>Model</span><span class=w> </span><span class=n>model</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//å°è£…æ•°æ®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>model</span><span class=p>.</span><span class=na>addAttribute</span><span class=p>(</span><span class=s>&#34;msg&#34;</span><span class=p>,</span><span class=s>&#34;Hello,SpringMVCAnnotation!&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;hello&#34;</span><span class=p>;</span><span class=w>  </span><span class=c1>//ä¼šè¢«è§†å›¾è§£æå™¨å¤„ç†</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>@Controlleræ˜¯ä¸ºäº†è®©Spring IOCå®¹å™¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨æ‰«æåˆ°ï¼›</li><li>@RequestMappingæ˜¯ä¸ºäº†æ˜ å°„è¯·æ±‚è·¯å¾„ï¼Œè¿™é‡Œå› ä¸ºç±»ä¸æ–¹æ³•ä¸Šéƒ½æœ‰æ˜ å°„æ‰€ä»¥è®¿é—®æ—¶åº”è¯¥æ˜¯/helloï¼›</li><li>æ–¹æ³•ä¸­å£°æ˜Modelç±»å‹çš„å‚æ•°æ˜¯ä¸ºäº†æŠŠActionä¸­çš„æ•°æ®å¸¦åˆ°è§†å›¾ä¸­ï¼›</li><li>æ–¹æ³•è¿”å›çš„ç»“æœæ˜¯è§†å›¾çš„åç§°helloï¼ŒåŠ ä¸Šé…ç½®æ–‡ä»¶ä¸­çš„å‰åç¼€å˜æˆWEB-INF/jsp/<strong>hello</strong>.jspã€‚</li></ul></li><li><p>åˆ›å»ºè§†å›¾å±‚ï¼Œåœ¨<code>WEB-INF/jsp</code>ç›®å½•ä¸­åˆ›å»º<code>hello.jsp</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
</span></span><span class=line><span class=cl>&lt;html&gt;
</span></span><span class=line><span class=cl>&lt;head&gt;
</span></span><span class=line><span class=cl>    &lt;title&gt;Title&lt;/title&gt;
</span></span><span class=line><span class=cl>&lt;/head&gt;
</span></span><span class=line><span class=cl>&lt;body&gt;
</span></span><span class=line><span class=cl>${msg}
</span></span><span class=line><span class=cl>&lt;/body&gt;
</span></span><span class=line><span class=cl>&lt;/html&gt;
</span></span></code></pre></td></tr></table></div></div></li><li><p>è¿è¡ŒTomCatæŸ¥çœ‹ç»“æœ</p></li></ol><h4 id=å°ç»“><a href=#%e5%b0%8f%e7%bb%93 class=header-anchor></a>å°ç»“</h4><p>å®ç°æ­¥éª¤å…¶å®éå¸¸çš„ç®€å•ï¼š</p><ol><li>æ–°å»ºä¸€ä¸ªwebé¡¹ç›®</li><li>å¯¼å…¥ç›¸å…³jaråŒ…</li><li>ç¼–å†™web.xml , æ³¨å†ŒDispatcherServlet</li><li>ç¼–å†™springmvcé…ç½®æ–‡ä»¶</li><li>æ¥ä¸‹æ¥å°±æ˜¯å»åˆ›å»ºå¯¹åº”çš„æ§åˆ¶ç±» , controller</li><li>æœ€åå®Œå–„å‰ç«¯è§†å›¾å’Œcontrollerä¹‹é—´çš„å¯¹åº”</li><li>æµ‹è¯•è¿è¡Œè°ƒè¯•.</li></ol><p>ä½¿ç”¨springMVCå¿…é¡»é…ç½®çš„ä¸‰å¤§ä»¶ï¼š</p><p><strong>å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è§†å›¾è§£æå™¨</strong></p><p>é€šå¸¸ï¼Œæˆ‘ä»¬åªéœ€è¦<strong>æ‰‹åŠ¨é…ç½®è§†å›¾è§£æå™¨</strong>ï¼Œè€Œ<strong>å¤„ç†å™¨æ˜ å°„å™¨</strong>å’Œ<strong>å¤„ç†å™¨é€‚é…å™¨</strong>åªéœ€è¦å¼€å¯<strong>æ³¨è§£é©±åŠ¨</strong>å³å¯ï¼Œè€Œçœå»äº†å¤§æ®µçš„xmlé…ç½®</p><h2 id=restfulé£æ ¼><a href=#restful%e9%a3%8e%e6%a0%bc class=header-anchor></a>RestFulé£æ ¼</h2><p><strong>æ¦‚å¿µ</strong></p><p>Restfulå°±æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠèµ„æºæ“ä½œçš„é£æ ¼ã€‚ä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œåªæ˜¯ä¸€ç§é£æ ¼ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p><p><strong>åŠŸèƒ½</strong></p><p>èµ„æºï¼šäº’è”ç½‘æ‰€æœ‰çš„äº‹ç‰©éƒ½å¯ä»¥è¢«æŠ½è±¡ä¸ºèµ„æº</p><p>èµ„æºæ“ä½œï¼šä½¿ç”¨POSTã€DELETEã€PUTã€GETï¼Œä½¿ç”¨ä¸åŒæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚</p><p>åˆ†åˆ«å¯¹åº” æ·»åŠ ã€ åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ã€‚</p><p><strong>ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº</strong> ï¼šé€šè¿‡ä¸åŒçš„å‚æ•°æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼æ–¹æ³•å•ä¸€ï¼Œpost å’Œ get</p><p>â€‹ http://127.0.0.1/item/queryItem.action?id=1 æŸ¥è¯¢,GET</p><p>â€‹ http://127.0.0.1/item/saveItem.action æ–°å¢,POST</p><p>â€‹ http://127.0.0.1/item/updateItem.action æ›´æ–°,POST</p><p>â€‹ http://127.0.0.1/item/deleteItem.action?id=1 åˆ é™¤,GETæˆ–POST</p><p><strong>ä½¿ç”¨RESTfulæ“ä½œèµ„æº</strong> ï¼šå¯ä»¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼å¦‚ä¸‹ï¼šè¯·æ±‚åœ°å€ä¸€æ ·ï¼Œä½†æ˜¯åŠŸèƒ½å¯ä»¥ä¸åŒï¼</p><p>â€‹ http://127.0.0.1/item/1 æŸ¥è¯¢,GET</p><p>â€‹ http://127.0.0.1/item æ–°å¢,POST</p><p>â€‹ http://127.0.0.1/item æ›´æ–°,PUT</p><p>â€‹ http://127.0.0.1/item/1 åˆ é™¤,DELETE</p><p><strong>ä½¿ç”¨æ–¹æ³•</strong></p><p>åˆ›å»ºä¸€ä¸ªç±»<code>RestFulController</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Controller</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>RestFulController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//åŸæ¥çš„ï¼šlocalhost:8085/add?a=1&amp;b=2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//Restful:localhost:8085/add/1/2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/add/{a}/{b}&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>test1</span><span class=p>(</span><span class=nd>@PathVariable</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=nd>@PathVariable</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>Model</span><span class=w> </span><span class=n>model</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>res</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=o>+</span><span class=n>b</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>model</span><span class=p>.</span><span class=na>addAttribute</span><span class=p>(</span><span class=s>&#34;msg&#34;</span><span class=p>,</span><span class=s>&#34;ç»“æœä¸º&#34;</span><span class=o>+</span><span class=n>res</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;test&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><code>@RequestMapping</code>é‡Œé¢çš„<code>{a}</code>å°±ä»£è¡¨è¿™é‡Œæ˜¯ä¼ ç»™aå˜é‡çš„å€¼ï¼›ä¸‹é¢çš„aå˜é‡å‰è¦åŠ <code>@PathVariable</code></p><p>ä½¿ç”¨è·¯å¾„å˜é‡çš„å¥½å¤„ï¼Ÿ</p><ul><li>ä½¿è·¯å¾„å˜å¾—æ›´åŠ ç®€æ´ï¼›</li><li>è·å¾—å‚æ•°æ›´åŠ æ–¹ä¾¿ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li><li>é€šè¿‡è·¯å¾„å˜é‡çš„ç±»å‹å¯ä»¥çº¦æŸè®¿é—®å‚æ•°ï¼Œå¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ™è®¿é—®ä¸åˆ°å¯¹åº”çš„è¯·æ±‚æ–¹æ³•ï¼Œå¦‚è¿™é‡Œè®¿é—®æ˜¯çš„è·¯å¾„æ˜¯/commit/1/aï¼Œåˆ™è·¯å¾„ä¸æ–¹æ³•ä¸åŒ¹é…ï¼Œè€Œä¸ä¼šæ˜¯å‚æ•°è½¬æ¢å¤±è´¥ã€‚</li></ul><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œæ–¹æ³•çº¦æŸï¼Œè®©å…¶åªå“åº”æŸä¸€ç§è¯·æ±‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@GetMapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@PostMapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@PutMapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@DeleteMapping</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@PatchMapping</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æ‹¿<code>@GetMapping</code>æ¥è¯´ï¼Œå°±æ˜¯<code>@RequestMapping(method =RequestMethod.GET)</code>æ„æ€ï¼Œå¦‚æœä½¿ç”¨å…¶ä»–çš„æ–¹æ³•ï¼Œå°†ä¼šæŠ¥405é”™è¯¯ã€‚</p><h2 id=é‡å®šå‘å’Œè½¬å‘><a href=#%e9%87%8d%e5%ae%9a%e5%90%91%e5%92%8c%e8%bd%ac%e5%8f%91 class=header-anchor></a>é‡å®šå‘å’Œè½¬å‘</h2><p>é‡å®šå‘ä¸éœ€è¦è§†å›¾è§£æå™¨ï¼Œæœ¬è´¨å°±æ˜¯é‡æ–°è¯·æ±‚ä¸€ä¸ªæ–°åœ°æ–¹ã€‚</p><p>å¯ä»¥é‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªè¯·æ±‚å®ç°ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Controller</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ResultSpringMVC2</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/rsm2/t1&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>test1</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//è½¬å‘</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;test&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/rsm2/t2&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>test2</span><span class=p>(){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//é‡å®šå‘</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=s>&#34;redirect:/index.jsp&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//return &#34;redirect:hello.do&#34;; //hello.doä¸ºå¦ä¸€ä¸ªè¯·æ±‚/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=æ•°æ®å¤„ç†><a href=#%e6%95%b0%e6%8d%ae%e5%a4%84%e7%90%86 class=header-anchor></a>æ•°æ®å¤„ç†</h2><h3 id=å¤„ç†æäº¤æ•°æ®><a href=#%e5%a4%84%e7%90%86%e6%8f%90%e4%ba%a4%e6%95%b0%e6%8d%ae class=header-anchor></a>å¤„ç†æäº¤æ•°æ®</h3><p><strong>1ã€æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸€è‡´</strong></p><p>æäº¤æ•°æ® : http://localhost:8080/hello?name=lbqaq</p><p>å¤„ç†æ–¹æ³• :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/hello&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>hello</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>name</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=s>&#34;hello&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>åå°è¾“å‡º : lbqaq</p><p><strong>2ã€æäº¤çš„åŸŸåç§°å’Œå¤„ç†æ–¹æ³•çš„å‚æ•°åä¸ä¸€è‡´</strong></p><p>æäº¤æ•°æ® : http://localhost:8080/hello?username=lbqaq</p><p>å¤„ç†æ–¹æ³• :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//@RequestParam(&#34;username&#34;) : usernameæäº¤çš„åŸŸçš„åç§° .</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/hello&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>hello</span><span class=p>(</span><span class=nd>@RequestParam</span><span class=p>(</span><span class=s>&#34;username&#34;</span><span class=p>)</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>name</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=s>&#34;hello&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>åå°è¾“å‡º : lbqaq</p><p><strong>3ã€æäº¤çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</strong></p><p>è¦æ±‚æäº¤çš„è¡¨å•åŸŸå’Œå¯¹è±¡çš„å±æ€§åä¸€è‡´ , å‚æ•°ä½¿ç”¨å¯¹è±¡å³å¯</p><p>1ã€å®ä½“ç±»</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>User</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//æ„é€ </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//get/set</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//tostring()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>2ã€æäº¤æ•°æ® : http://localhost:8080/mvc04/user?name=lbqaq&amp;id=1&amp;age=15</p><p>3ã€å¤„ç†æ–¹æ³• :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/user&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>user</span><span class=p>(</span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>user</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=s>&#34;hello&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>åå°è¾“å‡º : User { id=1, name=&lsquo;lbqaq&rsquo;, age=15 }</p><p>è¯´æ˜ï¼šå¦‚æœä½¿ç”¨å¯¹è±¡çš„è¯ï¼Œå‰ç«¯ä¼ é€’çš„å‚æ•°åå’Œå¯¹è±¡åå¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™å°±æ˜¯nullã€‚</p><h3 id=æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯><a href=#%e6%95%b0%e6%8d%ae%e6%98%be%e7%a4%ba%e5%88%b0%e5%89%8d%e7%ab%af class=header-anchor></a>æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯</h3><p><strong>ç¬¬ä¸€ç§ : é€šè¿‡ModelAndView</strong></p><p>æˆ‘ä»¬å‰é¢ä¸€ç›´éƒ½æ˜¯å¦‚æ­¤ . å°±ä¸è¿‡å¤šè§£é‡Š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ControllerTest1</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Controller</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>ModelAndView</span><span class=w> </span><span class=nf>handleRequest</span><span class=p>(</span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>httpServletRequest</span><span class=p>,</span><span class=w> </span><span class=n>HttpServletResponse</span><span class=w> </span><span class=n>httpServletResponse</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//è¿”å›ä¸€ä¸ªæ¨¡å‹è§†å›¾å¯¹è±¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ModelAndView</span><span class=w> </span><span class=n>mv</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ModelAndView</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>mv</span><span class=p>.</span><span class=na>addObject</span><span class=p>(</span><span class=s>&#34;msg&#34;</span><span class=p>,</span><span class=s>&#34;ControllerTest1&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>mv</span><span class=p>.</span><span class=na>setViewName</span><span class=p>(</span><span class=s>&#34;test&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>mv</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>ç¬¬äºŒç§ : é€šè¿‡ModelMap</strong></p><p>ModelMap</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/hello&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>hello</span><span class=p>(</span><span class=nd>@RequestParam</span><span class=p>(</span><span class=s>&#34;username&#34;</span><span class=p>)</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>ModelMap</span><span class=w> </span><span class=n>model</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//ç›¸å½“äºreq.setAttribute(&#34;name&#34;,name);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>model</span><span class=p>.</span><span class=na>addAttribute</span><span class=p>(</span><span class=s>&#34;name&#34;</span><span class=p>,</span><span class=n>name</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>name</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=s>&#34;hello&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>ç¬¬ä¸‰ç§ : é€šè¿‡Model</strong></p><p>Model</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/ct2/hello&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>hello</span><span class=p>(</span><span class=nd>@RequestParam</span><span class=p>(</span><span class=s>&#34;username&#34;</span><span class=p>)</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>Model</span><span class=w> </span><span class=n>model</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//å°è£…è¦æ˜¾ç¤ºåˆ°è§†å›¾ä¸­çš„æ•°æ®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//ç›¸å½“äºreq.setAttribute(&#34;name&#34;,name);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>model</span><span class=p>.</span><span class=na>addAttribute</span><span class=p>(</span><span class=s>&#34;msg&#34;</span><span class=p>,</span><span class=n>name</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>name</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=s>&#34;test&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=å¯¹æ¯”><a href=#%e5%af%b9%e6%af%94 class=header-anchor></a>å¯¹æ¯”</h3><p>å°±å¯¹äºæ–°æ‰‹è€Œè¨€ç®€å•æ¥è¯´ä½¿ç”¨åŒºåˆ«å°±æ˜¯ï¼š</p><ul><li>Model åªæœ‰å¯¥å¯¥å‡ ä¸ªæ–¹æ³•åªé€‚åˆç”¨äºå‚¨å­˜æ•°æ®ï¼Œç®€åŒ–äº†æ–°æ‰‹å¯¹äºModelå¯¹è±¡çš„æ“ä½œå’Œç†è§£ï¼›</li><li>ModelMap ç»§æ‰¿äº† LinkedMap ï¼Œé™¤äº†å®ç°äº†è‡ªèº«çš„ä¸€äº›æ–¹æ³•ï¼ŒåŒæ ·çš„ç»§æ‰¿ LinkedMap çš„æ–¹æ³•å’Œç‰¹æ€§ï¼›</li><li>ModelAndView å¯ä»¥åœ¨å‚¨å­˜æ•°æ®çš„åŒæ—¶ï¼Œå¯ä»¥è¿›è¡Œè®¾ç½®è¿”å›çš„é€»è¾‘è§†å›¾ï¼Œè¿›è¡Œæ§åˆ¶å±•ç¤ºå±‚çš„è·³è½¬ã€‚</li></ul><p>å½“ç„¶æ›´å¤šçš„ä»¥åå¼€å‘è€ƒè™‘çš„æ›´å¤šçš„æ˜¯æ€§èƒ½å’Œä¼˜åŒ–ï¼Œå°±ä¸èƒ½å•å•ä»…é™äºæ­¤çš„äº†è§£ã€‚</p><p>è¿™é‡Œéƒ½æ˜¯æ¦‚å¿µæ€§çš„å†…å®¹ï¼Œæ‰€ä»¥å°±ç›´æ¥å¤åˆ¶ç¬”è®°äº†ğŸ˜Œ</p><h4 id=è§£å†³ä¹±ç ><a href=#%e8%a7%a3%e5%86%b3%e4%b9%b1%e7%a0%81 class=header-anchor></a>è§£å†³ä¹±ç </h4><p>ç›´æ¥æŠŠSpringçš„ä¹±ç å¤„ç†å™¨æ”¾å…¥<code>web.xml</code>é‡Œ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;filter&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;filter-name&gt;</span>encoding<span class=nt>&lt;/filter-name&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class=nt>&lt;/filter-class&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;init-param&gt;</span>
</span></span><span class=line><span class=cl>       <span class=nt>&lt;param-name&gt;</span>encoding<span class=nt>&lt;/param-name&gt;</span>
</span></span><span class=line><span class=cl>       <span class=nt>&lt;param-value&gt;</span>utf-8<span class=nt>&lt;/param-value&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;/init-param&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/filter&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;filter-mapping&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;filter-name&gt;</span>encoding<span class=nt>&lt;/filter-name&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;url-pattern&gt;</span>/*<span class=nt>&lt;/url-pattern&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/filter-mapping&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=json><a href=#json class=header-anchor></a>JSON</h2><ul><li>JSON(JavaScript Object Notation, JS å¯¹è±¡æ ‡è®°) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œç›®å‰ä½¿ç”¨ç‰¹åˆ«å¹¿æ³›ã€‚</li><li>é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„<strong>æ–‡æœ¬æ ¼å¼</strong>æ¥å­˜å‚¨å’Œè¡¨ç¤ºæ•°æ®ã€‚</li><li>ç®€æ´å’Œæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ä½¿å¾— JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚</li><li>æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆï¼Œå¹¶æœ‰æ•ˆåœ°æå‡ç½‘ç»œä¼ è¾“æ•ˆç‡ã€‚</li></ul><h3 id=ä½¿ç”¨jackson><a href=#%e4%bd%bf%e7%94%a8jackson class=header-anchor></a>ä½¿ç”¨Jackson</h3><ol><li><p>å¯¼å…¥ä¾èµ–</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>com.fasterxml.jackson.core<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>jackson-core<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>2.12.4<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>ç¼–å†™Controller</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Controller</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/json1&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@ResponseBody</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>json1</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>JsonProcessingException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>ObjectMapper</span><span class=w> </span><span class=n>mapper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ObjectMapper</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=s>&#34;å°æ˜&#34;</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ç”·&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>String</span><span class=w> </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mapper</span><span class=p>.</span><span class=na>writeValueAsString</span><span class=p>(</span><span class=n>user</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//ç”±äº@ResponseBodyæ³¨è§£ï¼Œè¿™é‡Œä¼šå°†strè½¬æˆjsonæ ¼å¼è¿”å›ï¼›ååˆ†æ–¹ä¾¿</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>return</span><span class=w> </span><span class=n>str</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>å¦‚æœå‡ºç°ä¹±ç ï¼Œå¯ä»¥æŒ‡å®šç¼–ç æ ¼å¼ä¸ºUTF8æ¥è§£å†³</p><p><code>@RequestMapping(value = "/json1",produces = "application/json;charset=utf-8")</code></p></li></ol><p>è¿™æ ·å¤„ç†ä¹±ç è¿˜æ˜¯å¤ªéº»çƒ¦äº†ï¼Œå¯ä»¥è®©Springç»Ÿä¸€ç®¡ç†ï¼Œåœ¨SpringMVCçš„é…ç½®æ–‡ä»¶é‡ŒåŠ ä¸Šä¸‹é¢çš„ä»£ç ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;mvc:annotation-driven&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;mvc:message-converters</span> <span class=na>register-defaults=</span><span class=s>&#34;true&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>       <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.http.converter.StringHttpMessageConverter&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>           <span class=nt>&lt;constructor-arg</span> <span class=na>value=</span><span class=s>&#34;UTF-8&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>       <span class=nt>&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl>       <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>           <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;objectMapper&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>               <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>                   <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;failOnEmptyBeans&#34;</span> <span class=na>value=</span><span class=s>&#34;false&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>               <span class=nt>&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl>           <span class=nt>&lt;/property&gt;</span>
</span></span><span class=line><span class=cl>       <span class=nt>&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;/mvc:message-converters&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/mvc:annotation-driven&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ç±»ä¸Šç›´æ¥ä½¿ç”¨ <code>@RestController</code> ï¼Œè¿™æ ·å­ï¼Œé‡Œé¢æ‰€æœ‰çš„æ–¹æ³•éƒ½åªä¼šè¿”å› json å­—ç¬¦ä¸²äº†ï¼Œä¸ç”¨å†æ¯ä¸€ä¸ªéƒ½æ·»åŠ <code>@ResponseBody</code> ï¼æˆ‘ä»¬åœ¨å‰åç«¯åˆ†ç¦»å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨ <code>@RestController</code> ï¼Œååˆ†ä¾¿æ·ï¼</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RestController</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>//produces:æŒ‡å®šå“åº”ä½“è¿”å›ç±»å‹å’Œç¼–ç </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;/json1&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>json1</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>JsonProcessingException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ObjectMapper</span><span class=w> </span><span class=n>mapper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ObjectMapper</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>User</span><span class=w> </span><span class=n>user</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=s>&#34;å°æ˜&#34;</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ç”·&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mapper</span><span class=p>.</span><span class=na>writeValueAsString</span><span class=p>(</span><span class=n>user</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>//ç”±äº@ResponseBodyæ³¨è§£ï¼Œè¿™é‡Œä¼šå°†strè½¬æˆjsonæ ¼å¼è¿”å›ï¼›ååˆ†æ–¹ä¾¿</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>str</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>è‡ªå®šä¹‰å·¥å…·ç±»ï¼Œå¯ä»¥æ˜¯JSONè½¬æ¢å˜å¾—æ›´ç®€å•</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>JsonUtils</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>getJson</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>object</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>return</span><span class=w> </span><span class=n>getJson</span><span class=p>(</span><span class=n>object</span><span class=p>,</span><span class=s>&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>getJson</span><span class=p>(</span><span class=n>Object</span><span class=w> </span><span class=n>object</span><span class=p>,</span><span class=n>String</span><span class=w> </span><span class=n>dateFormat</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>ObjectMapper</span><span class=w> </span><span class=n>mapper</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ObjectMapper</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//ä¸ä½¿ç”¨æ—¶é—´å·®çš„æ–¹å¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>mapper</span><span class=p>.</span><span class=na>configure</span><span class=p>(</span><span class=n>SerializationFeature</span><span class=p>.</span><span class=na>WRITE_DATES_AS_TIMESTAMPS</span><span class=p>,</span><span class=w> </span><span class=kc>false</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼å¯¹è±¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>SimpleDateFormat</span><span class=w> </span><span class=n>sdf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>SimpleDateFormat</span><span class=p>(</span><span class=n>dateFormat</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//æŒ‡å®šæ—¥æœŸæ ¼å¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>mapper</span><span class=p>.</span><span class=na>setDateFormat</span><span class=p>(</span><span class=n>sdf</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=k>return</span><span class=w> </span><span class=n>mapper</span><span class=p>.</span><span class=na>writeValueAsString</span><span class=p>(</span><span class=n>object</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>JsonProcessingException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=n>e</span><span class=p>.</span><span class=na>printStackTrace</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=ä½¿ç”¨fastjson><a href=#%e4%bd%bf%e7%94%a8fastjson class=header-anchor></a>ä½¿ç”¨FastJson</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>com.alibaba<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>fastjson<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>1.2.78<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸ºäº†ä½¿<code>@RestController</code>æœ‰æ•ˆï¼Œéœ€è¦åœ¨Springé…ç½®é‡ŒåŠ ä¸Šä¸‹é¢çš„å†…å®¹</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;mvc:annotation-driven&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;mvc:message-converters</span> <span class=na>register-defaults=</span><span class=s>&#34;true&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- é…ç½®Fastjsonæ”¯æŒ --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;supportedMediaTypes&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;list&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;value&gt;</span>application/json<span class=nt>&lt;/value&gt;</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&lt;value&gt;</span>text/html;charset=UTF-8<span class=nt>&lt;/value&gt;</span>
</span></span><span class=line><span class=cl>                <span class=nt>&lt;/list&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;/property&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/bean&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/mvc:message-converters&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/mvc:annotation-driven&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>fastjson ä¸‰ä¸ªä¸»è¦çš„ç±»ï¼š</p><p><strong>JSONObject ä»£è¡¨ json å¯¹è±¡</strong></p><ul><li>JSONObjectå®ç°äº†Mapæ¥å£, çŒœæƒ³ JSONObjectåº•å±‚æ“ä½œæ˜¯ç”±Mapå®ç°çš„ã€‚</li><li>JSONObjectå¯¹åº”jsonå¯¹è±¡ï¼Œé€šè¿‡å„ç§å½¢å¼çš„get()æ–¹æ³•å¯ä»¥è·å–jsonå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œä¹Ÿå¯åˆ©ç”¨è¯¸å¦‚size()ï¼ŒisEmpty()ç­‰æ–¹æ³•è·å–"é”®ï¼šå€¼"å¯¹çš„ä¸ªæ•°å’Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºã€‚å…¶æœ¬è´¨æ˜¯é€šè¿‡å®ç°Mapæ¥å£å¹¶è°ƒç”¨æ¥å£ä¸­çš„æ–¹æ³•å®Œæˆçš„ã€‚</li></ul><p><strong>JSONArray ä»£è¡¨ json å¯¹è±¡æ•°ç»„</strong></p><ul><li>å†…éƒ¨æ˜¯æœ‰Listæ¥å£ä¸­çš„æ–¹æ³•æ¥å®Œæˆæ“ä½œçš„ã€‚</li></ul><p><strong>JSONä»£è¡¨ JSONObjectå’ŒJSONArrayçš„è½¬åŒ–</strong></p><ul><li>JSONç±»æºç åˆ†æä¸ä½¿ç”¨</li><li>ä»”ç»†è§‚å¯Ÿè¿™äº›æ–¹æ³•ï¼Œä¸»è¦æ˜¯å®ç°jsonå¯¹è±¡ï¼Œjsonå¯¹è±¡æ•°ç»„ï¼Œjavabeanå¯¹è±¡ï¼Œjsonå­—ç¬¦ä¸²ä¹‹é—´çš„ç›¸äº’è½¬åŒ–ã€‚</li></ul><p>æµ‹è¯•ä»£ç </p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>FastJsonDemo</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>User</span><span class=w> </span><span class=n>user1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=s>&#34;1å·&#34;</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ç”·&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>User</span><span class=w> </span><span class=n>user2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=s>&#34;2å·&#34;</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ç”·&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>User</span><span class=w> </span><span class=n>user3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=s>&#34;3å·&#34;</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ç”·&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>User</span><span class=w> </span><span class=n>user4</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>User</span><span class=p>(</span><span class=s>&#34;4å·&#34;</span><span class=p>,</span><span class=w> </span><span class=n>3</span><span class=p>,</span><span class=w> </span><span class=s>&#34;ç”·&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>List</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span><span class=w> </span><span class=n>list</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>user1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>user2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>user3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>list</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>user4</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;*******Javaå¯¹è±¡ è½¬ JSONå­—ç¬¦ä¸²*******&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>String</span><span class=w> </span><span class=n>str1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>JSON</span><span class=p>.</span><span class=na>toJSONString</span><span class=p>(</span><span class=n>list</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;JSON.toJSONString(list)==&gt;&#34;</span><span class=o>+</span><span class=n>str1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>String</span><span class=w> </span><span class=n>str2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>JSON</span><span class=p>.</span><span class=na>toJSONString</span><span class=p>(</span><span class=n>user1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;JSON.toJSONString(user1)==&gt;&#34;</span><span class=o>+</span><span class=n>str2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;\n****** JSONå­—ç¬¦ä¸² è½¬ Javaå¯¹è±¡*******&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>User</span><span class=w> </span><span class=n>jp_user1</span><span class=o>=</span><span class=n>JSON</span><span class=p>.</span><span class=na>parseObject</span><span class=p>(</span><span class=n>str2</span><span class=p>,</span><span class=n>User</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;JSON.parseObject(str2,User.class)==&gt;&#34;</span><span class=o>+</span><span class=n>jp_user1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;\n****** Javaå¯¹è±¡ è½¬ JSONå¯¹è±¡ ******&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>JSONObject</span><span class=w> </span><span class=n>jsonObject1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>JSONObject</span><span class=p>)</span><span class=w> </span><span class=n>JSON</span><span class=p>.</span><span class=na>toJSON</span><span class=p>(</span><span class=n>user2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;(JSONObject) JSON.toJSON(user2)==&gt;&#34;</span><span class=o>+</span><span class=n>jsonObject1</span><span class=p>.</span><span class=na>getString</span><span class=p>(</span><span class=s>&#34;name&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;\n****** JSONå¯¹è±¡ è½¬ Javaå¯¹è±¡ ******&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>User</span><span class=w> </span><span class=n>to_java_user</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>JSON</span><span class=p>.</span><span class=na>toJavaObject</span><span class=p>(</span><span class=n>jsonObject1</span><span class=p>,</span><span class=w> </span><span class=n>User</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;JSON.toJavaObject(jsonObject1, User.class)==&gt;&#34;</span><span class=o>+</span><span class=n>to_java_user</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Jacksonåˆšåˆšæµ‹è¯•æ²¡æˆåŠŸï¼Œè¿˜æ˜¯é€‰æ‹©FastJsonå§ğŸ˜‡ã€‚</p><h2 id=æ‹¦æˆªå™¨><a href=#%e6%8b%a6%e6%88%aa%e5%99%a8 class=header-anchor></a>æ‹¦æˆªå™¨</h2><h3 id=æ¦‚è¿°-1><a href=#%e6%a6%82%e8%bf%b0-1 class=header-anchor></a>æ¦‚è¿°</h3><p>SpringMVCçš„å¤„ç†å™¨æ‹¦æˆªå™¨ç±»ä¼¼äºServletå¼€å‘ä¸­çš„è¿‡æ»¤å™¨Filter,ç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚å¼€å‘è€…å¯ä»¥è‡ªå·±å®šä¹‰ä¸€äº›æ‹¦æˆªå™¨æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚</p><p>**è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„åŒºåˆ«ï¼š**æ‹¦æˆªå™¨æ˜¯AOPæ€æƒ³çš„å…·ä½“åº”ç”¨ã€‚</p><p><strong>è¿‡æ»¤å™¨</strong></p><ul><li>servletè§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•java webå·¥ç¨‹éƒ½å¯ä»¥ä½¿ç”¨</li><li>åœ¨url-patternä¸­é…ç½®äº†/*ä¹‹åï¼Œå¯ä»¥å¯¹æ‰€æœ‰è¦è®¿é—®çš„èµ„æºè¿›è¡Œæ‹¦æˆª</li></ul><p><strong>æ‹¦æˆªå™¨</strong></p><ul><li>æ‹¦æˆªå™¨æ˜¯SpringMVCæ¡†æ¶è‡ªå·±çš„ï¼Œåªæœ‰ä½¿ç”¨äº†SpringMVCæ¡†æ¶çš„å·¥ç¨‹æ‰èƒ½ä½¿ç”¨</li><li>æ‹¦æˆªå™¨åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œ å¦‚æœè®¿é—®çš„æ˜¯jsp/html/css/image/jsæ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„</li></ul><h3 id=ä½¿ç”¨æ–¹æ³•><a href=#%e4%bd%bf%e7%94%a8%e6%96%b9%e6%b3%95 class=header-anchor></a>ä½¿ç”¨æ–¹æ³•</h3><ol><li><p>è‡ªå®šä¹‰æ‹¦æˆªå™¨éœ€è¦å®ç°æ¥å£<code>HandlerInterceptor</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>MyInterceptor</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>HandlerInterceptor</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//åœ¨è¯·æ±‚å¤„ç†çš„æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//å¦‚æœè¿”å›trueæ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//å¦‚æœè¿”å›falseå°±ä¸æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>preHandle</span><span class=p>(</span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>httpServletRequest</span><span class=p>,</span><span class=w> </span><span class=n>HttpServletResponse</span><span class=w> </span><span class=n>httpServletResponse</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=n>o</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;------------å¤„ç†å‰------------&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//åœ¨è¯·æ±‚å¤„ç†æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>postHandle</span><span class=p>(</span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>httpServletRequest</span><span class=p>,</span><span class=w> </span><span class=n>HttpServletResponse</span><span class=w> </span><span class=n>httpServletResponse</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=n>o</span><span class=p>,</span><span class=w> </span><span class=n>ModelAndView</span><span class=w> </span><span class=n>modelAndView</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;------------å¤„ç†å------------&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//åœ¨dispatcherServletå¤„ç†åæ‰§è¡Œ,åšæ¸…ç†å·¥ä½œ.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>afterCompletion</span><span class=p>(</span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>httpServletRequest</span><span class=p>,</span><span class=w> </span><span class=n>HttpServletResponse</span><span class=w> </span><span class=n>httpServletResponse</span><span class=p>,</span><span class=w> </span><span class=n>Object</span><span class=w> </span><span class=n>o</span><span class=p>,</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;------------æ¸…ç†------------&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li><li><p>åœ¨springmvcçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!--å…³äºæ‹¦æˆªå™¨çš„é…ç½®--&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;mvc:interceptors&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;mvc:interceptor&gt;</span>
</span></span><span class=line><span class=cl>       <span class=c>&lt;!--/** åŒ…æ‹¬è·¯å¾„åŠå…¶å­è·¯å¾„--&gt;</span>
</span></span><span class=line><span class=cl>       <span class=c>&lt;!--/admin/* æ‹¦æˆªçš„æ˜¯/admin/addç­‰ç­‰è¿™ç§ , /admin/add/userä¸ä¼šè¢«æ‹¦æˆª--&gt;</span>
</span></span><span class=line><span class=cl>       <span class=c>&lt;!--/admin/** æ‹¦æˆªçš„æ˜¯/admin/ä¸‹çš„æ‰€æœ‰--&gt;</span>
</span></span><span class=line><span class=cl>       <span class=nt>&lt;mvc:mapping</span> <span class=na>path=</span><span class=s>&#34;/**&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>       <span class=c>&lt;!--beané…ç½®çš„å°±æ˜¯æ‹¦æˆªå™¨--&gt;</span>
</span></span><span class=line><span class=cl>       <span class=nt>&lt;bean</span> <span class=na>class=</span><span class=s>&#34;top.lbqaq.interceptor.MyInterceptor&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;/mvc:interceptor&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/mvc:interceptors&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li></ol><p>æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>------------å¤„ç†å‰------------
</span></span><span class=line><span class=cl>Controlleræ–¹æ³•
</span></span><span class=line><span class=cl>------------å¤„ç†å------------
</span></span><span class=line><span class=cl>------------æ¸…ç†------------
</span></span></code></pre></td></tr></table></div></div><p>æ‹¦æˆªå™¨å¯ä»¥ç”¨æ¥åšç™»å½•éªŒè¯ç­‰ç­‰å†…å®¹ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼ˆæ‰ä¸æ˜¯æ‡’å¾—å†™ï¼‰</p><h2 id=æ–‡ä»¶ä¼ è¾“><a href=#%e6%96%87%e4%bb%b6%e4%bc%a0%e8%be%93 class=header-anchor></a>æ–‡ä»¶ä¼ è¾“</h2><p>æ–‡ä»¶ä¸Šä¼ æ˜¯é¡¹ç›®å¼€å‘ä¸­æœ€å¸¸è§çš„åŠŸèƒ½ä¹‹ä¸€ ,springMVC å¯ä»¥å¾ˆå¥½çš„æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œä½†æ˜¯SpringMVCä¸Šä¸‹æ–‡ä¸­é»˜è®¤æ²¡æœ‰è£…é…MultipartResolverï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹å…¶ä¸èƒ½å¤„ç†æ–‡ä»¶ä¸Šä¼ å·¥ä½œã€‚å¦‚æœæƒ³ä½¿ç”¨Springçš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ä¸Šä¸‹æ–‡ä¸­é…ç½®MultipartResolverã€‚</p><p>å‰ç«¯è¡¨å•è¦æ±‚ï¼šä¸ºäº†èƒ½ä¸Šä¼ æ–‡ä»¶ï¼Œå¿…é¡»å°†è¡¨å•çš„methodè®¾ç½®ä¸ºPOSTï¼Œå¹¶å°†enctypeè®¾ç½®ä¸ºmultipart/form-dataã€‚åªæœ‰åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨æ‰ä¼šæŠŠç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼›</p><p><strong>å¯¹è¡¨å•ä¸­çš„ enctype å±æ€§åšä¸ªè¯¦ç»†çš„è¯´æ˜ï¼š</strong></p><ul><li>application/x-www=form-urlencodedï¼šé»˜è®¤æ–¹å¼ï¼Œåªå¤„ç†è¡¨å•åŸŸä¸­çš„ value å±æ€§å€¼ï¼Œé‡‡ç”¨è¿™ç§ç¼–ç æ–¹å¼çš„è¡¨å•ä¼šå°†è¡¨å•åŸŸä¸­çš„å€¼å¤„ç†æˆ URL ç¼–ç æ–¹å¼ã€‚</li><li>multipart/form-dataï¼šè¿™ç§ç¼–ç æ–¹å¼ä¼šä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™ç§ç¼–ç æ–¹å¼ä¼šæŠŠæ–‡ä»¶åŸŸæŒ‡å®šæ–‡ä»¶çš„å†…å®¹ä¹Ÿå°è£…åˆ°è¯·æ±‚å‚æ•°ä¸­ï¼Œä¸ä¼šå¯¹å­—ç¬¦ç¼–ç ã€‚</li><li>text/plainï¼šé™¤äº†æŠŠç©ºæ ¼è½¬æ¢ä¸º &ldquo;+&rdquo; å·å¤–ï¼Œå…¶ä»–å­—ç¬¦éƒ½ä¸åšç¼–ç å¤„ç†ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨ç›´æ¥é€šè¿‡è¡¨å•å‘é€é‚®ä»¶ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>form</span> <span class=na>action</span><span class=o>=</span><span class=s>&#34;&#34;</span> <span class=na>enctype</span><span class=o>=</span><span class=s>&#34;multipart/form-data&#34;</span> <span class=na>method</span><span class=o>=</span><span class=s>&#34;post&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;file&#34;</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;file&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;submit&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ–‡ä»¶ä¸Šä¼ ><a href=#%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0 class=header-anchor></a>æ–‡ä»¶ä¸Šä¼ </h3><ol><li><p>å¯¼å…¥ä¾èµ–åŒ…</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!--æ–‡ä»¶ä¸Šä¼ --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;groupId&gt;</span>commons-fileupload<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;artifactId&gt;</span>commons-fileupload<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;version&gt;</span>1.3.3<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!--servlet-apiå¯¼å…¥é«˜ç‰ˆæœ¬çš„--&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;groupId&gt;</span>javax.servlet<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;artifactId&gt;</span>javax.servlet-api<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;version&gt;</span>4.0.1<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>é…ç½®<code>multipartResolver</code></p><p><strong>è¿™ä¸ªbenaçš„idå¿…é¡»ä¸ºï¼šmultipartResolver ï¼Œ å¦åˆ™ä¸Šä¼ æ–‡ä»¶ä¼šæŠ¥400çš„é”™è¯¯ï¼</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!--æ–‡ä»¶ä¸Šä¼ é…ç½®--&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;bean</span> <span class=na>id=</span><span class=s>&#34;multipartResolver&#34;</span>  <span class=na>class=</span><span class=s>&#34;org.springframework.web.multipart.commons.CommonsMultipartResolver&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>   <span class=c>&lt;!-- è¯·æ±‚çš„ç¼–ç æ ¼å¼ï¼Œå¿…é¡»å’ŒjSPçš„pageEncodingå±æ€§ä¸€è‡´ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–è¡¨å•çš„å†…å®¹ï¼Œé»˜è®¤ä¸ºISO-8859-1 --&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;defaultEncoding&#34;</span> <span class=na>value=</span><span class=s>&#34;utf-8&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>   <span class=c>&lt;!-- ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆ10485760=10Mï¼‰ --&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;maxUploadSize&#34;</span> <span class=na>value=</span><span class=s>&#34;10485760&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>   <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;maxInMemorySize&#34;</span> <span class=na>value=</span><span class=s>&#34;40960&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/bean&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>ç¼–å†™å‰ç«¯é¡µé¢</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>form</span> <span class=na>action</span><span class=o>=</span><span class=s>&#34;/upload&#34;</span> <span class=na>enctype</span><span class=o>=</span><span class=s>&#34;multipart/form-data&#34;</span> <span class=na>method</span><span class=o>=</span><span class=s>&#34;post&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;file&#34;</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;file&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl> <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;submit&#34;</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;upload&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>é…ç½®Controller</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span><span class=w> </span><span class=nn>com.kuang.controller</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.stereotype.Controller</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.web.bind.annotation.RequestMapping</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.web.bind.annotation.RequestParam</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.web.multipart.commons.CommonsMultipartFile</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>javax.servlet.http.HttpServletRequest</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.io.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Controller</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>FileController</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//@RequestParam(&#34;file&#34;) å°†name=fileæ§ä»¶å¾—åˆ°çš„æ–‡ä»¶å°è£…æˆCommonsMultipartFile å¯¹è±¡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//æ‰¹é‡ä¸Šä¼ CommonsMultipartFileåˆ™ä¸ºæ•°ç»„å³å¯</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/upload&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>fileUpload</span><span class=p>(</span><span class=nd>@RequestParam</span><span class=p>(</span><span class=s>&#34;file&#34;</span><span class=p>)</span><span class=w> </span><span class=n>CommonsMultipartFile</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=p>,</span><span class=w> </span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>request</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//è·å–æ–‡ä»¶å : file.getOriginalFilename();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>String</span><span class=w> </span><span class=n>uploadFileName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=na>getOriginalFilename</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//å¦‚æœæ–‡ä»¶åä¸ºç©ºï¼Œç›´æ¥å›åˆ°é¦–é¡µï¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>uploadFileName</span><span class=p>)){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=k>return</span><span class=w> </span><span class=s>&#34;redirect:/index.jsp&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;ä¸Šä¼ æ–‡ä»¶å : &#34;</span><span class=o>+</span><span class=n>uploadFileName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>String</span><span class=w> </span><span class=n>path</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>request</span><span class=p>.</span><span class=na>getServletContext</span><span class=p>().</span><span class=na>getRealPath</span><span class=p>(</span><span class=s>&#34;/upload&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>File</span><span class=w> </span><span class=n>realPath</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=n>path</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>realPath</span><span class=p>.</span><span class=na>exists</span><span class=p>()){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=n>realPath</span><span class=p>.</span><span class=na>mkdir</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š&#34;</span><span class=o>+</span><span class=n>realPath</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>InputStream</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=na>getInputStream</span><span class=p>();</span><span class=w> </span><span class=c1>//æ–‡ä»¶è¾“å…¥æµ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>OutputStream</span><span class=w> </span><span class=n>os</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>FileOutputStream</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=n>realPath</span><span class=p>,</span><span class=n>uploadFileName</span><span class=p>));</span><span class=w> </span><span class=c1>//æ–‡ä»¶è¾“å‡ºæµ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=c1>//è¯»å–å†™å‡º</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=kt>int</span><span class=w> </span><span class=n>len</span><span class=o>=</span><span class=n>0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>buffer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>byte</span><span class=o>[</span><span class=n>1024</span><span class=o>]</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>while</span><span class=w> </span><span class=p>((</span><span class=n>len</span><span class=o>=</span><span class=n>is</span><span class=p>.</span><span class=na>read</span><span class=p>(</span><span class=n>buffer</span><span class=p>))</span><span class=o>!=-</span><span class=n>1</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=n>os</span><span class=p>.</span><span class=na>write</span><span class=p>(</span><span class=n>buffer</span><span class=p>,</span><span class=n>0</span><span class=p>,</span><span class=n>len</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=n>os</span><span class=p>.</span><span class=na>flush</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>os</span><span class=p>.</span><span class=na>close</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>is</span><span class=p>.</span><span class=na>close</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=k>return</span><span class=w> </span><span class=s>&#34;redirect:/index.jsp&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></li></ol><p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>* é‡‡ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶
</span></span></span><span class=line><span class=cl><span class=cm>*/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@RequestMapping</span><span class=p>(</span><span class=s>&#34;/upload2&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w>  </span><span class=nf>fileUpload2</span><span class=p>(</span><span class=nd>@RequestParam</span><span class=p>(</span><span class=s>&#34;file&#34;</span><span class=p>)</span><span class=w> </span><span class=n>CommonsMultipartFile</span><span class=w> </span><span class=n>file</span><span class=p>,</span><span class=w> </span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>request</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>String</span><span class=w> </span><span class=n>path</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>request</span><span class=p>.</span><span class=na>getServletContext</span><span class=p>().</span><span class=na>getRealPath</span><span class=p>(</span><span class=s>&#34;/upload&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>File</span><span class=w> </span><span class=n>realPath</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=n>path</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>realPath</span><span class=p>.</span><span class=na>exists</span><span class=p>()){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>realPath</span><span class=p>.</span><span class=na>mkdir</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//ä¸Šä¼ æ–‡ä»¶åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š&#34;</span><span class=o>+</span><span class=n>realPath</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//é€šè¿‡CommonsMultipartFileçš„æ–¹æ³•ç›´æ¥å†™æ–‡ä»¶ï¼ˆæ³¨æ„è¿™ä¸ªæ—¶å€™ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>file</span><span class=p>.</span><span class=na>transferTo</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=n>realPath</span><span class=w> </span><span class=o>+</span><span class=s>&#34;/&#34;</span><span class=o>+</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=na>getOriginalFilename</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>return</span><span class=w> </span><span class=s>&#34;redirect:/index.jsp&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æ–‡ä»¶ä¸‹è½½><a href=#%e6%96%87%e4%bb%b6%e4%b8%8b%e8%bd%bd class=header-anchor></a>æ–‡ä»¶ä¸‹è½½</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@RequestMapping</span><span class=p>(</span><span class=n>value</span><span class=o>=</span><span class=s>&#34;/download&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>downloads</span><span class=p>(</span><span class=n>HttpServletResponse</span><span class=w> </span><span class=n>response</span><span class=w> </span><span class=p>,</span><span class=n>HttpServletRequest</span><span class=w> </span><span class=n>request</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//è¦ä¸‹è½½çš„å›¾ç‰‡åœ°å€</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>String</span><span class=w>  </span><span class=n>path</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>request</span><span class=p>.</span><span class=na>getServletContext</span><span class=p>().</span><span class=na>getRealPath</span><span class=p>(</span><span class=s>&#34;/upload&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>String</span><span class=w>  </span><span class=n>fileName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;åŸºç¡€è¯­æ³•.jpg&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//1ã€è®¾ç½®response å“åº”å¤´</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>response</span><span class=p>.</span><span class=na>reset</span><span class=p>();</span><span class=w> </span><span class=c1>//è®¾ç½®é¡µé¢ä¸ç¼“å­˜,æ¸…ç©ºbuffer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>response</span><span class=p>.</span><span class=na>setCharacterEncoding</span><span class=p>(</span><span class=s>&#34;UTF-8&#34;</span><span class=p>);</span><span class=w> </span><span class=c1>//å­—ç¬¦ç¼–ç </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>response</span><span class=p>.</span><span class=na>setContentType</span><span class=p>(</span><span class=s>&#34;multipart/form-data&#34;</span><span class=p>);</span><span class=w> </span><span class=c1>//äºŒè¿›åˆ¶ä¼ è¾“æ•°æ®</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//è®¾ç½®å“åº”å¤´</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>response</span><span class=p>.</span><span class=na>setHeader</span><span class=p>(</span><span class=s>&#34;Content-Disposition&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>           </span><span class=s>&#34;attachment;fileName=&#34;</span><span class=o>+</span><span class=n>URLEncoder</span><span class=p>.</span><span class=na>encode</span><span class=p>(</span><span class=n>fileName</span><span class=p>,</span><span class=w> </span><span class=s>&#34;UTF-8&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>File</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=n>path</span><span class=p>,</span><span class=n>fileName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//2ã€ è¯»å–æ–‡ä»¶--è¾“å…¥æµ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>InputStream</span><span class=w> </span><span class=n>input</span><span class=o>=</span><span class=k>new</span><span class=w> </span><span class=n>FileInputStream</span><span class=p>(</span><span class=n>file</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//3ã€ å†™å‡ºæ–‡ä»¶--è¾“å‡ºæµ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>OutputStream</span><span class=w> </span><span class=n>out</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=na>getOutputStream</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kt>byte</span><span class=o>[]</span><span class=w> </span><span class=n>buff</span><span class=w> </span><span class=o>=</span><span class=k>new</span><span class=w> </span><span class=kt>byte</span><span class=o>[</span><span class=n>1024</span><span class=o>]</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=kt>int</span><span class=w> </span><span class=n>index</span><span class=o>=</span><span class=n>0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=c1>//4ã€æ‰§è¡Œ å†™å‡ºæ“ä½œ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>while</span><span class=p>((</span><span class=n>index</span><span class=o>=</span><span class=w> </span><span class=n>input</span><span class=p>.</span><span class=na>read</span><span class=p>(</span><span class=n>buff</span><span class=p>))</span><span class=o>!=</span><span class=w> </span><span class=o>-</span><span class=n>1</span><span class=p>){</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>out</span><span class=p>.</span><span class=na>write</span><span class=p>(</span><span class=n>buff</span><span class=p>,</span><span class=w> </span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>index</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>       </span><span class=n>out</span><span class=p>.</span><span class=na>flush</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>out</span><span class=p>.</span><span class=na>close</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>input</span><span class=p>.</span><span class=na>close</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>æˆ–è€…ç›´æ¥ç”¨aæ ‡ç­¾</p><p><code>&lt;a href="/1.jpg">ç‚¹å‡»ä¸‹è½½&lt;/a></code></p></section><footer class=article-footer><section class=article-tags><a href=/tags/java/>Java</a>
<a href=/tags/spring/>Spring</a>
<a href=/tags/%E7%AC%94%E8%AE%B0/>ç¬”è®°</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>æœ€åæ›´æ–°äº 2021-08-18 16:00:00</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-article");renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/spring/><div class=article-image><img src=/p/spring/82968220.c2b283d29cb027a4153df18f08e15e35.webp width=1800 height=1009 loading=lazy alt="Featured image of post Springå­¦ä¹ ç¬”è®°" data-key=spring data-hash="md5-wrKD0pywJ6QVPfGPCOFeNQ=="></div><div class=article-details><h2 class=article-title>Springå­¦ä¹ ç¬”è®°</h2></div></a></article><article class=has-image><a href=/p/mybatis/><div class=article-image><img src=/p/mybatis/86164137.6ab51737a52d035a69805e5f348c4191.webp width=1600 height=1132 loading=lazy alt="Featured image of post MyBatiså­¦ä¹ ç¬”è®°" data-key=mybatis data-hash="md5-arUXN6UtA1ppgF5fNIxBkQ=="></div><div class=article-details><h2 class=article-title>MyBatiså­¦ä¹ ç¬”è®°</h2></div></a></article></div></div></aside><link href=//unpkg.com/@waline/client@v3/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script type=module>
    import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

    setTimeout(function () {
        
        init({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://unpkg.com/@waline/emojis@1.2.0/weibo"],"lang":"zh-CN","locale":{"admin":"Admin","placeholder":null},"requiredMeta":["name","email","url"],"serverURL":"https://waline.lbqaq.top/"});
    }, 300);


</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 luoboQAQ</section><section class=powerby><a href=https://beian.miit.gov.cn>è‹ICPå¤‡2021037116å·</a><br>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.31.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://npm.elemecdn.com/node-vibrant@latest/dist/vibrant.min.js crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e);const t=document.createElement("link");t.href="https://cdn.jsdelivr.net/npm/@callmebill/lxgw-wenkai-web@latest/style.css",t.type="text/css",t.rel="stylesheet",document.head.appendChild(t)})()</script></body></html>