<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='è®°å½•çº¢ç±³AX6000ä½¿ç”¨Openwrtç³»ç»Ÿæ‰“é€ èˆ’é€‚ä¸Šç½‘ç¯å¢ƒ'>
<title>çº¢ç±³AX6000æŠ˜è…¾è®°</title>

<link rel='canonical' href='https://lbqaq.top/p/ax6000/'>

<link rel="stylesheet" href="/scss/style.min.7123a5072d7097ad47fc69c01c92d859822daeb0329e4b700a30d013e8d46204.css"><meta property='og:title' content='çº¢ç±³AX6000æŠ˜è…¾è®°'>
<meta property='og:description' content='è®°å½•çº¢ç±³AX6000ä½¿ç”¨Openwrtç³»ç»Ÿæ‰“é€ èˆ’é€‚ä¸Šç½‘ç¯å¢ƒ'>
<meta property='og:url' content='https://lbqaq.top/p/ax6000/'>
<meta property='og:site_name' content='luoboQAQ'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='æ•™ç¨‹' /><meta property='article:tag' content='è·¯ç”±å™¨' /><meta property='article:tag' content='openwrt' /><meta property='article:published_time' content='2023-10-21T21:36:58&#43;08:00'/><meta property='article:modified_time' content='2023-11-22T13:24:00&#43;08:00'/><meta property='og:image' content='https://lbqaq.top/p/ax6000/112545261.webp' />
<meta name="twitter:title" content="çº¢ç±³AX6000æŠ˜è…¾è®°">
<meta name="twitter:description" content="è®°å½•çº¢ç±³AX6000ä½¿ç”¨Openwrtç³»ç»Ÿæ‰“é€ èˆ’é€‚ä¸Šç½‘ç¯å¢ƒ"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://lbqaq.top/p/ax6000/112545261.webp' /><script async defer
    data-website-id="5a23d952-27c7-4abd-b8f0-c69397b25b55"
    data-cache="true"
    src="https://umami.lbqaq.top/bpnwxrgz.js">
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/Mint_hu79c009750f90956bc1a07b730ca28b2c_570517_300x0_resize_q75_box.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸŒ</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">luoboQAQ</a></h1>
            <h2 class="site-description">å¿«ä¹å­¦ä¹ æ¯ä¸€å¤©</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/luoboQAQ'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://lbqaq.top/index.xml'
                        target="_blank"
                        title="RSSè®¢é˜…"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="5" cy="19" r="1" />
  <path d="M4 4a16 16 0 0 1 16 16" />
  <path d="M4 11a9 9 0 0 1 9 9" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://pan.lbqaq.top'
                        target="_blank"
                        title="æˆ‘çš„ä¸ªäººäº‘ç›˜"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-cloud" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-12" />
</svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>æ–‡ç« </span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æŸ¥è¯¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹é“¾</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">

            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#èµ·å› ">èµ·å› </a></li>
    <li><a href="#æˆæœ">æˆæœ</a></li>
    <li><a href="#é…ç½®">é…ç½®</a>
      <ol>
        <li><a href="#è§£é”ä¸åˆ·æœº">è§£é”ä¸åˆ·æœº</a></li>
        <li><a href="#åˆ·å…¥uboot">åˆ·å…¥uboot</a></li>
        <li><a href="#é…ç½®æ ¡å›­ç½‘è‡ªåŠ¨è¿æ¥">é…ç½®æ ¡å›­ç½‘è‡ªåŠ¨è¿æ¥</a></li>
        <li><a href="#é…ç½®ipv6">é…ç½®ipv6</a></li>
        <li><a href="#é…ç½®mosdns">é…ç½®mosdns</a></li>
        <li><a href="#é…ç½®wireguard">é…ç½®Wireguard</a></li>
        <li><a href="#é…ç½®ddns">é…ç½®ddns</a></li>
      </ol>
    </li>
    <li><a href="#å°ç»“">å°ç»“</a></li>
    <li><a href="#æ›´æ–°æ—¥å¿—">æ›´æ–°æ—¥å¿—</a></li>
    <li><a href="#å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/ax6000/">
                <img src="/p/ax6000/112545261.webp"
                        
                        width="2000" 
                        height="1321" 
                        loading="lazy"
                        alt="Featured image of post çº¢ç±³AX6000æŠ˜è…¾è®°" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E7%BD%91%E7%BB%9C/" >
                ç½‘ç»œ
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/ax6000/">çº¢ç±³AX6000æŠ˜è…¾è®°</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            è®°å½•çº¢ç±³AX6000ä½¿ç”¨Openwrtç³»ç»Ÿæ‰“é€ èˆ’é€‚ä¸Šç½‘ç¯å¢ƒ
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2023-10-21</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 13 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="èµ·å› ">èµ·å› </h2>
<p>ç”±äºå®éªŒå®¤çš„ç½‘çº¿å£è¿‡äºç¨€å°‘ä¸”ç¦»æˆ‘è·ç¦»å¤ªè¿œï¼Œå­¦æ ¡çš„WIFIåˆæ˜¯WIFI5ï¼Œå¹³æ—¶æœ€å¤šåªèƒ½è·‘åˆ°30MB/sã€‚ä½†æˆ‘çš„ç¬”è®°æœ¬æ”¯æŒWIFi6ï¼Œå­¦æ ¡åˆæ˜¯åƒå…†ç½‘ã€‚ä¸¤æ¡åŸå› ä¸€å åŠ ï¼Œé‚£å°±ç›´æ¥ä¸ŠWIFI6çš„è·¯ç”±å™¨å§ã€‚é¦–è¦çš„é€‰æ‹©æ¡ä»¶å°±æ˜¯æ”¯æŒåˆ·æœºï¼Œåœ¨æ©å±±ä¸Šé€›äº†ä¸€é˜µå­ï¼Œå°±å†³å®šå…¥æ‰‹çº¢ç±³çš„AX6000ã€‚å¯è§£é”ã€æœ‰ç¬¬ä¸‰æ–¹å›ºä»¶ã€512MBå†…å­˜ã€‚ç‰¹åˆ«æ˜¯è¿™512MBå†…å­˜ï¼Œæ¯”èµ·æˆ‘ä¹‹å‰ç”¨çš„çº¢ç±³AC2100ï¼Œç›´æ¥ç¿»äº†4å€ï¼Œç›¸è¾ƒäºåŸæ¥éšä¾¿å¼€ä¸ªæ’ä»¶å°±æ²¡æœ‰å†…å­˜çš„æƒ…å†µï¼Œç›´æ¥èµ·é£å¥½å§ğŸ˜ã€‚</p>
<h2 id="æˆæœ">æˆæœ</h2>
<p>å…ˆæ¥ä¸€æ‰‹å€’åº(æ¯•ç«Ÿé…ç½®çš„è¿‡ç¨‹æ¯”è¾ƒæ— èŠğŸ˜‡ã€‚ä½¿ç”¨å—äº¬å¤§å­¦æµ‹é€Ÿç«™è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ç½‘é€Ÿç›´æ¥æ‹‰æ»¡ï¼Œä¸‹è½½ä¸œè¥¿çš„æ—¶å€™ç»ˆäºä¸ç”¨ç­‰é‚£ä¹ˆä¹…äº†ã€‚</p>
<p><img src="/p/ax6000/IMAGE/image-20231021190205506.png"
	width="564"
	height="335"
	srcset="/p/ax6000/IMAGE/image-20231021190205506_hu2b185484fdebcca21b16fefb62bb8e41_26513_480x0_resize_box_3.png 480w, /p/ax6000/IMAGE/image-20231021190205506_hu2b185484fdebcca21b16fefb62bb8e41_26513_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="å­¦æ ¡WIFIæµ‹è¯•"
	
	
		class="gallery-image" 
		data-flex-grow="168"
		data-flex-basis="404px"
	
> <img src="/p/ax6000/IMAGE/image-20231021190046644.png"
	width="641"
	height="351"
	srcset="/p/ax6000/IMAGE/image-20231021190046644_hu0bdf349d2ded4538fe418677dc6399b5_26908_480x0_resize_box_3.png 480w, /p/ax6000/IMAGE/image-20231021190046644_hu0bdf349d2ded4538fe418677dc6399b5_26908_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="AX6000æµ‹é€Ÿ"
	
	
		class="gallery-image" 
		data-flex-grow="182"
		data-flex-basis="438px"
	
></p>
<p>å†åŠ ä¸Šå„ç§æ’ä»¶ï¼ŒçœŸçš„å¾ˆèˆ’é€‚ğŸ¤¤ï¼Œä¸Šç½‘ä½“éªŒç›´æ¥æ‹‰æ»¡ã€‚ä¸‹é¢å°±æ˜¯å°†ç›¸å…³çš„é…ç½®è¿‡ç¨‹åšä¸ªè®°å½•ã€‚</p>
<h2 id="é…ç½®">é…ç½®</h2>
<h3 id="è§£é”ä¸åˆ·æœº">è§£é”ä¸åˆ·æœº</h3>
<p>è¿™é‡Œå¯ä»¥å‚è€ƒBç«™å¤§ä½¬çš„è§†é¢‘<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>ï¼Œæ­¥éª¤éå¸¸è¯¦ç»†ï¼Œç›´æ¥è·Ÿç€åšå°±å¥½äº†ã€‚ä¸ºäº†å¤‡å¿˜ï¼Œæˆ‘è¿™é‡Œå†ç®€å•æŠŠæ­¥éª¤å†™ä¸€ä¸‹ã€‚</p>
<p>é«˜ç‰ˆæœ¬çš„ç³»ç»Ÿå·²ç»å°å µäº†è§£é”çš„æ¼æ´ï¼Œæˆ‘ä»¬è¦åšçš„ç¬¬ä¸€æ­¥å°±æ˜¯ä½¿ç”¨å°ç±³ä¿®å¤å·¥å…·è¿›è¡Œé™çº§ã€‚</p>
<p>ä¹‹åè¿›å…¥ç®¡ç†ç•Œé¢å¹¶ç™»å½•ï¼Œæ­¤æ—¶åœ°å€æ ¼å¼ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">http://192.168.31.15/cgi-bin/luci/;stok=030b24d39b1a4a549aa12dac23c52313/web/home#router
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å°†<code>/web/home#router</code>åˆ é™¤ï¼Œå¹¶åŠ ä¸Šä¸‹é¢ä¸€æ®µï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">/api/misystem/set_sys_time?timezone=%20%27%20%3B%20zz%3D%24%28dd%20if%3D%2Fdev%2Fzero%20bs%3D1%20count%3D2%202%3E%2Fdev%2Fnull%29%20%3B%20printf%20%27%A5%5A%25c%25c%27%20%24zz%20%24zz%20%7C%20mtd%20write%20-%20crash%20%3B%20
</span></span></code></pre></td></tr></table>
</div>
</div><p>å³è¿æ¥åº”è¯¥ä¸º<code>http://192.168.31.15/cgi-bin/luci/;stok=030b24d39b1a4a549aa12dac23c52313/api/......</code></p>
<p>å›è½¦è®¿é—®ï¼Œæ˜¾ç¤º<code>{&quot;code&quot;:0}</code>è¡¨ç¤ºæˆåŠŸ</p>
<p>åŒç†ï¼Œç»§ç»­æ›¿æ¢ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">/api/misystem/set_sys_time?timezone=%20%27%20%3b%20reboot%20%3b%20
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç­‰å¾…é‡å¯å®Œæˆ</p>
<p>ç™»å½•è·¯ç”±å™¨ï¼Œæ›¿æ¢ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">/api/misystem/set_sys_time?timezone=%20%27%20%3B%20bdata%20set%20telnet_en%3D1%20%3B%20bdata%20set%20ssh_en%3D1%20%3B%20bdata%20set%20uart_en%3D1%20%3B%20bdata%20commit%20%3B%20
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»§ç»­æ›¿æ¢ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">/api/misystem/set_sys_time?timezone=%20%27%20%3b%20reboot%20%3b%20
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç­‰å¾…é‡å¯å®Œæˆ</p>
<p>æ­¤æ—¶<code>telnet</code>å·²ç»å¼€å¯ï¼Œè¿æ¥è¿›å…¥ï¼Œæ˜¾ç¤ºã€ARE U OKã€‘çš„ç•Œé¢ï¼Œè¡¨ç¤ºtelnetæˆåŠŸã€‚</p>
<p>è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å¼€å¯<code>ssh</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">bdata <span class="nb">set</span> <span class="nv">boot_wait</span><span class="o">=</span>on
</span></span><span class="line"><span class="cl">bdata commit
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">ssh_en</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">telnet_en</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">uart_en</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">boot_wait</span><span class="o">=</span>on
</span></span><span class="line"><span class="cl">nvram commit
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;s/channel=.*/channel=&#34;debug&#34;/g&#39;</span> /etc/init.d/dropbear
</span></span><span class="line"><span class="cl">/etc/init.d/dropbear restart
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s1">&#39;admin\nadmin&#39;</span> <span class="p">|</span> passwd root
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»§ç»­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œå…³é—­å¼€å‘è€…æ¨¡å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">mtd erase crash
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨sshè¿æ¥è¿›å…¥ï¼Œå°†<code>xwrt</code>ç›®å½•é‡Œçš„<code>stock-initramfs-factory.ubi</code>ä¼ å…¥<code>tmp</code>ç›®å½•</p>
<p>è¾“å…¥ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿåˆ†åŒº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">cat /proc/cmdline
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç±»ä¼¼è¿™æ ·ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">console=ttyS0,115200n1 loglevel=8 firmware=1 uart_en=1
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬ä¸»è¦å…³æ³¨<code>firmware=1</code>è¿™é¡¹</p>
<p>å¦‚firmware=0è¾“å…¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">boot_wait</span><span class="o">=</span>on
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">uart_en</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_boot_rootfs</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_last_success</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_boot_success</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_try_sys1_failed</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_try_sys2_failed</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">nvram commit
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶ååˆ·å…¥å›ºä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ubiformat /dev/mtd9 -y -f /tmp/stock-initramfs-factory.ubi
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚firmware=1è¾“å…¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">boot_wait</span><span class="o">=</span>on
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">uart_en</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_boot_rootfs</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_last_success</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_boot_success</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_try_sys1_failed</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">nvram <span class="nb">set</span> <span class="nv">flag_try_sys2_failed</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">nvram commit
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶ååˆ·å…¥å›ºä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ubiformat /dev/mtd8 -y -f /tmp/stock-initramfs-factory.ubi
</span></span></code></pre></td></tr></table>
</div>
</div><p>rebooté‡å¯ å›ºä»¶åå°ï¼šhttp://192.168.15.1/ è´¦æˆ·å¯†ç ï¼šadmin/admin åœ¨åå°å‡çº§xwrtæ­£å¼å›ºä»¶</p>
<p>è¿›å…¥xwrtæ­£å¼å›ºä»¶åå°â€”ç³»ç»Ÿâ€”ç®¡ç†æƒâ€”sshè®¿é—®â€”æ‰“å¼€å¯†ç éªŒè¯å’Œå…è®¸rootç”¨æˆ·å‡­å¯†ç ç™»å½•-ä¿å­˜å¹¶åº”ç”¨ã€‚ å†æ¬¡è¿æ¥SSHï¼ˆip192.168.15.1ç”¨æˆ·årootå¯†ç adminï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">fw_setenv boot_wait on
</span></span><span class="line"><span class="cl">fw_setenv uart_en <span class="m">1</span>
</span></span><span class="line"><span class="cl">fw_setenv flag_boot_rootfs <span class="m">0</span>
</span></span><span class="line"><span class="cl">fw_setenv flag_last_success <span class="m">1</span>
</span></span><span class="line"><span class="cl">fw_setenv flag_boot_success <span class="m">1</span>
</span></span><span class="line"><span class="cl">fw_setenv flag_try_sys1_failed <span class="m">8</span>
</span></span><span class="line"><span class="cl">fw_setenv flag_try_sys2_failed <span class="m">8</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹ååˆ·å…¥æœ€æ–°237å¤§ä½¬å›ºä»¶</p>
<h3 id="åˆ·å…¥uboot">åˆ·å…¥uboot</h3>
<p>ä¹‹å‰åˆ·å…¥çš„å®˜æ–¹ç‰ˆçš„é•œåƒï¼Œè™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¯ç”¨ç©ºé—´å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œä¸ºäº†æ¦¨å¹²å®ƒå…¨éƒ¨çš„æ€§èƒ½ï¼Œæˆ‘è¿˜æ˜¯å†³å®šåˆ·å…¥ç¬¬ä¸‰æ–¹ubootï¼Œå°†å®˜æ–¹åŸå§‹çš„ä¸‰ä¸ªåˆ†åŒºåˆå¹¶æˆä¸€ä¸ªå¤§åˆ†åŒºã€‚</p>
<p>æˆ‘è¿™é‡Œåˆ·å…¥çš„hanwckfå¤§ä½¬åˆ¶ä½œçš„ubootï¼Œä»–æ”¯æŒå¤šåˆ†åŒºçš„åˆ‡æ¢ï¼Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚å…·ä½“çš„åŠŸèƒ½å’Œä¸‹è½½é“¾æ¥å¯ä»¥çœ‹å¤§ä½¬çš„åšå®¢â€”â€”<a class="link" href="https://cmi.hanwckf.top/p/mt798x-uboot-usage/"  target="_blank" rel="noopener"
    >mt798x uboot åŠŸèƒ½ä»‹ç»</a>ã€‚</p>
<p>æˆ‘ä»¬ä¹‹å‰åˆ·å…¥è¿‡237å¤§ä½¬çš„å›ºä»¶äº†ï¼Œæ‰€ä»¥FIPåˆ†åŒºå·²ç»è§£é”ï¼Œå¯ä»¥ç›´æ¥åˆ·ã€‚</p>
<p>é¦–å…ˆè¦<strong>å¤‡ä»½</strong>åŸå§‹çš„åˆ†åŒºï¼ŒåƒFactoryä¸ºæ— çº¿EEPROMåˆ†åŒºï¼›Bdataå­˜å‚¨ç€ä½ çš„SNå’ŒMACã€‚å¦‚æœæ²¡äº†åº”è¯¥æ˜¯æ— æ³•ä½¿ç”¨åˆ«äººçš„åˆ†åŒºæ¥ä½¿ç”¨çš„ã€‚æ‰€ä»¥ä¸€å®šè¦å¤‡ä»½å¥½ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ddå‘½ä»¤å¤‡ä»½åˆ†åŒºåˆ°tmpæ–‡ä»¶å¤¹ï¼š<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">dd <span class="k">if</span><span class="o">=</span>/dev/mtd1 <span class="nv">of</span><span class="o">=</span>/tmp/mtd1_BL2.bin
</span></span><span class="line"><span class="cl">dd <span class="k">if</span><span class="o">=</span>/dev/mtd2 <span class="nv">of</span><span class="o">=</span>/tmp/mtd2_Nvram.bin
</span></span><span class="line"><span class="cl">dd <span class="k">if</span><span class="o">=</span>/dev/mtd3 <span class="nv">of</span><span class="o">=</span>/tmp/mtd3_Bdata.bin
</span></span><span class="line"><span class="cl">dd <span class="k">if</span><span class="o">=</span>/dev/mtd4 <span class="nv">of</span><span class="o">=</span>/tmp/mtd4_Factory.bin
</span></span><span class="line"><span class="cl">dd <span class="k">if</span><span class="o">=</span>/dev/mtd5 <span class="nv">of</span><span class="o">=</span>/tmp/mtd5_FIP.bin
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åä½¿ç”¨WinSCPç­‰è½¯ä»¶å°†å¤‡ä»½çš„æ–‡ä»¶ä¸‹è½½åˆ°ç”µè„‘ä¸Šã€‚</p>
<p>å¤‡ä»½å¥½åï¼Œå°±å¯ä»¥é€šè¿‡WinSCPå°†ubootæ–‡ä»¶ä¸Šä¼ åˆ°tmpç›®å½•ä¸‹ï¼Œå¹¶æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¿›è¡Œåˆ·å…¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">d5sum /tmp/mt7986_redmi_ax6000-fip-fixed-parts-multi-layout.bin
</span></span><span class="line"><span class="cl">mtd write /tmp/mt7986_redmi_ax6000-fip-fixed-parts-multi-layout.bin FIP
</span></span><span class="line"><span class="cl">mtd verify /tmp/mt7986_redmi_ax6000-fip-fixed-parts-multi-layout.bin FIP
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„å¯¹æ¯”md5çš„å€¼æ˜¯å¦ä¸€è‡´ã€‚æœ€åå¦‚æœæˆåŠŸåˆ™ä¼šè¾“å‡º<code>Success</code></p>
<p>å°†è·¯ç”±å™¨æ–­ç”µï¼ŒæŒ‰ä½Reseté”®å¹¶é€šç”µï¼ŒæŒç»­æŒ‰ä½10Så³å¯è¿›å…¥ubootäº†ã€‚</p>
<p>ç”±äºHå¤§çš„ubootæ²¡æœ‰é…ç½®DHCPï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é…ç½®ç”µè„‘ipï¼š</p>
<ul>
<li>IPåœ°å€ï¼š192.168.31.100</li>
<li>å­ç½‘æ©ç ï¼š255.255.255.0</li>
<li>é»˜è®¤ç½‘å…³ï¼š192.168.31.1</li>
<li>DNSï¼š192.168.31.1</li>
</ul>
<p>è®¿é—®192.168.31.1å³å¯è¿›å…¥ubooté¡µé¢ï¼Œè¿™æ—¶å°±å¯ä»¥åˆ·å…¥å¤§åˆ†åŒºçš„å›ºä»¶äº†</p>
<h3 id="é…ç½®æ ¡å›­ç½‘è‡ªåŠ¨è¿æ¥">é…ç½®æ ¡å›­ç½‘è‡ªåŠ¨è¿æ¥</h3>
<p>åœ¨æˆ‘ä¹‹å‰ï¼Œå·²ç»æœ‰å¤§ä½¬é’ˆå¯¹æ ¡å›­ç½‘çš„ç™»å½•å†™äº†è‡ªåŠ¨åŒ–è„šæœ¬</p>
<div class="github">
    <div class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C2 1.83696 2.26339 1.20107 2.73223 0.732233C3.20108 0.263392 3.83696 0 4.5 0L13.25 0C13.4489 0 13.6397 0.0790176 13.7803 0.21967C13.921 0.360322 14 0.551088 14 0.75V13.25C14 13.4489 13.921 13.6397 13.7803 13.7803C13.6397 13.921 13.4489 14 13.25 14H10.75C10.5511 14 10.3603 13.921 10.2197 13.7803C10.079 13.6397 10 13.4489 10 13.25C10 13.0511 10.079 12.8603 10.2197 12.7197C10.3603 12.579 10.5511 12.5 10.75 12.5H12.5V10.5H4.5C4.30308 10.5 4.11056 10.5582 3.94657 10.6672C3.78257 10.7762 3.65442 10.9312 3.57816 11.1128C3.50191 11.2943 3.48096 11.4943 3.51793 11.6878C3.5549 11.8812 3.64816 12.0594 3.786 12.2C3.92524 12.3422 4.0023 12.5338 4.00024 12.7328C3.99818 12.9318 3.91716 13.1218 3.775 13.261C3.63285 13.4002 3.4412 13.4773 3.24222 13.4752C3.04325 13.4732 2.85324 13.3922 2.714 13.25C2.25571 12.7829 1.99929 12.1544 2 11.5V2.5ZM12.5 1.5V9H4.5C4.144 9 3.806 9.074 3.5 9.208V2.5C3.5 2.23478 3.60536 1.98043 3.79289 1.79289C3.98043 1.60536 4.23478 1.5 4.5 1.5H12.5ZM5 12.25V15.5C5 15.5464 5.01293 15.5919 5.03734 15.6314C5.06175 15.6709 5.09667 15.7028 5.1382 15.7236C5.17972 15.7444 5.22621 15.7532 5.27245 15.749C5.31869 15.7448 5.36286 15.7279 5.4 15.7L6.85 14.613C6.89328 14.5805 6.94591 14.563 7 14.563C7.05409 14.563 7.10673 14.5805 7.15 14.613L8.6 15.7C8.63714 15.7279 8.68131 15.7448 8.72755 15.749C8.77379 15.7532 8.82028 15.7444 8.8618 15.7236C8.90333 15.7028 8.93826 15.6709 8.96266 15.6314C8.98707 15.5919 9 15.5464 9 15.5V12.25C9 12.1837 8.97366 12.1201 8.92678 12.0732C8.87989 12.0263 8.81631 12 8.75 12H5.25C5.1837 12 5.12011 12.0263 5.07322 12.0732C5.02634 12.1201 5 12.1837 5 12.25Z"/></svg>
        <a class="name" href=https://github.com/TerraceCN/yzu-campusnet-login target="_blank">yzu-campusnet-login</a>
    </div>
    <div class="visibility">public</div>
    <div class="description">æ ¡å›­ç½‘ç™»å½•å™¨</div> 
    <div class="language">
        <span class="language-color" style="background-color: #3572A5"></span>
        <span class="language-name">Python</span>
    </div>
</div>
<p>ç„¶è€Œï¼Œè¿™å¹¶ä¸é€‚ç”¨æˆ‘çš„ç¯å¢ƒã€‚ç”±äºçº¢ç±³AX6000çš„å®˜æ–¹å¸ƒå±€é‡‡ç”¨äº†A/Båˆ†åŒºï¼Œå¯¼è‡´å¯ç”¨çš„è½¯ä»¶åŒ…åˆ†åŒºåªæœ‰20å¤šMBã€‚åœ¨è¿™ä¹ˆå°çš„ç©ºé—´ä¸­å®‰è£…ä¸ªPythonï¼Œå†åŠ ä¸Šå„ç§å„æ ·çš„åº“ï¼Œæƒ³æƒ³å°±å¯æ€•ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘éœ€è¦ä½¿ç”¨ä¸€é—¨å¯ä»¥æ‰“åŒ…æˆå°ä½“ç§¯çš„è¯­è¨€æ¥é‡æ„æ­¤ç¨‹åºã€‚ä¸€å¼€å§‹ï¼Œæˆ‘æƒ³é€‰æ‹©C++ï¼Œä½†æ˜¯C++çš„ç½‘ç»œç¼–ç¨‹æˆ‘è¿˜æ²¡äº†è§£è¿‡ï¼Œæ­£åœ¨æˆ‘æ€è€ƒè¦ä¸è¦èŠ±äº›æ—¶é—´å­¦ä¹ ä¸€ä¸‹ï¼Œçªç„¶æƒ³åˆ°äº†æœ‰ä¸€é—¨è¯­è¨€å®Œç¾ç¬¦åˆæˆ‘çš„éœ€æ±‚â€”â€”Golangã€‚è·¨å¹³å°ã€æœ‰æ–¹ä¾¿çš„ç½‘ç»œåº“ï¼Œäºæ˜¯æˆ‘ä¾¿èŠ±äº†ä¸€å¤©æ—¶é—´å­¦ä¹ Goï¼ŒæˆåŠŸå°†å¤§ä½¬çš„ç¨‹åºé‡æ„äº†ï¼ˆæ­£å¥½å½“å­¦ä¹ Goè¯­è¨€çš„ç»ƒæ‰‹ç¨‹åºã€‚</p>
<div class="github">
    <div class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C2 1.83696 2.26339 1.20107 2.73223 0.732233C3.20108 0.263392 3.83696 0 4.5 0L13.25 0C13.4489 0 13.6397 0.0790176 13.7803 0.21967C13.921 0.360322 14 0.551088 14 0.75V13.25C14 13.4489 13.921 13.6397 13.7803 13.7803C13.6397 13.921 13.4489 14 13.25 14H10.75C10.5511 14 10.3603 13.921 10.2197 13.7803C10.079 13.6397 10 13.4489 10 13.25C10 13.0511 10.079 12.8603 10.2197 12.7197C10.3603 12.579 10.5511 12.5 10.75 12.5H12.5V10.5H4.5C4.30308 10.5 4.11056 10.5582 3.94657 10.6672C3.78257 10.7762 3.65442 10.9312 3.57816 11.1128C3.50191 11.2943 3.48096 11.4943 3.51793 11.6878C3.5549 11.8812 3.64816 12.0594 3.786 12.2C3.92524 12.3422 4.0023 12.5338 4.00024 12.7328C3.99818 12.9318 3.91716 13.1218 3.775 13.261C3.63285 13.4002 3.4412 13.4773 3.24222 13.4752C3.04325 13.4732 2.85324 13.3922 2.714 13.25C2.25571 12.7829 1.99929 12.1544 2 11.5V2.5ZM12.5 1.5V9H4.5C4.144 9 3.806 9.074 3.5 9.208V2.5C3.5 2.23478 3.60536 1.98043 3.79289 1.79289C3.98043 1.60536 4.23478 1.5 4.5 1.5H12.5ZM5 12.25V15.5C5 15.5464 5.01293 15.5919 5.03734 15.6314C5.06175 15.6709 5.09667 15.7028 5.1382 15.7236C5.17972 15.7444 5.22621 15.7532 5.27245 15.749C5.31869 15.7448 5.36286 15.7279 5.4 15.7L6.85 14.613C6.89328 14.5805 6.94591 14.563 7 14.563C7.05409 14.563 7.10673 14.5805 7.15 14.613L8.6 15.7C8.63714 15.7279 8.68131 15.7448 8.72755 15.749C8.77379 15.7532 8.82028 15.7444 8.8618 15.7236C8.90333 15.7028 8.93826 15.6709 8.96266 15.6314C8.98707 15.5919 9 15.5464 9 15.5V12.25C9 12.1837 8.97366 12.1201 8.92678 12.0732C8.87989 12.0263 8.81631 12 8.75 12H5.25C5.1837 12 5.12011 12.0263 5.07322 12.0732C5.02634 12.1201 5 12.1837 5 12.25Z"/></svg>
        <a class="name" href=https://github.com/luoboQAQ/yzu-campusnet-login target="_blank">yzu-campusnet-login</a>
    </div>
    <div class="visibility">public</div>
    <div class="description">Goç‰ˆæœ¬çš„æ ¡å›­ç½‘ç™»å½•å™¨</div> 
    <div class="language">
        <span class="language-color" style="background-color: #00ADD8"></span>
        <span class="language-name">Go</span>
    </div>
</div>
<p>ç›´æ¥å°†ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¼ å…¥åˆ°è·¯ç”±å™¨ä¸­ï¼Œå¹¶å†™å¥½é…ç½®æ–‡ä»¶ï¼Œä¹‹ååœ¨åå°â€”â€”â€œç³»ç»Ÿâ€â€”â€”â€œå¯åŠ¨é¡¹â€ä¸‹é¢çš„æœ¬åœ°å¯åŠ¨è„šæœ¬æ·»åŠ ä¸€æ¡è¿è¡Œå‘½ä»¤å°±å¯ä»¥å¼€æœºå¯åŠ¨äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">cd</span> /root/login <span class="o">&amp;&amp;</span> nohup ./YzuCampusnetLogin &gt; /tmp/login.log 2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">&amp;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é…ç½®ipv6">é…ç½®ipv6</h3>
<p>å­¦æ ¡çš„ipv6ä¸‹å‘çš„æ˜¯/64åœ°å€ï¼Œä¸€å¼€å§‹æˆ‘å‚è€ƒ<a class="link" href="https://wjk.moe/2022/%E9%94%90%E6%8D%B7%E6%A0%A1%E5%9B%AD%E7%BD%91IPv6%E7%9A%84%EF%BC%8F64%E5%86%85%E7%BD%91%E4%B8%AD%E7%BB%A7%E9%85%8D%E7%BD%AE%EF%BC%9Andp-proxy%E3%80%81relay/"  target="_blank" rel="noopener"
    >è¿™ä¸ªå¤§ä½¬çš„æ•™ç¨‹</a>ï¼Œä½¿ç”¨å†…ç½‘ä¸­ç»§çš„æ–¹æ¡ˆæ¥å®ç°ipv6ã€‚ç„¶è€Œæ— è®ºæˆ‘æ€ä¹ˆé…ç½®ï¼Œéƒ½æ— æ³•è¿æ¥äº’è”ç½‘ã€‚æœ€åå‘ç°æ˜¯å­¦æ ¡ç½‘å…³å¯¹æ¯ä¸€ä¸ªipv6åœ°å€éƒ½ä¼šè¿›è¡Œç™»å½•çš„æ ¡éªŒï¼Œå¦‚æœæ²¡æœ‰ç™»å½•å°±ä¸ä¼šæ”¾è¡Œï¼Œé‚£è¿™æ¡è·¯ç®—æ˜¯å½»åº•å µæ­»äº†ğŸ˜¥ã€‚</p>
<p>è¿™æ ·çš„è¯ï¼Œå°±åªèƒ½ä½¿ç”¨nat6äº†,è¯¦ç»†çš„æ­¥éª¤å¯ä»¥å‚è€ƒè¿™ç¯‡æ•™ç¨‹<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></p>
<p>å°†æ¥å£â€”â€”LANâ€”â€”IPV6è®¾ç½®ä¸­çš„è·¯ç”±é€šå‘ŠæœåŠ¡é€‰ä¸ºâ€œæœåŠ¡å™¨æ¨¡å¼â€ã€DHCPv6 æœåŠ¡é€‰ä¸ºâ€œæœåŠ¡å™¨æ¨¡å¼â€ã€NDP ä»£ç†é€‰ä¸ºâ€œç¦ç”¨â€ã€DHCPv6 æ¨¡å¼é€‰ä¸ºâ€œæ— çŠ¶æ€çš„ + æœ‰çŠ¶æ€çš„â€ã€æ€»æ˜¯é€šå‘Šé»˜è®¤è·¯ç”±å‹¾ä¸Š</p>
<p>ä½¿ç”¨sshè¿æ¥è·¯ç”±å™¨ï¼Œåœ¨<code>/etc/init.d</code>ç›®å½•ä¸‹æ–°å»º<code>nat6</code>å¹¶å¡«å…¥ä¸‹é¢çš„å†…å®¹ï¼š</p>
<details>
    <summary>ğŸ“ƒå±•å¼€ä»£ç </summary>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span><span class="lnt">98
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/sh /etc/rc.common
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1"># NAT6 init script for OpenWrt // Depends on package: kmod-ipt-nat6</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># edited by Sad Pencil at 2020-02-09</span>
</span></span><span class="line"><span class="cl"><span class="c1"># replace route command with ip command to solve issues on new OpenWRT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># edited by Sad Pencil at 2021-11-29</span>
</span></span><span class="line"><span class="cl"><span class="c1"># update line WAN6_INTERFACE=$(uci get &#34;network.$WAN6_NAME.device&#34; || uci get &#34;network.$WAN6_NAME.ifname&#34;)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">START</span><span class="o">=</span><span class="m">55</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Options</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -------</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Use temporary addresses (IPv6 privacy extensions) for outgoing connections? Yes: 1 / No: 0</span>
</span></span><span class="line"><span class="cl"><span class="nv">PRIVACY</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Maximum number of attempts before this script will stop in case no IPv6 route is available</span>
</span></span><span class="line"><span class="cl"><span class="c1"># This limits the execution time of the IPv6 route lookup to (MAX_TRIES+1)*(MAX_TRIES/2) seconds. The default (15) equals 120 seconds.</span>
</span></span><span class="line"><span class="cl"><span class="nv">MAX_TRIES</span><span class="o">=</span><span class="m">15</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># An initial delay (in seconds) helps to avoid looking for the IPv6 network too early. Ideally, the first probe is successful.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># This would be the case if the time passed between the system log messages &#34;Probing IPv6 route&#34; and &#34;Setting up NAT6&#34; is 1 second.</span>
</span></span><span class="line"><span class="cl"><span class="nv">DELAY</span><span class="o">=</span><span class="m">5</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Logical interface name of outbound IPv6 connection</span>
</span></span><span class="line"><span class="cl"><span class="c1"># There should be no need to modify this, unless you changed the default network interface names</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Edit by Vincent: I never changed my default network interface names, but still I have to change the WAN6_NAME to &#34;wan&#34; instead of &#34;wan6&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">WAN6_NAME</span><span class="o">=</span><span class="s2">&#34;wan6&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ---------------------------------------------------</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Options end here - no need to change anything below</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">boot<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="o">[</span> <span class="nv">$DELAY</span> -gt <span class="m">0</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> sleep <span class="nv">$DELAY</span>
</span></span><span class="line"><span class="cl">        <span class="nv">WAN6_INTERFACE</span><span class="o">=</span><span class="k">$(</span>uci get <span class="s2">&#34;network.</span><span class="nv">$WAN6_NAME</span><span class="s2">.ifname&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">        logger -t NAT6 <span class="s2">&#34;Probing IPv6 route&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">PROBE</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">        <span class="nv">COUNT</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="o">[</span> <span class="nv">$PROBE</span> -eq <span class="m">0</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">        <span class="k">do</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">[</span> <span class="nv">$COUNT</span> -gt <span class="nv">$MAX_TRIES</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl">                <span class="k">then</span>
</span></span><span class="line"><span class="cl">                        logger -t NAT6 <span class="s2">&#34;Fatal error: No IPv6 route found (reached retry limit)&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">                <span class="k">fi</span>
</span></span><span class="line"><span class="cl">                sleep <span class="nv">$COUNT</span>
</span></span><span class="line"><span class="cl">                <span class="nv">COUNT</span><span class="o">=</span><span class="k">$((</span>COUNT+1<span class="k">))</span>
</span></span><span class="line"><span class="cl">                <span class="nv">PROBE</span><span class="o">=</span><span class="k">$(</span>ip -6 route <span class="p">|</span> grep -i <span class="s1">&#39;^default.*via&#39;</span> <span class="p">|</span> grep -i -F <span class="s2">&#34;dev </span><span class="nv">$WAN6_INTERFACE</span><span class="s2">&#34;</span> <span class="p">|</span> grep -i -o <span class="s1">&#39;via.*&#39;</span> <span class="p">|</span> wc -l<span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        logger -t NAT6 <span class="s2">&#34;Setting up NAT6&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> -z <span class="s2">&#34;</span><span class="nv">$WAN6_INTERFACE</span><span class="s2">&#34;</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> ! -e <span class="s2">&#34;/sys/class/net/</span><span class="nv">$WAN6_INTERFACE</span><span class="s2">/&#34;</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                logger -t NAT6 <span class="s2">&#34;Fatal error: Lookup of </span><span class="nv">$WAN6_NAME</span><span class="s2"> interface failed. Were the default interface names changed?&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">        <span class="c1">#WAN6_GATEWAY=$(ip -6 route | grep -o &#39;2001.*1102&#39; | sed s&#39;/1102/1101::1/g&#39;)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">WAN6_GATEWAY</span><span class="o">=</span><span class="k">$(</span>ip -6 route <span class="p">|</span> grep -i <span class="s1">&#39;^default.*via&#39;</span> <span class="p">|</span> grep -i -F <span class="s2">&#34;dev </span><span class="nv">$WAN6_INTERFACE</span><span class="s2">&#34;</span> <span class="p">|</span> grep -i -o <span class="s1">&#39;via.*&#39;</span> <span class="p">|</span> cut -d <span class="s1">&#39; &#39;</span> -f <span class="m">2</span> <span class="p">|</span> head -n 1<span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> -z <span class="s2">&#34;</span><span class="nv">$WAN6_GATEWAY</span><span class="s2">&#34;</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                logger -t NAT6 <span class="s2">&#34;Fatal error: No IPv6 gateway for </span><span class="nv">$WAN6_INTERFACE</span><span class="s2"> found&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">        <span class="nv">LAN_ULA_PREFIX</span><span class="o">=</span><span class="k">$(</span>uci get network.globals.ula_prefix<span class="k">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$LAN_ULA_PREFIX</span><span class="s2">&#34;</span> <span class="p">|</span> grep -c -E <span class="s2">&#34;^([0-9a-fA-F]{4}):([0-9a-fA-F]{0,4}):&#34;</span><span class="k">)</span> -ne <span class="m">1</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                logger -t NAT6 <span class="s2">&#34;Fatal error: IPv6 ULA prefix </span><span class="nv">$LAN_ULA_PREFIX</span><span class="s2"> seems invalid. Please verify that a prefix is set and valid.&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        ip6tables -t nat -I POSTROUTING -s <span class="s2">&#34;</span><span class="nv">$LAN_ULA_PREFIX</span><span class="s2">&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$WAN6_INTERFACE</span><span class="s2">&#34;</span> -j MASQUERADE
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                logger -t NAT6 <span class="s2">&#34;Added IPv6 masquerading rule to the firewall (Src: </span><span class="nv">$LAN_ULA_PREFIX</span><span class="s2"> - Dst: </span><span class="nv">$WAN6_INTERFACE</span><span class="s2">)&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">                logger -t NAT6 <span class="s2">&#34;Fatal error: Failed to add IPv6 masquerading rule to the firewall (Src: </span><span class="nv">$LAN_ULA_PREFIX</span><span class="s2"> - Dst: </span><span class="nv">$WAN6_INTERFACE</span><span class="s2">)&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        ip -6 route add 2000::/3 via <span class="s2">&#34;</span><span class="nv">$WAN6_GATEWAY</span><span class="s2">&#34;</span> dev <span class="s2">&#34;</span><span class="nv">$WAN6_INTERFACE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                logger -t NAT6 <span class="s2">&#34;Added </span><span class="nv">$WAN6_GATEWAY</span><span class="s2"> to routing table as gateway on </span><span class="nv">$WAN6_INTERFACE</span><span class="s2"> for outgoing connections&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">                logger -t NAT6 <span class="s2">&#34;Error: Failed to add </span><span class="nv">$WAN6_GATEWAY</span><span class="s2"> to routing table as gateway on </span><span class="nv">$WAN6_INTERFACE</span><span class="s2"> for outgoing connections&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[</span> <span class="nv">$PRIVACY</span> -eq <span class="m">1</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                <span class="nb">echo</span> <span class="m">2</span> &gt; <span class="s2">&#34;/proc/sys/net/ipv6/conf/</span><span class="nv">$WAN6_INTERFACE</span><span class="s2">/accept_ra&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                        logger -t NAT6 <span class="s2">&#34;Accepting router advertisements on </span><span class="nv">$WAN6_INTERFACE</span><span class="s2"> even if forwarding is enabled (required for temporary addresses)&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span>
</span></span><span class="line"><span class="cl">                        logger -t NAT6 <span class="s2">&#34;Error: Failed to change router advertisements accept policy on </span><span class="nv">$WAN6_INTERFACE</span><span class="s2"> (required for temporary addresses)&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="k">fi</span>
</span></span><span class="line"><span class="cl">                <span class="nb">echo</span> <span class="m">2</span> &gt; <span class="s2">&#34;/proc/sys/net/ipv6/conf/</span><span class="nv">$WAN6_INTERFACE</span><span class="s2">/use_tempaddr&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                        logger -t NAT6 <span class="s2">&#34;Using temporary addresses for outgoing connections on interface </span><span class="nv">$WAN6_INTERFACE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span>
</span></span><span class="line"><span class="cl">                        logger -t NAT6 <span class="s2">&#34;Error: Failed to enable temporary addresses for outgoing connections on interface </span><span class="nv">$WAN6_INTERFACE</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="k">fi</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nb">exit</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</details>
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä½¿è„šæœ¬å¼€æœºè¿è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">chmod +x /etc/init.d/nat6
</span></span><span class="line"><span class="cl">/etc/init.d/nat6 <span class="nb">enable</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹<code>/etc/sysctl.conf</code>ï¼Œæ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">net.ipv6.conf.default.forwarding=2
</span></span><span class="line"><span class="cl">net.ipv6.conf.all.forwarding=2
</span></span><span class="line"><span class="cl">net.ipv6.conf.default.accept_ra=2
</span></span><span class="line"><span class="cl">net.ipv6.conf.all.accept_ra=2
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ€ååœ¨è‡ªå®šä¹‰é˜²ç«å¢™ä¸­æ·»åŠ ä¸€è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ip6tables -t nat -A POSTROUTING -o <span class="k">$(</span>uci get network.wan6.ifname<span class="k">)</span> -j MASQUERADE
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”±äºç¡¬ä»¶çš„BUGï¼Œè¿˜éœ€è¦åœ¨å¼€æœºè„šæœ¬é‡Œæ·»åŠ ä¸€æ¡å‘½ä»¤ï¼Œå…³é—­ipv6çš„ç¡¬ä»¶åŠ é€Ÿï¼Œä¸ç„¶é€Ÿåº¦å°±ä¼šå…¶æ…¢æ— æ¯”</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="m">8</span> <span class="m">0</span> &gt; /sys/kernel/debug/hnat/hnat_setting
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®Œæˆåé‡å¯å°±ä¼šå‘ç°æœ‰ipv6äº†</p>
<p>ç„¶è€Œï¼Œåœ¨æˆ‘ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œå¼€å¯äº†ipv6åæ‰‹æœºæ‰“å¼€appæ—¶åŠ è½½çš„é€Ÿåº¦è‚‰çœ¼å¯è§çš„å˜æ…¢ã€‚ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯DNSçš„é—®é¢˜ï¼Œä½†ä¿®æ”¹äº†é»˜è®¤çš„DNSæœåŠ¡å™¨åè¿˜æ˜¯ä¸è¡Œã€‚<del>ä¸ºäº†ä¿è¯ä½¿ç”¨çš„ä½“éªŒï¼Œç›®å‰æˆ‘è¿˜æ˜¯æŠŠnat6ç»™å…³é—­äº†ğŸ˜­ã€‚</del></p>
<p>å·²ç»æ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆğŸ˜‰ï¼Œè§ä¸‹ä¸€èŠ‚</p>
<h3 id="é…ç½®mosdns">é…ç½®mosdns</h3>
<p>mosdnsä½œä¸ºä¸€æ¬¾è‡ªå®šä¹‰ç¨‹åº¦å¾ˆé«˜çš„DNSè½¬å‘å™¨ï¼Œåœ¨ä¹‹å‰çš„åšæ–‡<a class="link" href="https://lbqaq.top/p/mydns/"  target="_blank" rel="noopener"
    >ã€Šè‡ªå»ºDNSå®ç°åˆ†æµåŠå¹¿å‘Šè¿‡æ»¤ã€‹</a>å°±å·²ç»ä½¿ç”¨è¿‡äº†ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ä»–æ¥è§£å†³ipv6 NATåçš„å¡é¡¿é—®é¢˜ã€‚åŒæ—¶ï¼Œé…ç½®å¥½mosdnsåï¼Œä¹Ÿå¯ä»¥å®ç°å¹¿å‘Šè¿‡æ»¤ï¼Œdnsé˜²æ±¡æŸ“çš„åŠŸèƒ½ã€‚</p>
<p>å®‰è£…å¯ä»¥ä½¿ç”¨<a class="link" href="https://github.com/sbwml/luci-app-mosdns"  target="_blank" rel="noopener"
    >luci-app-mosdns</a>è¿™ä¸ªé¡¹ç›®æ¥å®ç°ï¼Œç›´æ¥æ‰§è¡Œå®ƒçš„è„šæœ¬å³å¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sh -c <span class="s2">&#34;</span><span class="k">$(</span>curl -ksS https://raw.githubusercontent.com/sbwml/luci-app-mosdns/v5/install.sh<span class="k">)</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å’Œä¹‹å‰çš„æ–¹æ¡ˆä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹é¡¹ç›®æä¾›çš„åŸŸå/IPæ–‡ä»¶ï¼š</p>
<ul>
<li><a class="link" href="https://github.com/Loyalsoldier/v2ray-rules-dat#%e8%a7%84%e5%88%99%e6%96%87%e4%bb%b6%e4%b8%8b%e8%bd%bd%e5%8f%8a%e4%bd%bf%e7%94%a8%e6%96%b9%e5%bc%8f"  target="_blank" rel="noopener"
    >reject-list.txt å’Œ direct-list.txt</a></li>
<li><a class="link" href="https://github.com/Masaiki/GeoIP2-CN#-%e4%b8%8b%e8%bd%bd%e9%93%be%e6%8e%a5"  target="_blank" rel="noopener"
    >CN-ip-cidr.txt</a></li>
<li><a class="link" href="https://anti-ad.net/"  target="_blank" rel="noopener"
    >ad-domains.txt</a>ï¼šä¸‹è½½<code>domains.txt</code>å¹¶æ”¹å</li>
</ul>
<p>å…¶å®luci-app-mosdnsé»˜è®¤æä¾›äº†ä¸€å¥—é…ç½®ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨mosdnsçš„ä¼˜å…ˆipv4çš„åŠŸèƒ½ï¼Œæ‰€ä»¥åªèƒ½è‡ªå·±æ’¸é…ç½®äº†ã€‚æ²¡é”™ï¼Œè§£å†³ipv6å¡é¡¿çš„æœ€å¥½æ–¹å¼å°±æ˜¯ä¸ç”¨ğŸ˜¥ï¼Œé€šè¿‡mosdnså¯ä»¥é¿å…æ“ä½œç³»ç»Ÿä½¿ç”¨ä¼˜å…ˆipv6çš„ç­–ç•¥ã€‚è¿™æ ·æ—¢å®ç°äº†ä¸å¡é¡¿ï¼Œåˆå¯ä»¥è®¿é—®çº¯ipv6ç½‘ç«™ã€‚</p>
<p>è¿™å¥—é…ç½®å¯ä»¥å®ç°å±è”½å¹¿å‘Šï¼Œå›½å†…åŸŸåç”¨æœ¬åœ°DNSè§£æï¼Œå›½å¤–åŸŸåèµ°è¿œç¨‹DNSè§£æã€‚é‡åˆ°ä¸åœ¨åˆ—è¡¨ä¸­çš„åŸŸåï¼Œä¼šæŸ¥è¯¢æœ¬åœ°DNSï¼Œå¦‚æœè¿”å›çš„æ˜¯å›½å¤–åœ°å€ï¼Œåˆ™ä»¥è¿œç¨‹DNSçš„ç»“æœä¸ºå‡†ã€‚</p>
<p>å…·ä½“çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<details>
    <summary>ğŸ“ƒå±•å¼€ä»£ç </summary>
    <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># Powered by luoboQAQ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">log</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l">warn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/tmp/log/mosdns.log&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># API å…¥å£è®¾ç½®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">api</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">http</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;0.0.0.0:9091&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">plugins</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># å›½å†…åŸŸå</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">geosite_cn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">domain_set</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;/var/mosdns/direct-list.txt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># å›½å†…IP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">geoip_cn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">ip_set</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;/var/mosdns/CN-ip-cidr.txt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># å›½å¤–åŸŸå</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">geosite_no_cn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">domain_set</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;/var/mosdns/proxy-list.txt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># é»‘åå•åŸŸå</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">blocklist</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">domain_set</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;/etc/mosdns/rule/blocklist.txt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># å¹¿å‘ŠåŸŸå</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">adlist</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">domain_set</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;/var/mosdns/ad-domains.txt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># PTRé»‘åå•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">local_ptr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">domain_set</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">files</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="s2">&#34;/etc/mosdns/rule/local-ptr.txt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># ç¼“å­˜æ’ä»¶</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">cache</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">cache</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="m">10240</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">lazy_cache_ttl</span><span class="p">:</span><span class="w"> </span><span class="m">86400</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># å°†ç¼“å­˜ä¿å­˜åœ¨ç£ç›˜</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dump_file</span><span class="p">:</span><span class="w"> </span><span class="l">/tmp/mosdns/cache.dump</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># è½¬å‘è‡³æœ¬åœ°æœåŠ¡å™¨çš„æ’ä»¶</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">forward_local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">forward</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">upstreams</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">alidns_dot</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;tls://223.5.5.5&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">dnspod_dot</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;tls://120.53.53.53&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># è½¬å‘è‡³è¿œç¨‹æœåŠ¡å™¨çš„æ’ä»¶</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">forward_remote</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">forward</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">upstreams</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># - tag: easymosdns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#   addr: &#34;https://doh.apad.pro/dns-query&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c">#   bootstrap: &#34;223.5.5.5&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">cloudflare_dot</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">addr</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;tls://1.1.1.1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># å›½å†…è§£æ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">local_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$forward_local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># fallback ç”¨æœ¬åœ°æœåŠ¡å™¨ sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># è¿”å›ä¸åŒ…å«æœ¬åœ° ip åˆ™ reject</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">local_ip_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$forward_local</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">matches</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;!resp_ip $geoip_cn&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">drop_resp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># fallback ç”¨è¿œç¨‹æœåŠ¡å™¨ sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">remote_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$forward_remote</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># fallbackæ’ä»¶</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">fallback</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">fallback</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">primary</span><span class="p">:</span><span class="w"> </span><span class="l">local_ip_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">secondary</span><span class="p">:</span><span class="w"> </span><span class="l">remote_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="m">500</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">always_standby</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># æœ‰å“åº”ç»ˆæ­¢è¿”å›</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">has_resp_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">matches</span><span class="p">:</span><span class="w"> </span><span class="l">has_resp</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">accept</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># æŸ¥è¯¢å›½å†…åŸŸå</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">query_is_local_domain</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">matches</span><span class="p">:</span><span class="w"> </span><span class="l">qname $geosite_cn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$local_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># æŸ¥è¯¢å›½å¤–åŸŸå</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">query_is_no_local_domain</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">matches</span><span class="p">:</span><span class="w"> </span><span class="l">qname $geosite_no_cn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$remote_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># æŸ¥è¯¢æ‹’ç»åŸŸå</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">query_is_reject_domain</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">matches</span><span class="p">:</span><span class="w"> </span><span class="l">qname $blocklist</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">reject 3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">matches</span><span class="p">:</span><span class="w"> </span><span class="l">qname $adlist</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">reject 3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">matches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">qtype 12</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">qname $local_ptr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">reject 3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">matches</span><span class="p">:</span><span class="w"> </span><span class="l">qtype 65</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">reject 3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># ä¸»è¦è¿è¡Œé€»è¾‘æ’ä»¶</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">main_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># å»å¹¿å‘Š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$query_is_reject_domain</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">jump has_resp_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="c"># ipv4åœ°å€ä¼˜å…ˆï¼Œé¿å…NATå ç”¨CPU</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">prefer_ipv4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$cache</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">jump has_resp_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$query_is_local_domain</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">jump has_resp_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$query_is_no_local_domain</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">jump has_resp_sequence     </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">$fallback</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># å¯åŠ¨ udp æœåŠ¡å™¨ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">udp_server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">udp_server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">entry</span><span class="p">:</span><span class="w"> </span><span class="l">main_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">listen</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;:5335&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># å¯åŠ¨ tcp æœåŠ¡å™¨ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l">tcp_server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">tcp_server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">entry</span><span class="p">:</span><span class="w"> </span><span class="l">main_sequence</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">listen</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;:5335&#34;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</details>
<h3 id="é…ç½®wireguard">é…ç½®Wireguard</h3>
<p>å­¦é™¢çš„æœåŠ¡å™¨æ˜¯åœ¨å†…ç½‘ä¸­çš„ï¼Œå¦‚æœæ²¡æœ‰è¿æ ¡å›­ç½‘å°±æ— æ³•è®¿é—®ã€‚ä¸ºäº†éšæ—¶éšåœ°å¯ä»¥è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Wireguardè¿›è¡Œè™šæ‹Ÿç»„ç½‘ã€‚åŸºäºipv6ç›´æ¥æ˜¯å…¬ç½‘çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p>è¿æ¥è·¯ç”±å™¨ï¼Œä½¿ç”¨å‘½ä»¤åˆ›å»ºé¢„å…±äº«å¯†é’¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºç›®å½•å­˜æ”¾å…¬é’¥ç§é’¥</span>
</span></span><span class="line"><span class="cl">mkdir wg
</span></span><span class="line"><span class="cl"><span class="c1"># è¿›å…¥æ–‡ä»¶å¤¹</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> wg
</span></span><span class="line"><span class="cl"><span class="c1"># é…ç½®åˆ›å»ºå¯†é’¥çš„æƒé™</span>
</span></span><span class="line"><span class="cl"><span class="nb">umask</span> <span class="m">077</span>
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºé¢„å…±äº«å¯†é’¥</span>
</span></span><span class="line"><span class="cl">wg genpsk &gt; sharekey
</span></span><span class="line"><span class="cl"><span class="c1"># è·å–å¯†é’¥å¤åˆ¶ä¿å­˜</span>
</span></span><span class="line"><span class="cl">cat sharekey
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹ååˆ›å»ºæœåŠ¡ç«¯å…¬é’¥ç§é’¥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºæœåŠ¡ç«¯å…¬é’¥å’Œç§é’¥</span>
</span></span><span class="line"><span class="cl">wg genkey <span class="p">|</span> tee server_privatekey <span class="p">|</span> wg pubkey &gt; server_publickey
</span></span><span class="line"><span class="cl"><span class="c1"># è·å–æœåŠ¡ç«¯ç§é’¥å¤åˆ¶ä¿å­˜</span>
</span></span><span class="line"><span class="cl">cat server_privatekey
</span></span><span class="line"><span class="cl"><span class="c1"># è·å–æœåŠ¡ç«¯å…¬é’¥å¤åˆ¶ä¿å­˜</span>
</span></span><span class="line"><span class="cl">cat server_publickey
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹ååˆ›å»ºå®¢æˆ·ç«¯çš„å…¬é’¥ç§é’¥ï¼Œæœ‰å¤šå°‘ä¸ªå°±è¦æ‰§è¡Œå‡ æ¬¡ <strong>æ³¨æ„æ–‡ä»¶çš„å‘½å</strong>ï¼Œè¿™é‡Œä»¥clinetä¸ºä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºå®¢æˆ·ç«¯å…¬é’¥å’Œç§é’¥</span>
</span></span><span class="line"><span class="cl">wg genkey <span class="p">|</span> tee clinet_privatekey <span class="p">|</span> wg pubkey &gt; clinet_publickey
</span></span><span class="line"><span class="cl"><span class="c1"># è·å–å®¢æˆ·ç«¯ç§é’¥å¤åˆ¶ä¿å­˜</span>
</span></span><span class="line"><span class="cl">cat clinet_privatekey
</span></span><span class="line"><span class="cl"><span class="c1"># è·å–å®¢æˆ·ç«¯å…¬é’¥å¤åˆ¶ä¿å­˜</span>
</span></span><span class="line"><span class="cl">cat clinet_publickey
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹‹åæ‰¾åˆ°ç½‘ç»œâ€”â€”æ¥å£â€”â€”æ·»åŠ æ–°æ¥å£ï¼Œé€‰æ‹©åè®®ä¸º<code>WireGuard VPN</code></p>
<p><img src="/p/ax6000/IMAGE/image-20231021204344135.png"
	width="1042"
	height="303"
	srcset="/p/ax6000/IMAGE/image-20231021204344135_hua574dd8cc732d2521c08ca5222dd5649_31549_480x0_resize_box_3.png 480w, /p/ax6000/IMAGE/image-20231021204344135_hua574dd8cc732d2521c08ca5222dd5649_31549_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="åˆ›å»ºæ–°æ¥å£"
	
	
		class="gallery-image" 
		data-flex-grow="343"
		data-flex-basis="825px"
	
>
æ¥ç€ä¿®æ”¹ç›¸åº”çš„é…ç½®ï¼š</p>
<p>æ¥å£åŸºæœ¬è®¾ç½®</p>
<ul>
<li>ç§é’¥ - ä¸Šæ–‡è·å–çš„<code>æœåŠ¡ç«¯ç§é’¥</code></li>
<li>ç›‘å¬æ¥å£ - éšæœºä¸€ä¸ªé«˜ä½çš„ç«¯å£ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨10800</li>
<li>IPåœ°å€ - è¿™é‡Œå¡«ä¸€ä¸ªä¸“ç”¨çš„ç½‘æ®µ IPï¼Œæˆ‘é€‰æ‹©<code>192.168.100.1/24</code></li>
</ul>
<p><strong>Peers</strong>è®¾ç½®</p>
<p>é€‰æ‹©<code>é¢„å…±äº«å¯†é’¥</code> - æ·»åŠ </p>
<ul>
<li>å…¬é’¥ - å¡«å†™ä¸Šæ–‡è·å–çš„<code>å®¢æˆ·ç«¯å…¬é’¥</code></li>
<li>å…è®¸çš„ IP - ä¸ºæ­¤å®¢æˆ·ç«¯åˆ†é…çš„å›ºå®š IPï¼Œæˆ‘è¿™é‡Œæ˜¯<code>192.168.100.2/32</code><strong>æ³¨æ„ä¸è¦å†²çª</strong></li>
<li>é¢„å…±äº«å¯†é’¥ - å¡«å†™ä¸Šæ–‡è·å–çš„<code>é¢„å…±äº«å¯†é’¥</code></li>
<li>è·¯ç”±å…è®¸çš„ IP - å‹¾é€‰</li>
</ul>
<p>é˜²ç«å¢™è®¾ç½®</p>
<ul>
<li>é€‰æ‹©<code>LAN</code></li>
</ul>

<div class="notice notice-info" >
    <div class="notice-title"><svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 512 512" fill="hsl(30, 80%, 70%)"><path d="M256 8a248 248 0 100 496 248 248 0 000-496zm0 110a42 42 0 110 84 42 42 0 010-84zm56 254c0 7-5 12-12 12h-88c-7 0-12-5-12-12v-24c0-7 5-12 12-12h12v-64h-12c-7 0-12-5-12-12v-24c0-7 5-12 12-12h64c7 0 12 5 12 12v100h12c7 0 12 5 12 12v24z"/></svg></div><p>ä¹‹å‰æˆ‘å°è¯•è‡ªå·±åˆ›å»ºä¸€ä¸ª<code>VPN</code>åˆ†åŒºè¿›è¡Œç®¡ç†ï¼Œä½†æ˜¯æ— æ³•è®¿é—®è·¯ç”±å™¨ä¸Šä¸€å±‚å†…ç½‘çš„åœ°å€ï¼Œä¼°è®¡æ˜¯é˜²ç«å¢™ä¹‹å‰çš„è½¬å‘è§„åˆ™æ²¡è®¾ç½®å¥½ï¼Œå¦‚æœä¸æƒ³æŠ˜è…¾å°±é€‰<code>LAN</code>å§</p></div>


<p>ä¹‹ååœ¨é˜²ç«å¢™ä¸­çš„â€”â€”â€æ‰“å¼€è·¯ç”±å™¨ç«¯å£â€œï¼Œå°†ä¹‹å‰è®¾ç½®çš„WireGuardç›‘å¬ç«¯å£çš„UDPæµé‡æ”¾è¡Œ</p>
<p>è¿™æ ·å°±ç®—é…ç½®å¥½äº†ã€‚</p>
<p>å®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[Interface]
</span></span><span class="line"><span class="cl"># å¯¹åº”ä¹‹å‰é…ç½®çš„é™æ€åœ°å€
</span></span><span class="line"><span class="cl">Address = 192.168.100.2/32
</span></span><span class="line"><span class="cl"># å®¢æˆ·ç«¯çš„ç§é’¥
</span></span><span class="line"><span class="cl">PrivateKey = ******
</span></span><span class="line"><span class="cl"># æœ¬åœ°çš„ DNS æœåŠ¡å™¨æˆ–è€…å…¬æœ‰ DNS æœåŠ¡å™¨,ä¾‹å¦‚: 114.114.114.114
</span></span><span class="line"><span class="cl">#DNS = 192.168.6.1
</span></span><span class="line"><span class="cl">[Peer]
</span></span><span class="line"><span class="cl"># è·¯ç”±å™¨å…¬é’¥
</span></span><span class="line"><span class="cl">PublicKey = ******
</span></span><span class="line"><span class="cl"># è®¾ç½®é‚£äº›åœ°å€èµ°WireGuardï¼Œå¦‚ä¸‹è®¾ç½®åªç”¨å±€åŸŸç½‘èµ°WireGuard,äº’è”ç½‘èµ°æœ¬åœ°ç½‘ç»œ.
</span></span><span class="line"><span class="cl">#AllowedIPs = 192.168.6.0/24, 192.168.100.0/24, 192.168.101.0/24
</span></span><span class="line"><span class="cl"># å…¨å±€æ¨¡å¼
</span></span><span class="line"><span class="cl">AllowedIps = 0.0.0.0/0
</span></span><span class="line"><span class="cl"># é¢„å…±äº«å¯†é’¥ï¼ŒåŒä¹‹å‰æ‰€é…ç½®
</span></span><span class="line"><span class="cl">PresharedKey = ******
</span></span><span class="line"><span class="cl"># è·¯ç”±å™¨çš„ipåœ°å€å’Œç«¯å£
</span></span><span class="line"><span class="cl">Endpoint = 10.134.10.10:10800
</span></span><span class="line"><span class="cl"># æ¯éš”å¤šå°‘ç§’æ£€æŸ¥ä¸€æ¬¡è¿æ¥
</span></span><span class="line"><span class="cl">PersistentKeepalive = 25
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é…ç½®ddns">é…ç½®ddns</h3>
<p>è™½ç„¶æˆ‘ä»¬æ‹¥æœ‰äº†å…¬ç½‘ipv6ï¼Œä½†è¿™æ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ddnsä½¿å…¶è‡ªåŠ¨å¯¹åº”åˆ°åŸŸåä¸Šã€‚ä»¥åä½¿ç”¨çš„æ—¶å€™åªéœ€è¦åŸŸåå³å¯ï¼Œæ— éœ€è®°ä½ipã€‚</p>
<p>237å¤§ä½¬çš„å›ºä»¶å·²ç»å†…ç½®äº†ddnsï¼Œæˆ‘çš„åŸŸåæ˜¯åœ¨cloudflareä¸Šï¼Œæ‰€ä»¥é€‰æ‹©DDNS æœåŠ¡æä¾›å•† [IPv6]ä¸ºcloudflare.com-v4ï¼ŒåŸŸåå¡«å†™éœ€è¦ddnsçš„åŸŸåï¼Œæ³¨æ„è¿™é‡Œè¦ç”¨@éš”ç¦»å­åŸŸåå’Œæ ¹ï¼Œä¾‹å¦‚<code>ddns@lbqaq.top</code>ï¼Œå¯†ç å¡«å†™å…¨å±€è®¿é—®å¯†é’¥ã€‚</p>
<p>åœ¨é«˜çº§è®¾ç½®é‡Œï¼Œæˆ‘å°†IP åœ°å€æ¥æº [IPv6]è®¾ç½®ä¸ºäº†<code>URL</code>ï¼Œè¿™æ ·é¿å…äº†è„šæœ¬é”™è¯¯è¯»å–ipåœ°å€çš„æƒ…å†µã€‚</p>
<p>éƒ½è®¾ç½®å¥½åï¼Œå°±å¯ä»¥çœ‹åˆ°åŸŸåæ‰€å¯¹åº”çš„åœ°å€å·²ç»è¢«æ›´æ–°äº†ã€‚</p>
<h2 id="å°ç»“">å°ç»“</h2>
<p>Openwrtä½œä¸ºä¸€ä¸ªå¼€æ”¾çš„ç³»ç»Ÿï¼Œå¯ç©æ€§è¿˜æ˜¯å¾ˆé«˜çš„ï¼Œé€šè¿‡è£…ä¸Šæ‰€éœ€çš„æ’ä»¶ï¼Œæå¤§çš„æé«˜äº†æˆ‘çš„ä¸Šç½‘ä½“éªŒï¼Œåªèƒ½è¯´ï¼šçœŸé¦™~</p>
<p>ï¼ˆæœ¬æ¥æ˜¯æ‰“ç®—ä»‹ç»æˆ‘å†™çš„æ ¡å›­ç½‘è¿æ¥ç¨‹åºï¼Œç»“æœä¸ºäº†è¿™ç¢Ÿé†‹åŒ…äº†è¿™ç›˜é¥ºå­QwQï¼‰</p>
<h2 id="æ›´æ–°æ—¥å¿—">æ›´æ–°æ—¥å¿—</h2>
<ul>
<li>23.11.22ï¼šæ·»åŠ äº†ubootå’Œmosdnsçš„å†…å®¹</li>
</ul>
<h2 id="å‚è€ƒæ–‡çŒ®">å‚è€ƒæ–‡çŒ®</h2>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a class="link" href="https://www.bilibili.com/video/BV1Co4y1F7wM/"  target="_blank" rel="noopener"
    >çº¢ç±³AX6000å®Œç¾åˆ·æœº | åˆ·æœºæ— é£é™© å°ç™½é€‚ç”¨</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p><a class="link" href="https://www.right.com.cn/forum/thread-8265832-1-2.html"  target="_blank" rel="noopener"
    >çº¢ç±³AX6000åˆ·hanwckfå¤§ä½¬çš„ä¸æ­»uboot+åˆ·å›å®˜æ–¹å›ºä»¶+TTLä½¿ç”¨+ç¼–ç¨‹å™¨æ•‘ç –æ•™ç¨‹</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p><a class="link" href="https://zhuanlan.zhihu.com/p/492774540"  target="_blank" rel="noopener"
    >æ ¡å›­ç½‘ç¯å¢ƒä¸‹Openwrté…ç½®ipv6æ•™ç¨‹â€”â€”ä»¥nat6ä¸ºä¾‹</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/%E6%95%99%E7%A8%8B/">æ•™ç¨‹</a>
        
            <a href="/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/">è·¯ç”±å™¨</a>
        
            <a href="/tags/openwrt/">Openwrt</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            æœ€åæ›´æ–°äº 2023-11-22 13:24:00
        </span>
    </section></footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.4/katex.min.css"crossorigin="anonymous"
            ><script 
                src="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.4/katex.min.js"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.4/contrib/auto-render.min.js"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/wireguard-ipv6/">
        
        
            <div class="article-image">
                <img src="/p/wireguard-ipv6/104589070.5e41b10ddb272bb589ecbfcf88b93c1f.webp" 
                        width="1803" 
                        height="1125" 
                        loading="lazy"
                        alt="Featured image of post ä½¿ç”¨WireGuard&#43;ipv6è¿›è¡Œå¼‚åœ°ç»„ç½‘"
                        data-key="wireguard-ipv6" 
                        data-hash="md5-XkGxDdsnK7WJ7L/PiLk8Hw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">ä½¿ç”¨WireGuard&#43;ipv6è¿›è¡Œå¼‚åœ°ç»„ç½‘</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E4%B8%80%E6%AD%A5%E5%88%B0%E4%BD%8D%E8%87%AA%E5%8A%A8%E7%94%B3%E8%AF%B7ssl%E8%AF%81%E4%B9%A6/">
        
        
            <div class="article-image">
                <img src="/p/%E4%B8%80%E6%AD%A5%E5%88%B0%E4%BD%8D%E8%87%AA%E5%8A%A8%E7%94%B3%E8%AF%B7ssl%E8%AF%81%E4%B9%A6/99528942.cc2e0262f9453b8f27fe2926714d30d6.webp" 
                        width="1993" 
                        height="1500" 
                        loading="lazy"
                        alt="Featured image of post ä¸€æ­¥åˆ°ä½ï¼Œè‡ªåŠ¨ç”³è¯·SSLè¯ä¹¦"
                        
                        data-hash="md5-zC4CYvlFO48n/ikmcU0w1g==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">ä¸€æ­¥åˆ°ä½ï¼Œè‡ªåŠ¨ç”³è¯·SSLè¯ä¹¦</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/mydns/">
        
        
            <div class="article-image">
                <img src="/p/mydns/100669875.996c5643dbba4e97e3b68a917d181fb2.webp" 
                        width="2008" 
                        height="1080" 
                        loading="lazy"
                        alt="Featured image of post è‡ªå»ºDNSå®ç°åˆ†æµåŠå¹¿å‘Šè¿‡æ»¤"
                        data-key="mydns" 
                        data-hash="md5-mWxWQ9u6TpfjtoqRfRgfsg==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">è‡ªå»ºDNSå®ç°åˆ†æµåŠå¹¿å‘Šè¿‡æ»¤</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
<link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet'/>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
        --waline-font-size: var(--article-font-size);
    }
    .waline-container .wl-count {
        color: var(--card-text-color-main);
    }
</style><script>
    
    Waline.init({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://unpkg.com/@waline/emojis@1.0.1/weibo"],"lang":"zh-CN","locale":{"admin":"Admin","placeholder":null},"requiredMeta":["name","email","url"],"serverURL":"https://waline.lbqaq.top/"});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2024 luoboQAQ
    </section>
    
    <section class="powerby">
        
            <a href="https://umami.lbqaq.top/share/gbMqUqkF/Blog">è®¿é—®ç»Ÿè®¡</a><br/><a href="https://beian.miit.gov.cn">è‹ICPå¤‡2021037116å·</a> <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.22.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.bootcdn.net/ajax/libs/photoswipe/4.1.3/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.bootcdn.net/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.bootcdn.net/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.bootcdn.net/ajax/libs/photoswipe/4.1.3/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://npm.elemecdn.com/node-vibrant@latest/dist/vibrant.min.js"crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
