<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="è®°å½•æˆ‘å¯¹å‰ç¼€å’Œã€å·®åˆ†ã€æ ‘çŠ¶æ•°ç»„çš„è®¤è¯†"><title>åˆæ¢åŒºé—´æ±‚å’Œé—®é¢˜</title><link rel=canonical href=https://lbqaq.top/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/><link rel=stylesheet href=/scss/style.min.ae1eb7f887336befbb146467b4baee8138bb2b0004f1f7aa9fcf3b40efa7e299.css><meta property='og:title' content="åˆæ¢åŒºé—´æ±‚å’Œé—®é¢˜"><meta property='og:description' content="è®°å½•æˆ‘å¯¹å‰ç¼€å’Œã€å·®åˆ†ã€æ ‘çŠ¶æ•°ç»„çš„è®¤è¯†"><meta property='og:url' content='https://lbqaq.top/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/'><meta property='og:site_name' content='luoboQAQ'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='å‰ç¼€å’Œ'><meta property='article:tag' content='å·®åˆ†'><meta property='article:tag' content='æ ‘çŠ¶æ•°ç»„'><meta property='article:tag' content='C++'><meta property='article:published_time' content='2022-03-14T20:46:19+08:00'><meta property='article:modified_time' content='2022-03-16T21:30:00+08:00'><meta property='og:image' content='https://lbqaq.top/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/95680357.webp'><meta name=twitter:title content="åˆæ¢åŒºé—´æ±‚å’Œé—®é¢˜"><meta name=twitter:description content="è®°å½•æˆ‘å¯¹å‰ç¼€å’Œã€å·®åˆ†ã€æ ‘çŠ¶æ•°ç»„çš„è®¤è¯†"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://lbqaq.top/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/95680357.webp'><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><style>:root{--sys-font-family:-apple-system, "LXGW WenKai", 'Microsoft Yahei', 'WenQuanYi Micro Hei', sans-serif;--code-font-family:"JetBrains Mono", "LXGW WenKai Mono", Menlo, Monaco, Consolas, monospace;--article-font-family:"LXGW WenKai", sans-serif;--base-font-family:"LXGW WenKai", var(--sys-font-family), sans-serif}</style><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","smhd51txrk")</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/Mint_hu_90cbcbb19cfdb02a.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸŒ</span></figure><div class=site-meta><h1 class=site-name><a href=/>luoboQAQ</a></h1><h2 class=site-description>å¿«ä¹å­¦ä¹ æ¯ä¸€å¤©</h2></div></header><ol class=menu-social><li><a href=https://github.com/luoboQAQ target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://lbqaq.top/index.xml target=_blank title=RSSè®¢é˜… rel=me><svg class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li><li><a href=https://pan.lbqaq.top target=_blank title=æˆ‘çš„ä¸ªäººäº‘ç›˜ rel=me><svg class="icon icon-tabler icon-tabler-cloud" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 18a4.6 4.4.0 010-9 5 4.5.0 0111 2h1a3.5 3.5.0 010 7H7"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>æ–‡ç« </span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æŸ¥è¯¢</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹é“¾</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#å‰ç¼€å’Œ>å‰ç¼€å’Œ</a><ol><li><a href=#ä¸€ç»´å‰ç¼€å’Œ>ä¸€ç»´å‰ç¼€å’Œ</a></li><li><a href=#äºŒç»´å‰ç¼€å’Œ>äºŒç»´å‰ç¼€å’Œ</a></li><li><a href=#ä¾‹é¢˜>ä¾‹é¢˜</a></li></ol></li><li><a href=#å·®åˆ†>å·®åˆ†</a><ol><li><a href=#ä¸€ç»´å·®åˆ†>ä¸€ç»´å·®åˆ†</a></li><li><a href=#äºŒç»´å·®åˆ†>äºŒç»´å·®åˆ†</a></li></ol></li><li><a href=#æ ‘çŠ¶æ•°ç»„>æ ‘çŠ¶æ•°ç»„</a><ol><li><a href=#å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢>å•ç‚¹ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢</a></li><li><a href=#åŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢>åŒºé—´ä¿®æ”¹ã€å•ç‚¹æŸ¥è¯¢</a></li></ol></li><li><a href=#å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/><img src=/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/95680357.webp width=2357 height=1500 loading=lazy alt="Featured image of post åˆæ¢åŒºé—´æ±‚å’Œé—®é¢˜"></a></div><div class=article-details><header class=article-category><a href=/categories/%E7%AE%97%E6%B3%95/>ç®—æ³•</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/>åˆæ¢åŒºé—´æ±‚å’Œé—®é¢˜</a></h2><h3 class=article-subtitle>è®°å½•æˆ‘å¯¹å‰ç¼€å’Œã€å·®åˆ†ã€æ ‘çŠ¶æ•°ç»„çš„è®¤è¯†</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2022-03-14</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 6 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p>æœ€è¿‘çœ‹äº†å¾ˆå¤šç¯‡å…³äºå¦‚ä½•åˆ·é¢˜çš„æ–‡ç« ï¼Œå…¶ä¸­éƒ½ä¸çº¦è€ŒåŒçš„æåˆ°äº†"æ€»ç»“"è¿™ä¸ªå…³é”®è¯ã€‚ä»”ç»†æƒ³æƒ³è‡ªå·±ç¡®å®æ˜¯ä»æ¥æ²¡æœ‰åšè¿‡ä¸€ç¯‡æ€»ç»“ï¼Œåˆ·è¿‡çš„é¢˜ç›®å°±è¿‡å»äº†ï¼Œå¯¼è‡´åŒæ ·çš„é¢˜ç›®å†åšä¸€æ¬¡åˆä¸ä¼šäº†ã€‚</p><p>æˆ‘çš„ç¬¬ä¸€ç¯‡æ€»ç»“å°±ä»¥æœ€è¿‘åˆ·åˆ°çš„ã€ŒåŒºé—´æ±‚å’Œã€é—®é¢˜å±•å¼€å§ã€‚é¦–å…ˆï¼Œå…ˆä¸Šä¸€èˆ¬é—®é¢˜çš„æ¨¡æ¿ï¼ˆå…¶ä¸­åŠ ç²—çš„ä¸ºæœ€ä½³æ–¹æ¡ˆï¼‰ï¼š</p><ul><li>æ•°ç»„ä¸å˜ï¼ŒåŒºé—´æŸ¥è¯¢ï¼š<strong>å‰ç¼€å’Œ</strong>ã€æ ‘çŠ¶æ•°ç»„ã€çº¿æ®µæ ‘ï¼›</li><li>æ•°ç»„å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢ï¼š<strong>æ ‘çŠ¶æ•°ç»„</strong>ã€çº¿æ®µæ ‘ï¼›</li><li>æ•°ç»„åŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢ï¼š<strong>å·®åˆ†</strong>ã€çº¿æ®µæ ‘ï¼›</li><li>æ•°ç»„åŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢ï¼š<strong>çº¿æ®µæ ‘</strong>ã€‚</li></ul><h2 id=å‰ç¼€å’Œ><a href=#%e5%89%8d%e7%bc%80%e5%92%8c class=header-anchor></a>å‰ç¼€å’Œ</h2><p>å‰ç¼€å’Œçš„ä½œç”¨å°±æ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ±‚æŸä¸€æ®µçš„å’Œï¼Œæ˜¯ã€Œå·®åˆ†ã€çš„é€†è¿ç®—ã€‚</p><p><strong>å‰ç¼€å’Œæ•°ç»„çš„æ¯ä¸€ä½è®°å½•çš„æ˜¯å½“å‰ä½ç½®è·ç¦»èµ·ç‚¹ä½ç½®ï¼Œè¿™è¿ç»­ä¸€æ®µçš„å’ŒåŒºé—´å’Œã€‚</strong></p><h3 id=ä¸€ç»´å‰ç¼€å’Œ><a href=#%e4%b8%80%e7%bb%b4%e5%89%8d%e7%bc%80%e5%92%8c class=header-anchor></a>ä¸€ç»´å‰ç¼€å’Œ</h3><p>å‡è®¾æœ‰ä¸€ä¸ªä¸€ç»´æ•°ç»„$x$å’Œè¯¥æ•°ç»„çš„ä¸€ç»´å‰ç¼€å’Œæ•°ç»„$y$ï¼Œåˆ™$x$å’Œ$y$æ»¡è¶³ä»¥ä¸‹å…³ç³»ï¼š</p>$$y_0=x_0ã€y_1=x_0+x_1ã€y_2=x_0+x_1+x_2ã€......ã€y_n=x_0+x_1+...+x_n$$<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ $y_n=y_{n-1}+x_n$ è¿™ä¸ªå…¬å¼è®¡ç®—å‡ºå‰ç¼€å’Œï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=n>y</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>x</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=n>y</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>y</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>x</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½†æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¸¸å¸¸ä¼šé‡åˆ°å·¦è¾¹ç•Œæº¢å‡ºçš„æƒ…å†µï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å°†å‰ç¼€å’Œæ•°ç»„æ•´ä½“å‘åç§»åŠ¨ä¸€ä½ï¼Œä¸‹é¢ç»™å‡ºå‰ç¼€ç»™è®¡ç®—ä»£ç ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>x</span><span class=p>.</span><span class=n>size</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>y</span><span class=p>(</span><span class=n>n</span> <span class=o>+</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>y</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>y</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>x</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>];</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ ·å½“æˆ‘ä»¬æƒ³æ±‚åŒºé—´$[a,b]$ä¹‹å’Œæ—¶åªéœ€è¦è®¡ç®—$y[b+1]-y[a]$å³å¯ã€‚</p><h3 id=äºŒç»´å‰ç¼€å’Œ><a href=#%e4%ba%8c%e7%bb%b4%e5%89%8d%e7%bc%80%e5%92%8c class=header-anchor></a>äºŒç»´å‰ç¼€å’Œ</h3><p>æœ‰ä¸€ä¸ªäºŒç»´æ•°ç»„$a$å’Œè¯¥æ•°ç»„çš„äºŒç»´å‰ç¼€å’Œæ•°ç»„$b$ï¼ˆå…¶åŒæ ·æ˜¯ä¸ªäºŒç»´æ•°ç»„)</p><p>å³ä¾§æ ‡æ³¨æ©™è‰²çš„äºŒç»´å‰ç¼€å’Œå…ƒç´ ï¼Œå…¶å€¼æ˜¯å·¦ä¾§çš„åŸäºŒç»´æ•°ç»„ä¸­æ ‡æ³¨æ©™è‰²çš„æ‰€æœ‰å…ƒç´ çš„å’Œã€‚</p><p><img src=/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/IMAGE/1.jpg width=899 height=457 srcset="/p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/IMAGE/1_hu_574bdaff6d014dba.jpg 480w, /p/%E5%88%9D%E6%8E%A2%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C%E9%97%AE%E9%A2%98/IMAGE/1_hu_43235969b02099c0.jpg 1024w" loading=lazy alt=äºŒç»´å‰ç¼€å’Œ class=gallery-image data-flex-grow=196 data-flex-basis=472px></p><p>äºŒç»´å‰ç¼€å’Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªçŸ©é˜µå†…å€¼çš„å’Œï¼Œè€ŒçŸ©é˜µåˆå¯ä»¥ç”±ä¸¤ä¸ªè¡Œæ•°æˆ–åˆ—æ•°å°‘ä¸€çš„å­çŸ©é˜µç»„åˆåï¼Œåˆ å»é‡åˆéƒ¨åˆ†å†åŠ ä¸Šå³ä¸‹è§’çš„å€¼æ¥æ„æˆï¼Œä¹Ÿå°±æ˜¯ä»¥ä¸‹å¼å­ï¼š</p>$$b_{x,y}=b_{x-1,y}+b_{x,y-1}-b_{x-1,y-1}+a_{x,y}$$<p>è¯¦ç»†çš„ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>y</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>;</span> <span class=n>y</span><span class=o>++</span><span class=p>)</span>      <span class=c1>// nè¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=n>m</span><span class=p>;</span> <span class=n>x</span><span class=o>++</span><span class=p>)</span>  <span class=c1>// måˆ—
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>x</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>y</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>b</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=n>a</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>];</span>  <span class=c1>//å·¦ä¸Šè§’çš„å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>else</span> <span class=nf>if</span> <span class=p>(</span><span class=n>x</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>b</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=n>b</span><span class=p>[</span><span class=n>y</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>x</span><span class=p>]</span> <span class=o>+</span> <span class=n>a</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>];</span>  <span class=c1>//ç¬¬ä¸€åˆ—
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>else</span> <span class=nf>if</span> <span class=p>(</span><span class=n>y</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>b</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=n>b</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>a</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>];</span>  <span class=c1>//ç¬¬ä¸€è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>b</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=n>b</span><span class=p>[</span><span class=n>y</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>x</span><span class=p>]</span> <span class=o>+</span> <span class=n>b</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>b</span><span class=p>[</span><span class=n>y</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>x</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>a</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>é€šè¿‡äºŒç»´å‰ç¼€å’Œï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¡ç®—å‡ºç»™å®šçŸ©é˜µçš„å’Œï¼Œå³ä¸Šé¢æ±‚å‰ç¼€å’Œçš„é€†è¿ç®—ã€‚å‡è®¾æ‰€æ±‚çŸ©é˜µçš„å·¦ä¸Šè§’ç‚¹ä¸º$(x1,y1)$ï¼Œå³ä¸‹è§’ç‚¹ä¸º$(x2,y2)$ï¼Œåˆ™æœ‰å…¬å¼ï¼š</p><p>$sum=B[y2][x2]+B[y1-1][x1-1]-B[y1-1][x2]-B[y2][x1-1]$</p><p>è¿™é‡Œç»“åˆå›¾å½¢ä¼šæ›´å¥½ç†è§£ä¸€ç‚¹ã€‚</p><h3 id=ä¾‹é¢˜><a href=#%e4%be%8b%e9%a2%98 class=header-anchor></a>ä¾‹é¢˜</h3><p>åŠ›æ‰£<a class=link href=https://leetcode-cn.com/problems/range-sum-query-immutable/ target=_blank rel=noopener>303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜</a></p><p>å°±æ˜¯ä¸€ç»´å‰ç¼€å’Œçš„æ¨¡æ¿é¢˜ï¼Œç›´æ¥ä¸Šæ¨¡æ¿å³å¯åšå‡ºã€‚</p><h2 id=å·®åˆ†><a href=#%e5%b7%ae%e5%88%86 class=header-anchor></a>å·®åˆ†</h2><p>å·®åˆ†æ˜¯ä¸€ç§å¤„ç†æ•°æ®çš„å·§å¦™è€Œç®€å•çš„æ–¹æ³•ï¼Œå®ƒåº”ç”¨äºåŒºé—´çš„ä¿®æ”¹å’Œè¯¢é—®é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬è¦ç»å¸¸å¯¹æ•°ç»„AæŸä¸ªåŒºé—´å†…çš„æ‰€æœ‰å…ƒç´ åšç›¸åŒçš„åŠ å‡æ“ä½œï¼Œå¦‚æœä¸€ä¸ªä¸€ä¸ªä¿®æ”¹æ•ˆç‡å¾ˆå·®ï¼Œä½†æ˜¯ä½¿ç”¨å·®åˆ†æ•°ç»„åï¼Œè¿™ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦å°±èƒ½é™åˆ°$\Omicron(1)$,å½“æ‰€æœ‰çš„ä¿®æ”¹æ“ä½œç»“æŸåï¼Œå†åˆ©ç”¨å·®åˆ†æ•°ç»„ï¼Œè®¡ç®—å‡ºæ–°çš„Aã€‚</p><h3 id=ä¸€ç»´å·®åˆ†><a href=#%e4%b8%80%e7%bb%b4%e5%b7%ae%e5%88%86 class=header-anchor></a>ä¸€ç»´å·®åˆ†</h3><p>æˆ‘ä»¬å®šä¹‰åŸæ•°ç»„ä¸º$a[]$ã€å·®åˆ†æ•°ç»„ä¸º$D[]$ï¼Œåˆ™æœ‰è®¡ç®—å…¬å¼ï¼š$D[k]=a[k]-a[k-1]$,å³åŸæ•°ç»„$a[]$çš„ç›¸é‚»å…ƒç´ çš„å·®ã€‚ä»å®šä¹‰æˆ‘ä»¬å¯ä»¥æ¨å‡º$a[k]=D[0]+D[1]+&mldr;+D[k]$ã€‚ä¹Ÿå°±æ˜¯è¯´$a[]$æ˜¯$D[]$çš„å‰ç¼€å’Œï¼Œæ‰€ä»¥ã€Œå·®åˆ†ã€å’Œã€Œå‰ç¼€å’Œã€å°±æ˜¯ä¸€ç»„é€†è¿ç®—ã€‚</p><p>å½“æˆ‘ä»¬æƒ³è¦å¯¹åŒºé—´$[L,R]$æ¯ä¸ªå…ƒç´ åŠ ä¸Š$d$ï¼Œåˆ™åªè¦è¿›è¡Œä¸‹é¢çš„ä¸¤æ­¥æ“ä½œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>D</span><span class=p>[</span><span class=n>L</span><span class=p>]</span> <span class=o>+=</span> <span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>D</span><span class=p>[</span><span class=n>R</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span> <span class=o>-=</span> <span class=n>d</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>å½“æ‰€æœ‰ä¿®æ”¹éƒ½å®Œæˆæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¤æ‚åº¦ä¸º$\Omicron(n)$çš„æ“ä½œè®¡ç®—å‡ºæ–°çš„$a[]$</p><p>å½“ç„¶ï¼Œå·®åˆ†ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒåªèƒ½è§£å†³ <strong>åŒºé—´ä¿®æ”¹+å•ç‚¹æŸ¥è¯¢</strong> è¿™ç±»é—®é¢˜ã€‚å½“é‡åˆ°éœ€è¦å¤šæ¬¡æŸ¥è¯¢çš„é—®é¢˜ï¼Œæ¯”å¦‚æœ‰$m$æ¬¡ä¿®æ”¹ï¼Œ$k$æ¬¡æŸ¥è¯¢ï¼Œæ­¤æ—¶ä¿®æ”¹çš„å¤æ‚åº¦ä¸º$\Omicron(m)$,æŸ¥è¯¢çš„å¤æ‚åº¦ä¸º$\Omicron(kn)$ï¼Œæ€»å¤æ‚åº¦ä¸º$\Omicron(m+kn)$ï¼Œå’Œæš´åŠ›æ³•$\Omicron(mn+k)$çš„å¤æ‚åº¦ä¸€è‡´äº†ã€‚</p><h3 id=äºŒç»´å·®åˆ†><a href=#%e4%ba%8c%e7%bb%b4%e5%b7%ae%e5%88%86 class=header-anchor></a>äºŒç»´å·®åˆ†</h3><p>ä»ä¸€ç»´å·®åˆ†å¯ä»¥å¾ˆå®¹æ˜“çš„æ¨å¹¿åˆ°äºŒç»´å·®åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å…¬å¼è®¡ç®—$D[][]$ï¼š</p>$$D[i][j]=a[i][j]-a[i-1][j]-a[i][j-1]+a[i-1][j-1]$$<p>æˆ‘ä»¬æƒ³ä¿®æ”¹åæ ‡ç‚¹$(x1,y1)$~$(x2,y2)$å®šä¹‰çš„åŒºé—´ï¼Œåˆ™éœ€è¦ä¿®æ”¹çŸ©é˜µçš„å››ä¸ªç‚¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=n>D</span><span class=p>[</span><span class=n>y1</span><span class=p>][</span><span class=n>x1</span><span class=p>]</span>     <span class=o>+=</span> <span class=n>d</span><span class=p>;</span>     <span class=c1>//äºŒç»´åŒºé—´çš„èµ·ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>D</span><span class=p>[</span><span class=n>y1</span><span class=p>][</span><span class=n>x2</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span>   <span class=o>-=</span> <span class=n>d</span><span class=p>;</span>     <span class=c1>//æŠŠyçœ‹æˆå¸¸æ•°ï¼Œxä»x1åˆ°x2+1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>D</span><span class=p>[</span><span class=n>y2</span><span class=o>+</span><span class=mi>1</span><span class=p>][</span><span class=n>x1</span><span class=p>]</span>   <span class=o>-=</span> <span class=n>d</span><span class=p>;</span>     <span class=c1>//æŠŠxçœ‹æˆå¸¸æ•°ï¼Œyä»y1åˆ°y2+1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>D</span><span class=p>[</span><span class=n>y2</span><span class=o>+</span><span class=mi>1</span><span class=p>][</span><span class=n>x2</span><span class=o>+</span><span class=mi>1</span><span class=p>]</span> <span class=o>+=</span> <span class=n>d</span><span class=p>;</span>     <span class=c1>//ç”±äºå‰ä¸¤å¼æŠŠdå‡äº†2æ¬¡ï¼Œå¤šå‡äº†1æ¬¡ï¼Œè¿™é‡ŒåŠ 1æ¬¡å›æ¥
</span></span></span></code></pre></td></tr></table></div></div><p>å‰ç¼€å’Œ$a[][]$çš„è®¡ç®—å¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼ï¼š</p>$$a[i][j]=D[i][j]+a[i-1][j]+a[i][j-1]-a[i-1][j-1]$$<p>åœ¨è®¡ç®—$a[][]$æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸æ–°å¼€ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä»¥ç”¨è¿‡çš„$D[][]$ä½œä¸º$a[][]$ï¼Œä»¥æ­¤æ¥èŠ‚çº¦ç©ºé—´ã€‚ä½¿ç”¨çš„è¯åªéœ€è¦å°†ä¸Šé¢å¼å­ä¸­çš„$a$å…¨éƒ¨æ¢ä¸º$D$</p><h2 id=æ ‘çŠ¶æ•°ç»„><a href=#%e6%a0%91%e7%8a%b6%e6%95%b0%e7%bb%84 class=header-anchor></a>æ ‘çŠ¶æ•°ç»„</h2><p>æ ‘çŠ¶æ•°ç»„çš„ä¼˜ç‚¹åœ¨äºæŸ¥è¯¢å’Œä¿®æ”¹çš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸º$\Omicron(logn)$ï¼Œä¸”æ¯”çº¿æ®µæ ‘å¥½å†™ã€‚</p><h3 id=å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢><a href=#%e5%8d%95%e7%82%b9%e4%bf%ae%e6%94%b9%e5%8c%ba%e9%97%b4%e6%9f%a5%e8%af%a2 class=header-anchor></a>å•ç‚¹ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢</h3><p>æ ‘çŠ¶æ•°ç»„çš„åŸç†ç”±äºæ—¶é—´æœ‰é™ï¼Œè¿™é‡Œå°±ä¸å±•å¼€è¯´äº†ï¼ˆä¹‹åæœ‰ç©ºå†è¡¥ä¸ŠğŸ˜‡ï¼‰ï¼Œå…ˆä¸Šæ¨¡æ¿ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=kt>int</span> <span class=n>c</span><span class=p>[</span><span class=n>MAXN</span><span class=p>];</span>	<span class=c1>//æ ‘çŠ¶æ•°ç»„(ä¸‹æ ‡ä»1å¼€å§‹)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>n</span><span class=p>;</span>			<span class=c1>//æ•°ç»„çš„é•¿åº¦
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>inline</span> <span class=kt>int</span> <span class=nf>lowbit</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>i</span> <span class=o>&amp;</span> <span class=p>(</span><span class=o>-</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//åœ¨ä½ç½®iåŠ ä¸Šk
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>update</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=p>,</span> <span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+=</span> <span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>i</span> <span class=o>+=</span> <span class=n>lowbit</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//æ±‚A[1]~A[i]çš„å’Œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>getsum</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>i</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>res</span> <span class=o>+=</span> <span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>i</span> <span class=o>-=</span> <span class=n>lowbit</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™é‡Œä¸€å®šè¦æ³¨æ„ï¼Œæ ‘çŠ¶æ•°ç»„å’ŒåŸæ•°ç»„ä¸‹æ ‡éƒ½æ˜¯ä»1å¼€å§‹çš„ã€‚</p><p>ç”±æ­¤å°±è§£å†³äº†<strong>å•ç‚¹ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢</strong>çš„é—®é¢˜ï¼Œæˆ‘ä»¬æƒ³è¦å¾—åˆ°åŒºé—´$(a,b)$çš„å’Œï¼Œåªéœ€ä½¿ç”¨<code>getsum(b) - getsum(a - 1)</code>ã€‚</p><p>ä¾‹é¢˜ï¼š<a class=link href=https://www.luogu.com.cn/problem/P3374 target=_blank rel=noopener>P3374ã€æ¨¡æ¿ã€‘æ ‘çŠ¶æ•°ç»„ 1</a></p><h3 id=åŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢><a href=#%e5%8c%ba%e9%97%b4%e4%bf%ae%e6%94%b9%e5%8d%95%e7%82%b9%e6%9f%a5%e8%af%a2 class=header-anchor></a>åŒºé—´ä¿®æ”¹ã€å•ç‚¹æŸ¥è¯¢</h3><p>åœ¨ä¸Šé¢çš„å·®åˆ†ä¸­æˆ‘ä»¬åˆ†æäº†ï¼Œå¦‚æœæœ‰å¤šæ¬¡æŸ¥è¯¢ï¼Œä»…ä»…ä½¿ç”¨å·®åˆ†çš„æ—¶é—´å¤æ‚åº¦å°±å’Œæš´åŠ›å·®ä¸å¤šäº†ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ ‘çŠ¶æ•°ç»„+å·®åˆ†çš„æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬å°†ä¸Šé¢æ¨¡æ¿ä¸­çš„åŸå§‹æ•°ç»„æ”¹ä¸ºå·®åˆ†æ•°ç»„ã€‚ç”±å·®åˆ†çš„æ€§è´¨å¯çŸ¥ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªåŒºé—´æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹åŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹å³å¯ï¼Œæ­¤æ—¶åŒºé—´ä¿®æ”¹çš„é—®é¢˜ä¾¿è¢«è½¬åŒ–æˆäº†å•ç‚¹ä¿®æ”¹çš„é—®é¢˜ã€‚åŒæ—¶ï¼Œæ ‘çŠ¶æ•°ç»„å‰né¡¹å’Œä¹Ÿå°±å˜æˆäº†åŸæ•°ç»„ç¬¬né¡¹çš„å€¼ã€‚</p><p>ä¾‹é¢˜ï¼š<a class=link href=https://www.luogu.com.cn/problem/P3368 target=_blank rel=noopener>P3368ã€æ¨¡æ¿ã€‘æ ‘çŠ¶æ•°ç»„ 2</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=c1>//å‰é¢è¿˜æ˜¯æ ‘çŠ¶æ•°ç»„çš„æ¨¡æ¿ï¼Œè¿™é‡Œå°±ä¸æ”¾äº†
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span> <span class=o>&gt;&gt;</span> <span class=n>m</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>pre</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>now</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>now</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>//è¿™é‡Œæ¯æ¬¡æ±‚å·®åˆ†æ¥ç”Ÿæˆæ ‘çŠ¶æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>update</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>now</span> <span class=o>-</span> <span class=n>pre</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>pre</span> <span class=o>=</span> <span class=n>now</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>m</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>a</span> <span class=o>&gt;&gt;</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>a</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>y</span> <span class=o>&gt;&gt;</span> <span class=n>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=c1>//æ›´æ–°å³ä¸ºå¯¹D[X]ã€D[y+1]è¿›è¡Œä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>update</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>k</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>update</span><span class=p>(</span><span class=n>y</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=n>k</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>a</span> <span class=o>==</span> <span class=mi>2</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>//æ±‚D[1]~D[i]çš„å’Œ,å³A[i]çš„å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>getsum</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>system</span><span class=p>(</span><span class=s>&#34;pause&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=å‚è€ƒèµ„æ–™><a href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99 class=header-anchor></a>å‚è€ƒèµ„æ–™</h2><ul><li><a class=link href=https://zhuanlan.zhihu.com/p/117569086 target=_blank rel=noopener>ã€æœå¤•çš„ACMç¬”è®°ã€‘ç®—æ³•åŸºç¡€-å‰ç¼€å’Œ</a></li><li><a class=link href=https://blog.csdn.net/weixin_43914593/article/details/113782108 target=_blank rel=noopener>å·®åˆ† &ndash;ç®—æ³•ç«èµ›ä¸“é¢˜è§£æï¼ˆ32ï¼‰</a></li><li><a class=link href=https://leetcode-cn.com/problems/range-sum-query-mutable/solution/guan-yu-ge-lei-qu-jian-he-wen-ti-ru-he-x-41hv/ target=_blank rel=noopener>å…³äºå„ç±»ã€ŒåŒºé—´å’Œã€é—®é¢˜å¦‚ä½•é€‰æ‹©è§£å†³æ–¹æ¡ˆï¼ˆå«æ¨¡æ¿ï¼‰</a></li><li><a class=link href=https://www.cnblogs.com/xenny/p/9739600.html target=_blank rel=noopener>æ ‘çŠ¶æ•°ç»„è¯¦è§£</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/%E5%89%8D%E7%BC%80%E5%92%8C/>å‰ç¼€å’Œ</a>
<a href=/tags/%E5%B7%AE%E5%88%86/>å·®åˆ†</a>
<a href=/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/>æ ‘çŠ¶æ•°ç»„</a>
<a href=/tags/c++/>C++</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>æœ€åæ›´æ–°äº 2022-03-16 21:30:00</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-article");renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%98%AF%E4%B8%AA%E5%95%A5%E5%95%8A/><div class=article-image><img src=/p/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%98%AF%E4%B8%AA%E5%95%A5%E5%95%8A/89247070.25019dcfed876cce0656594057545888.webp width=1440 height=858 loading=lazy alt="Featured image of post äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸ªå•¥å•Š" data-hash="md5-JQGdz+2HbM4GVllAV1RYiA=="></div><div class=article-details><h2 class=article-title>äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸ªå•¥å•Š</h2></div></a></article><article class=has-image><a href=/p/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E5%92%8C%E4%BD%8D%E8%BF%90%E7%AE%97/><div class=article-image><img src=/p/%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E5%92%8C%E4%BD%8D%E8%BF%90%E7%AE%97/95490521.beb8a2f0b8476c1ef386cab0457a58c8.webp width=1303 height=921 loading=lazy alt="Featured image of post è¿›åˆ¶è½¬æ¢å’Œä½è¿ç®—" data-hash="md5-vrii8LhHbB7zhsqwRXpYyA=="></div><div class=article-details><h2 class=article-title>è¿›åˆ¶è½¬æ¢å’Œä½è¿ç®—</h2></div></a></article></div></div></aside><link href=//unpkg.com/@waline/client@v3/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script type=module>
    import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

    setTimeout(function () {
        
        init({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://unpkg.com/@waline/emojis@1.2.0/weibo"],"lang":"zh-CN","locale":{"admin":"Admin","placeholder":null},"requiredMeta":["name","email","url"],"serverURL":"https://waline.lbqaq.top/"});
    }, 300);


</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 luoboQAQ</section><section class=powerby><a href=https://beian.miit.gov.cn>è‹ICPå¤‡2021037116å·</a><br>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.31.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://npm.elemecdn.com/node-vibrant@latest/dist/vibrant.min.js crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e);const t=document.createElement("link");t.href="https://cdn.jsdelivr.net/npm/@callmebill/lxgw-wenkai-web@latest/style.css",t.type="text/css",t.rel="stylesheet",document.head.appendChild(t)})()</script></body></html>